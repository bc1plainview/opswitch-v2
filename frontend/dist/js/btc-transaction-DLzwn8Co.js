function R6(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function sp(t,...e){if(!R6(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Km(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function $6(t,e){sp(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function Qh(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function wf(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function wn(t,e){return t<<32-e|t>>>e}function C6(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function uE(t){return typeof t=="string"&&(t=C6(t)),sp(t),t}let N6=class{};function H6(t){const e=n=>t().update(uE(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function D6(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),l=n?4:0,f=n?0:4;t.setUint32(e+l,s,n),t.setUint32(e+f,a,n)}function z6(t,e,r){return t&e^~t&r}function M6(t,e,r){return t&e^t&r^e&r}let F6=class extends N6{constructor(e,r,n,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(e),this.view=wf(this.buffer)}update(e){Km(this),e=uE(e),sp(e);const{view:r,buffer:n,blockLen:i}=this,o=e.length;for(let s=0;s<o;){const a=Math.min(i-this.pos,o-s);if(a===i){const l=wf(e);for(;i<=o-s;s+=i)this.process(l,s);continue}n.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Km(this),$6(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:o}=this;let{pos:s}=this;r[s++]=128,Qh(this.buffer.subarray(s)),this.padOffset>i-s&&(this.process(n,0),s=0);for(let p=s;p<i;p++)r[p]=0;D6(n,i-8,BigInt(this.length*8),o),this.process(n,0);const a=wf(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=l/4,u=this.get();if(f>u.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<f;p++)a.setUint32(4*p,u[p],o)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return e.destroyed=s,e.finished=o,e.length=i,e.pos=a,i%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}};const pi=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),K6=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),gi=new Uint32Array(64);let j6=class extends F6{constructor(e=32){super(64,e,8,!1),this.A=pi[0]|0,this.B=pi[1]|0,this.C=pi[2]|0,this.D=pi[3]|0,this.E=pi[4]|0,this.F=pi[5]|0,this.G=pi[6]|0,this.H=pi[7]|0}get(){const{A:e,B:r,C:n,D:i,E:o,F:s,G:a,H:l}=this;return[e,r,n,i,o,s,a,l]}set(e,r,n,i,o,s,a,l){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=l|0}process(e,r){for(let p=0;p<16;p++,r+=4)gi[p]=e.getUint32(r,!1);for(let p=16;p<64;p++){const y=gi[p-15],w=gi[p-2],A=wn(y,7)^wn(y,18)^y>>>3,S=wn(w,17)^wn(w,19)^w>>>10;gi[p]=S+gi[p-7]+A+gi[p-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:l,G:f,H:u}=this;for(let p=0;p<64;p++){const y=wn(a,6)^wn(a,11)^wn(a,25),w=u+y+z6(a,l,f)+K6[p]+gi[p]|0,A=(wn(n,2)^wn(n,13)^wn(n,22))+M6(n,i,o)|0;u=f,f=l,l=a,a=s+w|0,s=o,o=i,i=n,n=w+A|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,l=l+this.F|0,f=f+this.G|0,u=u+this.H|0,this.set(n,i,o,s,a,l,f,u)}roundClean(){Qh(gi)}destroy(){this.set(0,0,0,0,0,0,0,0),Qh(this.buffer)}};const V6=H6(()=>new j6),jm=V6;function cE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function no(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function n(){var i=!1;try{i=this instanceof n}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}function Il(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function hi(t,e=""){if(!Number.isSafeInteger(t)||t<0){const r=e&&`"${e}" `;throw new Error(`${r}expected integer >= 0, got ${t}`)}}function rt(t,e,r=""){const n=Il(t),i=t?.length,o=e!==void 0;if(!n||o&&i!==e){const s=r&&`"${r}" `,a=o?` of length ${e}`:"",l=n?`length=${i}`:`type=${typeof t}`;throw new Error(s+"expected Uint8Array"+a+", got "+l)}return t}function lE(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash must wrapped by utils.createHasher");hi(t.outputLen),hi(t.blockLen)}function ks(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function fE(t,e){rt(t,void 0,"digestInto() output");const r=e.outputLen;if(t.length<r)throw new Error('"digestInto() output" expected to be of length >='+r)}function W6(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Or(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function vf(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function vn(t,e){return t<<32-e|t>>>e}function qi(t,e){return t<<e|t>>>32-e>>>0}const q6=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function G6(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function X6(t){for(let e=0;e<t.length;e++)t[e]=G6(t[e]);return t}const Vm=q6?t=>t:X6,hE=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Y6=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function _l(t){if(rt(t),hE)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=Y6[t[r]];return e}const Gn={_0:48,_9:57,A:65,F:70,a:97,f:102};function Wm(t){if(t>=Gn._0&&t<=Gn._9)return t-Gn._0;if(t>=Gn.A&&t<=Gn.F)return t-(Gn.A-10);if(t>=Gn.a&&t<=Gn.f)return t-(Gn.a-10)}function Ic(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(hE)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){const s=Wm(t.charCodeAt(o)),a=Wm(t.charCodeAt(o+1));if(s===void 0||a===void 0){const l=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+o)}n[i]=s*16+a}return n}function rn(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];rt(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const o=t[n];r.set(o,i),i+=o.length}return r}function Vn(t,e={}){const r=(i,o)=>t(o).update(i).digest(),n=t(void 0);return r.outputLen=n.outputLen,r.blockLen=n.blockLen,r.create=i=>t(i),Object.assign(r,e),Object.freeze(r)}function ds(t=32){const e=typeof globalThis=="object"?globalThis.crypto:null;if(typeof e?.getRandomValues!="function")throw new Error("crypto.getRandomValues must be defined");return e.getRandomValues(new Uint8Array(t))}const io=t=>({oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,t])});let ap=class{oHash;iHash;blockLen;outputLen;finished=!1;destroyed=!1;constructor(e,r){if(lE(e),rt(r,void 0,"key"),this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Or(i)}update(e){return ks(this),this.iHash.update(e),this}digestInto(e){ks(this),rt(e,this.outputLen,"output"),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||=Object.create(Object.getPrototypeOf(this),{});const{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=o,e.blockLen=s,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const up=(t,e,r)=>new ap(t,e).update(r).digest();up.create=(t,e)=>new ap(t,e);const Z6=Object.freeze(Object.defineProperty({__proto__:null,_HMAC:ap,hmac:up},Symbol.toStringTag,{value:"Module"})),Q6=no(Z6);function _c(t,e,r){return t&e^~t&r}function dE(t,e,r){return t&e^t&r^e&r}let Za=class{blockLen;outputLen;padOffset;isLE;buffer;view;finished=!1;length=0;pos=0;destroyed=!1;constructor(e,r,n,i){this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(e),this.view=vf(this.buffer)}update(e){ks(this),rt(e);const{view:r,buffer:n,blockLen:i}=this,o=e.length;for(let s=0;s<o;){const a=Math.min(i-this.pos,o-s);if(a===i){const l=vf(e);for(;i<=o-s;s+=i)this.process(l,s);continue}n.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ks(this),fE(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:o}=this;let{pos:s}=this;r[s++]=128,Or(this.buffer.subarray(s)),this.padOffset>i-s&&(this.process(n,0),s=0);for(let p=s;p<i;p++)r[p]=0;n.setBigUint64(i-8,BigInt(this.length*8),o),this.process(n,0);const a=vf(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen must be aligned to 32bit");const f=l/4,u=this.get();if(f>u.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<f;p++)a.setUint32(4*p,u[p],o)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||=new this.constructor,e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return e.destroyed=s,e.finished=o,e.length=i,e.pos=a,i%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}};const yi=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),mi=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),nr=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),ir=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),is=Uint32Array.from([1732584193,4023233417,2562383102,271733878,3285377520]),bi=new Uint32Array(80);let pE=class extends Za{A=is[0]|0;B=is[1]|0;C=is[2]|0;D=is[3]|0;E=is[4]|0;constructor(){super(64,20,8,!1)}get(){const{A:e,B:r,C:n,D:i,E:o}=this;return[e,r,n,i,o]}set(e,r,n,i,o){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0}process(e,r){for(let l=0;l<16;l++,r+=4)bi[l]=e.getUint32(r,!1);for(let l=16;l<80;l++)bi[l]=qi(bi[l-3]^bi[l-8]^bi[l-14]^bi[l-16],1);let{A:n,B:i,C:o,D:s,E:a}=this;for(let l=0;l<80;l++){let f,u;l<20?(f=_c(i,o,s),u=1518500249):l<40?(f=i^o^s,u=1859775393):l<60?(f=dE(i,o,s),u=2400959708):(f=i^o^s,u=3395469782);const p=qi(n,5)+f+a+u+bi[l]|0;a=s,s=o,o=qi(i,30),i=n,n=p}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,this.set(n,i,o,s,a)}roundClean(){Or(bi)}destroy(){this.set(0,0,0,0,0),Or(this.buffer)}};const J6=Vn(()=>new pE),eA=Math.pow(2,32),tA=Array.from({length:64},(t,e)=>Math.floor(eA*Math.abs(Math.sin(e+1)))),Iu=is.slice(0,4),Ef=new Uint32Array(16);let gE=class extends Za{A=Iu[0]|0;B=Iu[1]|0;C=Iu[2]|0;D=Iu[3]|0;constructor(){super(64,16,8,!0)}get(){const{A:e,B:r,C:n,D:i}=this;return[e,r,n,i]}set(e,r,n,i){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0}process(e,r){for(let a=0;a<16;a++,r+=4)Ef[a]=e.getUint32(r,!0);let{A:n,B:i,C:o,D:s}=this;for(let a=0;a<64;a++){let l,f,u;a<16?(l=_c(i,o,s),f=a,u=[7,12,17,22]):a<32?(l=_c(s,i,o),f=(5*a+1)%16,u=[5,9,14,20]):a<48?(l=i^o^s,f=(3*a+5)%16,u=[4,11,16,23]):(l=o^(i|~s),f=7*a%16,u=[6,10,15,21]),l=l+n+tA[a]+Ef[f],n=s,s=o,o=i,i=i+qi(l,u[a%4])}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,this.set(n,i,o,s)}roundClean(){Or(Ef)}destroy(){this.set(0,0,0,0),Or(this.buffer)}};const rA=Vn(()=>new gE),nA=Uint8Array.from([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),yE=Uint8Array.from(new Array(16).fill(0).map((t,e)=>e)),iA=yE.map(t=>(9*t+5)%16),mE=(()=>{const t=[[yE],[iA]];for(let e=0;e<4;e++)for(let r of t)r.push(r[e].map(n=>nA[n]));return t})(),bE=mE[0],wE=mE[1],vE=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>Uint8Array.from(t)),oA=bE.map((t,e)=>t.map(r=>vE[e][r])),sA=wE.map((t,e)=>t.map(r=>vE[e][r])),aA=Uint32Array.from([0,1518500249,1859775393,2400959708,2840853838]),uA=Uint32Array.from([1352829926,1548603684,1836072691,2053994217,0]);function qm(t,e,r,n){return t===0?e^r^n:t===1?e&r|~e&n:t===2?(e|~r)^n:t===3?e&n|r&~n:e^(r|~n)}const _u=new Uint32Array(16);let EE=class extends Za{h0=1732584193;h1=-271733879;h2=-1732584194;h3=271733878;h4=-1009589776;constructor(){super(64,20,8,!0)}get(){const{h0:e,h1:r,h2:n,h3:i,h4:o}=this;return[e,r,n,i,o]}set(e,r,n,i,o){this.h0=e|0,this.h1=r|0,this.h2=n|0,this.h3=i|0,this.h4=o|0}process(e,r){for(let w=0;w<16;w++,r+=4)_u[w]=e.getUint32(r,!0);let n=this.h0|0,i=n,o=this.h1|0,s=o,a=this.h2|0,l=a,f=this.h3|0,u=f,p=this.h4|0,y=p;for(let w=0;w<5;w++){const A=4-w,S=aA[w],k=uA[w],I=bE[w],N=wE[w],B=oA[w],V=sA[w];for(let W=0;W<16;W++){const Y=qi(n+qm(w,o,a,f)+_u[I[W]]+S,B[W])+p|0;n=p,p=f,f=qi(a,10)|0,a=o,o=Y}for(let W=0;W<16;W++){const Y=qi(i+qm(A,s,l,u)+_u[N[W]]+k,V[W])+y|0;i=y,y=u,u=qi(l,10)|0,l=s,s=Y}}this.set(this.h1+a+u|0,this.h2+f+y|0,this.h3+p+i|0,this.h4+n+s|0,this.h0+o+l|0)}roundClean(){Or(_u)}destroy(){this.destroyed=!0,Or(this.buffer),this.set(0,0,0,0,0)}};const cA=Vn(()=>new EE),lA=Object.freeze(Object.defineProperty({__proto__:null,_MD5:gE,_RIPEMD160:EE,_SHA1:pE,md5:rA,ripemd160:cA,sha1:J6},Symbol.toStringTag,{value:"Module"})),fA=no(lA),xu=BigInt(2**32-1),Gm=BigInt(32);function hA(t,e=!1){return e?{h:Number(t&xu),l:Number(t>>Gm&xu)}:{h:Number(t>>Gm&xu)|0,l:Number(t&xu)|0}}function SE(t,e=!1){const r=t.length;let n=new Uint32Array(r),i=new Uint32Array(r);for(let o=0;o<r;o++){const{h:s,l:a}=hA(t[o],e);[n[o],i[o]]=[s,a]}return[n,i]}const Xm=(t,e,r)=>t>>>r,Ym=(t,e,r)=>t<<32-r|e>>>r,qo=(t,e,r)=>t>>>r|e<<32-r,Go=(t,e,r)=>t<<32-r|e>>>r,Tu=(t,e,r)=>t<<64-r|e>>>r-32,Bu=(t,e,r)=>t>>>r-32|e<<64-r,dA=(t,e,r)=>t<<r|e>>>32-r,pA=(t,e,r)=>e<<r|t>>>32-r,gA=(t,e,r)=>e<<r-32|t>>>64-r,yA=(t,e,r)=>t<<r-32|e>>>64-r;function Xn(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}const mA=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),bA=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,wA=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),vA=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,EA=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),SA=(t,e,r,n,i,o)=>e+r+n+i+o+(t/2**32|0)|0,AA=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),wi=new Uint32Array(64);let AE=class extends Za{constructor(e){super(64,e,8,!1)}get(){const{A:e,B:r,C:n,D:i,E:o,F:s,G:a,H:l}=this;return[e,r,n,i,o,s,a,l]}set(e,r,n,i,o,s,a,l){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=l|0}process(e,r){for(let p=0;p<16;p++,r+=4)wi[p]=e.getUint32(r,!1);for(let p=16;p<64;p++){const y=wi[p-15],w=wi[p-2],A=vn(y,7)^vn(y,18)^y>>>3,S=vn(w,17)^vn(w,19)^w>>>10;wi[p]=S+wi[p-7]+A+wi[p-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:l,G:f,H:u}=this;for(let p=0;p<64;p++){const y=vn(a,6)^vn(a,11)^vn(a,25),w=u+y+_c(a,l,f)+AA[p]+wi[p]|0,A=(vn(n,2)^vn(n,13)^vn(n,22))+dE(n,i,o)|0;u=f,f=l,l=a,a=s+w|0,s=o,o=i,i=n,n=w+A|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,l=l+this.F|0,f=f+this.G|0,u=u+this.H|0,this.set(n,i,o,s,a,l,f,u)}roundClean(){Or(wi)}destroy(){this.set(0,0,0,0,0,0,0,0),Or(this.buffer)}},kE=class extends AE{A=yi[0]|0;B=yi[1]|0;C=yi[2]|0;D=yi[3]|0;E=yi[4]|0;F=yi[5]|0;G=yi[6]|0;H=yi[7]|0;constructor(){super(32)}};class IE extends AE{A=mi[0]|0;B=mi[1]|0;C=mi[2]|0;D=mi[3]|0;E=mi[4]|0;F=mi[5]|0;G=mi[6]|0;H=mi[7]|0;constructor(){super(28)}}const _E=SE(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),kA=_E[0],IA=_E[1],vi=new Uint32Array(80),Ei=new Uint32Array(80);let xl=class extends Za{constructor(e){super(128,e,16,!1)}get(){const{Ah:e,Al:r,Bh:n,Bl:i,Ch:o,Cl:s,Dh:a,Dl:l,Eh:f,El:u,Fh:p,Fl:y,Gh:w,Gl:A,Hh:S,Hl:k}=this;return[e,r,n,i,o,s,a,l,f,u,p,y,w,A,S,k]}set(e,r,n,i,o,s,a,l,f,u,p,y,w,A,S,k){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=a|0,this.Dl=l|0,this.Eh=f|0,this.El=u|0,this.Fh=p|0,this.Fl=y|0,this.Gh=w|0,this.Gl=A|0,this.Hh=S|0,this.Hl=k|0}process(e,r){for(let B=0;B<16;B++,r+=4)vi[B]=e.getUint32(r),Ei[B]=e.getUint32(r+=4);for(let B=16;B<80;B++){const V=vi[B-15]|0,W=Ei[B-15]|0,Y=qo(V,W,1)^qo(V,W,8)^Xm(V,W,7),H=Go(V,W,1)^Go(V,W,8)^Ym(V,W,7),ie=vi[B-2]|0,T=Ei[B-2]|0,C=qo(ie,T,19)^Tu(ie,T,61)^Xm(ie,T,6),G=Go(ie,T,19)^Bu(ie,T,61)^Ym(ie,T,6),U=wA(H,G,Ei[B-7],Ei[B-16]),P=vA(U,Y,C,vi[B-7],vi[B-16]);vi[B]=P|0,Ei[B]=U|0}let{Ah:n,Al:i,Bh:o,Bl:s,Ch:a,Cl:l,Dh:f,Dl:u,Eh:p,El:y,Fh:w,Fl:A,Gh:S,Gl:k,Hh:I,Hl:N}=this;for(let B=0;B<80;B++){const V=qo(p,y,14)^qo(p,y,18)^Tu(p,y,41),W=Go(p,y,14)^Go(p,y,18)^Bu(p,y,41),Y=p&w^~p&S,H=y&A^~y&k,ie=EA(N,W,H,IA[B],Ei[B]),T=SA(ie,I,V,Y,kA[B],vi[B]),C=ie|0,G=qo(n,i,28)^Tu(n,i,34)^Tu(n,i,39),U=Go(n,i,28)^Bu(n,i,34)^Bu(n,i,39),P=n&o^n&a^o&a,L=i&s^i&l^s&l;I=S|0,N=k|0,S=w|0,k=A|0,w=p|0,A=y|0,{h:p,l:y}=Xn(f|0,u|0,T|0,C|0),f=a|0,u=l|0,a=o|0,l=s|0,o=n|0,s=i|0;const R=mA(C,U,L);n=bA(R,T,G,P),i=R|0}({h:n,l:i}=Xn(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:s}=Xn(this.Bh|0,this.Bl|0,o|0,s|0),{h:a,l}=Xn(this.Ch|0,this.Cl|0,a|0,l|0),{h:f,l:u}=Xn(this.Dh|0,this.Dl|0,f|0,u|0),{h:p,l:y}=Xn(this.Eh|0,this.El|0,p|0,y|0),{h:w,l:A}=Xn(this.Fh|0,this.Fl|0,w|0,A|0),{h:S,l:k}=Xn(this.Gh|0,this.Gl|0,S|0,k|0),{h:I,l:N}=Xn(this.Hh|0,this.Hl|0,I|0,N|0),this.set(n,i,o,s,a,l,f,u,p,y,w,A,S,k,I,N)}roundClean(){Or(vi,Ei)}destroy(){Or(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},xE=class extends xl{Ah=ir[0]|0;Al=ir[1]|0;Bh=ir[2]|0;Bl=ir[3]|0;Ch=ir[4]|0;Cl=ir[5]|0;Dh=ir[6]|0;Dl=ir[7]|0;Eh=ir[8]|0;El=ir[9]|0;Fh=ir[10]|0;Fl=ir[11]|0;Gh=ir[12]|0;Gl=ir[13]|0;Hh=ir[14]|0;Hl=ir[15]|0;constructor(){super(64)}},TE=class extends xl{Ah=nr[0]|0;Al=nr[1]|0;Bh=nr[2]|0;Bl=nr[3]|0;Ch=nr[4]|0;Cl=nr[5]|0;Dh=nr[6]|0;Dl=nr[7]|0;Eh=nr[8]|0;El=nr[9]|0;Fh=nr[10]|0;Fl=nr[11]|0;Gh=nr[12]|0;Gl=nr[13]|0;Hh=nr[14]|0;Hl=nr[15]|0;constructor(){super(48)}};const or=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),sr=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);let BE=class extends xl{Ah=or[0]|0;Al=or[1]|0;Bh=or[2]|0;Bl=or[3]|0;Ch=or[4]|0;Cl=or[5]|0;Dh=or[6]|0;Dl=or[7]|0;Eh=or[8]|0;El=or[9]|0;Fh=or[10]|0;Fl=or[11]|0;Gh=or[12]|0;Gl=or[13]|0;Hh=or[14]|0;Hl=or[15]|0;constructor(){super(28)}},PE=class extends xl{Ah=sr[0]|0;Al=sr[1]|0;Bh=sr[2]|0;Bl=sr[3]|0;Ch=sr[4]|0;Cl=sr[5]|0;Dh=sr[6]|0;Dl=sr[7]|0;Eh=sr[8]|0;El=sr[9]|0;Fh=sr[10]|0;Fl=sr[11]|0;Gh=sr[12]|0;Gl=sr[13]|0;Hh=sr[14]|0;Hl=sr[15]|0;constructor(){super(32)}};const Ns=Vn(()=>new kE,io(1)),_A=Vn(()=>new IE,io(4)),OE=Vn(()=>new xE,io(3)),xA=Vn(()=>new TE,io(2)),TA=Vn(()=>new PE,io(6)),BA=Vn(()=>new BE,io(5)),PA=Object.freeze(Object.defineProperty({__proto__:null,_SHA224:IE,_SHA256:kE,_SHA384:TE,_SHA512:xE,_SHA512_224:BE,_SHA512_256:PE,sha224:_A,sha256:Ns,sha384:xA,sha512:OE,sha512_224:BA,sha512_256:TA},Symbol.toStringTag,{value:"Module"})),cp=no(PA);var un={},vt={},ar={},Zm={},Pu={},Qm;function OA(){return Qm||(Qm=1,Object.defineProperty(Pu,"__esModule",{value:!0}),Pu.crypto=void 0,Pu.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),Pu}var Jm;function UE(){return Jm||(Jm=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.Hash=t.nextTick=t.swap32IfBE=t.byteSwapIfBE=t.swap8IfBE=t.isLE=void 0,t.isBytes=r,t.anumber=n,t.abytes=i,t.ahash=o,t.aexists=s,t.aoutput=a,t.u8=l,t.u32=f,t.clean=u,t.createView=p,t.rotr=y,t.rotl=w,t.byteSwap=A,t.byteSwap32=S,t.bytesToHex=N,t.hexToBytes=W,t.asyncLoop=H,t.utf8ToBytes=ie,t.bytesToUtf8=T,t.toBytes=C,t.kdfInputToBytes=G,t.concatBytes=U,t.checkOpts=P,t.createHasher=R,t.createOptHasher=z,t.createXOFer=X,t.randomBytes=ee;const e=OA();function r(_){return _ instanceof Uint8Array||ArrayBuffer.isView(_)&&_.constructor.name==="Uint8Array"}function n(_){if(!Number.isSafeInteger(_)||_<0)throw new Error("positive integer expected, got "+_)}function i(_,...K){if(!r(_))throw new Error("Uint8Array expected");if(K.length>0&&!K.includes(_.length))throw new Error("Uint8Array expected of length "+K+", got length="+_.length)}function o(_){if(typeof _!="function"||typeof _.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");n(_.outputLen),n(_.blockLen)}function s(_,K=!0){if(_.destroyed)throw new Error("Hash instance has been destroyed");if(K&&_.finished)throw new Error("Hash#digest() has already been called")}function a(_,K){i(_);const Z=K.outputLen;if(_.length<Z)throw new Error("digestInto() expects output buffer of length at least "+Z)}function l(_){return new Uint8Array(_.buffer,_.byteOffset,_.byteLength)}function f(_){return new Uint32Array(_.buffer,_.byteOffset,Math.floor(_.byteLength/4))}function u(..._){for(let K=0;K<_.length;K++)_[K].fill(0)}function p(_){return new DataView(_.buffer,_.byteOffset,_.byteLength)}function y(_,K){return _<<32-K|_>>>K}function w(_,K){return _<<K|_>>>32-K>>>0}t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function A(_){return _<<24&4278190080|_<<8&16711680|_>>>8&65280|_>>>24&255}t.swap8IfBE=t.isLE?_=>_:_=>A(_),t.byteSwapIfBE=t.swap8IfBE;function S(_){for(let K=0;K<_.length;K++)_[K]=A(_[K]);return _}t.swap32IfBE=t.isLE?_=>_:S;const k=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",I=Array.from({length:256},(_,K)=>K.toString(16).padStart(2,"0"));function N(_){if(i(_),k)return _.toHex();let K="";for(let Z=0;Z<_.length;Z++)K+=I[_[Z]];return K}const B={_0:48,_9:57,A:65,F:70,a:97,f:102};function V(_){if(_>=B._0&&_<=B._9)return _-B._0;if(_>=B.A&&_<=B.F)return _-(B.A-10);if(_>=B.a&&_<=B.f)return _-(B.a-10)}function W(_){if(typeof _!="string")throw new Error("hex string expected, got "+typeof _);if(k)return Uint8Array.fromHex(_);const K=_.length,Z=K/2;if(K%2)throw new Error("hex string expected, got unpadded hex of length "+K);const D=new Uint8Array(Z);for(let J=0,j=0;J<Z;J++,j+=2){const te=V(_.charCodeAt(j)),ae=V(_.charCodeAt(j+1));if(te===void 0||ae===void 0){const ce=_[j]+_[j+1];throw new Error('hex string expected, got non-hex character "'+ce+'" at index '+j)}D[J]=te*16+ae}return D}const Y=async()=>{};t.nextTick=Y;async function H(_,K,Z){let D=Date.now();for(let J=0;J<_;J++){Z(J);const j=Date.now()-D;j>=0&&j<K||(await(0,t.nextTick)(),D+=j)}}function ie(_){if(typeof _!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(_))}function T(_){return new TextDecoder().decode(_)}function C(_){return typeof _=="string"&&(_=ie(_)),i(_),_}function G(_){return typeof _=="string"&&(_=ie(_)),i(_),_}function U(..._){let K=0;for(let D=0;D<_.length;D++){const J=_[D];i(J),K+=J.length}const Z=new Uint8Array(K);for(let D=0,J=0;D<_.length;D++){const j=_[D];Z.set(j,J),J+=j.length}return Z}function P(_,K){if(K!==void 0&&{}.toString.call(K)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(_,K)}class L{}t.Hash=L;function R(_){const K=D=>_().update(C(D)).digest(),Z=_();return K.outputLen=Z.outputLen,K.blockLen=Z.blockLen,K.create=()=>_(),K}function z(_){const K=(D,J)=>_(J).update(C(D)).digest(),Z=_({});return K.outputLen=Z.outputLen,K.blockLen=Z.blockLen,K.create=D=>_(D),K}function X(_){const K=(D,J)=>_(J).update(C(D)).digest(),Z=_({});return K.outputLen=Z.outputLen,K.blockLen=Z.blockLen,K.create=D=>_(D),K}t.wrapConstructor=R,t.wrapConstructorWithOpts=z,t.wrapXOFConstructorWithOpts=X;function ee(_=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(_));if(e.crypto&&typeof e.crypto.randomBytes=="function")return Uint8Array.from(e.crypto.randomBytes(_));throw new Error("crypto.getRandomValues must be defined")}})(Zm)),Zm}var eb;function UA(){if(eb)return ar;eb=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.SHA512_IV=ar.SHA384_IV=ar.SHA224_IV=ar.SHA256_IV=ar.HashMD=void 0,ar.setBigUint64=e,ar.Chi=r,ar.Maj=n;const t=UE();function e(o,s,a,l){if(typeof o.setBigUint64=="function")return o.setBigUint64(s,a,l);const f=BigInt(32),u=BigInt(4294967295),p=Number(a>>f&u),y=Number(a&u),w=l?4:0,A=l?0:4;o.setUint32(s+w,p,l),o.setUint32(s+A,y,l)}function r(o,s,a){return o&s^~o&a}function n(o,s,a){return o&s^o&a^s&a}class i extends t.Hash{constructor(s,a,l,f){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=s,this.outputLen=a,this.padOffset=l,this.isLE=f,this.buffer=new Uint8Array(s),this.view=(0,t.createView)(this.buffer)}update(s){(0,t.aexists)(this),s=(0,t.toBytes)(s),(0,t.abytes)(s);const{view:a,buffer:l,blockLen:f}=this,u=s.length;for(let p=0;p<u;){const y=Math.min(f-this.pos,u-p);if(y===f){const w=(0,t.createView)(s);for(;f<=u-p;p+=f)this.process(w,p);continue}l.set(s.subarray(p,p+y),this.pos),this.pos+=y,p+=y,this.pos===f&&(this.process(a,0),this.pos=0)}return this.length+=s.length,this.roundClean(),this}digestInto(s){(0,t.aexists)(this),(0,t.aoutput)(s,this),this.finished=!0;const{buffer:a,view:l,blockLen:f,isLE:u}=this;let{pos:p}=this;a[p++]=128,(0,t.clean)(this.buffer.subarray(p)),this.padOffset>f-p&&(this.process(l,0),p=0);for(let k=p;k<f;k++)a[k]=0;e(l,f-8,BigInt(this.length*8),u),this.process(l,0);const y=(0,t.createView)(s),w=this.outputLen;if(w%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const A=w/4,S=this.get();if(A>S.length)throw new Error("_sha2: outputLen bigger than state");for(let k=0;k<A;k++)y.setUint32(4*k,S[k],u)}digest(){const{buffer:s,outputLen:a}=this;this.digestInto(s);const l=s.slice(0,a);return this.destroy(),l}_cloneInto(s){s||(s=new this.constructor),s.set(...this.get());const{blockLen:a,buffer:l,length:f,finished:u,destroyed:p,pos:y}=this;return s.destroyed=p,s.finished=u,s.length=f,s.pos=y,f%a&&s.buffer.set(l),s}clone(){return this._cloneInto()}}return ar.HashMD=i,ar.SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ar.SHA224_IV=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),ar.SHA384_IV=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),ar.SHA512_IV=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),ar}var je={},tb;function LA(){if(tb)return je;tb=1,Object.defineProperty(je,"__esModule",{value:!0}),je.toBig=je.shrSL=je.shrSH=je.rotrSL=je.rotrSH=je.rotrBL=je.rotrBH=je.rotr32L=je.rotr32H=je.rotlSL=je.rotlSH=je.rotlBL=je.rotlBH=je.add5L=je.add5H=je.add4L=je.add4H=je.add3L=je.add3H=void 0,je.add=I,je.fromBig=r,je.split=n;const t=BigInt(2**32-1),e=BigInt(32);function r(T,C=!1){return C?{h:Number(T&t),l:Number(T>>e&t)}:{h:Number(T>>e&t)|0,l:Number(T&t)|0}}function n(T,C=!1){const G=T.length;let U=new Uint32Array(G),P=new Uint32Array(G);for(let L=0;L<G;L++){const{h:R,l:z}=r(T[L],C);[U[L],P[L]]=[R,z]}return[U,P]}const i=(T,C)=>BigInt(T>>>0)<<e|BigInt(C>>>0);je.toBig=i;const o=(T,C,G)=>T>>>G;je.shrSH=o;const s=(T,C,G)=>T<<32-G|C>>>G;je.shrSL=s;const a=(T,C,G)=>T>>>G|C<<32-G;je.rotrSH=a;const l=(T,C,G)=>T<<32-G|C>>>G;je.rotrSL=l;const f=(T,C,G)=>T<<64-G|C>>>G-32;je.rotrBH=f;const u=(T,C,G)=>T>>>G-32|C<<64-G;je.rotrBL=u;const p=(T,C)=>C;je.rotr32H=p;const y=(T,C)=>T;je.rotr32L=y;const w=(T,C,G)=>T<<G|C>>>32-G;je.rotlSH=w;const A=(T,C,G)=>C<<G|T>>>32-G;je.rotlSL=A;const S=(T,C,G)=>C<<G-32|T>>>64-G;je.rotlBH=S;const k=(T,C,G)=>T<<G-32|C>>>64-G;je.rotlBL=k;function I(T,C,G,U){const P=(C>>>0)+(U>>>0);return{h:T+G+(P/2**32|0)|0,l:P|0}}const N=(T,C,G)=>(T>>>0)+(C>>>0)+(G>>>0);je.add3L=N;const B=(T,C,G,U)=>C+G+U+(T/2**32|0)|0;je.add3H=B;const V=(T,C,G,U)=>(T>>>0)+(C>>>0)+(G>>>0)+(U>>>0);je.add4L=V;const W=(T,C,G,U,P)=>C+G+U+P+(T/2**32|0)|0;je.add4H=W;const Y=(T,C,G,U,P)=>(T>>>0)+(C>>>0)+(G>>>0)+(U>>>0)+(P>>>0);je.add5L=Y;const H=(T,C,G,U,P,L)=>C+G+U+P+L+(T/2**32|0)|0;je.add5H=H;const ie={fromBig:r,split:n,toBig:i,shrSH:o,shrSL:s,rotrSH:a,rotrSL:l,rotrBH:f,rotrBL:u,rotr32H:p,rotr32L:y,rotlSH:w,rotlSL:A,rotlBH:S,rotlBL:k,add:I,add3L:N,add3H:B,add4L:V,add4H:W,add5H:H,add5L:Y};return je.default=ie,je}var rb;function RA(){if(rb)return vt;rb=1,Object.defineProperty(vt,"__esModule",{value:!0}),vt.sha512_224=vt.sha512_256=vt.sha384=vt.sha512=vt.sha224=vt.sha256=vt.SHA512_256=vt.SHA512_224=vt.SHA384=vt.SHA512=vt.SHA224=vt.SHA256=void 0;const t=UA(),e=LA(),r=UE(),n=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),i=new Uint32Array(64);class o extends t.HashMD{constructor(B=32){super(64,B,8,!1),this.A=t.SHA256_IV[0]|0,this.B=t.SHA256_IV[1]|0,this.C=t.SHA256_IV[2]|0,this.D=t.SHA256_IV[3]|0,this.E=t.SHA256_IV[4]|0,this.F=t.SHA256_IV[5]|0,this.G=t.SHA256_IV[6]|0,this.H=t.SHA256_IV[7]|0}get(){const{A:B,B:V,C:W,D:Y,E:H,F:ie,G:T,H:C}=this;return[B,V,W,Y,H,ie,T,C]}set(B,V,W,Y,H,ie,T,C){this.A=B|0,this.B=V|0,this.C=W|0,this.D=Y|0,this.E=H|0,this.F=ie|0,this.G=T|0,this.H=C|0}process(B,V){for(let P=0;P<16;P++,V+=4)i[P]=B.getUint32(V,!1);for(let P=16;P<64;P++){const L=i[P-15],R=i[P-2],z=(0,r.rotr)(L,7)^(0,r.rotr)(L,18)^L>>>3,X=(0,r.rotr)(R,17)^(0,r.rotr)(R,19)^R>>>10;i[P]=X+i[P-7]+z+i[P-16]|0}let{A:W,B:Y,C:H,D:ie,E:T,F:C,G,H:U}=this;for(let P=0;P<64;P++){const L=(0,r.rotr)(T,6)^(0,r.rotr)(T,11)^(0,r.rotr)(T,25),R=U+L+(0,t.Chi)(T,C,G)+n[P]+i[P]|0,z=((0,r.rotr)(W,2)^(0,r.rotr)(W,13)^(0,r.rotr)(W,22))+(0,t.Maj)(W,Y,H)|0;U=G,G=C,C=T,T=ie+R|0,ie=H,H=Y,Y=W,W=R+z|0}W=W+this.A|0,Y=Y+this.B|0,H=H+this.C|0,ie=ie+this.D|0,T=T+this.E|0,C=C+this.F|0,G=G+this.G|0,U=U+this.H|0,this.set(W,Y,H,ie,T,C,G,U)}roundClean(){(0,r.clean)(i)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,r.clean)(this.buffer)}}vt.SHA256=o;class s extends o{constructor(){super(28),this.A=t.SHA224_IV[0]|0,this.B=t.SHA224_IV[1]|0,this.C=t.SHA224_IV[2]|0,this.D=t.SHA224_IV[3]|0,this.E=t.SHA224_IV[4]|0,this.F=t.SHA224_IV[5]|0,this.G=t.SHA224_IV[6]|0,this.H=t.SHA224_IV[7]|0}}vt.SHA224=s;const a=e.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(N=>BigInt(N))),l=a[0],f=a[1],u=new Uint32Array(80),p=new Uint32Array(80);class y extends t.HashMD{constructor(B=64){super(128,B,16,!1),this.Ah=t.SHA512_IV[0]|0,this.Al=t.SHA512_IV[1]|0,this.Bh=t.SHA512_IV[2]|0,this.Bl=t.SHA512_IV[3]|0,this.Ch=t.SHA512_IV[4]|0,this.Cl=t.SHA512_IV[5]|0,this.Dh=t.SHA512_IV[6]|0,this.Dl=t.SHA512_IV[7]|0,this.Eh=t.SHA512_IV[8]|0,this.El=t.SHA512_IV[9]|0,this.Fh=t.SHA512_IV[10]|0,this.Fl=t.SHA512_IV[11]|0,this.Gh=t.SHA512_IV[12]|0,this.Gl=t.SHA512_IV[13]|0,this.Hh=t.SHA512_IV[14]|0,this.Hl=t.SHA512_IV[15]|0}get(){const{Ah:B,Al:V,Bh:W,Bl:Y,Ch:H,Cl:ie,Dh:T,Dl:C,Eh:G,El:U,Fh:P,Fl:L,Gh:R,Gl:z,Hh:X,Hl:ee}=this;return[B,V,W,Y,H,ie,T,C,G,U,P,L,R,z,X,ee]}set(B,V,W,Y,H,ie,T,C,G,U,P,L,R,z,X,ee){this.Ah=B|0,this.Al=V|0,this.Bh=W|0,this.Bl=Y|0,this.Ch=H|0,this.Cl=ie|0,this.Dh=T|0,this.Dl=C|0,this.Eh=G|0,this.El=U|0,this.Fh=P|0,this.Fl=L|0,this.Gh=R|0,this.Gl=z|0,this.Hh=X|0,this.Hl=ee|0}process(B,V){for(let Z=0;Z<16;Z++,V+=4)u[Z]=B.getUint32(V),p[Z]=B.getUint32(V+=4);for(let Z=16;Z<80;Z++){const D=u[Z-15]|0,J=p[Z-15]|0,j=e.rotrSH(D,J,1)^e.rotrSH(D,J,8)^e.shrSH(D,J,7),te=e.rotrSL(D,J,1)^e.rotrSL(D,J,8)^e.shrSL(D,J,7),ae=u[Z-2]|0,ce=p[Z-2]|0,pe=e.rotrSH(ae,ce,19)^e.rotrBH(ae,ce,61)^e.shrSH(ae,ce,6),le=e.rotrSL(ae,ce,19)^e.rotrBL(ae,ce,61)^e.shrSL(ae,ce,6),ye=e.add4L(te,le,p[Z-7],p[Z-16]),Ae=e.add4H(ye,j,pe,u[Z-7],u[Z-16]);u[Z]=Ae|0,p[Z]=ye|0}let{Ah:W,Al:Y,Bh:H,Bl:ie,Ch:T,Cl:C,Dh:G,Dl:U,Eh:P,El:L,Fh:R,Fl:z,Gh:X,Gl:ee,Hh:_,Hl:K}=this;for(let Z=0;Z<80;Z++){const D=e.rotrSH(P,L,14)^e.rotrSH(P,L,18)^e.rotrBH(P,L,41),J=e.rotrSL(P,L,14)^e.rotrSL(P,L,18)^e.rotrBL(P,L,41),j=P&R^~P&X,te=L&z^~L&ee,ae=e.add5L(K,J,te,f[Z],p[Z]),ce=e.add5H(ae,_,D,j,l[Z],u[Z]),pe=ae|0,le=e.rotrSH(W,Y,28)^e.rotrBH(W,Y,34)^e.rotrBH(W,Y,39),ye=e.rotrSL(W,Y,28)^e.rotrBL(W,Y,34)^e.rotrBL(W,Y,39),Ae=W&H^W&T^H&T,xe=Y&ie^Y&C^ie&C;_=X|0,K=ee|0,X=R|0,ee=z|0,R=P|0,z=L|0,{h:P,l:L}=e.add(G|0,U|0,ce|0,pe|0),G=T|0,U=C|0,T=H|0,C=ie|0,H=W|0,ie=Y|0;const Be=e.add3L(pe,ye,xe);W=e.add3H(Be,ce,le,Ae),Y=Be|0}({h:W,l:Y}=e.add(this.Ah|0,this.Al|0,W|0,Y|0)),{h:H,l:ie}=e.add(this.Bh|0,this.Bl|0,H|0,ie|0),{h:T,l:C}=e.add(this.Ch|0,this.Cl|0,T|0,C|0),{h:G,l:U}=e.add(this.Dh|0,this.Dl|0,G|0,U|0),{h:P,l:L}=e.add(this.Eh|0,this.El|0,P|0,L|0),{h:R,l:z}=e.add(this.Fh|0,this.Fl|0,R|0,z|0),{h:X,l:ee}=e.add(this.Gh|0,this.Gl|0,X|0,ee|0),{h:_,l:K}=e.add(this.Hh|0,this.Hl|0,_|0,K|0),this.set(W,Y,H,ie,T,C,G,U,P,L,R,z,X,ee,_,K)}roundClean(){(0,r.clean)(u,p)}destroy(){(0,r.clean)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}vt.SHA512=y;class w extends y{constructor(){super(48),this.Ah=t.SHA384_IV[0]|0,this.Al=t.SHA384_IV[1]|0,this.Bh=t.SHA384_IV[2]|0,this.Bl=t.SHA384_IV[3]|0,this.Ch=t.SHA384_IV[4]|0,this.Cl=t.SHA384_IV[5]|0,this.Dh=t.SHA384_IV[6]|0,this.Dl=t.SHA384_IV[7]|0,this.Eh=t.SHA384_IV[8]|0,this.El=t.SHA384_IV[9]|0,this.Fh=t.SHA384_IV[10]|0,this.Fl=t.SHA384_IV[11]|0,this.Gh=t.SHA384_IV[12]|0,this.Gl=t.SHA384_IV[13]|0,this.Hh=t.SHA384_IV[14]|0,this.Hl=t.SHA384_IV[15]|0}}vt.SHA384=w;const A=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),S=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class k extends y{constructor(){super(28),this.Ah=A[0]|0,this.Al=A[1]|0,this.Bh=A[2]|0,this.Bl=A[3]|0,this.Ch=A[4]|0,this.Cl=A[5]|0,this.Dh=A[6]|0,this.Dl=A[7]|0,this.Eh=A[8]|0,this.El=A[9]|0,this.Fh=A[10]|0,this.Fl=A[11]|0,this.Gh=A[12]|0,this.Gl=A[13]|0,this.Hh=A[14]|0,this.Hl=A[15]|0}}vt.SHA512_224=k;class I extends y{constructor(){super(32),this.Ah=S[0]|0,this.Al=S[1]|0,this.Bh=S[2]|0,this.Bl=S[3]|0,this.Ch=S[4]|0,this.Cl=S[5]|0,this.Dh=S[6]|0,this.Dl=S[7]|0,this.Eh=S[8]|0,this.El=S[9]|0,this.Fh=S[10]|0,this.Fl=S[11]|0,this.Gh=S[12]|0,this.Gl=S[13]|0,this.Hh=S[14]|0,this.Hl=S[15]|0}}return vt.SHA512_256=I,vt.sha256=(0,r.createHasher)(()=>new o),vt.sha224=(0,r.createHasher)(()=>new s),vt.sha512=(0,r.createHasher)(()=>new y),vt.sha384=(0,r.createHasher)(()=>new w),vt.sha512_256=(0,r.createHasher)(()=>new I),vt.sha512_224=(0,r.createHasher)(()=>new k),vt}var nb;function $A(){if(nb)return un;nb=1,Object.defineProperty(un,"__esModule",{value:!0}),un.sha224=un.SHA224=un.sha256=un.SHA256=void 0;const t=RA();return un.SHA256=t.SHA256,un.sha256=t.sha256,un.SHA224=t.SHA224,un.sha224=t.sha224,un}const CA=BigInt(0),Xs=BigInt(1),NA=BigInt(2),HA=BigInt(7),DA=BigInt(256),zA=BigInt(113),LE=[],RE=[],$E=[];for(let t=0,e=Xs,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],LE.push(2*(5*n+r)),RE.push((t+1)*(t+2)/2%64);let i=CA;for(let o=0;o<7;o++)e=(e<<Xs^(e>>HA)*zA)%DA,e&NA&&(i^=Xs<<(Xs<<BigInt(o))-Xs);$E.push(i)}const CE=SE($E,!0),MA=CE[0],FA=CE[1],ib=(t,e,r)=>r>32?gA(t,e,r):dA(t,e,r),ob=(t,e,r)=>r>32?yA(t,e,r):pA(t,e,r);function KA(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let s=0;s<10;s++)r[s]=t[s]^t[s+10]^t[s+20]^t[s+30]^t[s+40];for(let s=0;s<10;s+=2){const a=(s+8)%10,l=(s+2)%10,f=r[l],u=r[l+1],p=ib(f,u,1)^r[a],y=ob(f,u,1)^r[a+1];for(let w=0;w<50;w+=10)t[s+w]^=p,t[s+w+1]^=y}let i=t[2],o=t[3];for(let s=0;s<24;s++){const a=RE[s],l=ib(i,o,a),f=ob(i,o,a),u=LE[s];i=t[u],o=t[u+1],t[u]=l,t[u+1]=f}for(let s=0;s<50;s+=10){for(let a=0;a<10;a++)r[a]=t[s+a];for(let a=0;a<10;a++)t[s+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=MA[n],t[1]^=FA[n]}Or(r)}let jA=class NE{state;pos=0;posOut=0;finished=!1;state32;destroyed=!1;blockLen;suffix;outputLen;enableXOF=!1;rounds;constructor(e,r,n,i=!1,o=24){if(this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=o,hi(n,"outputLen"),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=W6(this.state)}clone(){return this._cloneInto()}keccak(){Vm(this.state32),KA(this.state32,this.rounds),Vm(this.state32),this.posOut=0,this.pos=0}update(e){ks(this),rt(e);const{blockLen:r,state:n}=this,i=e.length;for(let o=0;o<i;){const s=Math.min(r-this.pos,i-o);for(let a=0;a<s;a++)n[this.pos++]^=e[o++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:i}=this;e[n]^=r,(r&128)!==0&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){ks(this,!1),rt(e),this.finish();const r=this.state,{blockLen:n}=this;for(let i=0,o=e.length;i<o;){this.posOut>=n&&this.keccak();const s=Math.min(n-this.posOut,o-i);e.set(r.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return hi(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(fE(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Or(this.state)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:i,rounds:o,enableXOF:s}=this;return e||=new NE(r,n,i,s,o),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=n,e.outputLen=i,e.enableXOF=s,e.destroyed=this.destroyed,e}};const HE=(t,e,r,n={})=>Vn((i={})=>new jA(e,t,i.dkLen===void 0?r:i.dkLen,!0),n),VA=HE(31,168,16,io(11)),Xr=HE(31,136,32,io(12));var cn={},Et={},ur={},sb={},Ou={},ab;function WA(){return ab||(ab=1,Object.defineProperty(Ou,"__esModule",{value:!0}),Ou.crypto=void 0,Ou.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),Ou}var ub;function Qa(){return ub||(ub=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.Hash=t.nextTick=t.swap32IfBE=t.byteSwapIfBE=t.swap8IfBE=t.isLE=void 0,t.isBytes=r,t.anumber=n,t.abytes=i,t.ahash=o,t.aexists=s,t.aoutput=a,t.u8=l,t.u32=f,t.clean=u,t.createView=p,t.rotr=y,t.rotl=w,t.byteSwap=A,t.byteSwap32=S,t.bytesToHex=N,t.hexToBytes=W,t.asyncLoop=H,t.utf8ToBytes=ie,t.bytesToUtf8=T,t.toBytes=C,t.kdfInputToBytes=G,t.concatBytes=U,t.checkOpts=P,t.createHasher=R,t.createOptHasher=z,t.createXOFer=X,t.randomBytes=ee;const e=WA();function r(_){return _ instanceof Uint8Array||ArrayBuffer.isView(_)&&_.constructor.name==="Uint8Array"}function n(_){if(!Number.isSafeInteger(_)||_<0)throw new Error("positive integer expected, got "+_)}function i(_,...K){if(!r(_))throw new Error("Uint8Array expected");if(K.length>0&&!K.includes(_.length))throw new Error("Uint8Array expected of length "+K+", got length="+_.length)}function o(_){if(typeof _!="function"||typeof _.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");n(_.outputLen),n(_.blockLen)}function s(_,K=!0){if(_.destroyed)throw new Error("Hash instance has been destroyed");if(K&&_.finished)throw new Error("Hash#digest() has already been called")}function a(_,K){i(_);const Z=K.outputLen;if(_.length<Z)throw new Error("digestInto() expects output buffer of length at least "+Z)}function l(_){return new Uint8Array(_.buffer,_.byteOffset,_.byteLength)}function f(_){return new Uint32Array(_.buffer,_.byteOffset,Math.floor(_.byteLength/4))}function u(..._){for(let K=0;K<_.length;K++)_[K].fill(0)}function p(_){return new DataView(_.buffer,_.byteOffset,_.byteLength)}function y(_,K){return _<<32-K|_>>>K}function w(_,K){return _<<K|_>>>32-K>>>0}t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function A(_){return _<<24&4278190080|_<<8&16711680|_>>>8&65280|_>>>24&255}t.swap8IfBE=t.isLE?_=>_:_=>A(_),t.byteSwapIfBE=t.swap8IfBE;function S(_){for(let K=0;K<_.length;K++)_[K]=A(_[K]);return _}t.swap32IfBE=t.isLE?_=>_:S;const k=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",I=Array.from({length:256},(_,K)=>K.toString(16).padStart(2,"0"));function N(_){if(i(_),k)return _.toHex();let K="";for(let Z=0;Z<_.length;Z++)K+=I[_[Z]];return K}const B={_0:48,_9:57,A:65,F:70,a:97,f:102};function V(_){if(_>=B._0&&_<=B._9)return _-B._0;if(_>=B.A&&_<=B.F)return _-(B.A-10);if(_>=B.a&&_<=B.f)return _-(B.a-10)}function W(_){if(typeof _!="string")throw new Error("hex string expected, got "+typeof _);if(k)return Uint8Array.fromHex(_);const K=_.length,Z=K/2;if(K%2)throw new Error("hex string expected, got unpadded hex of length "+K);const D=new Uint8Array(Z);for(let J=0,j=0;J<Z;J++,j+=2){const te=V(_.charCodeAt(j)),ae=V(_.charCodeAt(j+1));if(te===void 0||ae===void 0){const ce=_[j]+_[j+1];throw new Error('hex string expected, got non-hex character "'+ce+'" at index '+j)}D[J]=te*16+ae}return D}const Y=async()=>{};t.nextTick=Y;async function H(_,K,Z){let D=Date.now();for(let J=0;J<_;J++){Z(J);const j=Date.now()-D;j>=0&&j<K||(await(0,t.nextTick)(),D+=j)}}function ie(_){if(typeof _!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(_))}function T(_){return new TextDecoder().decode(_)}function C(_){return typeof _=="string"&&(_=ie(_)),i(_),_}function G(_){return typeof _=="string"&&(_=ie(_)),i(_),_}function U(..._){let K=0;for(let D=0;D<_.length;D++){const J=_[D];i(J),K+=J.length}const Z=new Uint8Array(K);for(let D=0,J=0;D<_.length;D++){const j=_[D];Z.set(j,J),J+=j.length}return Z}function P(_,K){if(K!==void 0&&{}.toString.call(K)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(_,K)}class L{}t.Hash=L;function R(_){const K=D=>_().update(C(D)).digest(),Z=_();return K.outputLen=Z.outputLen,K.blockLen=Z.blockLen,K.create=()=>_(),K}function z(_){const K=(D,J)=>_(J).update(C(D)).digest(),Z=_({});return K.outputLen=Z.outputLen,K.blockLen=Z.blockLen,K.create=D=>_(D),K}function X(_){const K=(D,J)=>_(J).update(C(D)).digest(),Z=_({});return K.outputLen=Z.outputLen,K.blockLen=Z.blockLen,K.create=D=>_(D),K}t.wrapConstructor=R,t.wrapConstructorWithOpts=z,t.wrapXOFConstructorWithOpts=X;function ee(_=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(_));if(e.crypto&&typeof e.crypto.randomBytes=="function")return Uint8Array.from(e.crypto.randomBytes(_));throw new Error("crypto.getRandomValues must be defined")}})(sb)),sb}var cb;function qA(){if(cb)return ur;cb=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.SHA512_IV=ur.SHA384_IV=ur.SHA224_IV=ur.SHA256_IV=ur.HashMD=void 0,ur.setBigUint64=e,ur.Chi=r,ur.Maj=n;const t=Qa();function e(o,s,a,l){if(typeof o.setBigUint64=="function")return o.setBigUint64(s,a,l);const f=BigInt(32),u=BigInt(4294967295),p=Number(a>>f&u),y=Number(a&u),w=l?4:0,A=l?0:4;o.setUint32(s+w,p,l),o.setUint32(s+A,y,l)}function r(o,s,a){return o&s^~o&a}function n(o,s,a){return o&s^o&a^s&a}class i extends t.Hash{constructor(s,a,l,f){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=s,this.outputLen=a,this.padOffset=l,this.isLE=f,this.buffer=new Uint8Array(s),this.view=(0,t.createView)(this.buffer)}update(s){(0,t.aexists)(this),s=(0,t.toBytes)(s),(0,t.abytes)(s);const{view:a,buffer:l,blockLen:f}=this,u=s.length;for(let p=0;p<u;){const y=Math.min(f-this.pos,u-p);if(y===f){const w=(0,t.createView)(s);for(;f<=u-p;p+=f)this.process(w,p);continue}l.set(s.subarray(p,p+y),this.pos),this.pos+=y,p+=y,this.pos===f&&(this.process(a,0),this.pos=0)}return this.length+=s.length,this.roundClean(),this}digestInto(s){(0,t.aexists)(this),(0,t.aoutput)(s,this),this.finished=!0;const{buffer:a,view:l,blockLen:f,isLE:u}=this;let{pos:p}=this;a[p++]=128,(0,t.clean)(this.buffer.subarray(p)),this.padOffset>f-p&&(this.process(l,0),p=0);for(let k=p;k<f;k++)a[k]=0;e(l,f-8,BigInt(this.length*8),u),this.process(l,0);const y=(0,t.createView)(s),w=this.outputLen;if(w%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const A=w/4,S=this.get();if(A>S.length)throw new Error("_sha2: outputLen bigger than state");for(let k=0;k<A;k++)y.setUint32(4*k,S[k],u)}digest(){const{buffer:s,outputLen:a}=this;this.digestInto(s);const l=s.slice(0,a);return this.destroy(),l}_cloneInto(s){s||(s=new this.constructor),s.set(...this.get());const{blockLen:a,buffer:l,length:f,finished:u,destroyed:p,pos:y}=this;return s.destroyed=p,s.finished=u,s.length=f,s.pos=y,f%a&&s.buffer.set(l),s}clone(){return this._cloneInto()}}return ur.HashMD=i,ur.SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ur.SHA224_IV=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),ur.SHA384_IV=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),ur.SHA512_IV=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),ur}var Ve={},lb;function GA(){if(lb)return Ve;lb=1,Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.toBig=Ve.shrSL=Ve.shrSH=Ve.rotrSL=Ve.rotrSH=Ve.rotrBL=Ve.rotrBH=Ve.rotr32L=Ve.rotr32H=Ve.rotlSL=Ve.rotlSH=Ve.rotlBL=Ve.rotlBH=Ve.add5L=Ve.add5H=Ve.add4L=Ve.add4H=Ve.add3L=Ve.add3H=void 0,Ve.add=I,Ve.fromBig=r,Ve.split=n;const t=BigInt(2**32-1),e=BigInt(32);function r(T,C=!1){return C?{h:Number(T&t),l:Number(T>>e&t)}:{h:Number(T>>e&t)|0,l:Number(T&t)|0}}function n(T,C=!1){const G=T.length;let U=new Uint32Array(G),P=new Uint32Array(G);for(let L=0;L<G;L++){const{h:R,l:z}=r(T[L],C);[U[L],P[L]]=[R,z]}return[U,P]}const i=(T,C)=>BigInt(T>>>0)<<e|BigInt(C>>>0);Ve.toBig=i;const o=(T,C,G)=>T>>>G;Ve.shrSH=o;const s=(T,C,G)=>T<<32-G|C>>>G;Ve.shrSL=s;const a=(T,C,G)=>T>>>G|C<<32-G;Ve.rotrSH=a;const l=(T,C,G)=>T<<32-G|C>>>G;Ve.rotrSL=l;const f=(T,C,G)=>T<<64-G|C>>>G-32;Ve.rotrBH=f;const u=(T,C,G)=>T>>>G-32|C<<64-G;Ve.rotrBL=u;const p=(T,C)=>C;Ve.rotr32H=p;const y=(T,C)=>T;Ve.rotr32L=y;const w=(T,C,G)=>T<<G|C>>>32-G;Ve.rotlSH=w;const A=(T,C,G)=>C<<G|T>>>32-G;Ve.rotlSL=A;const S=(T,C,G)=>C<<G-32|T>>>64-G;Ve.rotlBH=S;const k=(T,C,G)=>T<<G-32|C>>>64-G;Ve.rotlBL=k;function I(T,C,G,U){const P=(C>>>0)+(U>>>0);return{h:T+G+(P/2**32|0)|0,l:P|0}}const N=(T,C,G)=>(T>>>0)+(C>>>0)+(G>>>0);Ve.add3L=N;const B=(T,C,G,U)=>C+G+U+(T/2**32|0)|0;Ve.add3H=B;const V=(T,C,G,U)=>(T>>>0)+(C>>>0)+(G>>>0)+(U>>>0);Ve.add4L=V;const W=(T,C,G,U,P)=>C+G+U+P+(T/2**32|0)|0;Ve.add4H=W;const Y=(T,C,G,U,P)=>(T>>>0)+(C>>>0)+(G>>>0)+(U>>>0)+(P>>>0);Ve.add5L=Y;const H=(T,C,G,U,P,L)=>C+G+U+P+L+(T/2**32|0)|0;Ve.add5H=H;const ie={fromBig:r,split:n,toBig:i,shrSH:o,shrSL:s,rotrSH:a,rotrSL:l,rotrBH:f,rotrBL:u,rotr32H:p,rotr32L:y,rotlSH:w,rotlSL:A,rotlBH:S,rotlBL:k,add:I,add3L:N,add3H:B,add4L:V,add4H:W,add5H:H,add5L:Y};return Ve.default=ie,Ve}var fb;function DE(){if(fb)return Et;fb=1,Object.defineProperty(Et,"__esModule",{value:!0}),Et.sha512_224=Et.sha512_256=Et.sha384=Et.sha512=Et.sha224=Et.sha256=Et.SHA512_256=Et.SHA512_224=Et.SHA384=Et.SHA512=Et.SHA224=Et.SHA256=void 0;const t=qA(),e=GA(),r=Qa(),n=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),i=new Uint32Array(64);class o extends t.HashMD{constructor(B=32){super(64,B,8,!1),this.A=t.SHA256_IV[0]|0,this.B=t.SHA256_IV[1]|0,this.C=t.SHA256_IV[2]|0,this.D=t.SHA256_IV[3]|0,this.E=t.SHA256_IV[4]|0,this.F=t.SHA256_IV[5]|0,this.G=t.SHA256_IV[6]|0,this.H=t.SHA256_IV[7]|0}get(){const{A:B,B:V,C:W,D:Y,E:H,F:ie,G:T,H:C}=this;return[B,V,W,Y,H,ie,T,C]}set(B,V,W,Y,H,ie,T,C){this.A=B|0,this.B=V|0,this.C=W|0,this.D=Y|0,this.E=H|0,this.F=ie|0,this.G=T|0,this.H=C|0}process(B,V){for(let P=0;P<16;P++,V+=4)i[P]=B.getUint32(V,!1);for(let P=16;P<64;P++){const L=i[P-15],R=i[P-2],z=(0,r.rotr)(L,7)^(0,r.rotr)(L,18)^L>>>3,X=(0,r.rotr)(R,17)^(0,r.rotr)(R,19)^R>>>10;i[P]=X+i[P-7]+z+i[P-16]|0}let{A:W,B:Y,C:H,D:ie,E:T,F:C,G,H:U}=this;for(let P=0;P<64;P++){const L=(0,r.rotr)(T,6)^(0,r.rotr)(T,11)^(0,r.rotr)(T,25),R=U+L+(0,t.Chi)(T,C,G)+n[P]+i[P]|0,z=((0,r.rotr)(W,2)^(0,r.rotr)(W,13)^(0,r.rotr)(W,22))+(0,t.Maj)(W,Y,H)|0;U=G,G=C,C=T,T=ie+R|0,ie=H,H=Y,Y=W,W=R+z|0}W=W+this.A|0,Y=Y+this.B|0,H=H+this.C|0,ie=ie+this.D|0,T=T+this.E|0,C=C+this.F|0,G=G+this.G|0,U=U+this.H|0,this.set(W,Y,H,ie,T,C,G,U)}roundClean(){(0,r.clean)(i)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,r.clean)(this.buffer)}}Et.SHA256=o;class s extends o{constructor(){super(28),this.A=t.SHA224_IV[0]|0,this.B=t.SHA224_IV[1]|0,this.C=t.SHA224_IV[2]|0,this.D=t.SHA224_IV[3]|0,this.E=t.SHA224_IV[4]|0,this.F=t.SHA224_IV[5]|0,this.G=t.SHA224_IV[6]|0,this.H=t.SHA224_IV[7]|0}}Et.SHA224=s;const a=e.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(N=>BigInt(N))),l=a[0],f=a[1],u=new Uint32Array(80),p=new Uint32Array(80);class y extends t.HashMD{constructor(B=64){super(128,B,16,!1),this.Ah=t.SHA512_IV[0]|0,this.Al=t.SHA512_IV[1]|0,this.Bh=t.SHA512_IV[2]|0,this.Bl=t.SHA512_IV[3]|0,this.Ch=t.SHA512_IV[4]|0,this.Cl=t.SHA512_IV[5]|0,this.Dh=t.SHA512_IV[6]|0,this.Dl=t.SHA512_IV[7]|0,this.Eh=t.SHA512_IV[8]|0,this.El=t.SHA512_IV[9]|0,this.Fh=t.SHA512_IV[10]|0,this.Fl=t.SHA512_IV[11]|0,this.Gh=t.SHA512_IV[12]|0,this.Gl=t.SHA512_IV[13]|0,this.Hh=t.SHA512_IV[14]|0,this.Hl=t.SHA512_IV[15]|0}get(){const{Ah:B,Al:V,Bh:W,Bl:Y,Ch:H,Cl:ie,Dh:T,Dl:C,Eh:G,El:U,Fh:P,Fl:L,Gh:R,Gl:z,Hh:X,Hl:ee}=this;return[B,V,W,Y,H,ie,T,C,G,U,P,L,R,z,X,ee]}set(B,V,W,Y,H,ie,T,C,G,U,P,L,R,z,X,ee){this.Ah=B|0,this.Al=V|0,this.Bh=W|0,this.Bl=Y|0,this.Ch=H|0,this.Cl=ie|0,this.Dh=T|0,this.Dl=C|0,this.Eh=G|0,this.El=U|0,this.Fh=P|0,this.Fl=L|0,this.Gh=R|0,this.Gl=z|0,this.Hh=X|0,this.Hl=ee|0}process(B,V){for(let Z=0;Z<16;Z++,V+=4)u[Z]=B.getUint32(V),p[Z]=B.getUint32(V+=4);for(let Z=16;Z<80;Z++){const D=u[Z-15]|0,J=p[Z-15]|0,j=e.rotrSH(D,J,1)^e.rotrSH(D,J,8)^e.shrSH(D,J,7),te=e.rotrSL(D,J,1)^e.rotrSL(D,J,8)^e.shrSL(D,J,7),ae=u[Z-2]|0,ce=p[Z-2]|0,pe=e.rotrSH(ae,ce,19)^e.rotrBH(ae,ce,61)^e.shrSH(ae,ce,6),le=e.rotrSL(ae,ce,19)^e.rotrBL(ae,ce,61)^e.shrSL(ae,ce,6),ye=e.add4L(te,le,p[Z-7],p[Z-16]),Ae=e.add4H(ye,j,pe,u[Z-7],u[Z-16]);u[Z]=Ae|0,p[Z]=ye|0}let{Ah:W,Al:Y,Bh:H,Bl:ie,Ch:T,Cl:C,Dh:G,Dl:U,Eh:P,El:L,Fh:R,Fl:z,Gh:X,Gl:ee,Hh:_,Hl:K}=this;for(let Z=0;Z<80;Z++){const D=e.rotrSH(P,L,14)^e.rotrSH(P,L,18)^e.rotrBH(P,L,41),J=e.rotrSL(P,L,14)^e.rotrSL(P,L,18)^e.rotrBL(P,L,41),j=P&R^~P&X,te=L&z^~L&ee,ae=e.add5L(K,J,te,f[Z],p[Z]),ce=e.add5H(ae,_,D,j,l[Z],u[Z]),pe=ae|0,le=e.rotrSH(W,Y,28)^e.rotrBH(W,Y,34)^e.rotrBH(W,Y,39),ye=e.rotrSL(W,Y,28)^e.rotrBL(W,Y,34)^e.rotrBL(W,Y,39),Ae=W&H^W&T^H&T,xe=Y&ie^Y&C^ie&C;_=X|0,K=ee|0,X=R|0,ee=z|0,R=P|0,z=L|0,{h:P,l:L}=e.add(G|0,U|0,ce|0,pe|0),G=T|0,U=C|0,T=H|0,C=ie|0,H=W|0,ie=Y|0;const Be=e.add3L(pe,ye,xe);W=e.add3H(Be,ce,le,Ae),Y=Be|0}({h:W,l:Y}=e.add(this.Ah|0,this.Al|0,W|0,Y|0)),{h:H,l:ie}=e.add(this.Bh|0,this.Bl|0,H|0,ie|0),{h:T,l:C}=e.add(this.Ch|0,this.Cl|0,T|0,C|0),{h:G,l:U}=e.add(this.Dh|0,this.Dl|0,G|0,U|0),{h:P,l:L}=e.add(this.Eh|0,this.El|0,P|0,L|0),{h:R,l:z}=e.add(this.Fh|0,this.Fl|0,R|0,z|0),{h:X,l:ee}=e.add(this.Gh|0,this.Gl|0,X|0,ee|0),{h:_,l:K}=e.add(this.Hh|0,this.Hl|0,_|0,K|0),this.set(W,Y,H,ie,T,C,G,U,P,L,R,z,X,ee,_,K)}roundClean(){(0,r.clean)(u,p)}destroy(){(0,r.clean)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}Et.SHA512=y;class w extends y{constructor(){super(48),this.Ah=t.SHA384_IV[0]|0,this.Al=t.SHA384_IV[1]|0,this.Bh=t.SHA384_IV[2]|0,this.Bl=t.SHA384_IV[3]|0,this.Ch=t.SHA384_IV[4]|0,this.Cl=t.SHA384_IV[5]|0,this.Dh=t.SHA384_IV[6]|0,this.Dl=t.SHA384_IV[7]|0,this.Eh=t.SHA384_IV[8]|0,this.El=t.SHA384_IV[9]|0,this.Fh=t.SHA384_IV[10]|0,this.Fl=t.SHA384_IV[11]|0,this.Gh=t.SHA384_IV[12]|0,this.Gl=t.SHA384_IV[13]|0,this.Hh=t.SHA384_IV[14]|0,this.Hl=t.SHA384_IV[15]|0}}Et.SHA384=w;const A=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),S=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class k extends y{constructor(){super(28),this.Ah=A[0]|0,this.Al=A[1]|0,this.Bh=A[2]|0,this.Bl=A[3]|0,this.Ch=A[4]|0,this.Cl=A[5]|0,this.Dh=A[6]|0,this.Dl=A[7]|0,this.Eh=A[8]|0,this.El=A[9]|0,this.Fh=A[10]|0,this.Fl=A[11]|0,this.Gh=A[12]|0,this.Gl=A[13]|0,this.Hh=A[14]|0,this.Hl=A[15]|0}}Et.SHA512_224=k;class I extends y{constructor(){super(32),this.Ah=S[0]|0,this.Al=S[1]|0,this.Bh=S[2]|0,this.Bl=S[3]|0,this.Ch=S[4]|0,this.Cl=S[5]|0,this.Dh=S[6]|0,this.Dl=S[7]|0,this.Eh=S[8]|0,this.El=S[9]|0,this.Fh=S[10]|0,this.Fl=S[11]|0,this.Gh=S[12]|0,this.Gl=S[13]|0,this.Hh=S[14]|0,this.Hl=S[15]|0}}return Et.SHA512_256=I,Et.sha256=(0,r.createHasher)(()=>new o),Et.sha224=(0,r.createHasher)(()=>new s),Et.sha512=(0,r.createHasher)(()=>new y),Et.sha384=(0,r.createHasher)(()=>new w),Et.sha512_256=(0,r.createHasher)(()=>new I),Et.sha512_224=(0,r.createHasher)(()=>new k),Et}var hb;function XA(){if(hb)return cn;hb=1,Object.defineProperty(cn,"__esModule",{value:!0}),cn.sha224=cn.SHA224=cn.sha256=cn.SHA256=void 0;const t=DE();return cn.SHA256=t.SHA256,cn.sha256=t.sha256,cn.SHA224=t.SHA224,cn.sha224=t.sha224,cn}var qt={},db;function YA(){if(db)return qt;db=1,Object.defineProperty(qt,"__esModule",{value:!0}),qt.sha512_256=qt.SHA512_256=qt.sha512_224=qt.SHA512_224=qt.sha384=qt.SHA384=qt.sha512=qt.SHA512=void 0;const t=DE();return qt.SHA512=t.SHA512,qt.sha512=t.sha512,qt.SHA384=t.SHA384,qt.sha384=t.sha384,qt.SHA512_224=t.SHA512_224,qt.sha512_224=t.sha512_224,qt.SHA512_256=t.SHA512_256,qt.sha512_256=t.sha512_256,qt}var Ys={},pb={},gb;function ZA(){return gb||(gb=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=t.HMAC=void 0;const e=Qa();class r extends e.Hash{constructor(o,s){super(),this.finished=!1,this.destroyed=!1,(0,e.ahash)(o);const a=(0,e.toBytes)(s);if(this.iHash=o.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const l=this.blockLen,f=new Uint8Array(l);f.set(a.length>l?o.create().update(a).digest():a);for(let u=0;u<f.length;u++)f[u]^=54;this.iHash.update(f),this.oHash=o.create();for(let u=0;u<f.length;u++)f[u]^=106;this.oHash.update(f),(0,e.clean)(f)}update(o){return(0,e.aexists)(this),this.iHash.update(o),this}digestInto(o){(0,e.aexists)(this),(0,e.abytes)(o,this.outputLen),this.finished=!0,this.iHash.digestInto(o),this.oHash.update(o),this.oHash.digestInto(o),this.destroy()}digest(){const o=new Uint8Array(this.oHash.outputLen);return this.digestInto(o),o}_cloneInto(o){o||(o=Object.create(Object.getPrototypeOf(this),{}));const{oHash:s,iHash:a,finished:l,destroyed:f,blockLen:u,outputLen:p}=this;return o=o,o.finished=l,o.destroyed=f,o.blockLen=u,o.outputLen=p,o.oHash=s._cloneInto(o.oHash),o.iHash=a._cloneInto(o.iHash),o}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}t.HMAC=r;const n=(i,o,s)=>new r(i,o).update(s).digest();t.hmac=n,t.hmac.create=(i,o)=>new r(i,o)})(pb)),pb}var yb;function QA(){if(yb)return Ys;yb=1,Object.defineProperty(Ys,"__esModule",{value:!0}),Ys.pbkdf2=i,Ys.pbkdf2Async=o;const t=ZA(),e=Qa();function r(s,a,l,f){(0,e.ahash)(s);const u=(0,e.checkOpts)({dkLen:32,asyncTick:10},f),{c:p,dkLen:y,asyncTick:w}=u;if((0,e.anumber)(p),(0,e.anumber)(y),(0,e.anumber)(w),p<1)throw new Error("iterations (c) should be >= 1");const A=(0,e.kdfInputToBytes)(a),S=(0,e.kdfInputToBytes)(l),k=new Uint8Array(y),I=t.hmac.create(s,A),N=I._cloneInto().update(S);return{c:p,dkLen:y,asyncTick:w,DK:k,PRF:I,PRFSalt:N}}function n(s,a,l,f,u){return s.destroy(),a.destroy(),f&&f.destroy(),(0,e.clean)(u),l}function i(s,a,l,f){const{c:u,dkLen:p,DK:y,PRF:w,PRFSalt:A}=r(s,a,l,f);let S;const k=new Uint8Array(4),I=(0,e.createView)(k),N=new Uint8Array(w.outputLen);for(let B=1,V=0;V<p;B++,V+=w.outputLen){const W=y.subarray(V,V+w.outputLen);I.setInt32(0,B,!1),(S=A._cloneInto(S)).update(k).digestInto(N),W.set(N.subarray(0,W.length));for(let Y=1;Y<u;Y++){w._cloneInto(S).update(N).digestInto(N);for(let H=0;H<W.length;H++)W[H]^=N[H]}}return n(w,A,y,S,N)}async function o(s,a,l,f){const{c:u,dkLen:p,asyncTick:y,DK:w,PRF:A,PRFSalt:S}=r(s,a,l,f);let k;const I=new Uint8Array(4),N=(0,e.createView)(I),B=new Uint8Array(A.outputLen);for(let V=1,W=0;W<p;V++,W+=A.outputLen){const Y=w.subarray(W,W+A.outputLen);N.setInt32(0,V,!1),(k=S._cloneInto(k)).update(I).digestInto(B),Y.set(B.subarray(0,Y.length)),await(0,e.asyncLoop)(u-1,y,()=>{A._cloneInto(k).update(B).digestInto(B);for(let H=0;H<Y.length;H++)Y[H]^=B[H]})}return n(A,S,w,k,B)}return Ys}const lp=BigInt(0),Jh=BigInt(1);function Ba(t,e=""){if(typeof t!="boolean"){const r=e&&`"${e}" `;throw new Error(r+"expected boolean, got type="+typeof t)}return t}function zE(t){if(typeof t=="bigint"){if(!tc(t))throw new Error("positive bigint expected, got "+t)}else hi(t);return t}function Uu(t){const e=zE(t).toString(16);return e.length&1?"0"+e:e}function ME(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?lp:BigInt("0x"+t)}function Ja(t){return ME(_l(t))}function FE(t){return ME(_l(JA(rt(t)).reverse()))}function fp(t,e){hi(e),t=zE(t);const r=Ic(t.toString(16).padStart(e*2,"0"));if(r.length!==e)throw new Error("number too large");return r}function KE(t,e){return fp(t,e).reverse()}function JA(t){return Uint8Array.from(t)}const tc=t=>typeof t=="bigint"&&lp<=t;function ek(t,e,r){return tc(t)&&tc(e)&&tc(r)&&e<=t&&t<r}function tk(t,e,r,n){if(!ek(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function rk(t){let e;for(e=0;t>lp;t>>=Jh,e+=1);return e}const hp=t=>(Jh<<BigInt(t))-Jh;function nk(t,e,r){if(hi(t,"hashLen"),hi(e,"qByteLen"),typeof r!="function")throw new Error("hmacFn must be a function");const n=S=>new Uint8Array(S),i=Uint8Array.of(),o=Uint8Array.of(0),s=Uint8Array.of(1),a=1e3;let l=n(t),f=n(t),u=0;const p=()=>{l.fill(1),f.fill(0),u=0},y=(...S)=>r(f,rn(l,...S)),w=(S=i)=>{f=y(o,S),l=y(),S.length!==0&&(f=y(s,S),l=y())},A=()=>{if(u++>=a)throw new Error("drbg: tried max amount of iterations");let S=0;const k=[];for(;S<e;){l=y();const I=l.slice();k.push(I),S+=l.length}return rn(...k)};return(S,k)=>{p(),w(S);let I;for(;!(I=k(A()));)w();return p(),I}}function dp(t,e={},r={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function n(o,s,a){const l=t[o];if(a&&l===void 0)return;const f=typeof l;if(f!==s||l===null)throw new Error(`param "${o}" is invalid: expected ${s}, got ${f}`)}const i=(o,s)=>Object.entries(o).forEach(([a,l])=>n(a,l,s));i(e,!1),i(r,!0)}function mb(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const o=t(r,...n);return e.set(r,o),o}}function pp(t){if(!Number.isSafeInteger(t)||t<0||t>4294967295)throw new Error("wrong u32 integer:"+t);return t}function jE(t){return pp(t),(t&t-1)===0&&t!==0}function VE(t,e){pp(t);let r=0;for(let n=0;n<e;n++,t>>>=1)r=r<<1|t&1;return r}function WE(t){return pp(t),31-Math.clz32(t)}function bb(t){const e=t.length;if(e<2||!jE(e))throw new Error("n must be a power of 2 and greater than 1. Got "+e);const r=WE(e);for(let n=0;n<e;n++){const i=VE(n,r);if(n<i){const o=t[n];t[n]=t[i],t[i]=o}}return t}const wb=(t,e)=>{const{N:r,roots:n,dit:i,invertButterflies:o=!1,skipStages:s=0,brp:a=!0}=e,l=WE(r);if(!jE(r))throw new Error("FFT: Polynomial size should be power of two");const f=i!==o;return u=>{if(u.length!==r)throw new Error("FFT: wrong Polynomial length");i&&a&&bb(u);for(let p=0,y=1;p<l-s;p++){const w=i?p+1+s:l-p,A=1<<w,S=A>>1,k=r>>w;for(let I=0;I<r;I+=A)for(let N=0,B=y++;N<S;N++){const V=o?i?r-B:B:N*k,W=I+N,Y=I+N+S,H=n[V],ie=u[Y],T=u[W];if(f){const C=t.mul(ie,H);u[W]=t.add(T,C),u[Y]=t.sub(T,C)}else o?(u[W]=t.add(ie,T),u[Y]=t.mul(t.sub(ie,T),H)):(u[W]=t.add(T,ie),u[Y]=t.mul(t.sub(T,ie),H))}}return!i&&a&&bb(u),u}},_r=BigInt(0),vr=BigInt(1),yo=BigInt(2),qE=BigInt(3),GE=BigInt(4),XE=BigInt(5),ik=BigInt(7),YE=BigInt(8),ok=BigInt(9),ZE=BigInt(16);function Jr(t,e){const r=t%e;return r>=_r?r:e+r}function Vr(t,e,r){let n=t;for(;e-- >_r;)n*=n,n%=r;return n}function vb(t,e){if(t===_r)throw new Error("invert: expected non-zero number");if(e<=_r)throw new Error("invert: expected positive modulus, got "+e);let r=Jr(t,e),n=e,i=_r,o=vr;for(;r!==_r;){const s=n/r,a=n%r,l=i-o*s;n=r,r=a,i=o,o=l}if(n!==vr)throw new Error("invert: does not exist");return Jr(i,e)}function gp(t,e,r){if(!t.eql(t.sqr(e),r))throw new Error("Cannot find square root")}function QE(t,e){const r=(t.ORDER+vr)/GE,n=t.pow(e,r);return gp(t,n,e),n}function sk(t,e){const r=(t.ORDER-XE)/YE,n=t.mul(e,yo),i=t.pow(n,r),o=t.mul(e,i),s=t.mul(t.mul(o,yo),i),a=t.mul(o,t.sub(s,t.ONE));return gp(t,a,e),a}function ak(t){const e=Tl(t),r=JE(t),n=r(e,e.neg(e.ONE)),i=r(e,n),o=r(e,e.neg(n)),s=(t+ik)/ZE;return(a,l)=>{let f=a.pow(l,s),u=a.mul(f,n);const p=a.mul(f,i),y=a.mul(f,o),w=a.eql(a.sqr(u),l),A=a.eql(a.sqr(p),l);f=a.cmov(f,u,w),u=a.cmov(y,p,A);const S=a.eql(a.sqr(u),l),k=a.cmov(f,u,S);return gp(a,k,l),k}}function JE(t){if(t<qE)throw new Error("sqrt is not defined for small field");let e=t-vr,r=0;for(;e%yo===_r;)e/=yo,r++;let n=yo;const i=Tl(t);for(;Eb(i,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return QE;let o=i.pow(n,e);const s=(e+vr)/yo;return function(a,l){if(a.is0(l))return l;if(Eb(a,l)!==1)throw new Error("Cannot find square root");let f=r,u=a.mul(a.ONE,o),p=a.pow(l,e),y=a.pow(l,s);for(;!a.eql(p,a.ONE);){if(a.is0(p))return a.ZERO;let w=1,A=a.sqr(p);for(;!a.eql(A,a.ONE);)if(w++,A=a.sqr(A),w===f)throw new Error("Cannot find square root");const S=vr<<BigInt(f-w-1),k=a.pow(u,S);f=w,u=a.sqr(k),p=a.mul(p,u),y=a.mul(y,k)}return y}}function uk(t){return t%GE===qE?QE:t%YE===XE?sk:t%ZE===ok?ak(t):JE(t)}const ck=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function lk(t){const e={ORDER:"bigint",BYTES:"number",BITS:"number"},r=ck.reduce((n,i)=>(n[i]="function",n),e);return dp(t,r),t}function fk(t,e,r){if(r<_r)throw new Error("invalid exponent, negatives unsupported");if(r===_r)return t.ONE;if(r===vr)return e;let n=t.ONE,i=e;for(;r>_r;)r&vr&&(n=t.mul(n,i)),i=t.sqr(i),r>>=vr;return n}function e3(t,e,r=!1){const n=new Array(e.length).fill(r?t.ZERO:void 0),i=e.reduce((s,a,l)=>t.is0(a)?s:(n[l]=s,t.mul(s,a)),t.ONE),o=t.inv(i);return e.reduceRight((s,a,l)=>t.is0(a)?s:(n[l]=t.mul(s,n[l]),t.mul(s,a)),o),n}function Eb(t,e){const r=(t.ORDER-vr)/yo,n=t.pow(e,r),i=t.eql(n,t.ONE),o=t.eql(n,t.ZERO),s=t.eql(n,t.neg(t.ONE));if(!i&&!o&&!s)throw new Error("invalid Legendre symbol result");return i?1:o?0:-1}function hk(t,e){e!==void 0&&hi(e);const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}let dk=class{ORDER;BITS;BYTES;isLE;ZERO=_r;ONE=vr;_lengths;_sqrt;_mod;constructor(e,r={}){if(e<=_r)throw new Error("invalid field: expected ORDER > 0, got "+e);let n;this.isLE=!1,r!=null&&typeof r=="object"&&(typeof r.BITS=="number"&&(n=r.BITS),typeof r.sqrt=="function"&&(this.sqrt=r.sqrt),typeof r.isLE=="boolean"&&(this.isLE=r.isLE),r.allowedLengths&&(this._lengths=r.allowedLengths?.slice()),typeof r.modFromBytes=="boolean"&&(this._mod=r.modFromBytes));const{nBitLength:i,nByteLength:o}=hk(e,n);if(o>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");this.ORDER=e,this.BITS=i,this.BYTES=o,this._sqrt=void 0,Object.preventExtensions(this)}create(e){return Jr(e,this.ORDER)}isValid(e){if(typeof e!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof e);return _r<=e&&e<this.ORDER}is0(e){return e===_r}isValidNot0(e){return!this.is0(e)&&this.isValid(e)}isOdd(e){return(e&vr)===vr}neg(e){return Jr(-e,this.ORDER)}eql(e,r){return e===r}sqr(e){return Jr(e*e,this.ORDER)}add(e,r){return Jr(e+r,this.ORDER)}sub(e,r){return Jr(e-r,this.ORDER)}mul(e,r){return Jr(e*r,this.ORDER)}pow(e,r){return fk(this,e,r)}div(e,r){return Jr(e*vb(r,this.ORDER),this.ORDER)}sqrN(e){return e*e}addN(e,r){return e+r}subN(e,r){return e-r}mulN(e,r){return e*r}inv(e){return vb(e,this.ORDER)}sqrt(e){return this._sqrt||(this._sqrt=uk(this.ORDER)),this._sqrt(this,e)}toBytes(e){return this.isLE?KE(e,this.BYTES):fp(e,this.BYTES)}fromBytes(e,r=!1){rt(e);const{_lengths:n,BYTES:i,isLE:o,ORDER:s,_mod:a}=this;if(n){if(!n.includes(e.length)||e.length>i)throw new Error("Field.fromBytes: expected "+n+" bytes, got "+e.length);const f=new Uint8Array(i);f.set(e,o?0:f.length-e.length),e=f}if(e.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+e.length);let l=o?FE(e):Ja(e);if(a&&(l=Jr(l,s)),!r&&!this.isValid(l))throw new Error("invalid field element: outside of range 0..ORDER");return l}invertBatch(e){return e3(this,e)}cmov(e,r,n){return n?r:e}};function Tl(t,e={}){return new dk(t,e)}function t3(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function r3(t){const e=t3(t);return e+Math.ceil(e/2)}function pk(t,e,r=!1){rt(t);const n=t.length,i=t3(e),o=r3(e);if(n<16||n<o||n>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+n);const s=r?FE(t):Ja(t),a=Jr(s,e-vr)+vr;return r?KE(a,i):fp(a,i)}const Is=BigInt(0),mo=BigInt(1);function xc(t,e){const r=e.negate();return t?r:e}function Sb(t,e){const r=e3(t.Fp,e.map(n=>n.Z));return e.map((n,i)=>t.fromAffine(n.toAffine(r[i])))}function n3(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Sf(t,e){n3(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1),i=2**t,o=hp(t),s=BigInt(t);return{windows:r,windowSize:n,mask:o,maxNumber:i,shiftBy:s}}function Ab(t,e,r){const{windowSize:n,mask:i,maxNumber:o,shiftBy:s}=r;let a=Number(t&i),l=t>>s;a>n&&(a-=o,l+=mo);const f=e*n,u=f+Math.abs(a)-1,p=a===0,y=a<0,w=e%2!==0;return{nextN:l,offset:u,isZero:p,isNeg:y,isNegF:w,offsetF:f}}const Af=new WeakMap,i3=new WeakMap;function kf(t){return i3.get(t)||1}function kb(t){if(t!==Is)throw new Error("invalid wNAF")}let gk=class{BASE;ZERO;Fn;bits;constructor(e,r){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=r}_unsafeLadder(e,r,n=this.ZERO){let i=e;for(;r>Is;)r&mo&&(n=n.add(i)),i=i.double(),r>>=mo;return n}precomputeWindow(e,r){const{windows:n,windowSize:i}=Sf(r,this.bits),o=[];let s=e,a=s;for(let l=0;l<n;l++){a=s,o.push(a);for(let f=1;f<i;f++)a=a.add(s),o.push(a);s=a.double()}return o}wNAF(e,r,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let i=this.ZERO,o=this.BASE;const s=Sf(e,this.bits);for(let a=0;a<s.windows;a++){const{nextN:l,offset:f,isZero:u,isNeg:p,isNegF:y,offsetF:w}=Ab(n,a,s);n=l,u?o=o.add(xc(y,r[w])):i=i.add(xc(p,r[f]))}return kb(n),{p:i,f:o}}wNAFUnsafe(e,r,n,i=this.ZERO){const o=Sf(e,this.bits);for(let s=0;s<o.windows&&n!==Is;s++){const{nextN:a,offset:l,isZero:f,isNeg:u}=Ab(n,s,o);if(n=a,!f){const p=r[l];i=i.add(u?p.negate():p)}}return kb(n),i}getPrecomputes(e,r,n){let i=Af.get(r);return i||(i=this.precomputeWindow(r,e),e!==1&&(typeof n=="function"&&(i=n(i)),Af.set(r,i))),i}cached(e,r,n){const i=kf(e);return this.wNAF(i,this.getPrecomputes(i,e,n),r)}unsafe(e,r,n,i){const o=kf(e);return o===1?this._unsafeLadder(e,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,e,n),r,i)}createCache(e,r){n3(r,this.bits),i3.set(e,r),Af.delete(e)}hasCache(e){return kf(e)!==1}};function yk(t,e,r,n){let i=e,o=t.ZERO,s=t.ZERO;for(;r>Is||n>Is;)r&mo&&(o=o.add(i)),n&mo&&(s=s.add(i)),i=i.double(),r>>=mo,n>>=mo;return{p1:o,p2:s}}function Ib(t,e,r){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return lk(e),e}else return Tl(t,{isLE:r})}function mk(t,e,r={},n){if(n===void 0&&(n=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const l=e[a];if(!(typeof l=="bigint"&&l>Is))throw new Error(`CURVE.${a} must be positive bigint`)}const i=Ib(e.p,r.Fp,n),o=Ib(e.n,r.Fn,n),s=["Gx","Gy","a","b"];for(const a of s)if(!i.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:i,Fn:o}}function bk(t,e){return function(r){const n=t(r);return{secretKey:n,publicKey:e(n)}}}const _b=(t,e)=>(t+(t>=0?e:-e)/o3)/e;function wk(t,e,r){const[[n,i],[o,s]]=e,a=_b(s*t,r),l=_b(-i*t,r);let f=t-a*n-l*o,u=-a*i-l*s;const p=f<ai,y=u<ai;p&&(f=-f),y&&(u=-u);const w=hp(Math.ceil(rk(r)/2))+ps;if(f<ai||f>=w||u<ai||u>=w)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:p,k1:f,k2neg:y,k2:u}}function ed(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function If(t,e){const r={};for(let n of Object.keys(e))r[n]=t[n]===void 0?e[n]:t[n];return Ba(r.lowS,"lowS"),Ba(r.prehash,"prehash"),r.format!==void 0&&ed(r.format),r}let vk=class extends Error{constructor(e=""){super(e)}};const Di={Err:vk,_tlv:{encode:(t,e)=>{const{Err:r}=Di;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,i=Uu(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const o=n>127?Uu(i.length/2|128):"";return Uu(t)+o+i+e},decode(t,e){const{Err:r}=Di;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const i=e[n++],o=!!(i&128);let s=0;if(!o)s=i;else{const l=i&127;if(!l)throw new r("tlv.decode(long): indefinite length not supported");if(l>4)throw new r("tlv.decode(long): byte length is too big");const f=e.subarray(n,n+l);if(f.length!==l)throw new r("tlv.decode: length bytes not complete");if(f[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const u of f)s=s<<8|u;if(n+=l,s<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+s);if(a.length!==s)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+s)}}},_int:{encode(t){const{Err:e}=Di;if(t<ai)throw new e("integer: negative integers are not allowed");let r=Uu(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=Di;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Ja(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=Di,i=rt(t,void 0,"signature"),{v:o,l:s}=n.decode(48,i);if(s.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l}=n.decode(2,o),{v:f,l:u}=n.decode(2,l);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(f)}},hexFromSig(t){const{_tlv:e,_int:r}=Di,n=e.encode(2,r.encode(t.r)),i=e.encode(2,r.encode(t.s)),o=n+i;return e.encode(48,o)}},ai=BigInt(0),ps=BigInt(1),o3=BigInt(2),Lu=BigInt(3),Ek=BigInt(4);function Sk(t,e={}){const r=mk("weierstrass",t,e),{Fp:n,Fn:i}=r;let o=r.CURVE;const{h:s,n:a}=o;dp(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object"});const{endo:l}=e;if(l&&(!n.is0(o.a)||typeof l.beta!="bigint"||!Array.isArray(l.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const f=a3(n,i);function u(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function p(U,P,L){const{x:R,y:z}=P.toAffine(),X=n.toBytes(R);if(Ba(L,"isCompressed"),L){u();const ee=!n.isOdd(z);return rn(s3(ee),X)}else return rn(Uint8Array.of(4),X,n.toBytes(z))}function y(U){rt(U,void 0,"Point");const{publicKey:P,publicKeyUncompressed:L}=f,R=U.length,z=U[0],X=U.subarray(1);if(R===P&&(z===2||z===3)){const ee=n.fromBytes(X);if(!n.isValid(ee))throw new Error("bad point: is not on curve, wrong x");const _=S(ee);let K;try{K=n.sqrt(_)}catch(D){const J=D instanceof Error?": "+D.message:"";throw new Error("bad point: is not on curve, sqrt error"+J)}u();const Z=n.isOdd(K);return(z&1)===1!==Z&&(K=n.neg(K)),{x:ee,y:K}}else if(R===L&&z===4){const ee=n.BYTES,_=n.fromBytes(X.subarray(0,ee)),K=n.fromBytes(X.subarray(ee,ee*2));if(!k(_,K))throw new Error("bad point: is not on curve");return{x:_,y:K}}else throw new Error(`bad point: got length ${R}, expected compressed=${P} or uncompressed=${L}`)}const w=e.toBytes||p,A=e.fromBytes||y;function S(U){const P=n.sqr(U),L=n.mul(P,U);return n.add(n.add(L,n.mul(U,o.a)),o.b)}function k(U,P){const L=n.sqr(P),R=S(U);return n.eql(L,R)}if(!k(o.Gx,o.Gy))throw new Error("bad curve params: generator point");const I=n.mul(n.pow(o.a,Lu),Ek),N=n.mul(n.sqr(o.b),BigInt(27));if(n.is0(n.add(I,N)))throw new Error("bad curve params: a or b");function B(U,P,L=!1){if(!n.isValid(P)||L&&n.is0(P))throw new Error(`bad point coordinate ${U}`);return P}function V(U){if(!(U instanceof T))throw new Error("Weierstrass Point expected")}function W(U){if(!l||!l.basises)throw new Error("no endo");return wk(U,l.basises,i.ORDER)}const Y=mb((U,P)=>{const{X:L,Y:R,Z:z}=U;if(n.eql(z,n.ONE))return{x:L,y:R};const X=U.is0();P==null&&(P=X?n.ONE:n.inv(z));const ee=n.mul(L,P),_=n.mul(R,P),K=n.mul(z,P);if(X)return{x:n.ZERO,y:n.ZERO};if(!n.eql(K,n.ONE))throw new Error("invZ was invalid");return{x:ee,y:_}}),H=mb(U=>{if(U.is0()){if(e.allowInfinityPoint&&!n.is0(U.Y))return;throw new Error("bad point: ZERO")}const{x:P,y:L}=U.toAffine();if(!n.isValid(P)||!n.isValid(L))throw new Error("bad point: x or y not field elements");if(!k(P,L))throw new Error("bad point: equation left != right");if(!U.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function ie(U,P,L,R,z){return L=new T(n.mul(L.X,U),L.Y,L.Z),P=xc(R,P),L=xc(z,L),P.add(L)}class T{static BASE=new T(o.Gx,o.Gy,n.ONE);static ZERO=new T(n.ZERO,n.ONE,n.ZERO);static Fp=n;static Fn=i;X;Y;Z;constructor(P,L,R){this.X=B("x",P),this.Y=B("y",L,!0),this.Z=B("z",R),Object.freeze(this)}static CURVE(){return o}static fromAffine(P){const{x:L,y:R}=P||{};if(!P||!n.isValid(L)||!n.isValid(R))throw new Error("invalid affine point");if(P instanceof T)throw new Error("projective point not allowed");return n.is0(L)&&n.is0(R)?T.ZERO:new T(L,R,n.ONE)}static fromBytes(P){const L=T.fromAffine(A(rt(P,void 0,"point")));return L.assertValidity(),L}static fromHex(P){return T.fromBytes(Ic(P))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(P=8,L=!0){return G.createCache(this,P),L||this.multiply(Lu),this}assertValidity(){H(this)}hasEvenY(){const{y:P}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(P)}equals(P){V(P);const{X:L,Y:R,Z:z}=this,{X,Y:ee,Z:_}=P,K=n.eql(n.mul(L,_),n.mul(X,z)),Z=n.eql(n.mul(R,_),n.mul(ee,z));return K&&Z}negate(){return new T(this.X,n.neg(this.Y),this.Z)}double(){const{a:P,b:L}=o,R=n.mul(L,Lu),{X:z,Y:X,Z:ee}=this;let _=n.ZERO,K=n.ZERO,Z=n.ZERO,D=n.mul(z,z),J=n.mul(X,X),j=n.mul(ee,ee),te=n.mul(z,X);return te=n.add(te,te),Z=n.mul(z,ee),Z=n.add(Z,Z),_=n.mul(P,Z),K=n.mul(R,j),K=n.add(_,K),_=n.sub(J,K),K=n.add(J,K),K=n.mul(_,K),_=n.mul(te,_),Z=n.mul(R,Z),j=n.mul(P,j),te=n.sub(D,j),te=n.mul(P,te),te=n.add(te,Z),Z=n.add(D,D),D=n.add(Z,D),D=n.add(D,j),D=n.mul(D,te),K=n.add(K,D),j=n.mul(X,ee),j=n.add(j,j),D=n.mul(j,te),_=n.sub(_,D),Z=n.mul(j,J),Z=n.add(Z,Z),Z=n.add(Z,Z),new T(_,K,Z)}add(P){V(P);const{X:L,Y:R,Z:z}=this,{X,Y:ee,Z:_}=P;let K=n.ZERO,Z=n.ZERO,D=n.ZERO;const J=o.a,j=n.mul(o.b,Lu);let te=n.mul(L,X),ae=n.mul(R,ee),ce=n.mul(z,_),pe=n.add(L,R),le=n.add(X,ee);pe=n.mul(pe,le),le=n.add(te,ae),pe=n.sub(pe,le),le=n.add(L,z);let ye=n.add(X,_);return le=n.mul(le,ye),ye=n.add(te,ce),le=n.sub(le,ye),ye=n.add(R,z),K=n.add(ee,_),ye=n.mul(ye,K),K=n.add(ae,ce),ye=n.sub(ye,K),D=n.mul(J,le),K=n.mul(j,ce),D=n.add(K,D),K=n.sub(ae,D),D=n.add(ae,D),Z=n.mul(K,D),ae=n.add(te,te),ae=n.add(ae,te),ce=n.mul(J,ce),le=n.mul(j,le),ae=n.add(ae,ce),ce=n.sub(te,ce),ce=n.mul(J,ce),le=n.add(le,ce),te=n.mul(ae,le),Z=n.add(Z,te),te=n.mul(ye,le),K=n.mul(pe,K),K=n.sub(K,te),te=n.mul(pe,ae),D=n.mul(ye,D),D=n.add(D,te),new T(K,Z,D)}subtract(P){return this.add(P.negate())}is0(){return this.equals(T.ZERO)}multiply(P){const{endo:L}=e;if(!i.isValidNot0(P))throw new Error("invalid scalar: out of range");let R,z;const X=ee=>G.cached(this,ee,_=>Sb(T,_));if(L){const{k1neg:ee,k1:_,k2neg:K,k2:Z}=W(P),{p:D,f:J}=X(_),{p:j,f:te}=X(Z);z=J.add(te),R=ie(L.beta,D,j,ee,K)}else{const{p:ee,f:_}=X(P);R=ee,z=_}return Sb(T,[R,z])[0]}multiplyUnsafe(P){const{endo:L}=e,R=this;if(!i.isValid(P))throw new Error("invalid scalar: out of range");if(P===ai||R.is0())return T.ZERO;if(P===ps)return R;if(G.hasCache(this))return this.multiply(P);if(L){const{k1neg:z,k1:X,k2neg:ee,k2:_}=W(P),{p1:K,p2:Z}=yk(T,R,X,_);return ie(L.beta,K,Z,z,ee)}else return G.unsafe(R,P)}toAffine(P){return Y(this,P)}isTorsionFree(){const{isTorsionFree:P}=e;return s===ps?!0:P?P(T,this):G.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:P}=e;return s===ps?this:P?P(T,this):this.multiplyUnsafe(s)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}toBytes(P=!0){return Ba(P,"isCompressed"),this.assertValidity(),w(T,this,P)}toHex(P=!0){return _l(this.toBytes(P))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}const C=i.BITS,G=new gk(T,e.endo?Math.ceil(C/2):C);return T.BASE.precompute(8),T}function s3(t){return Uint8Array.of(t?2:3)}function a3(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function Ak(t,e={}){const{Fn:r}=t,n=e.randomBytes||ds,i=Object.assign(a3(t.Fp,r),{seed:r3(r.ORDER)});function o(w){try{const A=r.fromBytes(w);return r.isValidNot0(A)}catch{return!1}}function s(w,A){const{publicKey:S,publicKeyUncompressed:k}=i;try{const I=w.length;return A===!0&&I!==S||A===!1&&I!==k?!1:!!t.fromBytes(w)}catch{return!1}}function a(w=n(i.seed)){return pk(rt(w,i.seed,"seed"),r.ORDER)}function l(w,A=!0){return t.BASE.multiply(r.fromBytes(w)).toBytes(A)}function f(w){const{secretKey:A,publicKey:S,publicKeyUncompressed:k}=i;if(!Il(w)||"_lengths"in r&&r._lengths||A===S)return;const I=rt(w,void 0,"key").length;return I===S||I===k}function u(w,A,S=!0){if(f(w)===!0)throw new Error("first arg must be private key");if(f(A)===!1)throw new Error("second arg must be public key");const k=r.fromBytes(w);return t.fromBytes(A).multiply(k).toBytes(S)}const p={isValidSecretKey:o,isValidPublicKey:s,randomSecretKey:a},y=bk(a,l);return Object.freeze({getPublicKey:l,getSharedSecret:u,keygen:y,Point:t,utils:p,lengths:i})}function kk(t,e,r={}){lE(e),dp(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"}),r=Object.assign({},r);const n=r.randomBytes||ds,i=r.hmac||((L,R)=>up(e,L,R)),{Fp:o,Fn:s}=t,{ORDER:a,BITS:l}=s,{keygen:f,getPublicKey:u,getSharedSecret:p,utils:y,lengths:w}=Ak(t,r),A={prehash:!0,lowS:typeof r.lowS=="boolean"?r.lowS:!0,format:"compact",extraEntropy:!1},S=a*o3<o.ORDER;function k(L){const R=a>>ps;return L>R}function I(L,R){if(!s.isValidNot0(R))throw new Error(`invalid signature ${L}: out of range 1..Point.Fn.ORDER`);return R}function N(){if(S)throw new Error('"recovered" sig type is not supported for cofactor >2 curves')}function B(L,R){ed(R);const z=w.signature,X=R==="compact"?z:R==="recovered"?z+1:void 0;return rt(L,X)}class V{r;s;recovery;constructor(R,z,X){if(this.r=I("r",R),this.s=I("s",z),X!=null){if(N(),![0,1,2,3].includes(X))throw new Error("invalid recovery id");this.recovery=X}Object.freeze(this)}static fromBytes(R,z=A.format){B(R,z);let X;if(z==="der"){const{r:Z,s:D}=Di.toSig(rt(R));return new V(Z,D)}z==="recovered"&&(X=R[0],z="compact",R=R.subarray(1));const ee=w.signature/2,_=R.subarray(0,ee),K=R.subarray(ee,ee*2);return new V(s.fromBytes(_),s.fromBytes(K),X)}static fromHex(R,z){return this.fromBytes(Ic(R),z)}assertRecovery(){const{recovery:R}=this;if(R==null)throw new Error("invalid recovery id: must be present");return R}addRecoveryBit(R){return new V(this.r,this.s,R)}recoverPublicKey(R){const{r:z,s:X}=this,ee=this.assertRecovery(),_=ee===2||ee===3?z+a:z;if(!o.isValid(_))throw new Error("invalid recovery id: sig.r+curve.n != R.x");const K=o.toBytes(_),Z=t.fromBytes(rn(s3((ee&1)===0),K)),D=s.inv(_),J=Y(rt(R,void 0,"msgHash")),j=s.create(-J*D),te=s.create(X*D),ae=t.BASE.multiplyUnsafe(j).add(Z.multiplyUnsafe(te));if(ae.is0())throw new Error("invalid recovery: point at infinify");return ae.assertValidity(),ae}hasHighS(){return k(this.s)}toBytes(R=A.format){if(ed(R),R==="der")return Ic(Di.hexFromSig(this));const{r:z,s:X}=this,ee=s.toBytes(z),_=s.toBytes(X);return R==="recovered"?(N(),rn(Uint8Array.of(this.assertRecovery()),ee,_)):rn(ee,_)}toHex(R){return _l(this.toBytes(R))}}const W=r.bits2int||function(L){if(L.length>8192)throw new Error("input is too large");const R=Ja(L),z=L.length*8-l;return z>0?R>>BigInt(z):R},Y=r.bits2int_modN||function(L){return s.create(W(L))},H=hp(l);function ie(L){return tk("num < 2^"+l,L,ai,H),s.toBytes(L)}function T(L,R){return rt(L,void 0,"message"),R?rt(e(L),void 0,"prehashed message"):L}function C(L,R,z){const{lowS:X,prehash:ee,extraEntropy:_}=If(z,A);L=T(L,ee);const K=Y(L),Z=s.fromBytes(R);if(!s.isValidNot0(Z))throw new Error("invalid private key");const D=[ie(Z),ie(K)];if(_!=null&&_!==!1){const ae=_===!0?n(w.secretKey):_;D.push(rt(ae,void 0,"extraEntropy"))}const J=rn(...D),j=K;function te(ae){const ce=W(ae);if(!s.isValidNot0(ce))return;const pe=s.inv(ce),le=t.BASE.multiply(ce).toAffine(),ye=s.create(le.x);if(ye===ai)return;const Ae=s.create(pe*s.create(j+ye*Z));if(Ae===ai)return;let xe=(le.x===ye?0:2)|Number(le.y&ps),Be=Ae;return X&&k(Ae)&&(Be=s.neg(Ae),xe^=1),new V(ye,Be,S?void 0:xe)}return{seed:J,k2sig:te}}function G(L,R,z={}){const{seed:X,k2sig:ee}=C(L,R,z);return nk(e.outputLen,s.BYTES,i)(X,ee).toBytes(z.format)}function U(L,R,z,X={}){const{lowS:ee,prehash:_,format:K}=If(X,A);if(z=rt(z,void 0,"publicKey"),R=T(R,_),!Il(L)){const Z=L instanceof V?", use sig.toBytes()":"";throw new Error("verify expects Uint8Array signature"+Z)}B(L,K);try{const Z=V.fromBytes(L,K),D=t.fromBytes(z);if(ee&&Z.hasHighS())return!1;const{r:J,s:j}=Z,te=Y(R),ae=s.inv(j),ce=s.create(te*ae),pe=s.create(J*ae),le=t.BASE.multiplyUnsafe(ce).add(D.multiplyUnsafe(pe));return le.is0()?!1:s.create(le.x)===J}catch{return!1}}function P(L,R,z={}){const{prehash:X}=If(z,A);return R=T(R,X),V.fromBytes(L,"recovered").recoverPublicKey(R).toBytes()}return Object.freeze({keygen:f,getPublicKey:u,getSharedSecret:p,utils:y,lengths:w,Point:t,sign:G,verify:U,recoverPublicKey:P,Signature:V,hash:e})}const yp={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},Ik={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},xb=BigInt(2);function _k(t){const e=yp.p,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),l=BigInt(88),f=t*t*t%e,u=f*f*t%e,p=Vr(u,r,e)*u%e,y=Vr(p,r,e)*u%e,w=Vr(y,xb,e)*f%e,A=Vr(w,i,e)*w%e,S=Vr(A,o,e)*A%e,k=Vr(S,a,e)*S%e,I=Vr(k,l,e)*k%e,N=Vr(I,a,e)*S%e,B=Vr(N,r,e)*u%e,V=Vr(B,s,e)*A%e,W=Vr(V,n,e)*f%e,Y=Vr(W,xb,e);if(!td.eql(td.sqr(Y),t))throw new Error("Cannot find square root");return Y}const td=Tl(yp.p,{sqrt:_k}),xk=Sk(yp,{Fp:td,endo:Ik}),Tk=kk(xk,Ns);var u3={},Bl={};Bl.byteLength=Ok;Bl.toByteArray=Lk;Bl.fromByteArray=Ck;var Rn=[],Zr=[],Bk=typeof Uint8Array<"u"?Uint8Array:Array,_f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Xo=0,Pk=_f.length;Xo<Pk;++Xo)Rn[Xo]=_f[Xo],Zr[_f.charCodeAt(Xo)]=Xo;Zr[45]=62;Zr[95]=63;function c3(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function Ok(t){var e=c3(t),r=e[0],n=e[1];return(r+n)*3/4-n}function Uk(t,e,r){return(e+r)*3/4-r}function Lk(t){var e,r=c3(t),n=r[0],i=r[1],o=new Bk(Uk(t,n,i)),s=0,a=i>0?n-4:n,l;for(l=0;l<a;l+=4)e=Zr[t.charCodeAt(l)]<<18|Zr[t.charCodeAt(l+1)]<<12|Zr[t.charCodeAt(l+2)]<<6|Zr[t.charCodeAt(l+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=Zr[t.charCodeAt(l)]<<2|Zr[t.charCodeAt(l+1)]>>4,o[s++]=e&255),i===1&&(e=Zr[t.charCodeAt(l)]<<10|Zr[t.charCodeAt(l+1)]<<4|Zr[t.charCodeAt(l+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function Rk(t){return Rn[t>>18&63]+Rn[t>>12&63]+Rn[t>>6&63]+Rn[t&63]}function $k(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(t[o+2]&255),i.push(Rk(n));return i.join("")}function Ck(t){for(var e,r=t.length,n=r%3,i=[],o=16383,s=0,a=r-n;s<a;s+=o)i.push($k(t,s,s+o>a?a:s+o));return n===1?(e=t[r-1],i.push(Rn[e>>2]+Rn[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Rn[e>>10]+Rn[e>>4&63]+Rn[e<<2&63]+"=")),i.join("")}var mp={};mp.read=function(t,e,r,n,i){var o,s,a=i*8-n-1,l=(1<<a)-1,f=l>>1,u=-7,p=r?i-1:0,y=r?-1:1,w=t[e+p];for(p+=y,o=w&(1<<-u)-1,w>>=-u,u+=a;u>0;o=o*256+t[e+p],p+=y,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=n;u>0;s=s*256+t[e+p],p+=y,u-=8);if(o===0)o=1-f;else{if(o===l)return s?NaN:(w?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-f}return(w?-1:1)*s*Math.pow(2,o-n)};mp.write=function(t,e,r,n,i,o){var s,a,l,f=o*8-i-1,u=(1<<f)-1,p=u>>1,y=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=n?0:o-1,A=n?1:-1,S=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+p>=1?e+=y/l:e+=y*Math.pow(2,1-p),e*l>=2&&(s++,l/=2),s+p>=u?(a=0,s=u):s+p>=1?(a=(e*l-1)*Math.pow(2,i),s=s+p):(a=e*Math.pow(2,p-1)*Math.pow(2,i),s=0));i>=8;t[r+w]=a&255,w+=A,a/=256,i-=8);for(s=s<<i|a,f+=i;f>0;t[r+w]=s&255,w+=A,s/=256,f-=8);t[r+w-A]|=S*128};(function(t){const e=Bl,r=mp,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=W,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i;const{Uint8Array:o,ArrayBuffer:s,SharedArrayBuffer:a}=globalThis;u.TYPED_ARRAY_SUPPORT=l(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const c=new o(1),d={foo:function(){return 42}};return Object.setPrototypeOf(d,o.prototype),Object.setPrototypeOf(c,d),c.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function f(c){if(c>i)throw new RangeError('The value "'+c+'" is invalid for option "size"');const d=new o(c);return Object.setPrototypeOf(d,u.prototype),d}function u(c,d,g){if(typeof c=="number"){if(typeof d=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return A(c)}return p(c,d,g)}u.poolSize=8192;function p(c,d,g){if(typeof c=="string")return S(c,d);if(s.isView(c))return I(c);if(c==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c);if(Je(c,s)||c&&Je(c.buffer,s)||typeof a<"u"&&(Je(c,a)||c&&Je(c.buffer,a)))return N(c,d,g);if(typeof c=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const O=c.valueOf&&c.valueOf();if(O!=null&&O!==c)return u.from(O,d,g);const M=B(c);if(M)return M;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof c[Symbol.toPrimitive]=="function")return u.from(c[Symbol.toPrimitive]("string"),d,g);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c)}u.from=function(c,d,g){return p(c,d,g)},Object.setPrototypeOf(u.prototype,o.prototype),Object.setPrototypeOf(u,o);function y(c){if(typeof c!="number")throw new TypeError('"size" argument must be of type number');if(c<0)throw new RangeError('The value "'+c+'" is invalid for option "size"')}function w(c,d,g){return y(c),c<=0?f(c):d!==void 0?typeof g=="string"?f(c).fill(d,g):f(c).fill(d):f(c)}u.alloc=function(c,d,g){return w(c,d,g)};function A(c){return y(c),f(c<0?0:V(c)|0)}u.allocUnsafe=function(c){return A(c)},u.allocUnsafeSlow=function(c){return A(c)};function S(c,d){if((typeof d!="string"||d==="")&&(d="utf8"),!u.isEncoding(d))throw new TypeError("Unknown encoding: "+d);const g=Y(c,d)|0;let O=f(g);const M=O.write(c,d);return M!==g&&(O=O.slice(0,M)),O}function k(c){const d=c.length<0?0:V(c.length)|0,g=f(d);for(let O=0;O<d;O+=1)g[O]=c[O]&255;return g}function I(c){if(Je(c,o)){const d=new o(c);return N(d.buffer,d.byteOffset,d.byteLength)}return k(c)}function N(c,d,g){if(d<0||c.byteLength<d)throw new RangeError('"offset" is outside of buffer bounds');if(c.byteLength<d+(g||0))throw new RangeError('"length" is outside of buffer bounds');let O;return d===void 0&&g===void 0?O=new o(c):g===void 0?O=new o(c,d):O=new o(c,d,g),Object.setPrototypeOf(O,u.prototype),O}function B(c){if(u.isBuffer(c)){const d=V(c.length)|0,g=f(d);return g.length===0||c.copy(g,0,0,d),g}if(c.length!==void 0)return typeof c.length!="number"||Vt(c.length)?f(0):k(c);if(c.type==="Buffer"&&Array.isArray(c.data))return k(c.data)}function V(c){if(c>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return c|0}function W(c){return+c!=c&&(c=0),u.alloc(+c)}u.isBuffer=function(c){return c!=null&&c._isBuffer===!0&&c!==u.prototype},u.compare=function(c,d){if(Je(c,o)&&(c=u.from(c,c.offset,c.byteLength)),Je(d,o)&&(d=u.from(d,d.offset,d.byteLength)),!u.isBuffer(c)||!u.isBuffer(d))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(c===d)return 0;let g=c.length,O=d.length;for(let M=0,re=Math.min(g,O);M<re;++M)if(c[M]!==d[M]){g=c[M],O=d[M];break}return g<O?-1:O<g?1:0},u.isEncoding=function(c){switch(String(c).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(c,d){if(!Array.isArray(c))throw new TypeError('"list" argument must be an Array of Buffers');if(c.length===0)return u.alloc(0);let g;if(d===void 0)for(d=0,g=0;g<c.length;++g)d+=c[g].length;const O=u.allocUnsafe(d);let M=0;for(g=0;g<c.length;++g){let re=c[g];if(Je(re,o))M+re.length>O.length?(u.isBuffer(re)||(re=u.from(re)),re.copy(O,M)):o.prototype.set.call(O,re,M);else if(u.isBuffer(re))re.copy(O,M);else throw new TypeError('"list" argument must be an Array of Buffers');M+=re.length}return O};function Y(c,d){if(u.isBuffer(c))return c.length;if(s.isView(c)||Je(c,s))return c.byteLength;if(typeof c!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof c);const g=c.length,O=arguments.length>2&&arguments[2]===!0;if(!O&&g===0)return 0;let M=!1;for(;;)switch(d){case"ascii":case"latin1":case"binary":return g;case"utf8":case"utf-8":return at(c).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g*2;case"hex":return g>>>1;case"base64":return Ke(c).length;default:if(M)return O?-1:at(c).length;d=(""+d).toLowerCase(),M=!0}}u.byteLength=Y;function H(c,d,g){let O=!1;if((d===void 0||d<0)&&(d=0),d>this.length||((g===void 0||g>this.length)&&(g=this.length),g<=0)||(g>>>=0,d>>>=0,g<=d))return"";for(c||(c="utf8");;)switch(c){case"hex":return D(this,d,g);case"utf8":case"utf-8":return X(this,d,g);case"ascii":return K(this,d,g);case"latin1":case"binary":return Z(this,d,g);case"base64":return z(this,d,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,d,g);default:if(O)throw new TypeError("Unknown encoding: "+c);c=(c+"").toLowerCase(),O=!0}}u.prototype._isBuffer=!0;function ie(c,d,g){const O=c[d];c[d]=c[g],c[g]=O}u.prototype.swap16=function(){const c=this.length;if(c%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let d=0;d<c;d+=2)ie(this,d,d+1);return this},u.prototype.swap32=function(){const c=this.length;if(c%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let d=0;d<c;d+=4)ie(this,d,d+3),ie(this,d+1,d+2);return this},u.prototype.swap64=function(){const c=this.length;if(c%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let d=0;d<c;d+=8)ie(this,d,d+7),ie(this,d+1,d+6),ie(this,d+2,d+5),ie(this,d+3,d+4);return this},u.prototype.toString=function(){const c=this.length;return c===0?"":arguments.length===0?X(this,0,c):H.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(c){if(!u.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:u.compare(this,c)===0},u.prototype.inspect=function(){let c="";const d=t.INSPECT_MAX_BYTES;return c=this.toString("hex",0,d).replace(/(.{2})/g,"$1 ").trim(),this.length>d&&(c+=" ... "),"<Buffer "+c+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(c,d,g,O,M){if(Je(c,o)&&(c=u.from(c,c.offset,c.byteLength)),!u.isBuffer(c))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof c);if(d===void 0&&(d=0),g===void 0&&(g=c?c.length:0),O===void 0&&(O=0),M===void 0&&(M=this.length),d<0||g>c.length||O<0||M>this.length)throw new RangeError("out of range index");if(O>=M&&d>=g)return 0;if(O>=M)return-1;if(d>=g)return 1;if(d>>>=0,g>>>=0,O>>>=0,M>>>=0,this===c)return 0;let re=M-O,fe=g-d;const Ue=Math.min(re,fe),Ge=this.slice(O,M),Ne=c.slice(d,g);for(let Oe=0;Oe<Ue;++Oe)if(Ge[Oe]!==Ne[Oe]){re=Ge[Oe],fe=Ne[Oe];break}return re<fe?-1:fe<re?1:0};function T(c,d,g,O,M){if(c.length===0)return-1;if(typeof g=="string"?(O=g,g=0):g>2147483647?g=2147483647:g<-2147483648&&(g=-2147483648),g=+g,Vt(g)&&(g=M?0:c.length-1),g<0&&(g=c.length+g),g>=c.length){if(M)return-1;g=c.length-1}else if(g<0)if(M)g=0;else return-1;if(typeof d=="string"&&(d=u.from(d,O)),u.isBuffer(d))return d.length===0?-1:C(c,d,g,O,M);if(typeof d=="number")return d=d&255,typeof o.prototype.indexOf=="function"?M?o.prototype.indexOf.call(c,d,g):o.prototype.lastIndexOf.call(c,d,g):C(c,[d],g,O,M);throw new TypeError("val must be string, number or Buffer")}function C(c,d,g,O,M){let re=1,fe=c.length,Ue=d.length;if(O!==void 0&&(O=String(O).toLowerCase(),O==="ucs2"||O==="ucs-2"||O==="utf16le"||O==="utf-16le")){if(c.length<2||d.length<2)return-1;re=2,fe/=2,Ue/=2,g/=2}function Ge(Oe,Fe){return re===1?Oe[Fe]:Oe.readUInt16BE(Fe*re)}let Ne;if(M){let Oe=-1;for(Ne=g;Ne<fe;Ne++)if(Ge(c,Ne)===Ge(d,Oe===-1?0:Ne-Oe)){if(Oe===-1&&(Oe=Ne),Ne-Oe+1===Ue)return Oe*re}else Oe!==-1&&(Ne-=Ne-Oe),Oe=-1}else for(g+Ue>fe&&(g=fe-Ue),Ne=g;Ne>=0;Ne--){let Oe=!0;for(let Fe=0;Fe<Ue;Fe++)if(Ge(c,Ne+Fe)!==Ge(d,Fe)){Oe=!1;break}if(Oe)return Ne}return-1}u.prototype.includes=function(c,d,g){return this.indexOf(c,d,g)!==-1},u.prototype.indexOf=function(c,d,g){return T(this,c,d,g,!0)},u.prototype.lastIndexOf=function(c,d,g){return T(this,c,d,g,!1)};function G(c,d,g,O){g=Number(g)||0;const M=c.length-g;O?(O=Number(O),O>M&&(O=M)):O=M;const re=d.length;O>re/2&&(O=re/2);let fe;for(fe=0;fe<O;++fe){const Ue=parseInt(d.substr(fe*2,2),16);if(Vt(Ue))return fe;c[g+fe]=Ue}return fe}function U(c,d,g,O){return ft(at(d,c.length-g),c,g,O)}function P(c,d,g,O){return ft(Ie(d),c,g,O)}function L(c,d,g,O){return ft(Ke(d),c,g,O)}function R(c,d,g,O){return ft(He(d,c.length-g),c,g,O)}u.prototype.write=function(c,d,g,O){if(d===void 0)O="utf8",g=this.length,d=0;else if(g===void 0&&typeof d=="string")O=d,g=this.length,d=0;else if(isFinite(d))d=d>>>0,isFinite(g)?(g=g>>>0,O===void 0&&(O="utf8")):(O=g,g=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const M=this.length-d;if((g===void 0||g>M)&&(g=M),c.length>0&&(g<0||d<0)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");O||(O="utf8");let re=!1;for(;;)switch(O){case"hex":return G(this,c,d,g);case"utf8":case"utf-8":return U(this,c,d,g);case"ascii":case"latin1":case"binary":return P(this,c,d,g);case"base64":return L(this,c,d,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,c,d,g);default:if(re)throw new TypeError("Unknown encoding: "+O);O=(""+O).toLowerCase(),re=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function z(c,d,g){return d===0&&g===c.length?e.fromByteArray(c):e.fromByteArray(c.slice(d,g))}function X(c,d,g){g=Math.min(c.length,g);const O=[];let M=d;for(;M<g;){const re=c[M];let fe=null,Ue=re>239?4:re>223?3:re>191?2:1;if(M+Ue<=g){let Ge,Ne,Oe,Fe;switch(Ue){case 1:re<128&&(fe=re);break;case 2:Ge=c[M+1],(Ge&192)===128&&(Fe=(re&31)<<6|Ge&63,Fe>127&&(fe=Fe));break;case 3:Ge=c[M+1],Ne=c[M+2],(Ge&192)===128&&(Ne&192)===128&&(Fe=(re&15)<<12|(Ge&63)<<6|Ne&63,Fe>2047&&(Fe<55296||Fe>57343)&&(fe=Fe));break;case 4:Ge=c[M+1],Ne=c[M+2],Oe=c[M+3],(Ge&192)===128&&(Ne&192)===128&&(Oe&192)===128&&(Fe=(re&15)<<18|(Ge&63)<<12|(Ne&63)<<6|Oe&63,Fe>65535&&Fe<1114112&&(fe=Fe))}}fe===null?(fe=65533,Ue=1):fe>65535&&(fe-=65536,O.push(fe>>>10&1023|55296),fe=56320|fe&1023),O.push(fe),M+=Ue}return _(O)}const ee=4096;function _(c){const d=c.length;if(d<=ee)return String.fromCharCode.apply(String,c);let g="",O=0;for(;O<d;)g+=String.fromCharCode.apply(String,c.slice(O,O+=ee));return g}function K(c,d,g){let O="";g=Math.min(c.length,g);for(let M=d;M<g;++M)O+=String.fromCharCode(c[M]&127);return O}function Z(c,d,g){let O="";g=Math.min(c.length,g);for(let M=d;M<g;++M)O+=String.fromCharCode(c[M]);return O}function D(c,d,g){const O=c.length;(!d||d<0)&&(d=0),(!g||g<0||g>O)&&(g=O);let M="";for(let re=d;re<g;++re)M+=kr[c[re]];return M}function J(c,d,g){const O=c.slice(d,g);let M="";for(let re=0;re<O.length-1;re+=2)M+=String.fromCharCode(O[re]+O[re+1]*256);return M}u.prototype.slice=function(c,d){const g=this.length;c=~~c,d=d===void 0?g:~~d,c<0?(c+=g,c<0&&(c=0)):c>g&&(c=g),d<0?(d+=g,d<0&&(d=0)):d>g&&(d=g),d<c&&(d=c);const O=this.subarray(c,d);return Object.setPrototypeOf(O,u.prototype),O};function j(c,d,g){if(c%1!==0||c<0)throw new RangeError("offset is not uint");if(c+d>g)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(c,d,g){c=c>>>0,d=d>>>0,g||j(c,d,this.length);let O=this[c],M=1,re=0;for(;++re<d&&(M*=256);)O+=this[c+re]*M;return O},u.prototype.readUintBE=u.prototype.readUIntBE=function(c,d,g){c=c>>>0,d=d>>>0,g||j(c,d,this.length);let O=this[c+--d],M=1;for(;d>0&&(M*=256);)O+=this[c+--d]*M;return O},u.prototype.readUint8=u.prototype.readUInt8=function(c,d){return c=c>>>0,d||j(c,1,this.length),this[c]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(c,d){return c=c>>>0,d||j(c,2,this.length),this[c]|this[c+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(c,d){return c=c>>>0,d||j(c,2,this.length),this[c]<<8|this[c+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(c,d){return c=c>>>0,d||j(c,4,this.length),(this[c]|this[c+1]<<8|this[c+2]<<16)+this[c+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(c,d){return c=c>>>0,d||j(c,4,this.length),this[c]*16777216+(this[c+1]<<16|this[c+2]<<8|this[c+3])},u.prototype.readBigUInt64LE=yt(function(c){c=c>>>0,Qe(c,"offset");const d=this[c],g=this[c+7];(d===void 0||g===void 0)&&qe(c,this.length-8);const O=d+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24,M=this[++c]+this[++c]*2**8+this[++c]*2**16+g*2**24;return BigInt(O)+(BigInt(M)<<BigInt(32))}),u.prototype.readBigUInt64BE=yt(function(c){c=c>>>0,Qe(c,"offset");const d=this[c],g=this[c+7];(d===void 0||g===void 0)&&qe(c,this.length-8);const O=d*2**24+this[++c]*2**16+this[++c]*2**8+this[++c],M=this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+g;return(BigInt(O)<<BigInt(32))+BigInt(M)}),u.prototype.readIntLE=function(c,d,g){c=c>>>0,d=d>>>0,g||j(c,d,this.length);let O=this[c],M=1,re=0;for(;++re<d&&(M*=256);)O+=this[c+re]*M;return M*=128,O>=M&&(O-=Math.pow(2,8*d)),O},u.prototype.readIntBE=function(c,d,g){c=c>>>0,d=d>>>0,g||j(c,d,this.length);let O=d,M=1,re=this[c+--O];for(;O>0&&(M*=256);)re+=this[c+--O]*M;return M*=128,re>=M&&(re-=Math.pow(2,8*d)),re},u.prototype.readInt8=function(c,d){return c=c>>>0,d||j(c,1,this.length),this[c]&128?(255-this[c]+1)*-1:this[c]},u.prototype.readInt16LE=function(c,d){c=c>>>0,d||j(c,2,this.length);const g=this[c]|this[c+1]<<8;return g&32768?g|4294901760:g},u.prototype.readInt16BE=function(c,d){c=c>>>0,d||j(c,2,this.length);const g=this[c+1]|this[c]<<8;return g&32768?g|4294901760:g},u.prototype.readInt32LE=function(c,d){return c=c>>>0,d||j(c,4,this.length),this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24},u.prototype.readInt32BE=function(c,d){return c=c>>>0,d||j(c,4,this.length),this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]},u.prototype.readBigInt64LE=yt(function(c){c=c>>>0,Qe(c,"offset");const d=this[c],g=this[c+7];(d===void 0||g===void 0)&&qe(c,this.length-8);const O=this[c+4]+this[c+5]*2**8+this[c+6]*2**16+(g<<24);return(BigInt(O)<<BigInt(32))+BigInt(d+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24)}),u.prototype.readBigInt64BE=yt(function(c){c=c>>>0,Qe(c,"offset");const d=this[c],g=this[c+7];(d===void 0||g===void 0)&&qe(c,this.length-8);const O=(d<<24)+this[++c]*2**16+this[++c]*2**8+this[++c];return(BigInt(O)<<BigInt(32))+BigInt(this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+g)}),u.prototype.readFloatLE=function(c,d){return c=c>>>0,d||j(c,4,this.length),r.read(this,c,!0,23,4)},u.prototype.readFloatBE=function(c,d){return c=c>>>0,d||j(c,4,this.length),r.read(this,c,!1,23,4)},u.prototype.readDoubleLE=function(c,d){return c=c>>>0,d||j(c,8,this.length),r.read(this,c,!0,52,8)},u.prototype.readDoubleBE=function(c,d){return c=c>>>0,d||j(c,8,this.length),r.read(this,c,!1,52,8)};function te(c,d,g,O,M,re){if(!u.isBuffer(c))throw new TypeError('"buffer" argument must be a Buffer instance');if(d>M||d<re)throw new RangeError('"value" argument is out of bounds');if(g+O>c.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(c,d,g,O){if(c=+c,d=d>>>0,g=g>>>0,!O){const fe=Math.pow(2,8*g)-1;te(this,c,d,g,fe,0)}let M=1,re=0;for(this[d]=c&255;++re<g&&(M*=256);)this[d+re]=c/M&255;return d+g},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(c,d,g,O){if(c=+c,d=d>>>0,g=g>>>0,!O){const fe=Math.pow(2,8*g)-1;te(this,c,d,g,fe,0)}let M=g-1,re=1;for(this[d+M]=c&255;--M>=0&&(re*=256);)this[d+M]=c/re&255;return d+g},u.prototype.writeUint8=u.prototype.writeUInt8=function(c,d,g){return c=+c,d=d>>>0,g||te(this,c,d,1,255,0),this[d]=c&255,d+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(c,d,g){return c=+c,d=d>>>0,g||te(this,c,d,2,65535,0),this[d]=c&255,this[d+1]=c>>>8,d+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(c,d,g){return c=+c,d=d>>>0,g||te(this,c,d,2,65535,0),this[d]=c>>>8,this[d+1]=c&255,d+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(c,d,g){return c=+c,d=d>>>0,g||te(this,c,d,4,4294967295,0),this[d+3]=c>>>24,this[d+2]=c>>>16,this[d+1]=c>>>8,this[d]=c&255,d+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(c,d,g){return c=+c,d=d>>>0,g||te(this,c,d,4,4294967295,0),this[d]=c>>>24,this[d+1]=c>>>16,this[d+2]=c>>>8,this[d+3]=c&255,d+4};function ae(c,d,g,O,M){ze(d,O,M,c,g,7);let re=Number(d&BigInt(4294967295));c[g++]=re,re=re>>8,c[g++]=re,re=re>>8,c[g++]=re,re=re>>8,c[g++]=re;let fe=Number(d>>BigInt(32)&BigInt(4294967295));return c[g++]=fe,fe=fe>>8,c[g++]=fe,fe=fe>>8,c[g++]=fe,fe=fe>>8,c[g++]=fe,g}function ce(c,d,g,O,M){ze(d,O,M,c,g,7);let re=Number(d&BigInt(4294967295));c[g+7]=re,re=re>>8,c[g+6]=re,re=re>>8,c[g+5]=re,re=re>>8,c[g+4]=re;let fe=Number(d>>BigInt(32)&BigInt(4294967295));return c[g+3]=fe,fe=fe>>8,c[g+2]=fe,fe=fe>>8,c[g+1]=fe,fe=fe>>8,c[g]=fe,g+8}u.prototype.writeBigUInt64LE=yt(function(c,d=0){return ae(this,c,d,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=yt(function(c,d=0){return ce(this,c,d,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(c,d,g,O){if(c=+c,d=d>>>0,!O){const Ue=Math.pow(2,8*g-1);te(this,c,d,g,Ue-1,-Ue)}let M=0,re=1,fe=0;for(this[d]=c&255;++M<g&&(re*=256);)c<0&&fe===0&&this[d+M-1]!==0&&(fe=1),this[d+M]=(c/re>>0)-fe&255;return d+g},u.prototype.writeIntBE=function(c,d,g,O){if(c=+c,d=d>>>0,!O){const Ue=Math.pow(2,8*g-1);te(this,c,d,g,Ue-1,-Ue)}let M=g-1,re=1,fe=0;for(this[d+M]=c&255;--M>=0&&(re*=256);)c<0&&fe===0&&this[d+M+1]!==0&&(fe=1),this[d+M]=(c/re>>0)-fe&255;return d+g},u.prototype.writeInt8=function(c,d,g){return c=+c,d=d>>>0,g||te(this,c,d,1,127,-128),c<0&&(c=255+c+1),this[d]=c&255,d+1},u.prototype.writeInt16LE=function(c,d,g){return c=+c,d=d>>>0,g||te(this,c,d,2,32767,-32768),this[d]=c&255,this[d+1]=c>>>8,d+2},u.prototype.writeInt16BE=function(c,d,g){return c=+c,d=d>>>0,g||te(this,c,d,2,32767,-32768),this[d]=c>>>8,this[d+1]=c&255,d+2},u.prototype.writeInt32LE=function(c,d,g){return c=+c,d=d>>>0,g||te(this,c,d,4,2147483647,-2147483648),this[d]=c&255,this[d+1]=c>>>8,this[d+2]=c>>>16,this[d+3]=c>>>24,d+4},u.prototype.writeInt32BE=function(c,d,g){return c=+c,d=d>>>0,g||te(this,c,d,4,2147483647,-2147483648),c<0&&(c=4294967295+c+1),this[d]=c>>>24,this[d+1]=c>>>16,this[d+2]=c>>>8,this[d+3]=c&255,d+4},u.prototype.writeBigInt64LE=yt(function(c,d=0){return ae(this,c,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=yt(function(c,d=0){return ce(this,c,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function pe(c,d,g,O,M,re){if(g+O>c.length)throw new RangeError("Index out of range");if(g<0)throw new RangeError("Index out of range")}function le(c,d,g,O,M){return d=+d,g=g>>>0,M||pe(c,d,g,4),r.write(c,d,g,O,23,4),g+4}u.prototype.writeFloatLE=function(c,d,g){return le(this,c,d,!0,g)},u.prototype.writeFloatBE=function(c,d,g){return le(this,c,d,!1,g)};function ye(c,d,g,O,M){return d=+d,g=g>>>0,M||pe(c,d,g,8),r.write(c,d,g,O,52,8),g+8}u.prototype.writeDoubleLE=function(c,d,g){return ye(this,c,d,!0,g)},u.prototype.writeDoubleBE=function(c,d,g){return ye(this,c,d,!1,g)},u.prototype.copy=function(c,d,g,O){if(!u.isBuffer(c))throw new TypeError("argument should be a Buffer");if(g||(g=0),!O&&O!==0&&(O=this.length),d>=c.length&&(d=c.length),d||(d=0),O>0&&O<g&&(O=g),O===g||c.length===0||this.length===0)return 0;if(d<0)throw new RangeError("targetStart out of bounds");if(g<0||g>=this.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("sourceEnd out of bounds");O>this.length&&(O=this.length),c.length-d<O-g&&(O=c.length-d+g);const M=O-g;return this===c&&typeof o.prototype.copyWithin=="function"?this.copyWithin(d,g,O):o.prototype.set.call(c,this.subarray(g,O),d),M},u.prototype.fill=function(c,d,g,O){if(typeof c=="string"){if(typeof d=="string"?(O=d,d=0,g=this.length):typeof g=="string"&&(O=g,g=this.length),O!==void 0&&typeof O!="string")throw new TypeError("encoding must be a string");if(typeof O=="string"&&!u.isEncoding(O))throw new TypeError("Unknown encoding: "+O);if(c.length===1){const re=c.charCodeAt(0);(O==="utf8"&&re<128||O==="latin1")&&(c=re)}}else typeof c=="number"?c=c&255:typeof c=="boolean"&&(c=Number(c));if(d<0||this.length<d||this.length<g)throw new RangeError("Out of range index");if(g<=d)return this;d=d>>>0,g=g===void 0?this.length:g>>>0,c||(c=0);let M;if(typeof c=="number")for(M=d;M<g;++M)this[M]=c;else{const re=u.isBuffer(c)?c:u.from(c,O),fe=re.length;if(fe===0)throw new TypeError('The value "'+c+'" is invalid for argument "value"');for(M=0;M<g-d;++M)this[M+d]=re[M%fe]}return this};const Ae={};function xe(c,d,g){Ae[c]=class extends g{constructor(){super(),Object.defineProperty(this,"message",{value:d.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${c}]`,this.stack,delete this.name}get code(){return c}set code(O){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:O,writable:!0})}toString(){return`${this.name} [${c}]: ${this.message}`}}}xe("ERR_BUFFER_OUT_OF_BOUNDS",function(c){return c?`${c} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),xe("ERR_INVALID_ARG_TYPE",function(c,d){return`The "${c}" argument must be of type number. Received type ${typeof d}`},TypeError),xe("ERR_OUT_OF_RANGE",function(c,d,g){let O=`The value of "${c}" is out of range.`,M=g;return Number.isInteger(g)&&Math.abs(g)>2**32?M=Be(String(g)):typeof g=="bigint"&&(M=String(g),(g>BigInt(2)**BigInt(32)||g<-(BigInt(2)**BigInt(32)))&&(M=Be(M)),M+="n"),O+=` It must be ${d}. Received ${M}`,O},RangeError);function Be(c){let d="",g=c.length;const O=c[0]==="-"?1:0;for(;g>=O+4;g-=3)d=`_${c.slice(g-3,g)}${d}`;return`${c.slice(0,g)}${d}`}function We(c,d,g){Qe(d,"offset"),(c[d]===void 0||c[d+g]===void 0)&&qe(d,c.length-(g+1))}function ze(c,d,g,O,M,re){if(c>g||c<d){const fe=typeof d=="bigint"?"n":"";let Ue;throw d===0||d===BigInt(0)?Ue=`>= 0${fe} and < 2${fe} ** ${(re+1)*8}${fe}`:Ue=`>= -(2${fe} ** ${(re+1)*8-1}${fe}) and < 2 ** ${(re+1)*8-1}${fe}`,new Ae.ERR_OUT_OF_RANGE("value",Ue,c)}We(O,M,re)}function Qe(c,d){if(typeof c!="number")throw new Ae.ERR_INVALID_ARG_TYPE(d,"number",c)}function qe(c,d,g){throw Math.floor(c)!==c?(Qe(c,g),new Ae.ERR_OUT_OF_RANGE("offset","an integer",c)):d<0?new Ae.ERR_BUFFER_OUT_OF_BOUNDS:new Ae.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${d}`,c)}const lt=/[^+/0-9A-Za-z-_]/g;function me(c){if(c=c.split("=")[0],c=c.trim().replace(lt,""),c.length<2)return"";for(;c.length%4!==0;)c=c+"=";return c}function at(c,d){d=d||1/0;let g;const O=c.length;let M=null;const re=[];for(let fe=0;fe<O;++fe){if(g=c.charCodeAt(fe),g>55295&&g<57344){if(!M){if(g>56319){(d-=3)>-1&&re.push(239,191,189);continue}else if(fe+1===O){(d-=3)>-1&&re.push(239,191,189);continue}M=g;continue}if(g<56320){(d-=3)>-1&&re.push(239,191,189),M=g;continue}g=(M-55296<<10|g-56320)+65536}else M&&(d-=3)>-1&&re.push(239,191,189);if(M=null,g<128){if((d-=1)<0)break;re.push(g)}else if(g<2048){if((d-=2)<0)break;re.push(g>>6|192,g&63|128)}else if(g<65536){if((d-=3)<0)break;re.push(g>>12|224,g>>6&63|128,g&63|128)}else if(g<1114112){if((d-=4)<0)break;re.push(g>>18|240,g>>12&63|128,g>>6&63|128,g&63|128)}else throw new Error("Invalid code point")}return re}function Ie(c){const d=[];for(let g=0;g<c.length;++g)d.push(c.charCodeAt(g)&255);return d}function He(c,d){let g,O,M;const re=[];for(let fe=0;fe<c.length&&!((d-=2)<0);++fe)g=c.charCodeAt(fe),O=g>>8,M=g%256,re.push(M),re.push(O);return re}function Ke(c){return e.toByteArray(me(c))}function ft(c,d,g,O){let M;for(M=0;M<O&&!(M+g>=d.length||M>=c.length);++M)d[M+g]=c[M];return M}function Je(c,d){return c instanceof d||c!=null&&c.constructor!=null&&c.constructor.name!=null&&c.constructor.name===d.name}function Vt(c){return c!==c}const kr=(function(){const c="0123456789abcdef",d=new Array(256);for(let g=0;g<16;++g){const O=g*16;for(let M=0;M<16;++M)d[O+M]=c[g]+c[M]}return d})();function yt(c){return typeof BigInt>"u"?rr:c}function rr(){throw new Error("BigInt not supported")}})(u3);const Pt=u3.Buffer,Nk=4,Tb=0,Bb=1,Hk=2;function Hs(t){let e=t.length;for(;--e>=0;)t[e]=0}const Dk=0,l3=1,zk=2,Mk=3,Fk=258,bp=29,eu=256,Pa=eu+1+bp,gs=30,wp=19,f3=2*Pa+1,bo=15,xf=16,Kk=7,vp=256,h3=16,d3=17,p3=18,rd=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),rc=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),jk=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),g3=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Vk=512,ii=new Array((Pa+2)*2);Hs(ii);const va=new Array(gs*2);Hs(va);const Oa=new Array(Vk);Hs(Oa);const Ua=new Array(Fk-Mk+1);Hs(Ua);const Ep=new Array(bp);Hs(Ep);const Tc=new Array(gs);Hs(Tc);function Tf(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}let y3,m3,b3;function Bf(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}const w3=t=>t<256?Oa[t]:Oa[256+(t>>>7)],La=(t,e)=>{t.pending_buf[t.pending++]=e&255,t.pending_buf[t.pending++]=e>>>8&255},xr=(t,e,r)=>{t.bi_valid>xf-r?(t.bi_buf|=e<<t.bi_valid&65535,La(t,t.bi_buf),t.bi_buf=e>>xf-t.bi_valid,t.bi_valid+=r-xf):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)},$n=(t,e,r)=>{xr(t,r[e*2],r[e*2+1])},v3=(t,e)=>{let r=0;do r|=t&1,t>>>=1,r<<=1;while(--e>0);return r>>>1},Wk=t=>{t.bi_valid===16?(La(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)},qk=(t,e)=>{const r=e.dyn_tree,n=e.max_code,i=e.stat_desc.static_tree,o=e.stat_desc.has_stree,s=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,l=e.stat_desc.max_length;let f,u,p,y,w,A,S=0;for(y=0;y<=bo;y++)t.bl_count[y]=0;for(r[t.heap[t.heap_max]*2+1]=0,f=t.heap_max+1;f<f3;f++)u=t.heap[f],y=r[r[u*2+1]*2+1]+1,y>l&&(y=l,S++),r[u*2+1]=y,!(u>n)&&(t.bl_count[y]++,w=0,u>=a&&(w=s[u-a]),A=r[u*2],t.opt_len+=A*(y+w),o&&(t.static_len+=A*(i[u*2+1]+w)));if(S!==0){do{for(y=l-1;t.bl_count[y]===0;)y--;t.bl_count[y]--,t.bl_count[y+1]+=2,t.bl_count[l]--,S-=2}while(S>0);for(y=l;y!==0;y--)for(u=t.bl_count[y];u!==0;)p=t.heap[--f],!(p>n)&&(r[p*2+1]!==y&&(t.opt_len+=(y-r[p*2+1])*r[p*2],r[p*2+1]=y),u--)}},E3=(t,e,r)=>{const n=new Array(bo+1);let i=0,o,s;for(o=1;o<=bo;o++)i=i+r[o-1]<<1,n[o]=i;for(s=0;s<=e;s++){let a=t[s*2+1];a!==0&&(t[s*2]=v3(n[a]++,a))}},Gk=()=>{let t,e,r,n,i;const o=new Array(bo+1);for(r=0,n=0;n<bp-1;n++)for(Ep[n]=r,t=0;t<1<<rd[n];t++)Ua[r++]=n;for(Ua[r-1]=n,i=0,n=0;n<16;n++)for(Tc[n]=i,t=0;t<1<<rc[n];t++)Oa[i++]=n;for(i>>=7;n<gs;n++)for(Tc[n]=i<<7,t=0;t<1<<rc[n]-7;t++)Oa[256+i++]=n;for(e=0;e<=bo;e++)o[e]=0;for(t=0;t<=143;)ii[t*2+1]=8,t++,o[8]++;for(;t<=255;)ii[t*2+1]=9,t++,o[9]++;for(;t<=279;)ii[t*2+1]=7,t++,o[7]++;for(;t<=287;)ii[t*2+1]=8,t++,o[8]++;for(E3(ii,Pa+1,o),t=0;t<gs;t++)va[t*2+1]=5,va[t*2]=v3(t,5);y3=new Tf(ii,rd,eu+1,Pa,bo),m3=new Tf(va,rc,0,gs,bo),b3=new Tf(new Array(0),jk,0,wp,Kk)},S3=t=>{let e;for(e=0;e<Pa;e++)t.dyn_ltree[e*2]=0;for(e=0;e<gs;e++)t.dyn_dtree[e*2]=0;for(e=0;e<wp;e++)t.bl_tree[e*2]=0;t.dyn_ltree[vp*2]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},A3=t=>{t.bi_valid>8?La(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},Pb=(t,e,r,n)=>{const i=e*2,o=r*2;return t[i]<t[o]||t[i]===t[o]&&n[e]<=n[r]},Pf=(t,e,r)=>{const n=t.heap[r];let i=r<<1;for(;i<=t.heap_len&&(i<t.heap_len&&Pb(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!Pb(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n},Ob=(t,e,r)=>{let n,i,o=0,s,a;if(t.sym_next!==0)do n=t.pending_buf[t.sym_buf+o++]&255,n+=(t.pending_buf[t.sym_buf+o++]&255)<<8,i=t.pending_buf[t.sym_buf+o++],n===0?$n(t,i,e):(s=Ua[i],$n(t,s+eu+1,e),a=rd[s],a!==0&&(i-=Ep[s],xr(t,i,a)),n--,s=w3(n),$n(t,s,r),a=rc[s],a!==0&&(n-=Tc[s],xr(t,n,a)));while(o<t.sym_next);$n(t,vp,e)},nd=(t,e)=>{const r=e.dyn_tree,n=e.stat_desc.static_tree,i=e.stat_desc.has_stree,o=e.stat_desc.elems;let s,a,l=-1,f;for(t.heap_len=0,t.heap_max=f3,s=0;s<o;s++)r[s*2]!==0?(t.heap[++t.heap_len]=l=s,t.depth[s]=0):r[s*2+1]=0;for(;t.heap_len<2;)f=t.heap[++t.heap_len]=l<2?++l:0,r[f*2]=1,t.depth[f]=0,t.opt_len--,i&&(t.static_len-=n[f*2+1]);for(e.max_code=l,s=t.heap_len>>1;s>=1;s--)Pf(t,r,s);f=o;do s=t.heap[1],t.heap[1]=t.heap[t.heap_len--],Pf(t,r,1),a=t.heap[1],t.heap[--t.heap_max]=s,t.heap[--t.heap_max]=a,r[f*2]=r[s*2]+r[a*2],t.depth[f]=(t.depth[s]>=t.depth[a]?t.depth[s]:t.depth[a])+1,r[s*2+1]=r[a*2+1]=f,t.heap[1]=f++,Pf(t,r,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],qk(t,e),E3(r,l,t.bl_count)},Ub=(t,e,r)=>{let n,i=-1,o,s=e[1],a=0,l=7,f=4;for(s===0&&(l=138,f=3),e[(r+1)*2+1]=65535,n=0;n<=r;n++)o=s,s=e[(n+1)*2+1],!(++a<l&&o===s)&&(a<f?t.bl_tree[o*2]+=a:o!==0?(o!==i&&t.bl_tree[o*2]++,t.bl_tree[h3*2]++):a<=10?t.bl_tree[d3*2]++:t.bl_tree[p3*2]++,a=0,i=o,s===0?(l=138,f=3):o===s?(l=6,f=3):(l=7,f=4))},Lb=(t,e,r)=>{let n,i=-1,o,s=e[1],a=0,l=7,f=4;for(s===0&&(l=138,f=3),n=0;n<=r;n++)if(o=s,s=e[(n+1)*2+1],!(++a<l&&o===s)){if(a<f)do $n(t,o,t.bl_tree);while(--a!==0);else o!==0?(o!==i&&($n(t,o,t.bl_tree),a--),$n(t,h3,t.bl_tree),xr(t,a-3,2)):a<=10?($n(t,d3,t.bl_tree),xr(t,a-3,3)):($n(t,p3,t.bl_tree),xr(t,a-11,7));a=0,i=o,s===0?(l=138,f=3):o===s?(l=6,f=3):(l=7,f=4)}},Xk=t=>{let e;for(Ub(t,t.dyn_ltree,t.l_desc.max_code),Ub(t,t.dyn_dtree,t.d_desc.max_code),nd(t,t.bl_desc),e=wp-1;e>=3&&t.bl_tree[g3[e]*2+1]===0;e--);return t.opt_len+=3*(e+1)+5+5+4,e},Yk=(t,e,r,n)=>{let i;for(xr(t,e-257,5),xr(t,r-1,5),xr(t,n-4,4),i=0;i<n;i++)xr(t,t.bl_tree[g3[i]*2+1],3);Lb(t,t.dyn_ltree,e-1),Lb(t,t.dyn_dtree,r-1)},Zk=t=>{let e=4093624447,r;for(r=0;r<=31;r++,e>>>=1)if(e&1&&t.dyn_ltree[r*2]!==0)return Tb;if(t.dyn_ltree[18]!==0||t.dyn_ltree[20]!==0||t.dyn_ltree[26]!==0)return Bb;for(r=32;r<eu;r++)if(t.dyn_ltree[r*2]!==0)return Bb;return Tb};let Rb=!1;const Qk=t=>{Rb||(Gk(),Rb=!0),t.l_desc=new Bf(t.dyn_ltree,y3),t.d_desc=new Bf(t.dyn_dtree,m3),t.bl_desc=new Bf(t.bl_tree,b3),t.bi_buf=0,t.bi_valid=0,S3(t)},k3=(t,e,r,n)=>{xr(t,(Dk<<1)+(n?1:0),3),A3(t),La(t,r),La(t,~r),r&&t.pending_buf.set(t.window.subarray(e,e+r),t.pending),t.pending+=r},Jk=t=>{xr(t,l3<<1,3),$n(t,vp,ii),Wk(t)},eI=(t,e,r,n)=>{let i,o,s=0;t.level>0?(t.strm.data_type===Hk&&(t.strm.data_type=Zk(t)),nd(t,t.l_desc),nd(t,t.d_desc),s=Xk(t),i=t.opt_len+3+7>>>3,o=t.static_len+3+7>>>3,o<=i&&(i=o)):i=o=r+5,r+4<=i&&e!==-1?k3(t,e,r,n):t.strategy===Nk||o===i?(xr(t,(l3<<1)+(n?1:0),3),Ob(t,ii,va)):(xr(t,(zk<<1)+(n?1:0),3),Yk(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),Ob(t,t.dyn_ltree,t.dyn_dtree)),S3(t),n&&A3(t)},tI=(t,e,r)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=r,e===0?t.dyn_ltree[r*2]++:(t.matches++,e--,t.dyn_ltree[(Ua[r]+eu+1)*2]++,t.dyn_dtree[w3(e)*2]++),t.sym_next===t.sym_end);var rI=Qk,nI=k3,iI=eI,oI=tI,sI=Jk,aI={_tr_init:rI,_tr_stored_block:nI,_tr_flush_block:iI,_tr_tally:oI,_tr_align:sI};const uI=(t,e,r,n)=>{let i=t&65535|0,o=t>>>16&65535|0,s=0;for(;r!==0;){s=r>2e3?2e3:r,r-=s;do i=i+e[n++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0};var Ra=uI;const cI=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},lI=new Uint32Array(cI()),fI=(t,e,r,n)=>{const i=lI,o=n+r;t^=-1;for(let s=n;s<o;s++)t=t>>>8^i[(t^e[s])&255];return t^-1};var Yt=fI,Oo={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},tu={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:hI,_tr_stored_block:id,_tr_flush_block:dI,_tr_tally:Qi,_tr_align:pI}=aI,{Z_NO_FLUSH:Ji,Z_PARTIAL_FLUSH:gI,Z_FULL_FLUSH:yI,Z_FINISH:tn,Z_BLOCK:$b,Z_OK:er,Z_STREAM_END:Cb,Z_STREAM_ERROR:Dn,Z_DATA_ERROR:mI,Z_BUF_ERROR:Of,Z_DEFAULT_COMPRESSION:bI,Z_FILTERED:wI,Z_HUFFMAN_ONLY:Ru,Z_RLE:vI,Z_FIXED:EI,Z_DEFAULT_STRATEGY:SI,Z_UNKNOWN:AI,Z_DEFLATED:Pl}=tu,kI=9,II=15,_I=8,xI=29,TI=256,od=TI+1+xI,BI=30,PI=19,OI=2*od+1,UI=15,it=3,Gi=258,zn=Gi+it+1,LI=32,_s=42,Sp=57,sd=69,ad=73,ud=91,cd=103,wo=113,aa=666,br=1,Ds=2,Uo=3,zs=4,RI=3,vo=(t,e)=>(t.msg=Oo[e],e),Nb=t=>t*2-(t>4?9:0),Vi=t=>{let e=t.length;for(;--e>=0;)t[e]=0},$I=t=>{let e,r,n,i=t.w_size;e=t.hash_size,n=e;do r=t.head[--n],t.head[n]=r>=i?r-i:0;while(--e);e=i,n=e;do r=t.prev[--n],t.prev[n]=r>=i?r-i:0;while(--e)};let CI=(t,e,r)=>(e<<t.hash_shift^r)&t.hash_mask,eo=CI;const Hr=t=>{const e=t.state;let r=e.pending;r>t.avail_out&&(r=t.avail_out),r!==0&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+r),t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,e.pending===0&&(e.pending_out=0))},Fr=(t,e)=>{dI(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Hr(t.strm)},ut=(t,e)=>{t.pending_buf[t.pending++]=e},Zs=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=e&255},ld=(t,e,r,n)=>{let i=t.avail_in;return i>n&&(i=n),i===0?0:(t.avail_in-=i,e.set(t.input.subarray(t.next_in,t.next_in+i),r),t.state.wrap===1?t.adler=Ra(t.adler,e,i,r):t.state.wrap===2&&(t.adler=Yt(t.adler,e,i,r)),t.next_in+=i,t.total_in+=i,i)},I3=(t,e)=>{let r=t.max_chain_length,n=t.strstart,i,o,s=t.prev_length,a=t.nice_match;const l=t.strstart>t.w_size-zn?t.strstart-(t.w_size-zn):0,f=t.window,u=t.w_mask,p=t.prev,y=t.strstart+Gi;let w=f[n+s-1],A=f[n+s];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do if(i=e,!(f[i+s]!==A||f[i+s-1]!==w||f[i]!==f[n]||f[++i]!==f[n+1])){n+=2,i++;do;while(f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&n<y);if(o=Gi-(y-n),n=y-Gi,o>s){if(t.match_start=e,s=o,o>=a)break;w=f[n+s-1],A=f[n+s]}}while((e=p[e&u])>l&&--r!==0);return s<=t.lookahead?s:t.lookahead},xs=t=>{const e=t.w_size;let r,n,i;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-zn)&&(t.window.set(t.window.subarray(e,e+e-n),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),$I(t),n+=e),t.strm.avail_in===0)break;if(r=ld(t.strm,t.window,t.strstart+t.lookahead,n),t.lookahead+=r,t.lookahead+t.insert>=it)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=eo(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=eo(t,t.ins_h,t.window[i+it-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<it)););}while(t.lookahead<zn&&t.strm.avail_in!==0)},_3=(t,e)=>{let r=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,n,i,o,s=0,a=t.strm.avail_in;do{if(n=65535,o=t.bi_valid+42>>3,t.strm.avail_out<o||(o=t.strm.avail_out-o,i=t.strstart-t.block_start,n>i+t.strm.avail_in&&(n=i+t.strm.avail_in),n>o&&(n=o),n<r&&(n===0&&e!==tn||e===Ji||n!==i+t.strm.avail_in)))break;s=e===tn&&n===i+t.strm.avail_in?1:0,id(t,0,0,s),t.pending_buf[t.pending-4]=n,t.pending_buf[t.pending-3]=n>>8,t.pending_buf[t.pending-2]=~n,t.pending_buf[t.pending-1]=~n>>8,Hr(t.strm),i&&(i>n&&(i=n),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+i),t.strm.next_out),t.strm.next_out+=i,t.strm.avail_out-=i,t.strm.total_out+=i,t.block_start+=i,n-=i),n&&(ld(t.strm,t.strm.output,t.strm.next_out,n),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n)}while(s===0);return a-=t.strm.avail_in,a&&(a>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=a&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-a,t.strm.next_in),t.strstart),t.strstart+=a,t.insert+=a>t.w_size-t.insert?t.w_size-t.insert:a),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),s?zs:e!==Ji&&e!==tn&&t.strm.avail_in===0&&t.strstart===t.block_start?Ds:(o=t.window_size-t.strstart,t.strm.avail_in>o&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,o+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),o>t.strm.avail_in&&(o=t.strm.avail_in),o&&(ld(t.strm,t.window,t.strstart,o),t.strstart+=o,t.insert+=o>t.w_size-t.insert?t.w_size-t.insert:o),t.high_water<t.strstart&&(t.high_water=t.strstart),o=t.bi_valid+42>>3,o=t.pending_buf_size-o>65535?65535:t.pending_buf_size-o,r=o>t.w_size?t.w_size:o,i=t.strstart-t.block_start,(i>=r||(i||e===tn)&&e!==Ji&&t.strm.avail_in===0&&i<=o)&&(n=i>o?o:i,s=e===tn&&t.strm.avail_in===0&&n===i?1:0,id(t,t.block_start,n,s),t.block_start+=n,Hr(t.strm)),s?Uo:br)},Uf=(t,e)=>{let r,n;for(;;){if(t.lookahead<zn){if(xs(t),t.lookahead<zn&&e===Ji)return br;if(t.lookahead===0)break}if(r=0,t.lookahead>=it&&(t.ins_h=eo(t,t.ins_h,t.window[t.strstart+it-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),r!==0&&t.strstart-r<=t.w_size-zn&&(t.match_length=I3(t,r)),t.match_length>=it)if(n=Qi(t,t.strstart-t.match_start,t.match_length-it),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=it){t.match_length--;do t.strstart++,t.ins_h=eo(t,t.ins_h,t.window[t.strstart+it-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=eo(t,t.ins_h,t.window[t.strstart+1]);else n=Qi(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(Fr(t,!1),t.strm.avail_out===0))return br}return t.insert=t.strstart<it-1?t.strstart:it-1,e===tn?(Fr(t,!0),t.strm.avail_out===0?Uo:zs):t.sym_next&&(Fr(t,!1),t.strm.avail_out===0)?br:Ds},Yo=(t,e)=>{let r,n,i;for(;;){if(t.lookahead<zn){if(xs(t),t.lookahead<zn&&e===Ji)return br;if(t.lookahead===0)break}if(r=0,t.lookahead>=it&&(t.ins_h=eo(t,t.ins_h,t.window[t.strstart+it-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=it-1,r!==0&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-zn&&(t.match_length=I3(t,r),t.match_length<=5&&(t.strategy===wI||t.match_length===it&&t.strstart-t.match_start>4096)&&(t.match_length=it-1)),t.prev_length>=it&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-it,n=Qi(t,t.strstart-1-t.prev_match,t.prev_length-it),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=i&&(t.ins_h=eo(t,t.ins_h,t.window[t.strstart+it-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=it-1,t.strstart++,n&&(Fr(t,!1),t.strm.avail_out===0))return br}else if(t.match_available){if(n=Qi(t,0,t.window[t.strstart-1]),n&&Fr(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return br}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=Qi(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<it-1?t.strstart:it-1,e===tn?(Fr(t,!0),t.strm.avail_out===0?Uo:zs):t.sym_next&&(Fr(t,!1),t.strm.avail_out===0)?br:Ds},NI=(t,e)=>{let r,n,i,o;const s=t.window;for(;;){if(t.lookahead<=Gi){if(xs(t),t.lookahead<=Gi&&e===Ji)return br;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=it&&t.strstart>0&&(i=t.strstart-1,n=s[i],n===s[++i]&&n===s[++i]&&n===s[++i])){o=t.strstart+Gi;do;while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<o);t.match_length=Gi-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=it?(r=Qi(t,1,t.match_length-it),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=Qi(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(Fr(t,!1),t.strm.avail_out===0))return br}return t.insert=0,e===tn?(Fr(t,!0),t.strm.avail_out===0?Uo:zs):t.sym_next&&(Fr(t,!1),t.strm.avail_out===0)?br:Ds},HI=(t,e)=>{let r;for(;;){if(t.lookahead===0&&(xs(t),t.lookahead===0)){if(e===Ji)return br;break}if(t.match_length=0,r=Qi(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(Fr(t,!1),t.strm.avail_out===0))return br}return t.insert=0,e===tn?(Fr(t,!0),t.strm.avail_out===0?Uo:zs):t.sym_next&&(Fr(t,!1),t.strm.avail_out===0)?br:Ds};function En(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}const ua=[new En(0,0,0,0,_3),new En(4,4,8,4,Uf),new En(4,5,16,8,Uf),new En(4,6,32,32,Uf),new En(4,4,16,16,Yo),new En(8,16,32,32,Yo),new En(8,16,128,128,Yo),new En(8,32,128,256,Yo),new En(32,128,258,1024,Yo),new En(32,258,258,4096,Yo)],DI=t=>{t.window_size=2*t.w_size,Vi(t.head),t.max_lazy_match=ua[t.level].max_lazy,t.good_match=ua[t.level].good_length,t.nice_match=ua[t.level].nice_length,t.max_chain_length=ua[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=it-1,t.match_available=0,t.ins_h=0};function zI(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Pl,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(OI*2),this.dyn_dtree=new Uint16Array((2*BI+1)*2),this.bl_tree=new Uint16Array((2*PI+1)*2),Vi(this.dyn_ltree),Vi(this.dyn_dtree),Vi(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(UI+1),this.heap=new Uint16Array(2*od+1),Vi(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*od+1),Vi(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const ru=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.status!==_s&&e.status!==Sp&&e.status!==sd&&e.status!==ad&&e.status!==ud&&e.status!==cd&&e.status!==wo&&e.status!==aa?1:0},x3=t=>{if(ru(t))return vo(t,Dn);t.total_in=t.total_out=0,t.data_type=AI;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?Sp:e.wrap?_s:wo,t.adler=e.wrap===2?0:1,e.last_flush=-2,hI(e),er},T3=t=>{const e=x3(t);return e===er&&DI(t.state),e},MI=(t,e)=>ru(t)||t.state.wrap!==2?Dn:(t.state.gzhead=e,er),B3=(t,e,r,n,i,o)=>{if(!t)return Dn;let s=1;if(e===bI&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),i<1||i>kI||r!==Pl||n<8||n>15||e<0||e>9||o<0||o>EI||n===8&&s!==1)return vo(t,Dn);n===8&&(n=9);const a=new zI;return t.state=a,a.strm=t,a.status=_s,a.wrap=s,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+it-1)/it),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=(a.lit_bufsize-1)*3,a.level=e,a.strategy=o,a.method=r,T3(t)},FI=(t,e)=>B3(t,e,Pl,II,_I,SI),KI=(t,e)=>{if(ru(t)||e>$b||e<0)return t?vo(t,Dn):Dn;const r=t.state;if(!t.output||t.avail_in!==0&&!t.input||r.status===aa&&e!==tn)return vo(t,t.avail_out===0?Of:Dn);const n=r.last_flush;if(r.last_flush=e,r.pending!==0){if(Hr(t),t.avail_out===0)return r.last_flush=-1,er}else if(t.avail_in===0&&Nb(e)<=Nb(n)&&e!==tn)return vo(t,Of);if(r.status===aa&&t.avail_in!==0)return vo(t,Of);if(r.status===_s&&r.wrap===0&&(r.status=wo),r.status===_s){let i=Pl+(r.w_bits-8<<4)<<8,o=-1;if(r.strategy>=Ru||r.level<2?o=0:r.level<6?o=1:r.level===6?o=2:o=3,i|=o<<6,r.strstart!==0&&(i|=LI),i+=31-i%31,Zs(r,i),r.strstart!==0&&(Zs(r,t.adler>>>16),Zs(r,t.adler&65535)),t.adler=1,r.status=wo,Hr(t),r.pending!==0)return r.last_flush=-1,er}if(r.status===Sp){if(t.adler=0,ut(r,31),ut(r,139),ut(r,8),r.gzhead)ut(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),ut(r,r.gzhead.time&255),ut(r,r.gzhead.time>>8&255),ut(r,r.gzhead.time>>16&255),ut(r,r.gzhead.time>>24&255),ut(r,r.level===9?2:r.strategy>=Ru||r.level<2?4:0),ut(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(ut(r,r.gzhead.extra.length&255),ut(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=Yt(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=sd;else if(ut(r,0),ut(r,0),ut(r,0),ut(r,0),ut(r,0),ut(r,r.level===9?2:r.strategy>=Ru||r.level<2?4:0),ut(r,RI),r.status=wo,Hr(t),r.pending!==0)return r.last_flush=-1,er}if(r.status===sd){if(r.gzhead.extra){let i=r.pending,o=(r.gzhead.extra.length&65535)-r.gzindex;for(;r.pending+o>r.pending_buf_size;){let a=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+a),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>i&&(t.adler=Yt(t.adler,r.pending_buf,r.pending-i,i)),r.gzindex+=a,Hr(t),r.pending!==0)return r.last_flush=-1,er;i=0,o-=a}let s=new Uint8Array(r.gzhead.extra);r.pending_buf.set(s.subarray(r.gzindex,r.gzindex+o),r.pending),r.pending+=o,r.gzhead.hcrc&&r.pending>i&&(t.adler=Yt(t.adler,r.pending_buf,r.pending-i,i)),r.gzindex=0}r.status=ad}if(r.status===ad){if(r.gzhead.name){let i=r.pending,o;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>i&&(t.adler=Yt(t.adler,r.pending_buf,r.pending-i,i)),Hr(t),r.pending!==0)return r.last_flush=-1,er;i=0}r.gzindex<r.gzhead.name.length?o=r.gzhead.name.charCodeAt(r.gzindex++)&255:o=0,ut(r,o)}while(o!==0);r.gzhead.hcrc&&r.pending>i&&(t.adler=Yt(t.adler,r.pending_buf,r.pending-i,i)),r.gzindex=0}r.status=ud}if(r.status===ud){if(r.gzhead.comment){let i=r.pending,o;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>i&&(t.adler=Yt(t.adler,r.pending_buf,r.pending-i,i)),Hr(t),r.pending!==0)return r.last_flush=-1,er;i=0}r.gzindex<r.gzhead.comment.length?o=r.gzhead.comment.charCodeAt(r.gzindex++)&255:o=0,ut(r,o)}while(o!==0);r.gzhead.hcrc&&r.pending>i&&(t.adler=Yt(t.adler,r.pending_buf,r.pending-i,i))}r.status=cd}if(r.status===cd){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(Hr(t),r.pending!==0))return r.last_flush=-1,er;ut(r,t.adler&255),ut(r,t.adler>>8&255),t.adler=0}if(r.status=wo,Hr(t),r.pending!==0)return r.last_flush=-1,er}if(t.avail_in!==0||r.lookahead!==0||e!==Ji&&r.status!==aa){let i=r.level===0?_3(r,e):r.strategy===Ru?HI(r,e):r.strategy===vI?NI(r,e):ua[r.level].func(r,e);if((i===Uo||i===zs)&&(r.status=aa),i===br||i===Uo)return t.avail_out===0&&(r.last_flush=-1),er;if(i===Ds&&(e===gI?pI(r):e!==$b&&(id(r,0,0,!1),e===yI&&(Vi(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),Hr(t),t.avail_out===0))return r.last_flush=-1,er}return e!==tn?er:r.wrap<=0?Cb:(r.wrap===2?(ut(r,t.adler&255),ut(r,t.adler>>8&255),ut(r,t.adler>>16&255),ut(r,t.adler>>24&255),ut(r,t.total_in&255),ut(r,t.total_in>>8&255),ut(r,t.total_in>>16&255),ut(r,t.total_in>>24&255)):(Zs(r,t.adler>>>16),Zs(r,t.adler&65535)),Hr(t),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?er:Cb)},jI=t=>{if(ru(t))return Dn;const e=t.state.status;return t.state=null,e===wo?vo(t,mI):er},VI=(t,e)=>{let r=e.length;if(ru(t))return Dn;const n=t.state,i=n.wrap;if(i===2||i===1&&n.status!==_s||n.lookahead)return Dn;if(i===1&&(t.adler=Ra(t.adler,e,r,0)),n.wrap=0,r>=n.w_size){i===0&&(Vi(n.head),n.strstart=0,n.block_start=0,n.insert=0);let l=new Uint8Array(n.w_size);l.set(e.subarray(r-n.w_size,r),0),e=l,r=n.w_size}const o=t.avail_in,s=t.next_in,a=t.input;for(t.avail_in=r,t.next_in=0,t.input=e,xs(n);n.lookahead>=it;){let l=n.strstart,f=n.lookahead-(it-1);do n.ins_h=eo(n,n.ins_h,n.window[l+it-1]),n.prev[l&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=l,l++;while(--f);n.strstart=l,n.lookahead=it-1,xs(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=it-1,n.match_available=0,t.next_in=s,t.input=a,t.avail_in=o,n.wrap=i,er};var WI=FI,qI=B3,GI=T3,XI=x3,YI=MI,ZI=KI,QI=jI,JI=VI,e_="pako deflate (from Nodeca project)",Ea={deflateInit:WI,deflateInit2:qI,deflateReset:GI,deflateResetKeep:XI,deflateSetHeader:YI,deflate:ZI,deflateEnd:QI,deflateSetDictionary:JI,deflateInfo:e_};const t_=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var r_=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)t_(r,n)&&(t[n]=r[n])}}return t},n_=t=>{let e=0;for(let n=0,i=t.length;n<i;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,i=0,o=t.length;n<o;n++){let s=t[n];r.set(s,i),i+=s.length}return r},Ol={assign:r_,flattenChunks:n_};let P3=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{P3=!1}const $a=new Uint8Array(256);for(let t=0;t<256;t++)$a[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;$a[254]=$a[254]=1;var i_=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,i,o,s=t.length,a=0;for(i=0;i<s;i++)r=t.charCodeAt(i),(r&64512)===55296&&i+1<s&&(n=t.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(a),o=0,i=0;o<a;i++)r=t.charCodeAt(i),(r&64512)===55296&&i+1<s&&(n=t.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?e[o++]=r:r<2048?(e[o++]=192|r>>>6,e[o++]=128|r&63):r<65536?(e[o++]=224|r>>>12,e[o++]=128|r>>>6&63,e[o++]=128|r&63):(e[o++]=240|r>>>18,e[o++]=128|r>>>12&63,e[o++]=128|r>>>6&63,e[o++]=128|r&63);return e};const o_=(t,e)=>{if(e<65534&&t.subarray&&P3)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var s_=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,i;const o=new Array(r*2);for(i=0,n=0;n<r;){let s=t[n++];if(s<128){o[i++]=s;continue}let a=$a[s];if(a>4){o[i++]=65533,n+=a-1;continue}for(s&=a===2?31:a===3?15:7;a>1&&n<r;)s=s<<6|t[n++]&63,a--;if(a>1){o[i++]=65533;continue}s<65536?o[i++]=s:(s-=65536,o[i++]=55296|s>>10&1023,o[i++]=56320|s&1023)}return o_(o,i)},a_=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+$a[t[r]]>e?r:e},Ca={string2buf:i_,buf2string:s_,utf8border:a_};function u_(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var O3=u_;const U3=Object.prototype.toString,{Z_NO_FLUSH:c_,Z_SYNC_FLUSH:l_,Z_FULL_FLUSH:f_,Z_FINISH:h_,Z_OK:Bc,Z_STREAM_END:d_,Z_DEFAULT_COMPRESSION:p_,Z_DEFAULT_STRATEGY:g_,Z_DEFLATED:y_}=tu;function nu(t){this.options=Ol.assign({level:p_,method:y_,chunkSize:16384,windowBits:15,memLevel:8,strategy:g_},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new O3,this.strm.avail_out=0;let r=Ea.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==Bc)throw new Error(Oo[r]);if(e.header&&Ea.deflateSetHeader(this.strm,e.header),e.dictionary){let n;if(typeof e.dictionary=="string"?n=Ca.string2buf(e.dictionary):U3.call(e.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(e.dictionary):n=e.dictionary,r=Ea.deflateSetDictionary(this.strm,n),r!==Bc)throw new Error(Oo[r]);this._dict_set=!0}}nu.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize;let i,o;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?h_:c_,typeof t=="string"?r.input=Ca.string2buf(t):U3.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){if(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(o===l_||o===f_)&&r.avail_out<=6){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(i=Ea.deflate(r,o),i===d_)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),i=Ea.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Bc;if(r.avail_out===0){this.onData(r.output);continue}if(o>0&&r.next_out>0){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(r.avail_in===0)break}return!0};nu.prototype.onData=function(t){this.chunks.push(t)};nu.prototype.onEnd=function(t){t===Bc&&(this.result=Ol.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function Ap(t,e){const r=new nu(e);if(r.push(t,!0),r.err)throw r.msg||Oo[r.err];return r.result}function m_(t,e){return e=e||{},e.raw=!0,Ap(t,e)}function b_(t,e){return e=e||{},e.gzip=!0,Ap(t,e)}var w_=nu,v_=Ap,E_=m_,S_=b_,A_={Deflate:w_,deflate:v_,deflateRaw:E_,gzip:S_};const $u=16209,k_=16191;var I_=function(t,e){let r,n,i,o,s,a,l,f,u,p,y,w,A,S,k,I,N,B,V,W,Y,H,ie,T;const C=t.state;r=t.next_in,ie=t.input,n=r+(t.avail_in-5),i=t.next_out,T=t.output,o=i-(e-t.avail_out),s=i+(t.avail_out-257),a=C.dmax,l=C.wsize,f=C.whave,u=C.wnext,p=C.window,y=C.hold,w=C.bits,A=C.lencode,S=C.distcode,k=(1<<C.lenbits)-1,I=(1<<C.distbits)-1;e:do{w<15&&(y+=ie[r++]<<w,w+=8,y+=ie[r++]<<w,w+=8),N=A[y&k];t:for(;;){if(B=N>>>24,y>>>=B,w-=B,B=N>>>16&255,B===0)T[i++]=N&65535;else if(B&16){V=N&65535,B&=15,B&&(w<B&&(y+=ie[r++]<<w,w+=8),V+=y&(1<<B)-1,y>>>=B,w-=B),w<15&&(y+=ie[r++]<<w,w+=8,y+=ie[r++]<<w,w+=8),N=S[y&I];r:for(;;){if(B=N>>>24,y>>>=B,w-=B,B=N>>>16&255,B&16){if(W=N&65535,B&=15,w<B&&(y+=ie[r++]<<w,w+=8,w<B&&(y+=ie[r++]<<w,w+=8)),W+=y&(1<<B)-1,W>a){t.msg="invalid distance too far back",C.mode=$u;break e}if(y>>>=B,w-=B,B=i-o,W>B){if(B=W-B,B>f&&C.sane){t.msg="invalid distance too far back",C.mode=$u;break e}if(Y=0,H=p,u===0){if(Y+=l-B,B<V){V-=B;do T[i++]=p[Y++];while(--B);Y=i-W,H=T}}else if(u<B){if(Y+=l+u-B,B-=u,B<V){V-=B;do T[i++]=p[Y++];while(--B);if(Y=0,u<V){B=u,V-=B;do T[i++]=p[Y++];while(--B);Y=i-W,H=T}}}else if(Y+=u-B,B<V){V-=B;do T[i++]=p[Y++];while(--B);Y=i-W,H=T}for(;V>2;)T[i++]=H[Y++],T[i++]=H[Y++],T[i++]=H[Y++],V-=3;V&&(T[i++]=H[Y++],V>1&&(T[i++]=H[Y++]))}else{Y=i-W;do T[i++]=T[Y++],T[i++]=T[Y++],T[i++]=T[Y++],V-=3;while(V>2);V&&(T[i++]=T[Y++],V>1&&(T[i++]=T[Y++]))}}else if((B&64)===0){N=S[(N&65535)+(y&(1<<B)-1)];continue r}else{t.msg="invalid distance code",C.mode=$u;break e}break}}else if((B&64)===0){N=A[(N&65535)+(y&(1<<B)-1)];continue t}else if(B&32){C.mode=k_;break e}else{t.msg="invalid literal/length code",C.mode=$u;break e}break}}while(r<n&&i<s);V=w>>3,r-=V,w-=V<<3,y&=(1<<w)-1,t.next_in=r,t.next_out=i,t.avail_in=r<n?5+(n-r):5-(r-n),t.avail_out=i<s?257+(s-i):257-(i-s),C.hold=y,C.bits=w};const Zo=15,Hb=852,Db=592,zb=0,Lf=1,Mb=2,__=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),x_=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),T_=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),B_=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),P_=(t,e,r,n,i,o,s,a)=>{const l=a.bits;let f=0,u=0,p=0,y=0,w=0,A=0,S=0,k=0,I=0,N=0,B,V,W,Y,H,ie=null,T;const C=new Uint16Array(Zo+1),G=new Uint16Array(Zo+1);let U=null,P,L,R;for(f=0;f<=Zo;f++)C[f]=0;for(u=0;u<n;u++)C[e[r+u]]++;for(w=l,y=Zo;y>=1&&C[y]===0;y--);if(w>y&&(w=y),y===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,a.bits=1,0;for(p=1;p<y&&C[p]===0;p++);for(w<p&&(w=p),k=1,f=1;f<=Zo;f++)if(k<<=1,k-=C[f],k<0)return-1;if(k>0&&(t===zb||y!==1))return-1;for(G[1]=0,f=1;f<Zo;f++)G[f+1]=G[f]+C[f];for(u=0;u<n;u++)e[r+u]!==0&&(s[G[e[r+u]]++]=u);if(t===zb?(ie=U=s,T=20):t===Lf?(ie=__,U=x_,T=257):(ie=T_,U=B_,T=0),N=0,u=0,f=p,H=o,A=w,S=0,W=-1,I=1<<w,Y=I-1,t===Lf&&I>Hb||t===Mb&&I>Db)return 1;for(;;){P=f-S,s[u]+1<T?(L=0,R=s[u]):s[u]>=T?(L=U[s[u]-T],R=ie[s[u]-T]):(L=96,R=0),B=1<<f-S,V=1<<A,p=V;do V-=B,i[H+(N>>S)+V]=P<<24|L<<16|R|0;while(V!==0);for(B=1<<f-1;N&B;)B>>=1;if(B!==0?(N&=B-1,N+=B):N=0,u++,--C[f]===0){if(f===y)break;f=e[r+s[u]]}if(f>w&&(N&Y)!==W){for(S===0&&(S=w),H+=p,A=f-S,k=1<<A;A+S<y&&(k-=C[A+S],!(k<=0));)A++,k<<=1;if(I+=1<<A,t===Lf&&I>Hb||t===Mb&&I>Db)return 1;W=N&Y,i[W]=w<<24|A<<16|H-o|0}}return N!==0&&(i[H+N]=f-S<<24|64<<16|0),a.bits=w,0};var Sa=P_;const O_=0,L3=1,R3=2,{Z_FINISH:Fb,Z_BLOCK:U_,Z_TREES:Cu,Z_OK:Lo,Z_STREAM_END:L_,Z_NEED_DICT:R_,Z_STREAM_ERROR:mn,Z_DATA_ERROR:$3,Z_MEM_ERROR:C3,Z_BUF_ERROR:$_,Z_DEFLATED:Kb}=tu,Ul=16180,jb=16181,Vb=16182,Wb=16183,qb=16184,Gb=16185,Xb=16186,Yb=16187,Zb=16188,Qb=16189,Pc=16190,Yn=16191,Rf=16192,Jb=16193,$f=16194,ew=16195,tw=16196,rw=16197,nw=16198,Nu=16199,Hu=16200,iw=16201,ow=16202,sw=16203,aw=16204,uw=16205,Cf=16206,cw=16207,lw=16208,Tt=16209,N3=16210,H3=16211,C_=852,N_=592,H_=15,D_=H_,fw=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function z_(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const zo=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<Ul||e.mode>H3?1:0},D3=t=>{if(zo(t))return mn;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=Ul,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(C_),e.distcode=e.distdyn=new Int32Array(N_),e.sane=1,e.back=-1,Lo},z3=t=>{if(zo(t))return mn;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,D3(t)},M3=(t,e)=>{let r;if(zo(t))return mn;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?mn:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,z3(t))},F3=(t,e)=>{if(!t)return mn;const r=new z_;t.state=r,r.strm=t,r.window=null,r.mode=Ul;const n=M3(t,e);return n!==Lo&&(t.state=null),n},M_=t=>F3(t,D_);let hw=!0,Nf,Hf;const F_=t=>{if(hw){Nf=new Int32Array(512),Hf=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Sa(L3,t.lens,0,288,Nf,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Sa(R3,t.lens,0,32,Hf,0,t.work,{bits:5}),hw=!1}t.lencode=Nf,t.lenbits=9,t.distcode=Hf,t.distbits=5},K3=(t,e,r,n)=>{let i;const o=t.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(e.subarray(r-o.wsize,r),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),o.window.set(e.subarray(r-n,r-n+i),o.wnext),n-=i,n?(o.window.set(e.subarray(r-n,r),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},K_=(t,e)=>{let r,n,i,o,s,a,l,f,u,p,y,w,A,S,k=0,I,N,B,V,W,Y,H,ie;const T=new Uint8Array(4);let C,G;const U=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(zo(t)||!t.output||!t.input&&t.avail_in!==0)return mn;r=t.state,r.mode===Yn&&(r.mode=Rf),s=t.next_out,i=t.output,l=t.avail_out,o=t.next_in,n=t.input,a=t.avail_in,f=r.hold,u=r.bits,p=a,y=l,ie=Lo;e:for(;;)switch(r.mode){case Ul:if(r.wrap===0){r.mode=Rf;break}for(;u<16;){if(a===0)break e;a--,f+=n[o++]<<u,u+=8}if(r.wrap&2&&f===35615){r.wbits===0&&(r.wbits=15),r.check=0,T[0]=f&255,T[1]=f>>>8&255,r.check=Yt(r.check,T,2,0),f=0,u=0,r.mode=jb;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((f&255)<<8)+(f>>8))%31){t.msg="incorrect header check",r.mode=Tt;break}if((f&15)!==Kb){t.msg="unknown compression method",r.mode=Tt;break}if(f>>>=4,u-=4,H=(f&15)+8,r.wbits===0&&(r.wbits=H),H>15||H>r.wbits){t.msg="invalid window size",r.mode=Tt;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=f&512?Qb:Yn,f=0,u=0;break;case jb:for(;u<16;){if(a===0)break e;a--,f+=n[o++]<<u,u+=8}if(r.flags=f,(r.flags&255)!==Kb){t.msg="unknown compression method",r.mode=Tt;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=Tt;break}r.head&&(r.head.text=f>>8&1),r.flags&512&&r.wrap&4&&(T[0]=f&255,T[1]=f>>>8&255,r.check=Yt(r.check,T,2,0)),f=0,u=0,r.mode=Vb;case Vb:for(;u<32;){if(a===0)break e;a--,f+=n[o++]<<u,u+=8}r.head&&(r.head.time=f),r.flags&512&&r.wrap&4&&(T[0]=f&255,T[1]=f>>>8&255,T[2]=f>>>16&255,T[3]=f>>>24&255,r.check=Yt(r.check,T,4,0)),f=0,u=0,r.mode=Wb;case Wb:for(;u<16;){if(a===0)break e;a--,f+=n[o++]<<u,u+=8}r.head&&(r.head.xflags=f&255,r.head.os=f>>8),r.flags&512&&r.wrap&4&&(T[0]=f&255,T[1]=f>>>8&255,r.check=Yt(r.check,T,2,0)),f=0,u=0,r.mode=qb;case qb:if(r.flags&1024){for(;u<16;){if(a===0)break e;a--,f+=n[o++]<<u,u+=8}r.length=f,r.head&&(r.head.extra_len=f),r.flags&512&&r.wrap&4&&(T[0]=f&255,T[1]=f>>>8&255,r.check=Yt(r.check,T,2,0)),f=0,u=0}else r.head&&(r.head.extra=null);r.mode=Gb;case Gb:if(r.flags&1024&&(w=r.length,w>a&&(w=a),w&&(r.head&&(H=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(o,o+w),H)),r.flags&512&&r.wrap&4&&(r.check=Yt(r.check,n,w,o)),a-=w,o+=w,r.length-=w),r.length))break e;r.length=0,r.mode=Xb;case Xb:if(r.flags&2048){if(a===0)break e;w=0;do H=n[o+w++],r.head&&H&&r.length<65536&&(r.head.name+=String.fromCharCode(H));while(H&&w<a);if(r.flags&512&&r.wrap&4&&(r.check=Yt(r.check,n,w,o)),a-=w,o+=w,H)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=Yb;case Yb:if(r.flags&4096){if(a===0)break e;w=0;do H=n[o+w++],r.head&&H&&r.length<65536&&(r.head.comment+=String.fromCharCode(H));while(H&&w<a);if(r.flags&512&&r.wrap&4&&(r.check=Yt(r.check,n,w,o)),a-=w,o+=w,H)break e}else r.head&&(r.head.comment=null);r.mode=Zb;case Zb:if(r.flags&512){for(;u<16;){if(a===0)break e;a--,f+=n[o++]<<u,u+=8}if(r.wrap&4&&f!==(r.check&65535)){t.msg="header crc mismatch",r.mode=Tt;break}f=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Yn;break;case Qb:for(;u<32;){if(a===0)break e;a--,f+=n[o++]<<u,u+=8}t.adler=r.check=fw(f),f=0,u=0,r.mode=Pc;case Pc:if(r.havedict===0)return t.next_out=s,t.avail_out=l,t.next_in=o,t.avail_in=a,r.hold=f,r.bits=u,R_;t.adler=r.check=1,r.mode=Yn;case Yn:if(e===U_||e===Cu)break e;case Rf:if(r.last){f>>>=u&7,u-=u&7,r.mode=Cf;break}for(;u<3;){if(a===0)break e;a--,f+=n[o++]<<u,u+=8}switch(r.last=f&1,f>>>=1,u-=1,f&3){case 0:r.mode=Jb;break;case 1:if(F_(r),r.mode=Nu,e===Cu){f>>>=2,u-=2;break e}break;case 2:r.mode=tw;break;case 3:t.msg="invalid block type",r.mode=Tt}f>>>=2,u-=2;break;case Jb:for(f>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,f+=n[o++]<<u,u+=8}if((f&65535)!==(f>>>16^65535)){t.msg="invalid stored block lengths",r.mode=Tt;break}if(r.length=f&65535,f=0,u=0,r.mode=$f,e===Cu)break e;case $f:r.mode=ew;case ew:if(w=r.length,w){if(w>a&&(w=a),w>l&&(w=l),w===0)break e;i.set(n.subarray(o,o+w),s),a-=w,o+=w,l-=w,s+=w,r.length-=w;break}r.mode=Yn;break;case tw:for(;u<14;){if(a===0)break e;a--,f+=n[o++]<<u,u+=8}if(r.nlen=(f&31)+257,f>>>=5,u-=5,r.ndist=(f&31)+1,f>>>=5,u-=5,r.ncode=(f&15)+4,f>>>=4,u-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=Tt;break}r.have=0,r.mode=rw;case rw:for(;r.have<r.ncode;){for(;u<3;){if(a===0)break e;a--,f+=n[o++]<<u,u+=8}r.lens[U[r.have++]]=f&7,f>>>=3,u-=3}for(;r.have<19;)r.lens[U[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,C={bits:r.lenbits},ie=Sa(O_,r.lens,0,19,r.lencode,0,r.work,C),r.lenbits=C.bits,ie){t.msg="invalid code lengths set",r.mode=Tt;break}r.have=0,r.mode=nw;case nw:for(;r.have<r.nlen+r.ndist;){for(;k=r.lencode[f&(1<<r.lenbits)-1],I=k>>>24,N=k>>>16&255,B=k&65535,!(I<=u);){if(a===0)break e;a--,f+=n[o++]<<u,u+=8}if(B<16)f>>>=I,u-=I,r.lens[r.have++]=B;else{if(B===16){for(G=I+2;u<G;){if(a===0)break e;a--,f+=n[o++]<<u,u+=8}if(f>>>=I,u-=I,r.have===0){t.msg="invalid bit length repeat",r.mode=Tt;break}H=r.lens[r.have-1],w=3+(f&3),f>>>=2,u-=2}else if(B===17){for(G=I+3;u<G;){if(a===0)break e;a--,f+=n[o++]<<u,u+=8}f>>>=I,u-=I,H=0,w=3+(f&7),f>>>=3,u-=3}else{for(G=I+7;u<G;){if(a===0)break e;a--,f+=n[o++]<<u,u+=8}f>>>=I,u-=I,H=0,w=11+(f&127),f>>>=7,u-=7}if(r.have+w>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=Tt;break}for(;w--;)r.lens[r.have++]=H}}if(r.mode===Tt)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=Tt;break}if(r.lenbits=9,C={bits:r.lenbits},ie=Sa(L3,r.lens,0,r.nlen,r.lencode,0,r.work,C),r.lenbits=C.bits,ie){t.msg="invalid literal/lengths set",r.mode=Tt;break}if(r.distbits=6,r.distcode=r.distdyn,C={bits:r.distbits},ie=Sa(R3,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,C),r.distbits=C.bits,ie){t.msg="invalid distances set",r.mode=Tt;break}if(r.mode=Nu,e===Cu)break e;case Nu:r.mode=Hu;case Hu:if(a>=6&&l>=258){t.next_out=s,t.avail_out=l,t.next_in=o,t.avail_in=a,r.hold=f,r.bits=u,I_(t,y),s=t.next_out,i=t.output,l=t.avail_out,o=t.next_in,n=t.input,a=t.avail_in,f=r.hold,u=r.bits,r.mode===Yn&&(r.back=-1);break}for(r.back=0;k=r.lencode[f&(1<<r.lenbits)-1],I=k>>>24,N=k>>>16&255,B=k&65535,!(I<=u);){if(a===0)break e;a--,f+=n[o++]<<u,u+=8}if(N&&(N&240)===0){for(V=I,W=N,Y=B;k=r.lencode[Y+((f&(1<<V+W)-1)>>V)],I=k>>>24,N=k>>>16&255,B=k&65535,!(V+I<=u);){if(a===0)break e;a--,f+=n[o++]<<u,u+=8}f>>>=V,u-=V,r.back+=V}if(f>>>=I,u-=I,r.back+=I,r.length=B,N===0){r.mode=uw;break}if(N&32){r.back=-1,r.mode=Yn;break}if(N&64){t.msg="invalid literal/length code",r.mode=Tt;break}r.extra=N&15,r.mode=iw;case iw:if(r.extra){for(G=r.extra;u<G;){if(a===0)break e;a--,f+=n[o++]<<u,u+=8}r.length+=f&(1<<r.extra)-1,f>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=ow;case ow:for(;k=r.distcode[f&(1<<r.distbits)-1],I=k>>>24,N=k>>>16&255,B=k&65535,!(I<=u);){if(a===0)break e;a--,f+=n[o++]<<u,u+=8}if((N&240)===0){for(V=I,W=N,Y=B;k=r.distcode[Y+((f&(1<<V+W)-1)>>V)],I=k>>>24,N=k>>>16&255,B=k&65535,!(V+I<=u);){if(a===0)break e;a--,f+=n[o++]<<u,u+=8}f>>>=V,u-=V,r.back+=V}if(f>>>=I,u-=I,r.back+=I,N&64){t.msg="invalid distance code",r.mode=Tt;break}r.offset=B,r.extra=N&15,r.mode=sw;case sw:if(r.extra){for(G=r.extra;u<G;){if(a===0)break e;a--,f+=n[o++]<<u,u+=8}r.offset+=f&(1<<r.extra)-1,f>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=Tt;break}r.mode=aw;case aw:if(l===0)break e;if(w=y-l,r.offset>w){if(w=r.offset-w,w>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=Tt;break}w>r.wnext?(w-=r.wnext,A=r.wsize-w):A=r.wnext-w,w>r.length&&(w=r.length),S=r.window}else S=i,A=s-r.offset,w=r.length;w>l&&(w=l),l-=w,r.length-=w;do i[s++]=S[A++];while(--w);r.length===0&&(r.mode=Hu);break;case uw:if(l===0)break e;i[s++]=r.length,l--,r.mode=Hu;break;case Cf:if(r.wrap){for(;u<32;){if(a===0)break e;a--,f|=n[o++]<<u,u+=8}if(y-=l,t.total_out+=y,r.total+=y,r.wrap&4&&y&&(t.adler=r.check=r.flags?Yt(r.check,i,y,s-y):Ra(r.check,i,y,s-y)),y=l,r.wrap&4&&(r.flags?f:fw(f))!==r.check){t.msg="incorrect data check",r.mode=Tt;break}f=0,u=0}r.mode=cw;case cw:if(r.wrap&&r.flags){for(;u<32;){if(a===0)break e;a--,f+=n[o++]<<u,u+=8}if(r.wrap&4&&f!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=Tt;break}f=0,u=0}r.mode=lw;case lw:ie=L_;break e;case Tt:ie=$3;break e;case N3:return C3;case H3:default:return mn}return t.next_out=s,t.avail_out=l,t.next_in=o,t.avail_in=a,r.hold=f,r.bits=u,(r.wsize||y!==t.avail_out&&r.mode<Tt&&(r.mode<Cf||e!==Fb))&&K3(t,t.output,t.next_out,y-t.avail_out),p-=t.avail_in,y-=t.avail_out,t.total_in+=p,t.total_out+=y,r.total+=y,r.wrap&4&&y&&(t.adler=r.check=r.flags?Yt(r.check,i,y,t.next_out-y):Ra(r.check,i,y,t.next_out-y)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Yn?128:0)+(r.mode===Nu||r.mode===$f?256:0),(p===0&&y===0||e===Fb)&&ie===Lo&&(ie=$_),ie},j_=t=>{if(zo(t))return mn;let e=t.state;return e.window&&(e.window=null),t.state=null,Lo},V_=(t,e)=>{if(zo(t))return mn;const r=t.state;return(r.wrap&2)===0?mn:(r.head=e,e.done=!1,Lo)},W_=(t,e)=>{const r=e.length;let n,i,o;return zo(t)||(n=t.state,n.wrap!==0&&n.mode!==Pc)?mn:n.mode===Pc&&(i=1,i=Ra(i,e,r,0),i!==n.check)?$3:(o=K3(t,e,r,r),o?(n.mode=N3,C3):(n.havedict=1,Lo))};var q_=z3,G_=M3,X_=D3,Y_=M_,Z_=F3,Q_=K_,J_=j_,ex=V_,tx=W_,rx="pako inflate (from Nodeca project)",oi={inflateReset:q_,inflateReset2:G_,inflateResetKeep:X_,inflateInit:Y_,inflateInit2:Z_,inflate:Q_,inflateEnd:J_,inflateGetHeader:ex,inflateSetDictionary:tx,inflateInfo:rx};function nx(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var ix=nx;const j3=Object.prototype.toString,{Z_NO_FLUSH:ox,Z_FINISH:sx,Z_OK:Na,Z_STREAM_END:Df,Z_NEED_DICT:zf,Z_STREAM_ERROR:ax,Z_DATA_ERROR:dw,Z_MEM_ERROR:ux}=tu;function iu(t){this.options=Ol.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new O3,this.strm.avail_out=0;let r=oi.inflateInit2(this.strm,e.windowBits);if(r!==Na)throw new Error(Oo[r]);if(this.header=new ix,oi.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Ca.string2buf(e.dictionary):j3.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=oi.inflateSetDictionary(this.strm,e.dictionary),r!==Na)))throw new Error(Oo[r])}iu.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let o,s,a;if(this.ended)return!1;for(e===~~e?s=e:s=e===!0?sx:ox,j3.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),o=oi.inflate(r,s),o===zf&&i&&(o=oi.inflateSetDictionary(r,i),o===Na?o=oi.inflate(r,s):o===dw&&(o=zf));r.avail_in>0&&o===Df&&r.state.wrap>0&&t[r.next_in]!==0;)oi.inflateReset(r),o=oi.inflate(r,s);switch(o){case ax:case dw:case zf:case ux:return this.onEnd(o),this.ended=!0,!1}if(a=r.avail_out,r.next_out&&(r.avail_out===0||o===Df))if(this.options.to==="string"){let l=Ca.utf8border(r.output,r.next_out),f=r.next_out-l,u=Ca.buf2string(r.output,l);r.next_out=f,r.avail_out=n-f,f&&r.output.set(r.output.subarray(l,l+f),0),this.onData(u)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(o===Na&&a===0)){if(o===Df)return o=oi.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};iu.prototype.onData=function(t){this.chunks.push(t)};iu.prototype.onEnd=function(t){t===Na&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Ol.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function kp(t,e){const r=new iu(e);if(r.push(t),r.err)throw r.msg||Oo[r.err];return r.result}function cx(t,e){return e=e||{},e.raw=!0,kp(t,e)}var lx=iu,fx=kp,hx=cx,dx=kp,px={Inflate:lx,inflate:fx,inflateRaw:hx,ungzip:dx};const{Deflate:gx,deflate:yx,deflateRaw:mx,gzip:bx}=A_,{Inflate:wx,inflate:vx,inflateRaw:Ex,ungzip:Sx}=px;var Ax=gx,kx=yx,Ix=mx,_x=bx,xx=wx,Tx=vx,Bx=Ex,Px=Sx,Ox=tu,Ll={Deflate:Ax,deflate:kx,deflateRaw:Ix,gzip:_x,Inflate:xx,inflate:Tx,inflateRaw:Bx,ungzip:Px,constants:Ox};function Ux(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let f=0;f<e.length;f++)e[f]=255;for(let f=0;f<t.length;f++){const u=t.charAt(f),p=u.charCodeAt(0);if(e[p]!==255)throw new TypeError(u+" is ambiguous");e[p]=f}const r=t.length,n=t.charAt(0),i=Math.log(r)/Math.log(256),o=Math.log(256)/Math.log(r);function s(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";let u=0,p=0,y=0;const w=f.length;for(;y!==w&&f[y]===0;)y++,u++;const A=(w-y)*o+1>>>0,S=new Uint8Array(A);for(;y!==w;){let N=f[y],B=0;for(let V=A-1;(N!==0||B<p)&&V!==-1;V--,B++)N+=256*S[V]>>>0,S[V]=N%r>>>0,N=N/r>>>0;if(N!==0)throw new Error("Non-zero carry");p=B,y++}let k=A-p;for(;k!==A&&S[k]===0;)k++;let I=n.repeat(u);for(;k<A;++k)I+=t.charAt(S[k]);return I}function a(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;let u=0,p=0,y=0;for(;f[u]===n;)p++,u++;const w=(f.length-u)*i+1>>>0,A=new Uint8Array(w);for(;u<f.length;){const N=f.charCodeAt(u);if(N>255)return;let B=e[N];if(B===255)return;let V=0;for(let W=w-1;(B!==0||V<y)&&W!==-1;W--,V++)B+=r*A[W]>>>0,A[W]=B%256>>>0,B=B/256>>>0;if(B!==0)throw new Error("Non-zero carry");y=V,u++}let S=w-y;for(;S!==w&&A[S]===0;)S++;const k=new Uint8Array(p+(w-S));let I=p;for(;S!==w;)k[I++]=A[S++];return k}function l(f){const u=a(f);if(u)return u;throw new Error("Non-base"+r+" character")}return{encode:s,decodeUnsafe:a,decode:l}}var Lx="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Mf=Ux(Lx);function Rx(t){function e(o){var s=Uint8Array.from(o),a=t(s),l=s.length+4,f=new Uint8Array(l);return f.set(s,0),f.set(a.subarray(0,4),s.length),Mf.encode(f)}function r(o){var s=o.slice(0,-4),a=o.slice(-4),l=t(s);if(!(a[0]^l[0]|a[1]^l[1]|a[2]^l[2]|a[3]^l[3]))return s}function n(o){var s=Mf.decodeUnsafe(o);if(s!=null)return r(s)}function i(o){var s=Mf.decode(o),a=r(s);if(a==null)throw new Error("Invalid checksum");return a}return{encode:e,decode:i,decodeUnsafe:n}}function $x(t){return jm(jm(t))}const V3=Rx($x);function Cx(t,e){if(t.length===33)return{version:t[0],privateKey:t.slice(1,33),compressed:!1};if(t.length!==34)throw new Error("Invalid WIF length");if(t[33]!==1)throw new Error("Invalid compression flag");return{version:t[0],privateKey:t.slice(1,33),compressed:!0}}function Nx(t,e,r){if(e.length!==32)throw new TypeError("Invalid privateKey length");var n=new Uint8Array(r?34:33),i=new DataView(n.buffer);return i.setUint8(0,t),n.set(e,1),r&&(n[33]=1),n}function Hx(t,e){return Cx(V3.decode(t))}function Dx(t){return V3.encode(Nx(t.version,t.privateKey,t.compressed))}function W3(t){const e=t.length;if(e%2!==0)throw new TypeError("fromHexInternal: odd-length hex string");const r=new Uint8Array(e/2);for(let n=0;n<e;n+=2){const i=pw(t.charCodeAt(n)),o=pw(t.charCodeAt(n+1));if(i===-1||o===-1)throw new TypeError("fromHexInternal: invalid hex character");r[n>>1]=i<<4|o}return r}function pw(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:-1}function ou(t){for(let e=0;e<t.length;e++)if(t[e]!==0)return!1;return!0}function zx(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const i=t[n],o=e[n];if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0}function gr(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function os(t){let e="";for(let r=0;r<t.length;r++)e+=t[r].toString(16).padStart(2,"0");return e}function q3(...t){let e=0;for(const i of t)e+=i.length;const r=new Uint8Array(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}const Rl=0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141n,Mx=0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2fn,Ip=21n*10n**14n;function G3(t){let e=0n;for(let r=0;r<t.length;r++)e=e<<8n|BigInt(t[r]);return e}function Fx(t){return t instanceof Uint8Array&&t.length===32}function Kx(t){return t instanceof Uint8Array&&t.length===20}function jx(t){return!(t instanceof Uint8Array)||t.length!==32||ou(t)?!1:G3(t)<Rl}function X3(t){if(!(t instanceof Uint8Array))return!1;const e=t[0];return t.length===33&&(e===2||e===3)||t.length===65&&(e===4||e===6||e===7)}function Vx(t){return!(t instanceof Uint8Array)||t.length!==32?!1:!ou(t)}function Y3(t){return t instanceof Uint8Array&&t.length>=8&&t.length<=73}function Z3(t){return t instanceof Uint8Array&&t.length===64}function Wx(t){return t instanceof Uint8Array&&t.length===32}function Q3(t){return typeof t=="bigint"&&t>=0n&&t<=Ip}function _p(t){if(!(t instanceof Uint8Array))throw new TypeError("assertBytes32: expected Uint8Array");if(t.length!==32)throw new TypeError(`assertBytes32: expected 32 bytes, got ${t.length} bytes`)}function J3(t){if(!(t instanceof Uint8Array))throw new TypeError("assertPrivateKey: expected Uint8Array");if(t.length!==32)throw new TypeError(`assertPrivateKey: expected 32 bytes, got ${t.length} bytes`);if(ou(t))throw new TypeError("assertPrivateKey: key is zero");if(G3(t)>=Rl)throw new TypeError("assertPrivateKey: key not in range [1, n)")}function e8(t){if(!(t instanceof Uint8Array))throw new TypeError("assertPublicKey: expected Uint8Array");if(!X3(t))throw new TypeError(`assertPublicKey: invalid SEC1 public key (length=${t.length}, prefix=0x${(t[0]??0).toString(16).padStart(2,"0")})`)}function t8(t){if(!(t instanceof Uint8Array))throw new TypeError("assertXOnlyPublicKey: expected Uint8Array");if(t.length!==32)throw new TypeError(`assertXOnlyPublicKey: expected 32 bytes, got ${t.length} bytes`);if(ou(t))throw new TypeError("assertXOnlyPublicKey: key is zero")}function r8(t){if(!(t instanceof Uint8Array))throw new TypeError("assertMessageHash: expected Uint8Array");if(t.length!==32)throw new TypeError(`assertMessageHash: expected 32 bytes, got ${t.length} bytes`)}function qx(t){return _p(t),t}function Gx(t){if(!(t instanceof Uint8Array)||t.length!==20)throw new TypeError("createBytes20: expected 20 bytes Uint8Array");return t}function Ts(t){return J3(t),t}function su(t){return e8(t),t}function n8(t){return t8(t),t}function Xx(t){if(!Y3(t))throw new TypeError(`createSignature: expected 8-73 bytes, got ${t.length} bytes`);return t}function Yx(t){if(!Z3(t))throw new TypeError(`createSchnorrSignature: expected 64 bytes, got ${t.length} bytes`);return t}function Zx(t){return r8(t),t}function Qx(t){if(!Q3(t))throw new TypeError(`createSatoshi: value out of range [0, ${Ip}]`);return t}const lo={EcdsaSign:1,EcdsaVerify:2,SchnorrSign:4,SchnorrVerify:8,PrivateKeyExport:16,PublicKeyTweak:32,HdDerivation:64};function i8(t,e,r){return Dx({version:r.wif,privateKey:t,compressed:e})}function o8(t,e){const r=Hx(t),n=r.version;if(Array.isArray(e)){const o=e.find(s=>s.wif===n);if(!o)throw new Error("Unknown network version");return{privateKey:Ts(r.privateKey),compressed:r.compressed,network:o}}const i=e;if(n!==i.wif)throw new Error("Invalid network version");return{privateKey:Ts(r.privateKey),compressed:r.compressed,network:i}}function Jx(t){return t[0]===3?!0:t[0]===4&&t.length===65?(t[64]&1)===1:!1}function eT(t){const e=t.length===32?t:t.subarray(1,33);return n8(e)}const Ff=48;function tT(t){let e=0n;for(let r=0;r<t.length;r++)e=e<<8n|BigInt(t[r]);return e}function rT(t){const e=new Uint8Array(32);for(let r=31;r>=0;r--)e[r]=Number(t&0xffn),t>>=8n;return e}let $i=class fo{#e;#s;#t;#o;#r;#n;#i;constructor(e,r,n,i,o){if(o?.compressed!==void 0&&typeof o.compressed!="boolean")throw new TypeError(`Expected boolean for compressed, got ${typeof o.compressed}`);this.#e=e,this.#s=r,this.#o=o?.compressed??!0,this.#t=i,n!==void 0&&(this.#r=e.pointCompress(n,this.#o))}get privateKey(){return this.#s}get publicKey(){if(this.#r===void 0){const e=this.#s;if(e===void 0)throw new Error("Missing both private and public key");const r=this.#e.pointFromScalar(e,this.#o);if(r===null)throw new Error("Failed to derive public key from private key");this.#r=r}return this.#r}get xOnlyPublicKey(){return this.#n===void 0&&(this.#n=eT(this.publicKey)),this.#n}get network(){return this.#t}get compressed(){return this.#o}get capabilities(){if(this.#i===void 0){let e=lo.EcdsaVerify|lo.PublicKeyTweak;this.#s!==void 0&&(e|=lo.EcdsaSign|lo.PrivateKeyExport),this.#e.signSchnorr&&this.#s!==void 0&&(e|=lo.SchnorrSign),this.#e.verifySchnorr&&(e|=lo.SchnorrVerify),this.#i=e}return this.#i}static fromPrivateKey(e,r,n,i){if(!e.isPrivate(r))throw new TypeError("Private key not in range [1, n)");return new fo(e,r,void 0,n,i)}static fromPublicKey(e,r,n,i){if(!e.isPoint(r))throw new Error("Point not on the curve");return new fo(e,void 0,r,n,i)}static fromWIF(e,r,n){const i=o8(r,n);return fo.fromPrivateKey(e,i.privateKey,i.network,{compressed:i.compressed})}static makeRandom(e,r,n){const i=(n?.rng??(a=>crypto.getRandomValues(new Uint8Array(a))))(Ff);if(i.length!==Ff)throw new TypeError(`Expected ${Ff} bytes from rng, got ${i.length} bytes`);const o=tT(i)%(Rl-1n)+1n,s=rT(o);return fo.fromPrivateKey(e,Ts(s),r,n)}hasCapability(e){return(this.capabilities&e)!==0}sign(e,r){if(this.#s===void 0)throw new Error("Missing private key");if(!r)return this.#e.sign(e,this.#s);let n=this.#e.sign(e,this.#s);const i=new Uint8Array(32),o=new DataView(i.buffer,i.byteOffset,i.byteLength);let s=0;for(;;){const a=n[0];if(a===void 0)throw new Error("Backend returned invalid signature");if(a<=127)break;s++,o.setUint32(0,s,!0),n=this.#e.sign(e,this.#s,i)}return n}signSchnorr(e){if(this.#s===void 0)throw new Error("Missing private key");if(!this.#e.signSchnorr)throw new Error("signSchnorr not supported by ecc library");return this.#e.signSchnorr(e,this.#s)}verify(e,r){return this.#e.verify(e,this.publicKey,r)}verifySchnorr(e,r){if(!this.#e.verifySchnorr)throw new Error("verifySchnorr not supported by ecc library");return this.#e.verifySchnorr(e,this.xOnlyPublicKey,r)}tweak(e){return _p(e),this.#s!==void 0?this.#a(e):this.#u(e)}toWIF(){if(this.#s===void 0)throw new Error("Missing private key");return i8(this.#s,this.#o,this.#t)}#a(e){const r=this.publicKey,n=this.#s;if(n===void 0)throw new Error("Missing private key");const i=Jx(r)?this.#e.privateNegate(n):n,o=this.#e.privateAdd(i,e);if(o===null)throw new Error("Invalid tweaked private key!");return fo.fromPrivateKey(this.#e,o,this.#t,{compressed:this.#o})}#u(e){const r=this.xOnlyPublicKey,n=this.#e.xOnlyPointAddTweak(r,e);if(n===null||n.xOnlyPubkey===null)throw new Error("Cannot tweak public key!");const i=new Uint8Array([n.parity===0?2:3]),o=q3(i,n.xOnlyPubkey);return fo.fromPublicKey(this.#e,su(o),this.#t,{compressed:this.#o})}};function xp(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Ro(t,e=""){if(!Number.isSafeInteger(t)||t<0){const r=e&&`"${e}" `;throw new Error(`${r}expected integer >= 0, got ${t}`)}}function kt(t,e,r=""){const n=xp(t),i=t?.length,o=e!==void 0;if(!n||o&&i!==e){const s=r&&`"${r}" `,a=o?` of length ${e}`:"",l=n?`length=${i}`:`type=${typeof t}`;throw new Error(s+"expected Uint8Array"+a+", got "+l)}return t}function s8(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash must wrapped by utils.createHasher");Ro(t.outputLen),Ro(t.blockLen)}function Oc(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function nT(t,e){kt(t,void 0,"digestInto() output");const r=e.outputLen;if(t.length<r)throw new Error('"digestInto() output" expected to be of length >='+r)}function Uc(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Kf(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Sn(t,e){return t<<32-e|t>>>e}const a8=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",iT=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function $l(t){if(kt(t),a8)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=iT[t[r]];return e}const Zn={_0:48,_9:57,A:65,F:70,a:97,f:102};function gw(t){if(t>=Zn._0&&t<=Zn._9)return t-Zn._0;if(t>=Zn.A&&t<=Zn.F)return t-(Zn.A-10);if(t>=Zn.a&&t<=Zn.f)return t-(Zn.a-10)}function Lc(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(a8)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){const s=gw(t.charCodeAt(o)),a=gw(t.charCodeAt(o+1));if(s===void 0||a===void 0){const l=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+o)}n[i]=s*16+a}return n}function Nn(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];kt(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const o=t[n];r.set(o,i),i+=o.length}return r}function oT(t,e={}){const r=(i,o)=>t(o).update(i).digest(),n=t(void 0);return r.outputLen=n.outputLen,r.blockLen=n.blockLen,r.create=i=>t(i),Object.assign(r,e),Object.freeze(r)}function Cl(t=32){const e=typeof globalThis=="object"?globalThis.crypto:null;if(typeof e?.getRandomValues!="function")throw new Error("crypto.getRandomValues must be defined");return e.getRandomValues(new Uint8Array(t))}const sT=t=>({oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,t])});function aT(t,e,r){return t&e^~t&r}function uT(t,e,r){return t&e^t&r^e&r}class cT{blockLen;outputLen;padOffset;isLE;buffer;view;finished=!1;length=0;pos=0;destroyed=!1;constructor(e,r,n,i){this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(e),this.view=Kf(this.buffer)}update(e){Oc(this),kt(e);const{view:r,buffer:n,blockLen:i}=this,o=e.length;for(let s=0;s<o;){const a=Math.min(i-this.pos,o-s);if(a===i){const l=Kf(e);for(;i<=o-s;s+=i)this.process(l,s);continue}n.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Oc(this),nT(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:o}=this;let{pos:s}=this;r[s++]=128,Uc(this.buffer.subarray(s)),this.padOffset>i-s&&(this.process(n,0),s=0);for(let p=s;p<i;p++)r[p]=0;n.setBigUint64(i-8,BigInt(this.length*8),o),this.process(n,0);const a=Kf(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen must be aligned to 32bit");const f=l/4,u=this.get();if(f>u.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<f;p++)a.setUint32(4*p,u[p],o)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||=new this.constructor,e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return e.destroyed=s,e.finished=o,e.length=i,e.pos=a,i%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const Si=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),lT=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ai=new Uint32Array(64);class fT extends cT{constructor(e){super(64,e,8,!1)}get(){const{A:e,B:r,C:n,D:i,E:o,F:s,G:a,H:l}=this;return[e,r,n,i,o,s,a,l]}set(e,r,n,i,o,s,a,l){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=l|0}process(e,r){for(let p=0;p<16;p++,r+=4)Ai[p]=e.getUint32(r,!1);for(let p=16;p<64;p++){const y=Ai[p-15],w=Ai[p-2],A=Sn(y,7)^Sn(y,18)^y>>>3,S=Sn(w,17)^Sn(w,19)^w>>>10;Ai[p]=S+Ai[p-7]+A+Ai[p-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:l,G:f,H:u}=this;for(let p=0;p<64;p++){const y=Sn(a,6)^Sn(a,11)^Sn(a,25),w=u+y+aT(a,l,f)+lT[p]+Ai[p]|0,A=(Sn(n,2)^Sn(n,13)^Sn(n,22))+uT(n,i,o)|0;u=f,f=l,l=a,a=s+w|0,s=o,o=i,i=n,n=w+A|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,l=l+this.F|0,f=f+this.G|0,u=u+this.H|0,this.set(n,i,o,s,a,l,f,u)}roundClean(){Uc(Ai)}destroy(){this.set(0,0,0,0,0,0,0,0),Uc(this.buffer)}}class hT extends fT{A=Si[0]|0;B=Si[1]|0;C=Si[2]|0;D=Si[3]|0;E=Si[4]|0;F=Si[5]|0;G=Si[6]|0;H=Si[7]|0;constructor(){super(32)}}const fd=oT(()=>new hT,sT(1)),Tp=BigInt(0),hd=BigInt(1);function Rc(t,e=""){if(typeof t!="boolean"){const r=e&&`"${e}" `;throw new Error(r+"expected boolean, got type="+typeof t)}return t}function u8(t){if(typeof t=="bigint"){if(!nc(t))throw new Error("positive bigint expected, got "+t)}else Ro(t);return t}function Du(t){const e=u8(t).toString(16);return e.length&1?"0"+e:e}function c8(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Tp:BigInt("0x"+t)}function au(t){return c8($l(t))}function l8(t){return c8($l(dT(kt(t)).reverse()))}function Bp(t,e){Ro(e),t=u8(t);const r=Lc(t.toString(16).padStart(e*2,"0"));if(r.length!==e)throw new Error("number too large");return r}function f8(t,e){return Bp(t,e).reverse()}function dT(t){return Uint8Array.from(t)}function pT(t){return Uint8Array.from(t,(e,r)=>{const n=e.charCodeAt(0);if(e.length!==1||n>127)throw new Error(`string contains non-ASCII character "${t[r]}" with code ${n} at position ${r}`);return n})}const nc=t=>typeof t=="bigint"&&Tp<=t;function gT(t,e,r){return nc(t)&&nc(e)&&nc(r)&&e<=t&&t<r}function yT(t,e,r,n){if(!gT(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function mT(t){let e;for(e=0;t>Tp;t>>=hd,e+=1);return e}const Pp=t=>(hd<<BigInt(t))-hd;function bT(t,e,r){if(Ro(t,"hashLen"),Ro(e,"qByteLen"),typeof r!="function")throw new Error("hmacFn must be a function");const n=S=>new Uint8Array(S),i=Uint8Array.of(),o=Uint8Array.of(0),s=Uint8Array.of(1),a=1e3;let l=n(t),f=n(t),u=0;const p=()=>{l.fill(1),f.fill(0),u=0},y=(...S)=>r(f,Nn(l,...S)),w=(S=i)=>{f=y(o,S),l=y(),S.length!==0&&(f=y(s,S),l=y())},A=()=>{if(u++>=a)throw new Error("drbg: tried max amount of iterations");let S=0;const k=[];for(;S<e;){l=y();const I=l.slice();k.push(I),S+=l.length}return Nn(...k)};return(S,k)=>{p(),w(S);let I;for(;!(I=k(A()));)w();return p(),I}}function Op(t,e={},r={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function n(o,s,a){const l=t[o];if(a&&l===void 0)return;const f=typeof l;if(f!==s||l===null)throw new Error(`param "${o}" is invalid: expected ${s}, got ${f}`)}const i=(o,s)=>Object.entries(o).forEach(([a,l])=>n(a,l,s));i(e,!1),i(r,!0)}function yw(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const o=t(r,...n);return e.set(r,o),o}}const Tr=BigInt(0),Er=BigInt(1),Eo=BigInt(2),h8=BigInt(3),d8=BigInt(4),p8=BigInt(5),wT=BigInt(7),g8=BigInt(8),vT=BigInt(9),y8=BigInt(16);function zr(t,e){const r=t%e;return r>=Tr?r:e+r}function Wr(t,e,r){let n=t;for(;e-- >Tr;)n*=n,n%=r;return n}function mw(t,e){if(t===Tr)throw new Error("invert: expected non-zero number");if(e<=Tr)throw new Error("invert: expected positive modulus, got "+e);let r=zr(t,e),n=e,i=Tr,o=Er;for(;r!==Tr;){const s=n/r,a=n%r,l=i-o*s;n=r,r=a,i=o,o=l}if(n!==Er)throw new Error("invert: does not exist");return zr(i,e)}function Up(t,e,r){if(!t.eql(t.sqr(e),r))throw new Error("Cannot find square root")}function m8(t,e){const r=(t.ORDER+Er)/d8,n=t.pow(e,r);return Up(t,n,e),n}function ET(t,e){const r=(t.ORDER-p8)/g8,n=t.mul(e,Eo),i=t.pow(n,r),o=t.mul(e,i),s=t.mul(t.mul(o,Eo),i),a=t.mul(o,t.sub(s,t.ONE));return Up(t,a,e),a}function ST(t){const e=Nl(t),r=b8(t),n=r(e,e.neg(e.ONE)),i=r(e,n),o=r(e,e.neg(n)),s=(t+wT)/y8;return(a,l)=>{let f=a.pow(l,s),u=a.mul(f,n);const p=a.mul(f,i),y=a.mul(f,o),w=a.eql(a.sqr(u),l),A=a.eql(a.sqr(p),l);f=a.cmov(f,u,w),u=a.cmov(y,p,A);const S=a.eql(a.sqr(u),l),k=a.cmov(f,u,S);return Up(a,k,l),k}}function b8(t){if(t<h8)throw new Error("sqrt is not defined for small field");let e=t-Er,r=0;for(;e%Eo===Tr;)e/=Eo,r++;let n=Eo;const i=Nl(t);for(;bw(i,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return m8;let o=i.pow(n,e);const s=(e+Er)/Eo;return function(a,l){if(a.is0(l))return l;if(bw(a,l)!==1)throw new Error("Cannot find square root");let f=r,u=a.mul(a.ONE,o),p=a.pow(l,e),y=a.pow(l,s);for(;!a.eql(p,a.ONE);){if(a.is0(p))return a.ZERO;let w=1,A=a.sqr(p);for(;!a.eql(A,a.ONE);)if(w++,A=a.sqr(A),w===f)throw new Error("Cannot find square root");const S=Er<<BigInt(f-w-1),k=a.pow(u,S);f=w,u=a.sqr(k),p=a.mul(p,u),y=a.mul(y,k)}return y}}function AT(t){return t%d8===h8?m8:t%g8===p8?ET:t%y8===vT?ST(t):b8(t)}const kT=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function IT(t){const e={ORDER:"bigint",BYTES:"number",BITS:"number"},r=kT.reduce((n,i)=>(n[i]="function",n),e);return Op(t,r),t}function _T(t,e,r){if(r<Tr)throw new Error("invalid exponent, negatives unsupported");if(r===Tr)return t.ONE;if(r===Er)return e;let n=t.ONE,i=e;for(;r>Tr;)r&Er&&(n=t.mul(n,i)),i=t.sqr(i),r>>=Er;return n}function w8(t,e,r=!1){const n=new Array(e.length).fill(r?t.ZERO:void 0),i=e.reduce((s,a,l)=>t.is0(a)?s:(n[l]=s,t.mul(s,a)),t.ONE),o=t.inv(i);return e.reduceRight((s,a,l)=>t.is0(a)?s:(n[l]=t.mul(s,n[l]),t.mul(s,a)),o),n}function bw(t,e){const r=(t.ORDER-Er)/Eo,n=t.pow(e,r),i=t.eql(n,t.ONE),o=t.eql(n,t.ZERO),s=t.eql(n,t.neg(t.ONE));if(!i&&!o&&!s)throw new Error("invalid Legendre symbol result");return i?1:o?0:-1}function xT(t,e){e!==void 0&&Ro(e);const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}class TT{ORDER;BITS;BYTES;isLE;ZERO=Tr;ONE=Er;_lengths;_sqrt;_mod;constructor(e,r={}){if(e<=Tr)throw new Error("invalid field: expected ORDER > 0, got "+e);let n;this.isLE=!1,r!=null&&typeof r=="object"&&(typeof r.BITS=="number"&&(n=r.BITS),typeof r.sqrt=="function"&&(this.sqrt=r.sqrt),typeof r.isLE=="boolean"&&(this.isLE=r.isLE),r.allowedLengths&&(this._lengths=r.allowedLengths?.slice()),typeof r.modFromBytes=="boolean"&&(this._mod=r.modFromBytes));const{nBitLength:i,nByteLength:o}=xT(e,n);if(o>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");this.ORDER=e,this.BITS=i,this.BYTES=o,this._sqrt=void 0,Object.preventExtensions(this)}create(e){return zr(e,this.ORDER)}isValid(e){if(typeof e!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof e);return Tr<=e&&e<this.ORDER}is0(e){return e===Tr}isValidNot0(e){return!this.is0(e)&&this.isValid(e)}isOdd(e){return(e&Er)===Er}neg(e){return zr(-e,this.ORDER)}eql(e,r){return e===r}sqr(e){return zr(e*e,this.ORDER)}add(e,r){return zr(e+r,this.ORDER)}sub(e,r){return zr(e-r,this.ORDER)}mul(e,r){return zr(e*r,this.ORDER)}pow(e,r){return _T(this,e,r)}div(e,r){return zr(e*mw(r,this.ORDER),this.ORDER)}sqrN(e){return e*e}addN(e,r){return e+r}subN(e,r){return e-r}mulN(e,r){return e*r}inv(e){return mw(e,this.ORDER)}sqrt(e){return this._sqrt||(this._sqrt=AT(this.ORDER)),this._sqrt(this,e)}toBytes(e){return this.isLE?f8(e,this.BYTES):Bp(e,this.BYTES)}fromBytes(e,r=!1){kt(e);const{_lengths:n,BYTES:i,isLE:o,ORDER:s,_mod:a}=this;if(n){if(!n.includes(e.length)||e.length>i)throw new Error("Field.fromBytes: expected "+n+" bytes, got "+e.length);const f=new Uint8Array(i);f.set(e,o?0:f.length-e.length),e=f}if(e.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+e.length);let l=o?l8(e):au(e);if(a&&(l=zr(l,s)),!r&&!this.isValid(l))throw new Error("invalid field element: outside of range 0..ORDER");return l}invertBatch(e){return w8(this,e)}cmov(e,r,n){return n?r:e}}function Nl(t,e={}){return new TT(t,e)}function v8(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function E8(t){const e=v8(t);return e+Math.ceil(e/2)}function S8(t,e,r=!1){kt(t);const n=t.length,i=v8(e),o=E8(e);if(n<16||n<o||n>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+n);const s=r?l8(t):au(t),a=zr(s,e-Er)+Er;return r?f8(a,i):Bp(a,i)}const Bs=BigInt(0),So=BigInt(1);function $c(t,e){const r=e.negate();return t?r:e}function ww(t,e){const r=w8(t.Fp,e.map(n=>n.Z));return e.map((n,i)=>t.fromAffine(n.toAffine(r[i])))}function A8(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function jf(t,e){A8(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1),i=2**t,o=Pp(t),s=BigInt(t);return{windows:r,windowSize:n,mask:o,maxNumber:i,shiftBy:s}}function vw(t,e,r){const{windowSize:n,mask:i,maxNumber:o,shiftBy:s}=r;let a=Number(t&i),l=t>>s;a>n&&(a-=o,l+=So);const f=e*n,u=f+Math.abs(a)-1,p=a===0,y=a<0,w=e%2!==0;return{nextN:l,offset:u,isZero:p,isNeg:y,isNegF:w,offsetF:f}}const Vf=new WeakMap,k8=new WeakMap;function Wf(t){return k8.get(t)||1}function Ew(t){if(t!==Bs)throw new Error("invalid wNAF")}class BT{BASE;ZERO;Fn;bits;constructor(e,r){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=r}_unsafeLadder(e,r,n=this.ZERO){let i=e;for(;r>Bs;)r&So&&(n=n.add(i)),i=i.double(),r>>=So;return n}precomputeWindow(e,r){const{windows:n,windowSize:i}=jf(r,this.bits),o=[];let s=e,a=s;for(let l=0;l<n;l++){a=s,o.push(a);for(let f=1;f<i;f++)a=a.add(s),o.push(a);s=a.double()}return o}wNAF(e,r,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let i=this.ZERO,o=this.BASE;const s=jf(e,this.bits);for(let a=0;a<s.windows;a++){const{nextN:l,offset:f,isZero:u,isNeg:p,isNegF:y,offsetF:w}=vw(n,a,s);n=l,u?o=o.add($c(y,r[w])):i=i.add($c(p,r[f]))}return Ew(n),{p:i,f:o}}wNAFUnsafe(e,r,n,i=this.ZERO){const o=jf(e,this.bits);for(let s=0;s<o.windows&&n!==Bs;s++){const{nextN:a,offset:l,isZero:f,isNeg:u}=vw(n,s,o);if(n=a,!f){const p=r[l];i=i.add(u?p.negate():p)}}return Ew(n),i}getPrecomputes(e,r,n){let i=Vf.get(r);return i||(i=this.precomputeWindow(r,e),e!==1&&(typeof n=="function"&&(i=n(i)),Vf.set(r,i))),i}cached(e,r,n){const i=Wf(e);return this.wNAF(i,this.getPrecomputes(i,e,n),r)}unsafe(e,r,n,i){const o=Wf(e);return o===1?this._unsafeLadder(e,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,e,n),r,i)}createCache(e,r){A8(r,this.bits),k8.set(e,r),Vf.delete(e)}hasCache(e){return Wf(e)!==1}}function PT(t,e,r,n){let i=e,o=t.ZERO,s=t.ZERO;for(;r>Bs||n>Bs;)r&So&&(o=o.add(i)),n&So&&(s=s.add(i)),i=i.double(),r>>=So,n>>=So;return{p1:o,p2:s}}function Sw(t,e,r){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return IT(e),e}else return Nl(t,{isLE:r})}function OT(t,e,r={},n){if(n===void 0&&(n=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const l=e[a];if(!(typeof l=="bigint"&&l>Bs))throw new Error(`CURVE.${a} must be positive bigint`)}const i=Sw(e.p,r.Fp,n),o=Sw(e.n,r.Fn,n),s=["Gx","Gy","a","b"];for(const a of s)if(!i.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:i,Fn:o}}function I8(t,e){return function(r){const n=t(r);return{secretKey:n,publicKey:e(n)}}}class _8{oHash;iHash;blockLen;outputLen;finished=!1;destroyed=!1;constructor(e,r){if(s8(e),kt(r,void 0,"key"),this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Uc(i)}update(e){return Oc(this),this.iHash.update(e),this}digestInto(e){Oc(this),kt(e,this.outputLen,"output"),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||=Object.create(Object.getPrototypeOf(this),{});const{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=o,e.blockLen=s,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const x8=(t,e,r)=>new _8(t,e).update(r).digest();x8.create=(t,e)=>new _8(t,e);const Aw=(t,e)=>(t+(t>=0?e:-e)/T8)/e;function UT(t,e,r){const[[n,i],[o,s]]=e,a=Aw(s*t,r),l=Aw(-i*t,r);let f=t-a*n-l*o,u=-a*i-l*s;const p=f<ui,y=u<ui;p&&(f=-f),y&&(u=-u);const w=Pp(Math.ceil(mT(r)/2))+ys;if(f<ui||f>=w||u<ui||u>=w)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:p,k1:f,k2neg:y,k2:u}}function dd(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function qf(t,e){const r={};for(let n of Object.keys(e))r[n]=t[n]===void 0?e[n]:t[n];return Rc(r.lowS,"lowS"),Rc(r.prehash,"prehash"),r.format!==void 0&&dd(r.format),r}class LT extends Error{constructor(e=""){super(e)}}const zi={Err:LT,_tlv:{encode:(t,e)=>{const{Err:r}=zi;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,i=Du(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const o=n>127?Du(i.length/2|128):"";return Du(t)+o+i+e},decode(t,e){const{Err:r}=zi;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const i=e[n++],o=!!(i&128);let s=0;if(!o)s=i;else{const l=i&127;if(!l)throw new r("tlv.decode(long): indefinite length not supported");if(l>4)throw new r("tlv.decode(long): byte length is too big");const f=e.subarray(n,n+l);if(f.length!==l)throw new r("tlv.decode: length bytes not complete");if(f[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const u of f)s=s<<8|u;if(n+=l,s<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+s);if(a.length!==s)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+s)}}},_int:{encode(t){const{Err:e}=zi;if(t<ui)throw new e("integer: negative integers are not allowed");let r=Du(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=zi;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return au(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=zi,i=kt(t,void 0,"signature"),{v:o,l:s}=n.decode(48,i);if(s.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l}=n.decode(2,o),{v:f,l:u}=n.decode(2,l);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(f)}},hexFromSig(t){const{_tlv:e,_int:r}=zi,n=e.encode(2,r.encode(t.r)),i=e.encode(2,r.encode(t.s)),o=n+i;return e.encode(48,o)}},ui=BigInt(0),ys=BigInt(1),T8=BigInt(2),zu=BigInt(3),RT=BigInt(4);function $T(t,e={}){const r=OT("weierstrass",t,e),{Fp:n,Fn:i}=r;let o=r.CURVE;const{h:s,n:a}=o;Op(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object"});const{endo:l}=e;if(l&&(!n.is0(o.a)||typeof l.beta!="bigint"||!Array.isArray(l.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const f=P8(n,i);function u(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function p(U,P,L){const{x:R,y:z}=P.toAffine(),X=n.toBytes(R);if(Rc(L,"isCompressed"),L){u();const ee=!n.isOdd(z);return Nn(B8(ee),X)}else return Nn(Uint8Array.of(4),X,n.toBytes(z))}function y(U){kt(U,void 0,"Point");const{publicKey:P,publicKeyUncompressed:L}=f,R=U.length,z=U[0],X=U.subarray(1);if(R===P&&(z===2||z===3)){const ee=n.fromBytes(X);if(!n.isValid(ee))throw new Error("bad point: is not on curve, wrong x");const _=S(ee);let K;try{K=n.sqrt(_)}catch(D){const J=D instanceof Error?": "+D.message:"";throw new Error("bad point: is not on curve, sqrt error"+J)}u();const Z=n.isOdd(K);return(z&1)===1!==Z&&(K=n.neg(K)),{x:ee,y:K}}else if(R===L&&z===4){const ee=n.BYTES,_=n.fromBytes(X.subarray(0,ee)),K=n.fromBytes(X.subarray(ee,ee*2));if(!k(_,K))throw new Error("bad point: is not on curve");return{x:_,y:K}}else throw new Error(`bad point: got length ${R}, expected compressed=${P} or uncompressed=${L}`)}const w=e.toBytes||p,A=e.fromBytes||y;function S(U){const P=n.sqr(U),L=n.mul(P,U);return n.add(n.add(L,n.mul(U,o.a)),o.b)}function k(U,P){const L=n.sqr(P),R=S(U);return n.eql(L,R)}if(!k(o.Gx,o.Gy))throw new Error("bad curve params: generator point");const I=n.mul(n.pow(o.a,zu),RT),N=n.mul(n.sqr(o.b),BigInt(27));if(n.is0(n.add(I,N)))throw new Error("bad curve params: a or b");function B(U,P,L=!1){if(!n.isValid(P)||L&&n.is0(P))throw new Error(`bad point coordinate ${U}`);return P}function V(U){if(!(U instanceof T))throw new Error("Weierstrass Point expected")}function W(U){if(!l||!l.basises)throw new Error("no endo");return UT(U,l.basises,i.ORDER)}const Y=yw((U,P)=>{const{X:L,Y:R,Z:z}=U;if(n.eql(z,n.ONE))return{x:L,y:R};const X=U.is0();P==null&&(P=X?n.ONE:n.inv(z));const ee=n.mul(L,P),_=n.mul(R,P),K=n.mul(z,P);if(X)return{x:n.ZERO,y:n.ZERO};if(!n.eql(K,n.ONE))throw new Error("invZ was invalid");return{x:ee,y:_}}),H=yw(U=>{if(U.is0()){if(e.allowInfinityPoint&&!n.is0(U.Y))return;throw new Error("bad point: ZERO")}const{x:P,y:L}=U.toAffine();if(!n.isValid(P)||!n.isValid(L))throw new Error("bad point: x or y not field elements");if(!k(P,L))throw new Error("bad point: equation left != right");if(!U.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function ie(U,P,L,R,z){return L=new T(n.mul(L.X,U),L.Y,L.Z),P=$c(R,P),L=$c(z,L),P.add(L)}class T{static BASE=new T(o.Gx,o.Gy,n.ONE);static ZERO=new T(n.ZERO,n.ONE,n.ZERO);static Fp=n;static Fn=i;X;Y;Z;constructor(P,L,R){this.X=B("x",P),this.Y=B("y",L,!0),this.Z=B("z",R),Object.freeze(this)}static CURVE(){return o}static fromAffine(P){const{x:L,y:R}=P||{};if(!P||!n.isValid(L)||!n.isValid(R))throw new Error("invalid affine point");if(P instanceof T)throw new Error("projective point not allowed");return n.is0(L)&&n.is0(R)?T.ZERO:new T(L,R,n.ONE)}static fromBytes(P){const L=T.fromAffine(A(kt(P,void 0,"point")));return L.assertValidity(),L}static fromHex(P){return T.fromBytes(Lc(P))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(P=8,L=!0){return G.createCache(this,P),L||this.multiply(zu),this}assertValidity(){H(this)}hasEvenY(){const{y:P}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(P)}equals(P){V(P);const{X:L,Y:R,Z:z}=this,{X,Y:ee,Z:_}=P,K=n.eql(n.mul(L,_),n.mul(X,z)),Z=n.eql(n.mul(R,_),n.mul(ee,z));return K&&Z}negate(){return new T(this.X,n.neg(this.Y),this.Z)}double(){const{a:P,b:L}=o,R=n.mul(L,zu),{X:z,Y:X,Z:ee}=this;let _=n.ZERO,K=n.ZERO,Z=n.ZERO,D=n.mul(z,z),J=n.mul(X,X),j=n.mul(ee,ee),te=n.mul(z,X);return te=n.add(te,te),Z=n.mul(z,ee),Z=n.add(Z,Z),_=n.mul(P,Z),K=n.mul(R,j),K=n.add(_,K),_=n.sub(J,K),K=n.add(J,K),K=n.mul(_,K),_=n.mul(te,_),Z=n.mul(R,Z),j=n.mul(P,j),te=n.sub(D,j),te=n.mul(P,te),te=n.add(te,Z),Z=n.add(D,D),D=n.add(Z,D),D=n.add(D,j),D=n.mul(D,te),K=n.add(K,D),j=n.mul(X,ee),j=n.add(j,j),D=n.mul(j,te),_=n.sub(_,D),Z=n.mul(j,J),Z=n.add(Z,Z),Z=n.add(Z,Z),new T(_,K,Z)}add(P){V(P);const{X:L,Y:R,Z:z}=this,{X,Y:ee,Z:_}=P;let K=n.ZERO,Z=n.ZERO,D=n.ZERO;const J=o.a,j=n.mul(o.b,zu);let te=n.mul(L,X),ae=n.mul(R,ee),ce=n.mul(z,_),pe=n.add(L,R),le=n.add(X,ee);pe=n.mul(pe,le),le=n.add(te,ae),pe=n.sub(pe,le),le=n.add(L,z);let ye=n.add(X,_);return le=n.mul(le,ye),ye=n.add(te,ce),le=n.sub(le,ye),ye=n.add(R,z),K=n.add(ee,_),ye=n.mul(ye,K),K=n.add(ae,ce),ye=n.sub(ye,K),D=n.mul(J,le),K=n.mul(j,ce),D=n.add(K,D),K=n.sub(ae,D),D=n.add(ae,D),Z=n.mul(K,D),ae=n.add(te,te),ae=n.add(ae,te),ce=n.mul(J,ce),le=n.mul(j,le),ae=n.add(ae,ce),ce=n.sub(te,ce),ce=n.mul(J,ce),le=n.add(le,ce),te=n.mul(ae,le),Z=n.add(Z,te),te=n.mul(ye,le),K=n.mul(pe,K),K=n.sub(K,te),te=n.mul(pe,ae),D=n.mul(ye,D),D=n.add(D,te),new T(K,Z,D)}subtract(P){return this.add(P.negate())}is0(){return this.equals(T.ZERO)}multiply(P){const{endo:L}=e;if(!i.isValidNot0(P))throw new Error("invalid scalar: out of range");let R,z;const X=ee=>G.cached(this,ee,_=>ww(T,_));if(L){const{k1neg:ee,k1:_,k2neg:K,k2:Z}=W(P),{p:D,f:J}=X(_),{p:j,f:te}=X(Z);z=J.add(te),R=ie(L.beta,D,j,ee,K)}else{const{p:ee,f:_}=X(P);R=ee,z=_}return ww(T,[R,z])[0]}multiplyUnsafe(P){const{endo:L}=e,R=this;if(!i.isValid(P))throw new Error("invalid scalar: out of range");if(P===ui||R.is0())return T.ZERO;if(P===ys)return R;if(G.hasCache(this))return this.multiply(P);if(L){const{k1neg:z,k1:X,k2neg:ee,k2:_}=W(P),{p1:K,p2:Z}=PT(T,R,X,_);return ie(L.beta,K,Z,z,ee)}else return G.unsafe(R,P)}toAffine(P){return Y(this,P)}isTorsionFree(){const{isTorsionFree:P}=e;return s===ys?!0:P?P(T,this):G.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:P}=e;return s===ys?this:P?P(T,this):this.multiplyUnsafe(s)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}toBytes(P=!0){return Rc(P,"isCompressed"),this.assertValidity(),w(T,this,P)}toHex(P=!0){return $l(this.toBytes(P))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}const C=i.BITS,G=new BT(T,e.endo?Math.ceil(C/2):C);return T.BASE.precompute(8),T}function B8(t){return Uint8Array.of(t?2:3)}function P8(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function CT(t,e={}){const{Fn:r}=t,n=e.randomBytes||Cl,i=Object.assign(P8(t.Fp,r),{seed:E8(r.ORDER)});function o(w){try{const A=r.fromBytes(w);return r.isValidNot0(A)}catch{return!1}}function s(w,A){const{publicKey:S,publicKeyUncompressed:k}=i;try{const I=w.length;return A===!0&&I!==S||A===!1&&I!==k?!1:!!t.fromBytes(w)}catch{return!1}}function a(w=n(i.seed)){return S8(kt(w,i.seed,"seed"),r.ORDER)}function l(w,A=!0){return t.BASE.multiply(r.fromBytes(w)).toBytes(A)}function f(w){const{secretKey:A,publicKey:S,publicKeyUncompressed:k}=i;if(!xp(w)||"_lengths"in r&&r._lengths||A===S)return;const I=kt(w,void 0,"key").length;return I===S||I===k}function u(w,A,S=!0){if(f(w)===!0)throw new Error("first arg must be private key");if(f(A)===!1)throw new Error("second arg must be public key");const k=r.fromBytes(w);return t.fromBytes(A).multiply(k).toBytes(S)}const p={isValidSecretKey:o,isValidPublicKey:s,randomSecretKey:a},y=I8(a,l);return Object.freeze({getPublicKey:l,getSharedSecret:u,keygen:y,Point:t,utils:p,lengths:i})}function NT(t,e,r={}){s8(e),Op(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"}),r=Object.assign({},r);const n=r.randomBytes||Cl,i=r.hmac||((L,R)=>x8(e,L,R)),{Fp:o,Fn:s}=t,{ORDER:a,BITS:l}=s,{keygen:f,getPublicKey:u,getSharedSecret:p,utils:y,lengths:w}=CT(t,r),A={prehash:!0,lowS:typeof r.lowS=="boolean"?r.lowS:!0,format:"compact",extraEntropy:!1},S=a*T8<o.ORDER;function k(L){const R=a>>ys;return L>R}function I(L,R){if(!s.isValidNot0(R))throw new Error(`invalid signature ${L}: out of range 1..Point.Fn.ORDER`);return R}function N(){if(S)throw new Error('"recovered" sig type is not supported for cofactor >2 curves')}function B(L,R){dd(R);const z=w.signature,X=R==="compact"?z:R==="recovered"?z+1:void 0;return kt(L,X)}class V{r;s;recovery;constructor(R,z,X){if(this.r=I("r",R),this.s=I("s",z),X!=null){if(N(),![0,1,2,3].includes(X))throw new Error("invalid recovery id");this.recovery=X}Object.freeze(this)}static fromBytes(R,z=A.format){B(R,z);let X;if(z==="der"){const{r:Z,s:D}=zi.toSig(kt(R));return new V(Z,D)}z==="recovered"&&(X=R[0],z="compact",R=R.subarray(1));const ee=w.signature/2,_=R.subarray(0,ee),K=R.subarray(ee,ee*2);return new V(s.fromBytes(_),s.fromBytes(K),X)}static fromHex(R,z){return this.fromBytes(Lc(R),z)}assertRecovery(){const{recovery:R}=this;if(R==null)throw new Error("invalid recovery id: must be present");return R}addRecoveryBit(R){return new V(this.r,this.s,R)}recoverPublicKey(R){const{r:z,s:X}=this,ee=this.assertRecovery(),_=ee===2||ee===3?z+a:z;if(!o.isValid(_))throw new Error("invalid recovery id: sig.r+curve.n != R.x");const K=o.toBytes(_),Z=t.fromBytes(Nn(B8((ee&1)===0),K)),D=s.inv(_),J=Y(kt(R,void 0,"msgHash")),j=s.create(-J*D),te=s.create(X*D),ae=t.BASE.multiplyUnsafe(j).add(Z.multiplyUnsafe(te));if(ae.is0())throw new Error("invalid recovery: point at infinify");return ae.assertValidity(),ae}hasHighS(){return k(this.s)}toBytes(R=A.format){if(dd(R),R==="der")return Lc(zi.hexFromSig(this));const{r:z,s:X}=this,ee=s.toBytes(z),_=s.toBytes(X);return R==="recovered"?(N(),Nn(Uint8Array.of(this.assertRecovery()),ee,_)):Nn(ee,_)}toHex(R){return $l(this.toBytes(R))}}const W=r.bits2int||function(L){if(L.length>8192)throw new Error("input is too large");const R=au(L),z=L.length*8-l;return z>0?R>>BigInt(z):R},Y=r.bits2int_modN||function(L){return s.create(W(L))},H=Pp(l);function ie(L){return yT("num < 2^"+l,L,ui,H),s.toBytes(L)}function T(L,R){return kt(L,void 0,"message"),R?kt(e(L),void 0,"prehashed message"):L}function C(L,R,z){const{lowS:X,prehash:ee,extraEntropy:_}=qf(z,A);L=T(L,ee);const K=Y(L),Z=s.fromBytes(R);if(!s.isValidNot0(Z))throw new Error("invalid private key");const D=[ie(Z),ie(K)];if(_!=null&&_!==!1){const ae=_===!0?n(w.secretKey):_;D.push(kt(ae,void 0,"extraEntropy"))}const J=Nn(...D),j=K;function te(ae){const ce=W(ae);if(!s.isValidNot0(ce))return;const pe=s.inv(ce),le=t.BASE.multiply(ce).toAffine(),ye=s.create(le.x);if(ye===ui)return;const Ae=s.create(pe*s.create(j+ye*Z));if(Ae===ui)return;let xe=(le.x===ye?0:2)|Number(le.y&ys),Be=Ae;return X&&k(Ae)&&(Be=s.neg(Ae),xe^=1),new V(ye,Be,S?void 0:xe)}return{seed:J,k2sig:te}}function G(L,R,z={}){const{seed:X,k2sig:ee}=C(L,R,z);return bT(e.outputLen,s.BYTES,i)(X,ee).toBytes(z.format)}function U(L,R,z,X={}){const{lowS:ee,prehash:_,format:K}=qf(X,A);if(z=kt(z,void 0,"publicKey"),R=T(R,_),!xp(L)){const Z=L instanceof V?", use sig.toBytes()":"";throw new Error("verify expects Uint8Array signature"+Z)}B(L,K);try{const Z=V.fromBytes(L,K),D=t.fromBytes(z);if(ee&&Z.hasHighS())return!1;const{r:J,s:j}=Z,te=Y(R),ae=s.inv(j),ce=s.create(te*ae),pe=s.create(J*ae),le=t.BASE.multiplyUnsafe(ce).add(D.multiplyUnsafe(pe));return le.is0()?!1:s.create(le.x)===J}catch{return!1}}function P(L,R,z={}){const{prehash:X}=qf(z,A);return R=T(R,X),V.fromBytes(L,"recovered").recoverPublicKey(R).toBytes()}return Object.freeze({keygen:f,getPublicKey:u,getSharedSecret:p,utils:y,lengths:w,Point:t,sign:G,verify:U,recoverPublicKey:P,Signature:V,hash:e})}const Hl={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},HT={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},DT=BigInt(0),pd=BigInt(2);function zT(t){const e=Hl.p,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),l=BigInt(88),f=t*t*t%e,u=f*f*t%e,p=Wr(u,r,e)*u%e,y=Wr(p,r,e)*u%e,w=Wr(y,pd,e)*f%e,A=Wr(w,i,e)*w%e,S=Wr(A,o,e)*A%e,k=Wr(S,a,e)*S%e,I=Wr(k,l,e)*k%e,N=Wr(I,a,e)*S%e,B=Wr(N,r,e)*u%e,V=Wr(B,s,e)*A%e,W=Wr(V,n,e)*f%e,Y=Wr(W,pd,e);if(!Cc.eql(Cc.sqr(Y),t))throw new Error("Cannot find square root");return Y}const Cc=Nl(Hl.p,{sqrt:zT}),Mo=$T(Hl,{Fp:Cc,endo:HT}),ho=NT(Mo,fd),kw={};function Nc(t,...e){let r=kw[t];if(r===void 0){const n=fd(pT(t));r=Nn(n,n),kw[t]=r}return fd(Nn(r,...e))}const Lp=t=>t.toBytes(!0).slice(1),Rp=t=>t%pd===DT;function gd(t){const{Fn:e,BASE:r}=Mo,n=e.fromBytes(t),i=r.multiply(n);return{scalar:Rp(i.y)?n:e.neg(n),bytes:Lp(i)}}function O8(t){const e=Cc;if(!e.isValidNot0(t))throw new Error("invalid x: Fail if x  p");const r=e.create(t*t),n=e.create(r*t+BigInt(7));let i=e.sqrt(n);Rp(i)||(i=e.neg(i));const o=Mo.fromAffine({x:t,y:i});return o.assertValidity(),o}const Aa=au;function U8(...t){return Mo.Fn.create(Aa(Nc("BIP0340/challenge",...t)))}function Iw(t){return gd(t).bytes}function MT(t,e,r=Cl(32)){const{Fn:n}=Mo,i=kt(t,void 0,"message"),{bytes:o,scalar:s}=gd(e),a=kt(r,32,"auxRand"),l=n.toBytes(s^Aa(Nc("BIP0340/aux",a))),f=Nc("BIP0340/nonce",l,o,i),{bytes:u,scalar:p}=gd(f),y=U8(u,o,i),w=new Uint8Array(64);if(w.set(u,0),w.set(n.toBytes(n.create(p+y*s)),32),!L8(w,i,o))throw new Error("sign: Invalid signature produced");return w}function L8(t,e,r){const{Fp:n,Fn:i,BASE:o}=Mo,s=kt(t,64,"signature"),a=kt(e,void 0,"message"),l=kt(r,32,"publicKey");try{const f=O8(Aa(l)),u=Aa(s.subarray(0,32));if(!n.isValidNot0(u))return!1;const p=Aa(s.subarray(32,64));if(!i.isValidNot0(p))return!1;const y=U8(i.toBytes(u),Lp(f),a),w=o.multiplyUnsafe(p).add(f.multiplyUnsafe(i.neg(y))),{x:A,y:S}=w.toAffine();return!(w.is0()||!Rp(S)||A!==u)}catch{return!1}}const Qs=(()=>{const t=(e=Cl(48))=>S8(e,Hl.n);return{keygen:I8(t,Iw),getPublicKey:Iw,sign:MT,verify:L8,Point:Mo,utils:{randomSecretKey:t,taggedHash:Nc,lift_x:O8,pointToBytes:Lp},lengths:{secretKey:32,publicKey:32,publicKeyHasPrefix:!1,signature:64,seed:48}}})(),ss=ho.Point,Mu=ss.Fn.ORDER;function _w(t){const e=t.toString(16).padStart(64,"0"),r=new Uint8Array(32);for(let n=0;n<32;n++)r[n]=parseInt(e.slice(n*2,n*2+2),16);return r}function so(t){let e=0n;for(let r=0;r<t.length;r++)e=e<<8n|BigInt(t[r]);return e}class R8{isPrivate(e){return ho.utils.isValidSecretKey(e)}isPoint(e){try{return ss.fromHex(os(e)),!0}catch{return!1}}isXOnlyPoint(e){if(e.length!==32)return!1;try{return Qs.utils.lift_x(so(e)),!0}catch{return!1}}pointFromScalar(e,r){try{return ho.getPublicKey(e,r??!0)}catch{return null}}pointCompress(e,r){return ss.fromHex(os(e)).toBytes(r??!0)}pointAddScalar(e,r,n){try{const i=ss.fromHex(os(e));if(so(r)===0n)return i.toBytes(n??!0);const o=ho.getPublicKey(r,!0),s=ss.fromHex(os(o));return i.add(s).toBytes(n??!0)}catch{return null}}xOnlyPointAddTweak(e,r){try{const n=Qs.utils.lift_x(so(e));if(so(r)>=Mu)return null;const i=ho.getPublicKey(r,!0),o=ss.fromHex(os(i)),s=n.add(o),a=Qs.utils.pointToBytes(s);return{parity:Number(s.y&1n),xOnlyPubkey:a}}catch{return null}}privateAdd(e,r){const n=so(e),i=so(r),o=zr(n+i,Mu);return o===0n?null:_w(o)}privateNegate(e){const r=so(e),n=zr(Mu-r,Mu);return _w(n)}sign(e,r,n){return ho.sign(e,r,{prehash:!1,lowS:!0,extraEntropy:n??!1})}verify(e,r,n){return ho.verify(n,e,r,{prehash:!1,lowS:!0})}signSchnorr(e,r,n){return Qs.sign(e,r,n)}verifySchnorr(e,r,n){return Qs.verify(n,e,r)}}function $8(){return new R8}class C8{#e;constructor(e){this.#e=e}get hasSchnorrSign(){return typeof this.#e.signSchnorr=="function"}get hasSchnorrVerify(){return typeof this.#e.verifySchnorr=="function"}isPrivate(e){return this.#e.isPrivate(e)}isPoint(e){return this.#e.isPoint(e)}isXOnlyPoint(e){if(e.length!==32)return!1;const r=new Uint8Array(33);return r[0]=2,r.set(e,1),this.#e.isPoint(r)}pointFromScalar(e,r){return this.#e.pointFromScalar(e,r)}pointCompress(e,r){return this.#e.pointCompress(e,r)}pointAddScalar(e,r,n){return this.#e.pointAddScalar(e,r,n)}xOnlyPointAddTweak(e,r){const n=this.#e.xOnlyPointAddTweak(e,r);return n===null?null:{parity:n.parity,xOnlyPubkey:n.xOnlyPubkey}}privateAdd(e,r){return this.#e.privateAdd(e,r)}privateNegate(e){return this.#e.privateNegate(e)}sign(e,r,n){return this.#e.sign(e,r,n)}verify(e,r,n){return this.#e.verify(e,r,n)}signSchnorr(e,r,n){if(!this.#e.signSchnorr)throw new Error("signSchnorr not supported by ecc library");return this.#e.signSchnorr(e,r,n)}verifySchnorr(e,r,n){if(!this.#e.verifySchnorr)throw new Error("verifySchnorr not supported by ecc library");return this.#e.verifySchnorr(e,r,n)}}function FT(t){return new C8(t)}function Re(t){return W3(t)}function dt(t,e){if(!t)throw new Error(`verifyCryptoBackend: ${e}`)}function KT(t){dt(t.isPoint(Re("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798")),"isPoint should accept generator point"),dt(!t.isPoint(Re("030000000000000000000000000000000000000000000000000000000000000005")),"isPoint should reject invalid point"),dt(t.isXOnlyPoint(Re("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798")),"isXOnlyPoint should accept generator x-coordinate"),dt(!t.isXOnlyPoint(Re("0000000000000000000000000000000000000000000000000000000000000005")),"isXOnlyPoint should reject x-coordinate not on curve"),dt(!t.isXOnlyPoint(Re("0000000000000000000000000000000000000000000000000000000000000000")),"isXOnlyPoint should reject zero"),dt(!t.isXOnlyPoint(Re("79be667ef9dcbbac55a06295ce870b07")),"isXOnlyPoint should reject wrong length"),dt(t.isPrivate(Re("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798")),"isPrivate should accept valid scalar"),dt(t.isPrivate(Re("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140")),"isPrivate should accept n-1"),dt(!t.isPrivate(Re("0000000000000000000000000000000000000000000000000000000000000000")),"isPrivate should reject zero"),dt(!t.isPrivate(Re("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141")),"isPrivate should reject n"),dt(!t.isPrivate(Re("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364142")),"isPrivate should reject n+1");const e=t.privateAdd(Re("0000000000000000000000000000000000000000000000000000000000000001"),Re("0000000000000000000000000000000000000000000000000000000000000000"));dt(e!==null&&gr(e,Re("0000000000000000000000000000000000000000000000000000000000000001")),"privateAdd: 1 + 0 should equal 1"),dt(t.privateAdd(Re("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"),Re("0000000000000000000000000000000000000000000000000000000000000003"))===null,"privateAdd: (n-3) + 3 should return null (result is zero mod n)");const r=t.privateAdd(Re("e211078564db65c3ce7704f08262b1f38f1ef412ad15b5ac2d76657a63b2c500"),Re("b51fbb69051255d1becbd683de5848242a89c229348dd72896a87ada94ae8665"));dt(r!==null&&gr(r,Re("9730c2ee69edbb958d42db7460bafa18fef9d955325aec99044c81c8282b0a24")),"privateAdd: known vector failed"),dt(gr(t.privateNegate(Re("0000000000000000000000000000000000000000000000000000000000000001")),Re("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140")),"privateNegate(1) should equal n-1"),dt(gr(t.privateNegate(Re("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e")),Re("0000000000000000000000000000000000000000000000000000000000000003")),"privateNegate(n-3) should equal 3"),dt(gr(t.privateNegate(Re("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af")),Re("4eede1bf775995d70a494f0a7bb6bc11e0b8cccd41cce8009ab1132c8b0a3792")),"privateNegate known vector failed"),dt(gr(t.pointCompress(Re("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!0),Re("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798")),"pointCompress uncompressed->compressed failed"),dt(gr(t.pointCompress(Re("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!1),Re("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")),"pointCompress uncompressed->uncompressed failed"),dt(gr(t.pointCompress(Re("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!0),Re("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798")),"pointCompress compressed->compressed failed"),dt(gr(t.pointCompress(Re("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!1),Re("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")),"pointCompress compressed->uncompressed failed");const n=t.pointFromScalar(Re("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"));dt(n!==null&&gr(n,Re("02b07ba9dca9523b7ef4bd97703d43d20399eb698e194704791a25ce77a400df99")),"pointFromScalar known vector failed"),dt(t.xOnlyPointAddTweak(Re("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Re("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))===null,"xOnlyPointAddTweak should return null for infinity result");let i=t.xOnlyPointAddTweak(Re("1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b"),Re("a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac"));dt(i!==null&&gr(i.xOnlyPubkey,Re("e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"))&&i.parity===1,"xOnlyPointAddTweak parity=1 case failed"),i=t.xOnlyPointAddTweak(Re("2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991"),Re("823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47")),dt(i!==null&&gr(i.xOnlyPubkey,Re("9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"))&&i.parity===0,"xOnlyPointAddTweak parity=0 case failed");const o=t.sign(Re("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),Re("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"));if(dt(gr(o,Re("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5")),"sign known vector failed"),dt(t.verify(Re("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),Re("0379be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),o),"verify known vector failed"),t.signSchnorr){const s=t.signSchnorr(Re("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),Re("c90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b14e5c9"),Re("c87aa53824b4d7ae2eb035a2b5bbbccc080e76cdc6d1692c4b0b62d798e6d906"));dt(gr(s,Re("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7")),"signSchnorr known vector failed")}t.verifySchnorr&&dt(t.verifySchnorr(Re("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),Re("dd308afec5777e13121fa72b9cc1b7cc0139715309b086c960e18fd969774eb8"),Re("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7")),"verifySchnorr known vector failed")}const jT=Object.freeze(Object.defineProperty({__proto__:null,ECPairSigner:$i,EC_N:Rl,EC_P:Mx,LegacyBackend:C8,NobleBackend:R8,SATOSHI_MAX:Ip,SignerCapability:lo,assertBytes32:_p,assertMessageHash:r8,assertPrivateKey:J3,assertPublicKey:e8,assertXOnlyPublicKey:t8,bytesEqual:gr,compareBytes:zx,concatBytes:q3,createBytes20:Gx,createBytes32:qx,createLegacyBackend:FT,createMessageHash:Zx,createNobleBackend:$8,createPrivateKey:Ts,createPublicKey:su,createSatoshi:Qx,createSchnorrSignature:Yx,createSignature:Xx,createXOnlyPublicKey:n8,decodeWIF:o8,encodeWIF:i8,fromHexInternal:W3,isBytes20:Kx,isBytes32:Fx,isMessageHash:Wx,isPrivateKey:jx,isPublicKey:X3,isSatoshi:Q3,isSchnorrSignature:Z3,isSignature:Y3,isXOnlyPublicKey:Vx,isZeroBytes:ou,toHex:os,verifyCryptoBackend:KT},Symbol.toStringTag,{value:"Module"}));var xw={},An={},Qo={},Tw;function N8(){if(Tw)return Qo;Tw=1,Object.defineProperty(Qo,"__esModule",{value:!0}),Qo.hash160=n,Qo.hash256=i,Qo.hmacSHA512=o;const t=Q6,e=fA,r=cp;function n(s){return(0,e.ripemd160)((0,r.sha256)(s))}function i(s){return(0,r.sha256)(s)}function o(s,a){return(0,t.hmac)(r.sha512,s,a)}return Qo}var kn={};const H8=no(jT),Hc="0123456789abcdefABCDEF",Dc=Hc.split("").map(t=>t.codePointAt(0)),zc=Array(256).fill(!0).map((t,e)=>{const r=String.fromCodePoint(e),n=Hc.indexOf(r);return n<0?void 0:n<16?n:n-6}),D8=new TextEncoder,z8=new TextDecoder;function VT(t){return z8.decode(t)}function WT(t){return D8.encode(t)}function qT(t){const e=t.reduce((i,o)=>i+o.length,0),r=new Uint8Array(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}function GT(t){const e=t||new Uint8Array;return e.length>512?YT(e):XT(e)}function XT(t){let e="";for(let r=0;r<t.length;++r)e+=Hc[zc[Dc[t[r]>>4]]],e+=Hc[zc[Dc[t[r]&15]]];return e}function YT(t){const e=new Uint8Array(t.length*2);for(let r=0;r<t.length;++r)e[r*2]=Dc[t[r]>>4],e[r*2+1]=Dc[t[r]&15];return z8.decode(e)}function ZT(t){const e=D8.encode(t||""),r=new Uint8Array(Math.floor(e.length/2));let n;for(n=0;n<r.length;n++){const i=zc[e[n*2]],o=zc[e[n*2+1]];if(i===void 0||o===void 0)break;r[n]=i<<4|o}return n===r.length?r:r.slice(0,n)}function QT(t){return btoa(String.fromCharCode(...t))}function JT(t){const e=atob(t),r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r}function e7(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;++n)if(t[n]!==e[n])return t[n]<e[n]?-1:1;return t.length===e.length?0:t.length>e.length?1:-1}function t7(t,e,r){if(e+1>t.length)throw new Error("Offset is outside the bounds of Uint8Array");if(r>255)throw new Error(`The value of "value" is out of range. It must be >= 0 and <= 255. Received ${r}`);return t[e]=r,e+1}function r7(t,e,r,n){if(e+2>t.length)throw new Error("Offset is outside the bounds of Uint8Array");if(n=n.toUpperCase(),r>65535)throw new Error(`The value of "value" is out of range. It must be >= 0 and <= 65535. Received ${r}`);return n==="LE"?(t[e]=r&255,t[e+1]=r>>8&255):(t[e]=r>>8&255,t[e+1]=r&255),e+2}function n7(t,e,r,n){if(e+4>t.length)throw new Error("Offset is outside the bounds of Uint8Array");if(n=n.toUpperCase(),r>4294967295)throw new Error(`The value of "value" is out of range. It must be >= 0 and <= ${4294967295}. Received ${r}`);return n==="LE"?(t[e]=r&255,t[e+1]=r>>8&255,t[e+2]=r>>16&255,t[e+3]=r>>24&255):(t[e]=r>>24&255,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=r&255),e+4}function i7(t,e,r,n){if(e+8>t.length)throw new Error("Offset is outside the bounds of Uint8Array");if(n=n.toUpperCase(),r>0xffffffffffffffffn)throw new Error(`The value of "value" is out of range. It must be >= 0 and <= ${0xffffffffffffffffn}. Received ${r}`);return n==="LE"?(t[e]=Number(r&0xffn),t[e+1]=Number(r>>8n&0xffn),t[e+2]=Number(r>>16n&0xffn),t[e+3]=Number(r>>24n&0xffn),t[e+4]=Number(r>>32n&0xffn),t[e+5]=Number(r>>40n&0xffn),t[e+6]=Number(r>>48n&0xffn),t[e+7]=Number(r>>56n&0xffn)):(t[e]=Number(r>>56n&0xffn),t[e+1]=Number(r>>48n&0xffn),t[e+2]=Number(r>>40n&0xffn),t[e+3]=Number(r>>32n&0xffn),t[e+4]=Number(r>>24n&0xffn),t[e+5]=Number(r>>16n&0xffn),t[e+6]=Number(r>>8n&0xffn),t[e+7]=Number(r&0xffn)),e+8}function o7(t,e){if(e+1>t.length)throw new Error("Offset is outside the bounds of Uint8Array");return t[e]}function s7(t,e,r){if(e+2>t.length)throw new Error("Offset is outside the bounds of Uint8Array");if(r=r.toUpperCase(),r==="LE"){let n=0;return n=(n<<8)+t[e+1],n=(n<<8)+t[e],n}else{let n=0;return n=(n<<8)+t[e],n=(n<<8)+t[e+1],n}}function a7(t,e,r){if(e+4>t.length)throw new Error("Offset is outside the bounds of Uint8Array");if(r=r.toUpperCase(),r==="LE"){let n=0;return n=(n<<8)+t[e+3]>>>0,n=(n<<8)+t[e+2]>>>0,n=(n<<8)+t[e+1]>>>0,n=(n<<8)+t[e]>>>0,n}else{let n=0;return n=(n<<8)+t[e]>>>0,n=(n<<8)+t[e+1]>>>0,n=(n<<8)+t[e+2]>>>0,n=(n<<8)+t[e+3]>>>0,n}}function u7(t,e,r){if(e+8>t.length)throw new Error("Offset is outside the bounds of Uint8Array");if(r=r.toUpperCase(),r==="LE"){let n=0n;return n=(n<<8n)+BigInt(t[e+7]),n=(n<<8n)+BigInt(t[e+6]),n=(n<<8n)+BigInt(t[e+5]),n=(n<<8n)+BigInt(t[e+4]),n=(n<<8n)+BigInt(t[e+3]),n=(n<<8n)+BigInt(t[e+2]),n=(n<<8n)+BigInt(t[e+1]),n=(n<<8n)+BigInt(t[e]),n}else{let n=0n;return n=(n<<8n)+BigInt(t[e]),n=(n<<8n)+BigInt(t[e+1]),n=(n<<8n)+BigInt(t[e+2]),n=(n<<8n)+BigInt(t[e+3]),n=(n<<8n)+BigInt(t[e+4]),n=(n<<8n)+BigInt(t[e+5]),n=(n<<8n)+BigInt(t[e+6]),n=(n<<8n)+BigInt(t[e+7]),n}}function c7(t,e,r){if(e+1>t.length)throw new Error("Offset is outside the bounds of Uint8Array");if(r>127||r<-128)throw new Error(`The value of "value" is out of range. It must be >= -128 and <= 127. Received ${r}`);return t[e]=r,e+1}function l7(t,e,r,n){if(e+2>t.length)throw new Error("Offset is outside the bounds of Uint8Array");if(r>32767||r<-32768)throw new Error(`The value of "value" is out of range. It must be >= -32768 and <= 32767. Received ${r}`);return n=n.toUpperCase(),n==="LE"?(t[e]=r&255,t[e+1]=r>>8&255):(t[e]=r>>8&255,t[e+1]=r&255),e+2}function f7(t,e,r,n){if(e+4>t.length)throw new Error("Offset is outside the bounds of Uint8Array");if(r>2147483647||r<-2147483648)throw new Error(`The value of "value" is out of range. It must be >= -2147483648 and <= 2147483647. Received ${r}`);return n=n.toUpperCase(),n==="LE"?(t[e]=r&255,t[e+1]=r>>8&255,t[e+2]=r>>16&255,t[e+3]=r>>24&255):(t[e]=r>>24&255,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=r&255),e+4}function h7(t,e,r,n){if(e+8>t.length)throw new Error("Offset is outside the bounds of Uint8Array");if(r>0x7fffffffffffffffn||r<-0x8000000000000000n)throw new Error(`The value of "value" is out of range. It must be >= ${-0x8000000000000000n} and <= ${0x7fffffffffffffffn}. Received ${r}`);return n=n.toUpperCase(),n==="LE"?(t[e]=Number(r&0xffn),t[e+1]=Number(r>>8n&0xffn),t[e+2]=Number(r>>16n&0xffn),t[e+3]=Number(r>>24n&0xffn),t[e+4]=Number(r>>32n&0xffn),t[e+5]=Number(r>>40n&0xffn),t[e+6]=Number(r>>48n&0xffn),t[e+7]=Number(r>>56n&0xffn)):(t[e]=Number(r>>56n&0xffn),t[e+1]=Number(r>>48n&0xffn),t[e+2]=Number(r>>40n&0xffn),t[e+3]=Number(r>>32n&0xffn),t[e+4]=Number(r>>24n&0xffn),t[e+5]=Number(r>>16n&0xffn),t[e+6]=Number(r>>8n&0xffn),t[e+7]=Number(r&0xffn)),e+8}function d7(t,e){if(e+1>t.length)throw new Error("Offset is outside the bounds of Uint8Array");const r=t[e];return r<=127?r:r-256}function p7(t,e,r){if(e+2>t.length)throw new Error("Offset is outside the bounds of Uint8Array");if(r=r.toUpperCase(),r==="LE"){const n=t[e]+(t[e+1]<<8);return t[e+1]<=127?n:n-65536}else{const n=(t[e]<<8)+t[e+1];return t[e]<=127?n:n-65536}}function g7(t,e,r){if(e+4>t.length)throw new Error("Offset is outside the bounds of Uint8Array");if(r=r.toUpperCase(),r==="LE"){const n=t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24>>>0);return t[e+3]<=127?n:n-4294967296}else{const n=(t[e]<<24>>>0)+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];return t[e]<=127?n:n-4294967296}}function y7(t,e,r){if(e+8>t.length)throw new Error("Offset is outside the bounds of Uint8Array");r=r.toUpperCase();let n=0n;if(r==="LE")return n=(n<<8n)+BigInt(t[e+7]),n=(n<<8n)+BigInt(t[e+6]),n=(n<<8n)+BigInt(t[e+5]),n=(n<<8n)+BigInt(t[e+4]),n=(n<<8n)+BigInt(t[e+3]),n=(n<<8n)+BigInt(t[e+2]),n=(n<<8n)+BigInt(t[e+1]),n=(n<<8n)+BigInt(t[e]),t[e+7]<=127?n:n-0x10000000000000000n;{let i=0n;return i=(i<<8n)+BigInt(t[e]),i=(i<<8n)+BigInt(t[e+1]),i=(i<<8n)+BigInt(t[e+2]),i=(i<<8n)+BigInt(t[e+3]),i=(i<<8n)+BigInt(t[e+4]),i=(i<<8n)+BigInt(t[e+5]),i=(i<<8n)+BigInt(t[e+6]),i=(i<<8n)+BigInt(t[e+7]),t[e]<=127?i:i-0x10000000000000000n}}const m7=Object.freeze(Object.defineProperty({__proto__:null,compare:e7,concat:qT,fromBase64:JT,fromHex:ZT,fromUtf8:WT,readInt16:p7,readInt32:g7,readInt64:y7,readInt8:d7,readUInt16:s7,readUInt32:a7,readUInt64:u7,readUInt8:o7,toBase64:QT,toHex:GT,toUtf8:VT,writeInt16:l7,writeInt32:f7,writeInt64:h7,writeInt8:c7,writeUInt16:r7,writeUInt32:n7,writeUInt64:i7,writeUInt8:t7},Symbol.toStringTag,{value:"Module"})),$p=no(m7);var Bw;function b7(){if(Bw)return kn;Bw=1;var t=kn&&kn.__createBinding||(Object.create?(function(l,f,u,p){p===void 0&&(p=u);var y=Object.getOwnPropertyDescriptor(f,u);(!y||("get"in y?!f.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return f[u]}}),Object.defineProperty(l,p,y)}):(function(l,f,u,p){p===void 0&&(p=u),l[p]=f[u]})),e=kn&&kn.__setModuleDefault||(Object.create?(function(l,f){Object.defineProperty(l,"default",{enumerable:!0,value:f})}):function(l,f){l.default=f}),r=kn&&kn.__importStar||(function(){var l=function(f){return l=Object.getOwnPropertyNames||function(u){var p=[];for(var y in u)Object.prototype.hasOwnProperty.call(u,y)&&(p[p.length]=y);return p},l(f)};return function(f){if(f&&f.__esModule)return f;var u={};if(f!=null)for(var p=l(f),y=0;y<p.length;y++)p[y]!=="default"&&t(u,f,p[y]);return e(u,f),u}})();Object.defineProperty(kn,"__esModule",{value:!0}),kn.testEcc=a;const n=H8,i=r($p),o=l=>i.fromHex(l);function s(l){if(!l)throw new Error("ecc library invalid")}function a(l){(0,n.verifyCryptoBackend)(l),s(i.compare(l.pointAddScalar(o("0379be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),o("0000000000000000000000000000000000000000000000000000000000000003")),o("02c6047f9441ed7d6d3045406e95c07cd85c778e4b8cef3ca7abac09b95c709ee5"))===0)}return kn}function $o(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Cp(t){if(!$o(t))throw new Error("Uint8Array expected")}function M8(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(r=>typeof r=="string"):e.every(r=>Number.isSafeInteger(r)):!1}function Np(t){if(typeof t!="function")throw new Error("function expected");return!0}function to(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function Ms(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function Mc(t){if(!Array.isArray(t))throw new Error("array expected")}function Fc(t,e){if(!M8(!0,e))throw new Error(`${t}: array of strings expected`)}function Hp(t,e){if(!M8(!1,e))throw new Error(`${t}: array of numbers expected`)}function Ar(...t){const e=o=>o,r=(o,s)=>a=>o(s(a)),n=t.map(o=>o.encode).reduceRight(r,e),i=t.map(o=>o.decode).reduce(r,e);return{encode:n,decode:i}}function Lr(t){const e=typeof t=="string"?t.split(""):t,r=e.length;Fc("alphabet",e);const n=new Map(e.map((i,o)=>[i,o]));return{encode:i=>(Mc(i),i.map(o=>{if(!Number.isSafeInteger(o)||o<0||o>=r)throw new Error(`alphabet.encode: digit index outside alphabet "${o}". Allowed: ${t}`);return e[o]})),decode:i=>(Mc(i),i.map(o=>{to("alphabet.decode",o);const s=n.get(o);if(s===void 0)throw new Error(`Unknown letter: "${o}". Allowed: ${t}`);return s}))}}function Rr(t=""){return to("join",t),{encode:e=>(Fc("join.decode",e),e.join(t)),decode:e=>(to("join.decode",e),e.split(t))}}function uu(t,e="="){return Ms(t),to("padding",e),{encode(r){for(Fc("padding.encode",r);r.length*t%8;)r.push(e);return r},decode(r){Fc("padding.decode",r);let n=r.length;if(n*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;n>0&&r[n-1]===e;n--)if((n-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return r.slice(0,n)}}}function F8(t){return Np(t),{encode:e=>e,decode:e=>t(e)}}function yd(t,e,r){if(e<2)throw new Error(`convertRadix: invalid from=${e}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: invalid to=${r}, base cannot be less than 2`);if(Mc(t),!t.length)return[];let n=0;const i=[],o=Array.from(t,a=>{if(Ms(a),a<0||a>=e)throw new Error(`invalid integer: ${a}`);return a}),s=o.length;for(;;){let a=0,l=!0;for(let f=n;f<s;f++){const u=o[f],p=e*a,y=p+u;if(!Number.isSafeInteger(y)||p/e!==a||y-u!==p)throw new Error("convertRadix: carry overflow");const w=y/r;a=y%r;const A=Math.floor(w);if(o[f]=A,!Number.isSafeInteger(A)||A*r+a!==y)throw new Error("convertRadix: carry overflow");if(l)A?l=!1:n=f;else continue}if(i.push(a),l)break}for(let a=0;a<t.length-1&&t[a]===0;a++)i.push(0);return i.reverse()}const K8=(t,e)=>e===0?t:K8(e,t%e),Kc=(t,e)=>t+(e-K8(t,e)),ic=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function jc(t,e,r,n){if(Mc(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(Kc(e,r)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${r} carryBits=${Kc(e,r)}`);let i=0,o=0;const s=ic[e],a=ic[r]-1,l=[];for(const f of t){if(Ms(f),f>=s)throw new Error(`convertRadix2: invalid data word=${f} from=${e}`);if(i=i<<e|f,o+e>32)throw new Error(`convertRadix2: carry overflow pos=${o} from=${e}`);for(o+=e;o>=r;o-=r)l.push((i>>o-r&a)>>>0);const u=ic[o];if(u===void 0)throw new Error("invalid carry");i&=u-1}if(i=i<<r-o&a,!n&&o>=e)throw new Error("Excess padding");if(!n&&i>0)throw new Error(`Non-zero padding: ${i}`);return n&&o>0&&l.push(i>>>0),l}function j8(t){Ms(t);const e=2**8;return{encode:r=>{if(!$o(r))throw new Error("radix.encode input should be Uint8Array");return yd(Array.from(r),e,t)},decode:r=>(Hp("radix.decode",r),Uint8Array.from(yd(r,t,e)))}}function jr(t,e=!1){if(Ms(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(Kc(8,t)>32||Kc(t,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!$o(r))throw new Error("radix2.encode input should be Uint8Array");return jc(Array.from(r),8,t,!e)},decode:r=>(Hp("radix2.decode",r),Uint8Array.from(jc(r,t,8,e)))}}function Pw(t){return Np(t),function(...e){try{return t.apply(null,e)}catch{}}}function V8(t,e){return Ms(t),Np(e),{encode(r){if(!$o(r))throw new Error("checksum.encode: input should be Uint8Array");const n=e(r).slice(0,t),i=new Uint8Array(r.length+t);return i.set(r),i.set(n,r.length),i},decode(r){if(!$o(r))throw new Error("checksum.decode: input should be Uint8Array");const n=r.slice(0,-t),i=r.slice(-t),o=e(n).slice(0,t);for(let s=0;s<t;s++)if(o[s]!==i[s])throw new Error("Invalid checksum");return n}}}const w7={alphabet:Lr,chain:Ar,checksum:V8,convertRadix:yd,convertRadix2:jc,radix:j8,radix2:jr,join:Rr,padding:uu},W8=Ar(jr(4),Lr("0123456789ABCDEF"),Rr("")),q8=Ar(jr(5),Lr("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),uu(5),Rr("")),v7=Ar(jr(5),Lr("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Rr("")),E7=Ar(jr(5),Lr("0123456789ABCDEFGHIJKLMNOPQRSTUV"),uu(5),Rr("")),S7=Ar(jr(5),Lr("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Rr("")),A7=Ar(jr(5),Lr("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),Rr(""),F8(t=>t.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),G8=typeof Uint8Array.from([]).toBase64=="function"&&typeof Uint8Array.fromBase64=="function",X8=(t,e)=>{to("base64",t);const r=e?/^[A-Za-z0-9=_-]+$/:/^[A-Za-z0-9=+/]+$/,n=e?"base64url":"base64";if(t.length>0&&!r.test(t))throw new Error("invalid base64");return Uint8Array.fromBase64(t,{alphabet:n,lastChunkHandling:"strict"})},Y8=G8?{encode(t){return Cp(t),t.toBase64()},decode(t){return X8(t,!1)}}:Ar(jr(6),Lr("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),uu(6),Rr("")),k7=Ar(jr(6),Lr("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Rr("")),Z8=G8?{encode(t){return Cp(t),t.toBase64({alphabet:"base64url"})},decode(t){return X8(t,!0)}}:Ar(jr(6),Lr("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),uu(6),Rr("")),I7=Ar(jr(6),Lr("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Rr("")),Dp=t=>Ar(j8(58),Lr(t),Rr("")),Ha=Dp("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),_7=Dp("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),x7=Dp("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),Ow=[0,2,3,5,6,7,9,10,11],Q8={encode(t){let e="";for(let r=0;r<t.length;r+=8){const n=t.subarray(r,r+8);e+=Ha.encode(n).padStart(Ow[n.length],"1")}return e},decode(t){let e=[];for(let r=0;r<t.length;r+=11){const n=t.slice(r,r+11),i=Ow.indexOf(n.length),o=Ha.decode(n);for(let s=0;s<o.length-i;s++)if(o[s]!==0)throw new Error("base58xmr: wrong padding");e=e.concat(Array.from(o.slice(o.length-i)))}return Uint8Array.from(e)}},J8=t=>Ar(V8(4,e=>t(t(e))),Ha),T7=J8,md=Ar(Lr("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Rr("")),Uw=[996825010,642813549,513874426,1027748829,705979059];function Js(t){const e=t>>25;let r=(t&33554431)<<5;for(let n=0;n<Uw.length;n++)(e>>n&1)===1&&(r^=Uw[n]);return r}function Lw(t,e,r=1){const n=t.length;let i=1;for(let o=0;o<n;o++){const s=t.charCodeAt(o);if(s<33||s>126)throw new Error(`Invalid prefix (${t})`);i=Js(i)^s>>5}i=Js(i);for(let o=0;o<n;o++)i=Js(i)^t.charCodeAt(o)&31;for(let o of e)i=Js(i)^o;for(let o=0;o<6;o++)i=Js(i);return i^=r,md.encode(jc([i%ic[30]],30,5,!1))}function eS(t){const e=t==="bech32"?1:734539939,r=jr(5),n=r.decode,i=r.encode,o=Pw(n);function s(p,y,w=90){to("bech32.encode prefix",p),$o(y)&&(y=Array.from(y)),Hp("bech32.encode",y);const A=p.length;if(A===0)throw new TypeError(`Invalid prefix length ${A}`);const S=A+7+y.length;if(w!==!1&&S>w)throw new TypeError(`Length ${S} exceeds limit ${w}`);const k=p.toLowerCase(),I=Lw(k,y,e);return`${k}1${md.encode(y)}${I}`}function a(p,y=90){to("bech32.decode input",p);const w=p.length;if(w<8||y!==!1&&w>y)throw new TypeError(`invalid string length: ${w} (${p}). Expected (8..${y})`);const A=p.toLowerCase();if(p!==A&&p!==p.toUpperCase())throw new Error("String must be lowercase or uppercase");const S=A.lastIndexOf("1");if(S===0||S===-1)throw new Error('Letter "1" must be present between prefix and data only');const k=A.slice(0,S),I=A.slice(S+1);if(I.length<6)throw new Error("Data must be at least 6 characters long");const N=md.decode(I).slice(0,-6),B=Lw(k,N,e);if(!I.endsWith(B))throw new Error(`Invalid checksum in ${p}: expected "${B}"`);return{prefix:k,words:N}}const l=Pw(a);function f(p){const{prefix:y,words:w}=a(p,!1);return{prefix:y,words:w,bytes:n(w)}}function u(p,y){return s(p,i(y))}return{encode:s,decode:a,encodeFromBytes:u,decodeToBytes:f,decodeUnsafe:l,fromWords:n,fromWordsUnsafe:o,toWords:i}}const B7=eS("bech32"),P7=eS("bech32m"),tS={encode:t=>new TextDecoder().decode(t),decode:t=>new TextEncoder().encode(t)},O7=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",U7={encode(t){return Cp(t),t.toHex()},decode(t){return to("hex",t),Uint8Array.fromHex(t)}},rS=O7?U7:Ar(jr(4),Lr("0123456789abcdef"),Rr(""),F8(t=>{if(typeof t!="string"||t.length%2!==0)throw new TypeError(`hex.decode: expected string, got ${typeof t} with length ${t.length}`);return t.toLowerCase()})),Vc={utf8:tS,hex:rS,base16:W8,base32:q8,base64:Y8,base64url:Z8,base58:Ha,base58xmr:Q8},nS="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr",iS=(t,e)=>{if(typeof t!="string"||!Vc.hasOwnProperty(t))throw new TypeError(nS);if(!$o(e))throw new TypeError("bytesToString() expects Uint8Array");return Vc[t].encode(e)},L7=iS,oS=(t,e)=>{if(!Vc.hasOwnProperty(t))throw new TypeError(nS);if(typeof e!="string")throw new TypeError("stringToBytes() expects string");return Vc[t].decode(e)},R7=oS,$7=Object.freeze(Object.defineProperty({__proto__:null,base16:W8,base32:q8,base32crockford:A7,base32hex:E7,base32hexnopad:S7,base32nopad:v7,base58:Ha,base58check:T7,base58flickr:_7,base58xmr:Q8,base58xrp:x7,base64:Y8,base64nopad:k7,base64url:Z8,base64urlnopad:I7,bech32:B7,bech32m:P7,bytes:R7,bytesToString:iS,createBase58check:J8,hex:rS,str:L7,stringToBytes:oS,utf8:tS,utils:w7},Symbol.toStringTag,{value:"Module"})),sS=no($7);var q={},Rw;function zp(){if(Rw)return q;Rw=1;let t;function e(b){t={...t,...b}}function r(b){return{lang:b?.lang??t?.lang,message:b?.message,abortEarly:b?.abortEarly??t?.abortEarly,abortPipeEarly:b?.abortPipeEarly??t?.abortPipeEarly}}function n(){t=void 0}let i;function o(b,m){i||(i=new Map),i.set(m,b)}function s(b){return i?.get(b)}function a(b){i?.delete(b)}let l;function f(b,m){l||(l=new Map),l.set(m,b)}function u(b){return l?.get(b)}function p(b){l?.delete(b)}let y;function w(b,m,h){y||(y=new Map),y.get(b)||y.set(b,new Map),y.get(b).set(h,m)}function A(b,m){return y?.get(b)?.get(m)}function S(b,m){y?.get(b)?.delete(m)}function k(b){const m=typeof b;return m==="string"?`"${b}"`:m==="number"||m==="bigint"||m==="boolean"?`${b}`:m==="object"||m==="function"?(b&&Object.getPrototypeOf(b)?.constructor?.name)??"null":m}function I(b,m,h,E,F){const Q=F&&"input"in F?F.input:h.value,ne=F?.expected??b.expects??null,ue=F?.received??k(Q),oe={kind:b.kind,type:b.type,input:Q,expected:ne,received:ue,message:`Invalid ${m}: ${ne?`Expected ${ne} but r`:"R"}eceived ${ue}`,requirement:b.requirement,path:F?.path,issues:F?.issues,lang:E.lang,abortEarly:E.abortEarly,abortPipeEarly:E.abortPipeEarly},de=b.kind==="schema",we=F?.message??b.message??A(b.reference,oe.lang)??(de?u(oe.lang):null)??E.message??s(oe.lang);we!==void 0&&(oe.message=typeof we=="function"?we(oe):we),de&&(h.typed=!1),h.issues?h.issues.push(oe):h.issues=[oe]}let N;function B(b){return N||(N=new TextEncoder),N.encode(b).length}let V;function W(b){V||(V=new Intl.Segmenter);const m=V.segment(b);let h=0;for(const E of m)h++;return h}function Y(b,m){if("pipe"in b){const h=[];for(let E=b.pipe.length-1;E>=0;E--){const F=b.pipe[E];if(F.kind==="schema"&&"pipe"in F)h.push(F);else if(F.kind==="metadata"&&F.type===m)return F[m]}for(const E of h){const F=Y(E,m);if(F!==void 0)return F}}}function H(b){return{version:1,vendor:"valibot",validate(m){return b["~run"]({value:m},r())}}}let ie;function T(b,m){ie||(ie=new Map),ie.get(b)||ie.set(b,new Intl.Segmenter(b,{granularity:"word"}));const h=ie.get(b).segment(m);let E=0;for(const F of h)F.isWordLike&&E++;return E}const C=/\D/gu;function G(b){const m=b.replace(C,"");let h=m.length,E=1,F=0;for(;h;){const Q=+m[--h];E^=1,F+=E?[0,2,4,6,8,1,3,5,7,9][Q]:Q}return F%10===0}function U(b,m){return Object.hasOwn(b,m)&&m!=="__proto__"&&m!=="prototype"&&m!=="constructor"}function P(b,m){const h=[...new Set(b)];return h.length>1?`(${h.join(` ${m} `)})`:h[0]??"never"}function L(b,m){const h={};for(const E of b)h[E]=m;return h}function R(b){const m={};for(const h of b)Object.assign(m,h.entries);return m}function z(b){if(b.path){let m="";for(const h of b.path)if(typeof h.key=="string"||typeof h.key=="number")m?m+=`.${h.key}`:m+=h.key;else return null;return m}return null}function X(b,m){return m.kind===b}function ee(b,m){return m.type===b}function _(b){return b instanceof K}var K=class extends Error{constructor(b){super(b[0].message),this.name="ValiError",this.issues=b}};function Z(b){return{kind:"transformation",type:"args",reference:Z,async:!1,schema:b,"~run"(m,h){const E=m.value;return m.value=(...F)=>{const Q=this.schema["~run"]({value:F},h);if(Q.issues)throw new K(Q.issues);return E(...Q.value)},m}}}function D(b){return{kind:"transformation",type:"args",reference:D,async:!1,schema:b,"~run"(m,h){const E=m.value;return m.value=async(...F)=>{const Q=await b["~run"]({value:F},h);if(Q.issues)throw new K(Q.issues);return E(...Q.value)},m}}}function J(){return{kind:"transformation",type:"await",reference:J,async:!0,async"~run"(b){return b.value=await b.value,b}}}const j=/^(?:[\da-z+/]{4})*(?:[\da-z+/]{2}==|[\da-z+/]{3}=)?$/iu,te=/^[A-Z]{6}(?!00)[\dA-Z]{2}(?:[\dA-Z]{3})?$/u,ae=/^[a-z][\da-z]*$/u,ce=/^[+-]?(?:\d*\.)?\d+$/u,pe=/^\d+$/u,le=/^[\w+-]+(?:\.[\w+-]+)*@[\da-z]+(?:[.-][\da-z]+)*\.[a-z]{2,}$/iu,ye=/^(?:[\u{1F1E6}-\u{1F1FF}]{2}|\u{1F3F4}[\u{E0061}-\u{E007A}]{2}[\u{E0030}-\u{E0039}\u{E0061}-\u{E007A}]{1,3}\u{E007F}|(?:\p{Emoji}\uFE0F\u20E3?|\p{Emoji_Modifier_Base}\p{Emoji_Modifier}?|(?![\p{Emoji_Modifier_Base}\u{1F1E6}-\u{1F1FF}])\p{Emoji_Presentation})(?:\u200D(?:\p{Emoji}\uFE0F\u20E3?|\p{Emoji_Modifier_Base}\p{Emoji_Modifier}?|(?![\p{Emoji_Modifier_Base}\u{1F1E6}-\u{1F1FF}])\p{Emoji_Presentation}))*)+$/u,Ae=/^(?:0[hx])?[\da-fA-F]+$/u,xe=/^#(?:[\da-fA-F]{3,4}|[\da-fA-F]{6}|[\da-fA-F]{8})$/u,Be=/^\d{15}$|^\d{2}-\d{6}-\d{6}-\d$/u,We=/^(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])(?:\.(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])){3}$/u,ze=/^(?:(?:[\da-f]{1,4}:){7}[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,7}:|(?:[\da-f]{1,4}:){1,6}:[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,5}(?::[\da-f]{1,4}){1,2}|(?:[\da-f]{1,4}:){1,4}(?::[\da-f]{1,4}){1,3}|(?:[\da-f]{1,4}:){1,3}(?::[\da-f]{1,4}){1,4}|(?:[\da-f]{1,4}:){1,2}(?::[\da-f]{1,4}){1,5}|[\da-f]{1,4}:(?::[\da-f]{1,4}){1,6}|:(?:(?::[\da-f]{1,4}){1,7}|:)|fe80:(?::[\da-f]{0,4}){0,4}%[\da-z]+|::(?:f{4}(?::0{1,4})?:)?(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d)|(?:[\da-f]{1,4}:){1,4}:(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d))$/iu,Qe=/^(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])(?:\.(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])){3}$|^(?:(?:[\da-f]{1,4}:){7}[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,7}:|(?:[\da-f]{1,4}:){1,6}:[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,5}(?::[\da-f]{1,4}){1,2}|(?:[\da-f]{1,4}:){1,4}(?::[\da-f]{1,4}){1,3}|(?:[\da-f]{1,4}:){1,3}(?::[\da-f]{1,4}){1,4}|(?:[\da-f]{1,4}:){1,2}(?::[\da-f]{1,4}){1,5}|[\da-f]{1,4}:(?::[\da-f]{1,4}){1,6}|:(?:(?::[\da-f]{1,4}){1,7}|:)|fe80:(?::[\da-f]{0,4}){0,4}%[\da-z]+|::(?:f{4}(?::0{1,4})?:)?(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d)|(?:[\da-f]{1,4}:){1,4}:(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d))$/iu,qe=/^\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\d|0[1-9]|3[01])$/u,lt=/^\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\d|0[1-9]|3[01])[T ](?:0\d|1\d|2[0-3]):[0-5]\d$/u,me=/^(?:0\d|1\d|2[0-3]):[0-5]\d$/u,at=/^(?:0\d|1\d|2[0-3])(?::[0-5]\d){2}$/u,Ie=/^\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\d|0[1-9]|3[01])[T ](?:0\d|1\d|2[0-3])(?::[0-5]\d){2}(?:\.\d{1,9})?(?:Z|[+-](?:0\d|1\d|2[0-3])(?::?[0-5]\d)?)$/u,He=/^\d{4}-W(?:0[1-9]|[1-4]\d|5[0-3])$/u,Ke=/^(?:[\da-f]{2}:){5}[\da-f]{2}$|^(?:[\da-f]{2}-){5}[\da-f]{2}$|^(?:[\da-f]{4}\.){2}[\da-f]{4}$/iu,ft=/^(?:[\da-f]{2}:){7}[\da-f]{2}$|^(?:[\da-f]{2}-){7}[\da-f]{2}$|^(?:[\da-f]{4}\.){3}[\da-f]{4}$|^(?:[\da-f]{4}:){3}[\da-f]{4}$/iu,Je=/^(?:[\da-f]{2}:){5}[\da-f]{2}$|^(?:[\da-f]{2}-){5}[\da-f]{2}$|^(?:[\da-f]{4}\.){2}[\da-f]{4}$|^(?:[\da-f]{2}:){7}[\da-f]{2}$|^(?:[\da-f]{2}-){7}[\da-f]{2}$|^(?:[\da-f]{4}\.){3}[\da-f]{4}$|^(?:[\da-f]{4}:){3}[\da-f]{4}$/iu,Vt=/^[\w-]+$/u,kr=/^(?:0o)?[0-7]+$/u,yt=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,rr=/^[\da-z]+(?:[-_][\da-z]+)*$/u,c=/^[\da-hjkmnp-tv-zA-HJKMNP-TV-Z]{26}$/u,d=/^[\da-f]{8}(?:-[\da-f]{4}){3}-[\da-f]{12}$/iu;function g(b){return{kind:"validation",type:"base64",reference:g,async:!1,expects:null,requirement:j,message:b,"~run"(m,h){return m.typed&&!this.requirement.test(m.value)&&I(this,"Base64",m,h),m}}}function O(b){return{kind:"validation",type:"bic",reference:O,async:!1,expects:null,requirement:te,message:b,"~run"(m,h){return m.typed&&!this.requirement.test(m.value)&&I(this,"BIC",m,h),m}}}function M(b){return{kind:"transformation",type:"brand",reference:M,async:!1,name:b,"~run"(m){return m}}}function re(b,m){return{kind:"validation",type:"bytes",reference:re,async:!1,expects:`${b}`,requirement:b,message:m,"~run"(h,E){if(h.typed){const F=B(h.value);F!==this.requirement&&I(this,"bytes",h,E,{received:`${F}`})}return h}}}function fe(b,m){return{kind:"validation",type:"check",reference:fe,async:!1,expects:null,requirement:b,message:m,"~run"(h,E){return h.typed&&!this.requirement(h.value)&&I(this,"input",h,E),h}}}function Ue(b,m){return{kind:"validation",type:"check",reference:Ue,async:!0,expects:null,requirement:b,message:m,async"~run"(h,E){return h.typed&&!await this.requirement(h.value)&&I(this,"input",h,E),h}}}function Ge(b,m){return{kind:"validation",type:"check_items",reference:Ge,async:!1,expects:null,requirement:b,message:m,"~run"(h,E){if(h.typed)for(let F=0;F<h.value.length;F++){const Q=h.value[F];this.requirement(Q,F,h.value)||I(this,"item",h,E,{input:Q,path:[{type:"array",origin:"value",input:h.value,key:F,value:Q}]})}return h}}}function Ne(b,m){return{kind:"validation",type:"check_items",reference:Ne,async:!0,expects:null,requirement:b,message:m,async"~run"(h,E){if(h.typed){const F=await Promise.all(h.value.map(this.requirement));for(let Q=0;Q<h.value.length;Q++)if(!F[Q]){const ne=h.value[Q];I(this,"item",h,E,{input:ne,path:[{type:"array",origin:"value",input:h.value,key:Q,value:ne}]})}}return h}}}const Oe=/^(?:\d{14,19}|\d{4}(?: \d{3,6}){2,4}|\d{4}(?:-\d{3,6}){2,4})$/u,Fe=/[- ]/gu,Vo=[/^3[47]\d{13}$/u,/^3(?:0[0-5]|[68]\d)\d{11,13}$/u,/^6(?:011|5\d{2})\d{12,15}$/u,/^(?:2131|1800|35\d{3})\d{11}$/u,/^5[1-5]\d{2}|(?:222\d|22[3-9]\d|2[3-6]\d{2}|27[01]\d|2720)\d{12}$/u,/^(?:6[27]\d{14,17}|81\d{14,17})$/u,/^4\d{12}(?:\d{3,6})?$/u];function $r(b){return{kind:"validation",type:"credit_card",reference:$r,async:!1,expects:null,requirement(m){let h;return Oe.test(m)&&(h=m.replace(Fe,""))&&Vo.some(E=>E.test(h))&&G(h)},message:b,"~run"(m,h){return m.typed&&!this.requirement(m.value)&&I(this,"credit card",m,h),m}}}function Wo(b){return{kind:"validation",type:"cuid2",reference:Wo,async:!1,expects:null,requirement:ae,message:b,"~run"(m,h){return m.typed&&!this.requirement.test(m.value)&&I(this,"Cuid2",m,h),m}}}function Eu(b){return{kind:"validation",type:"decimal",reference:Eu,async:!1,expects:null,requirement:ce,message:b,"~run"(m,h){return m.typed&&!this.requirement.test(m.value)&&I(this,"decimal",m,h),m}}}function an(b){return{kind:"metadata",type:"description",reference:an,description:b}}function Su(b){return{kind:"validation",type:"digits",reference:Su,async:!1,expects:null,requirement:pe,message:b,"~run"(m,h){return m.typed&&!this.requirement.test(m.value)&&I(this,"digits",m,h),m}}}function v(b){return{kind:"validation",type:"email",reference:v,expects:null,async:!1,requirement:le,message:b,"~run"(m,h){return m.typed&&!this.requirement.test(m.value)&&I(this,"email",m,h),m}}}function x(b){return{kind:"validation",type:"emoji",reference:x,async:!1,expects:null,requirement:ye,message:b,"~run"(m,h){return m.typed&&!this.requirement.test(m.value)&&I(this,"emoji",m,h),m}}}function $(b){return{kind:"validation",type:"empty",reference:$,async:!1,expects:"0",message:b,"~run"(m,h){return m.typed&&m.value.length>0&&I(this,"length",m,h,{received:`${m.value.length}`}),m}}}function se(b,m){return{kind:"validation",type:"ends_with",reference:se,async:!1,expects:`"${b}"`,requirement:b,message:m,"~run"(h,E){return h.typed&&!h.value.endsWith(this.requirement)&&I(this,"end",h,E,{received:`"${h.value.slice(-this.requirement.length)}"`}),h}}}function he(b,m){return{kind:"validation",type:"entries",reference:he,async:!1,expects:`${b}`,requirement:b,message:m,"~run"(h,E){if(!h.typed)return h;const F=Object.keys(h.value).length;return h.typed&&F!==this.requirement&&I(this,"entries",h,E,{received:`${F}`}),h}}}function be(b,m){return{kind:"validation",type:"every_item",reference:be,async:!1,expects:null,requirement:b,message:m,"~run"(h,E){return h.typed&&!h.value.every(this.requirement)&&I(this,"item",h,E),h}}}function ke(b){return{kind:"metadata",type:"examples",reference:ke,examples:b}}function mt(b,m){const h=k(b);return{kind:"validation",type:"excludes",reference:mt,async:!1,expects:`!${h}`,requirement:b,message:m,"~run"(E,F){return E.typed&&E.value.includes(this.requirement)&&I(this,"content",E,F,{received:h}),E}}}function Dt(b){return{kind:"transformation",type:"filter_items",reference:Dt,async:!1,operation:b,"~run"(m){return m.value=m.value.filter(this.operation),m}}}function wt(b){return{kind:"transformation",type:"find_item",reference:wt,async:!1,operation:b,"~run"(m){return m.value=m.value.find(this.operation),m}}}function ht(b){return{kind:"validation",type:"finite",reference:ht,async:!1,expects:null,requirement:Number.isFinite,message:b,"~run"(m,h){return m.typed&&!this.requirement(m.value)&&I(this,"finite",m,h),m}}}function Ot(b){return{kind:"transformation",type:"flavor",reference:Ot,async:!1,name:b,"~run"(m){return m}}}function W0(b,m){return{kind:"validation",type:"graphemes",reference:W0,async:!1,expects:`${b}`,requirement:b,message:m,"~run"(h,E){if(h.typed){const F=W(h.value);F!==this.requirement&&I(this,"graphemes",h,E,{received:`${F}`})}return h}}}function q0(b,m){return{kind:"validation",type:"gt_value",reference:q0,async:!1,expects:`>${b instanceof Date?b.toJSON():k(b)}`,requirement:b,message:m,"~run"(h,E){return h.typed&&!(h.value>this.requirement)&&I(this,"value",h,E,{received:h.value instanceof Date?h.value.toJSON():k(h.value)}),h}}}const o6={md4:32,md5:32,sha1:40,sha256:64,sha384:96,sha512:128,ripemd128:32,ripemd160:40,tiger128:32,tiger160:40,tiger192:48,crc32:8,crc32b:8,adler32:8};function G0(b,m){return{kind:"validation",type:"hash",reference:G0,expects:null,async:!1,requirement:RegExp(b.map(h=>`^[a-f0-9]{${o6[h]}}$`).join("|"),"iu"),message:m,"~run"(h,E){return h.typed&&!this.requirement.test(h.value)&&I(this,"hash",h,E),h}}}function X0(b){return{kind:"validation",type:"hexadecimal",reference:X0,async:!1,expects:null,requirement:Ae,message:b,"~run"(m,h){return m.typed&&!this.requirement.test(m.value)&&I(this,"hexadecimal",m,h),m}}}function Y0(b){return{kind:"validation",type:"hex_color",reference:Y0,async:!1,expects:null,requirement:xe,message:b,"~run"(m,h){return m.typed&&!this.requirement.test(m.value)&&I(this,"hex color",m,h),m}}}function Z0(b){return{kind:"validation",type:"imei",reference:Z0,async:!1,expects:null,requirement(m){return Be.test(m)&&G(m)},message:b,"~run"(m,h){return m.typed&&!this.requirement(m.value)&&I(this,"IMEI",m,h),m}}}function Q0(b,m){const h=k(b);return{kind:"validation",type:"includes",reference:Q0,async:!1,expects:h,requirement:b,message:m,"~run"(E,F){return E.typed&&!E.value.includes(this.requirement)&&I(this,"content",E,F,{received:`!${h}`}),E}}}function J0(b){return{kind:"validation",type:"integer",reference:J0,async:!1,expects:null,requirement:Number.isInteger,message:b,"~run"(m,h){return m.typed&&!this.requirement(m.value)&&I(this,"integer",m,h),m}}}function eg(b){return{kind:"validation",type:"ip",reference:eg,async:!1,expects:null,requirement:Qe,message:b,"~run"(m,h){return m.typed&&!this.requirement.test(m.value)&&I(this,"IP",m,h),m}}}function tg(b){return{kind:"validation",type:"ipv4",reference:tg,async:!1,expects:null,requirement:We,message:b,"~run"(m,h){return m.typed&&!this.requirement.test(m.value)&&I(this,"IPv4",m,h),m}}}function rg(b){return{kind:"validation",type:"ipv6",reference:rg,async:!1,expects:null,requirement:ze,message:b,"~run"(m,h){return m.typed&&!this.requirement.test(m.value)&&I(this,"IPv6",m,h),m}}}function ng(b){return{kind:"validation",type:"iso_date",reference:ng,async:!1,expects:null,requirement:qe,message:b,"~run"(m,h){return m.typed&&!this.requirement.test(m.value)&&I(this,"date",m,h),m}}}function ig(b){return{kind:"validation",type:"iso_date_time",reference:ig,async:!1,expects:null,requirement:lt,message:b,"~run"(m,h){return m.typed&&!this.requirement.test(m.value)&&I(this,"date-time",m,h),m}}}function og(b){return{kind:"validation",type:"iso_time",reference:og,async:!1,expects:null,requirement:me,message:b,"~run"(m,h){return m.typed&&!this.requirement.test(m.value)&&I(this,"time",m,h),m}}}function sg(b){return{kind:"validation",type:"iso_time_second",reference:sg,async:!1,expects:null,requirement:at,message:b,"~run"(m,h){return m.typed&&!this.requirement.test(m.value)&&I(this,"time-second",m,h),m}}}function ag(b){return{kind:"validation",type:"iso_timestamp",reference:ag,async:!1,expects:null,requirement:Ie,message:b,"~run"(m,h){return m.typed&&!this.requirement.test(m.value)&&I(this,"timestamp",m,h),m}}}function ug(b){return{kind:"validation",type:"iso_week",reference:ug,async:!1,expects:null,requirement:He,message:b,"~run"(m,h){return m.typed&&!this.requirement.test(m.value)&&I(this,"week",m,h),m}}}function cg(b,m){return{kind:"validation",type:"length",reference:cg,async:!1,expects:`${b}`,requirement:b,message:m,"~run"(h,E){return h.typed&&h.value.length!==this.requirement&&I(this,"length",h,E,{received:`${h.value.length}`}),h}}}function lg(b,m){return{kind:"validation",type:"lt_value",reference:lg,async:!1,expects:`<${b instanceof Date?b.toJSON():k(b)}`,requirement:b,message:m,"~run"(h,E){return h.typed&&!(h.value<this.requirement)&&I(this,"value",h,E,{received:h.value instanceof Date?h.value.toJSON():k(h.value)}),h}}}function fg(b){return{kind:"validation",type:"mac",reference:fg,async:!1,expects:null,requirement:Je,message:b,"~run"(m,h){return m.typed&&!this.requirement.test(m.value)&&I(this,"MAC",m,h),m}}}function hg(b){return{kind:"validation",type:"mac48",reference:hg,async:!1,expects:null,requirement:Ke,message:b,"~run"(m,h){return m.typed&&!this.requirement.test(m.value)&&I(this,"48-bit MAC",m,h),m}}}function dg(b){return{kind:"validation",type:"mac64",reference:dg,async:!1,expects:null,requirement:ft,message:b,"~run"(m,h){return m.typed&&!this.requirement.test(m.value)&&I(this,"64-bit MAC",m,h),m}}}function pg(b){return{kind:"transformation",type:"map_items",reference:pg,async:!1,operation:b,"~run"(m){return m.value=m.value.map(this.operation),m}}}function gg(b,m){return{kind:"validation",type:"max_bytes",reference:gg,async:!1,expects:`<=${b}`,requirement:b,message:m,"~run"(h,E){if(h.typed){const F=B(h.value);F>this.requirement&&I(this,"bytes",h,E,{received:`${F}`})}return h}}}function yg(b,m){return{kind:"validation",type:"max_entries",reference:yg,async:!1,expects:`<=${b}`,requirement:b,message:m,"~run"(h,E){if(!h.typed)return h;const F=Object.keys(h.value).length;return h.typed&&F>this.requirement&&I(this,"entries",h,E,{received:`${F}`}),h}}}function mg(b,m){return{kind:"validation",type:"max_graphemes",reference:mg,async:!1,expects:`<=${b}`,requirement:b,message:m,"~run"(h,E){if(h.typed){const F=W(h.value);F>this.requirement&&I(this,"graphemes",h,E,{received:`${F}`})}return h}}}function bg(b,m){return{kind:"validation",type:"max_length",reference:bg,async:!1,expects:`<=${b}`,requirement:b,message:m,"~run"(h,E){return h.typed&&h.value.length>this.requirement&&I(this,"length",h,E,{received:`${h.value.length}`}),h}}}function wg(b,m){return{kind:"validation",type:"max_size",reference:wg,async:!1,expects:`<=${b}`,requirement:b,message:m,"~run"(h,E){return h.typed&&h.value.size>this.requirement&&I(this,"size",h,E,{received:`${h.value.size}`}),h}}}function vg(b,m){return{kind:"validation",type:"max_value",reference:vg,async:!1,expects:`<=${b instanceof Date?b.toJSON():k(b)}`,requirement:b,message:m,"~run"(h,E){return h.typed&&!(h.value<=this.requirement)&&I(this,"value",h,E,{received:h.value instanceof Date?h.value.toJSON():k(h.value)}),h}}}function Eg(b,m,h){return{kind:"validation",type:"max_words",reference:Eg,async:!1,expects:`<=${m}`,locales:b,requirement:m,message:h,"~run"(E,F){if(E.typed){const Q=T(this.locales,E.value);Q>this.requirement&&I(this,"words",E,F,{received:`${Q}`})}return E}}}function Sg(b){return{kind:"metadata",type:"metadata",reference:Sg,metadata:b}}function Ag(b,m){return{kind:"validation",type:"mime_type",reference:Ag,async:!1,expects:P(b.map(h=>`"${h}"`),"|"),requirement:b,message:m,"~run"(h,E){return h.typed&&!this.requirement.includes(h.value.type)&&I(this,"MIME type",h,E,{received:`"${h.value.type}"`}),h}}}function kg(b,m){return{kind:"validation",type:"min_bytes",reference:kg,async:!1,expects:`>=${b}`,requirement:b,message:m,"~run"(h,E){if(h.typed){const F=B(h.value);F<this.requirement&&I(this,"bytes",h,E,{received:`${F}`})}return h}}}function Ig(b,m){return{kind:"validation",type:"min_entries",reference:Ig,async:!1,expects:`>=${b}`,requirement:b,message:m,"~run"(h,E){if(!h.typed)return h;const F=Object.keys(h.value).length;return h.typed&&F<this.requirement&&I(this,"entries",h,E,{received:`${F}`}),h}}}function _g(b,m){return{kind:"validation",type:"min_graphemes",reference:_g,async:!1,expects:`>=${b}`,requirement:b,message:m,"~run"(h,E){if(h.typed){const F=W(h.value);F<this.requirement&&I(this,"graphemes",h,E,{received:`${F}`})}return h}}}function xg(b,m){return{kind:"validation",type:"min_length",reference:xg,async:!1,expects:`>=${b}`,requirement:b,message:m,"~run"(h,E){return h.typed&&h.value.length<this.requirement&&I(this,"length",h,E,{received:`${h.value.length}`}),h}}}function Tg(b,m){return{kind:"validation",type:"min_size",reference:Tg,async:!1,expects:`>=${b}`,requirement:b,message:m,"~run"(h,E){return h.typed&&h.value.size<this.requirement&&I(this,"size",h,E,{received:`${h.value.size}`}),h}}}function Bg(b,m){return{kind:"validation",type:"min_value",reference:Bg,async:!1,expects:`>=${b instanceof Date?b.toJSON():k(b)}`,requirement:b,message:m,"~run"(h,E){return h.typed&&!(h.value>=this.requirement)&&I(this,"value",h,E,{received:h.value instanceof Date?h.value.toJSON():k(h.value)}),h}}}function Pg(b,m,h){return{kind:"validation",type:"min_words",reference:Pg,async:!1,expects:`>=${m}`,locales:b,requirement:m,message:h,"~run"(E,F){if(E.typed){const Q=T(this.locales,E.value);Q<this.requirement&&I(this,"words",E,F,{received:`${Q}`})}return E}}}function Og(b,m){return{kind:"validation",type:"multiple_of",reference:Og,async:!1,expects:`%${b}`,requirement:b,message:m,"~run"(h,E){return h.typed&&h.value%this.requirement!=0&&I(this,"multiple",h,E),h}}}function Ug(b){return{kind:"validation",type:"nanoid",reference:Ug,async:!1,expects:null,requirement:Vt,message:b,"~run"(m,h){return m.typed&&!this.requirement.test(m.value)&&I(this,"Nano ID",m,h),m}}}function Lg(b){return{kind:"validation",type:"non_empty",reference:Lg,async:!1,expects:"!0",message:b,"~run"(m,h){return m.typed&&m.value.length===0&&I(this,"length",m,h,{received:"0"}),m}}}function Rg(b){return{kind:"transformation",type:"normalize",reference:Rg,async:!1,form:b,"~run"(m){return m.value=m.value.normalize(this.form),m}}}function $g(b,m){return{kind:"validation",type:"not_bytes",reference:$g,async:!1,expects:`!${b}`,requirement:b,message:m,"~run"(h,E){if(h.typed){const F=B(h.value);F===this.requirement&&I(this,"bytes",h,E,{received:`${F}`})}return h}}}function Cg(b,m){return{kind:"validation",type:"not_entries",reference:Cg,async:!1,expects:`!${b}`,requirement:b,message:m,"~run"(h,E){if(!h.typed)return h;const F=Object.keys(h.value).length;return h.typed&&F===this.requirement&&I(this,"entries",h,E,{received:`${F}`}),h}}}function Ng(b,m){return{kind:"validation",type:"not_graphemes",reference:Ng,async:!1,expects:`!${b}`,requirement:b,message:m,"~run"(h,E){if(h.typed){const F=W(h.value);F===this.requirement&&I(this,"graphemes",h,E,{received:`${F}`})}return h}}}function Hg(b,m){return{kind:"validation",type:"not_length",reference:Hg,async:!1,expects:`!${b}`,requirement:b,message:m,"~run"(h,E){return h.typed&&h.value.length===this.requirement&&I(this,"length",h,E,{received:`${h.value.length}`}),h}}}function Dg(b,m){return{kind:"validation",type:"not_size",reference:Dg,async:!1,expects:`!${b}`,requirement:b,message:m,"~run"(h,E){return h.typed&&h.value.size===this.requirement&&I(this,"size",h,E,{received:`${h.value.size}`}),h}}}function zg(b,m){return{kind:"validation",type:"not_value",reference:zg,async:!1,expects:b instanceof Date?`!${b.toJSON()}`:`!${k(b)}`,requirement:b,message:m,"~run"(h,E){return h.typed&&this.requirement<=h.value&&this.requirement>=h.value&&I(this,"value",h,E,{received:h.value instanceof Date?h.value.toJSON():k(h.value)}),h}}}function Mg(b,m){return{kind:"validation",type:"not_values",reference:Mg,async:!1,expects:`!${P(b.map(h=>h instanceof Date?h.toJSON():k(h)),"|")}`,requirement:b,message:m,"~run"(h,E){return h.typed&&this.requirement.some(F=>F<=h.value&&F>=h.value)&&I(this,"value",h,E,{received:h.value instanceof Date?h.value.toJSON():k(h.value)}),h}}}function Fg(b,m,h){return{kind:"validation",type:"not_words",reference:Fg,async:!1,expects:`!${m}`,locales:b,requirement:m,message:h,"~run"(E,F){if(E.typed){const Q=T(this.locales,E.value);Q===this.requirement&&I(this,"words",E,F,{received:`${Q}`})}return E}}}function Kg(b){return{kind:"validation",type:"octal",reference:Kg,async:!1,expects:null,requirement:kr,message:b,"~run"(m,h){return m.typed&&!this.requirement.test(m.value)&&I(this,"octal",m,h),m}}}function jg(b,m){return{kind:"transformation",type:"parse_json",reference:jg,config:b,message:m,async:!1,"~run"(h,E){try{h.value=JSON.parse(h.value,this.config?.reviver)}catch(F){if(F instanceof Error)I(this,"JSON",h,E,{received:`"${F.message}"`}),h.typed=!1;else throw F}return h}}}function Vg(b,m){if(b.issues)for(const h of m)for(const E of b.issues){let F=!1;const Q=Math.min(h.length,E.path?.length??0);for(let ne=0;ne<Q;ne++)if(h[ne]!==E.path[ne].key&&(h[ne]!=="$"||E.path[ne].type!=="array")){F=!0;break}if(!F)return!1}return!0}function Wg(b,m,h){return{kind:"validation",type:"partial_check",reference:Wg,async:!1,expects:null,paths:b,requirement:m,message:h,"~run"(E,F){return(E.typed||Vg(E,b))&&!this.requirement(E.value)&&I(this,"input",E,F),E}}}function qg(b,m,h){return{kind:"validation",type:"partial_check",reference:qg,async:!0,expects:null,paths:b,requirement:m,message:h,async"~run"(E,F){return(E.typed||Vg(E,b))&&!await this.requirement(E.value)&&I(this,"input",E,F),E}}}function Gg(b){return{kind:"validation",type:"raw_check",reference:Gg,async:!1,expects:null,"~run"(m,h){return b({dataset:m,config:h,addIssue:E=>I(this,E?.label??"input",m,h,E)}),m}}}function Xg(b){return{kind:"validation",type:"raw_check",reference:Xg,async:!0,expects:null,async"~run"(m,h){return await b({dataset:m,config:h,addIssue:E=>I(this,E?.label??"input",m,h,E)}),m}}}function Yg(b){return{kind:"transformation",type:"raw_transform",reference:Yg,async:!1,"~run"(m,h){const E=b({dataset:m,config:h,addIssue:F=>I(this,F?.label??"input",m,h,F),NEVER:null});return m.issues?m.typed=!1:m.value=E,m}}}function Zg(b){return{kind:"transformation",type:"raw_transform",reference:Zg,async:!0,async"~run"(m,h){const E=await b({dataset:m,config:h,addIssue:F=>I(this,F?.label??"input",m,h,F),NEVER:null});return m.issues?m.typed=!1:m.value=E,m}}}function Qg(){return{kind:"transformation",type:"readonly",reference:Qg,async:!1,"~run"(b){return b}}}function Jg(b,m){return{kind:"transformation",type:"reduce_items",reference:Jg,async:!1,operation:b,initial:m,"~run"(h){return h.value=h.value.reduce(this.operation,this.initial),h}}}function ey(b,m){return{kind:"validation",type:"regex",reference:ey,async:!1,expects:`${b}`,requirement:b,message:m,"~run"(h,E){return h.typed&&!this.requirement.test(h.value)&&I(this,"format",h,E),h}}}function ty(b){return{kind:"transformation",type:"returns",reference:ty,async:!1,schema:b,"~run"(m,h){const E=m.value;return m.value=(...F)=>{const Q=this.schema["~run"]({value:E(...F)},h);if(Q.issues)throw new K(Q.issues);return Q.value},m}}}function ry(b){return{kind:"transformation",type:"returns",reference:ry,async:!1,schema:b,"~run"(m,h){const E=m.value;return m.value=async(...F)=>{const Q=await this.schema["~run"]({value:await E(...F)},h);if(Q.issues)throw new K(Q.issues);return Q.value},m}}}function ny(b){return{kind:"validation",type:"rfc_email",reference:ny,expects:null,async:!1,requirement:yt,message:b,"~run"(m,h){return m.typed&&!this.requirement.test(m.value)&&I(this,"email",m,h),m}}}function iy(b){return{kind:"validation",type:"safe_integer",reference:iy,async:!1,expects:null,requirement:Number.isSafeInteger,message:b,"~run"(m,h){return m.typed&&!this.requirement(m.value)&&I(this,"safe integer",m,h),m}}}function oy(b,m){return{kind:"validation",type:"size",reference:oy,async:!1,expects:`${b}`,requirement:b,message:m,"~run"(h,E){return h.typed&&h.value.size!==this.requirement&&I(this,"size",h,E,{received:`${h.value.size}`}),h}}}function sy(b){return{kind:"validation",type:"slug",reference:sy,async:!1,expects:null,requirement:rr,message:b,"~run"(m,h){return m.typed&&!this.requirement.test(m.value)&&I(this,"slug",m,h),m}}}function ay(b,m){return{kind:"validation",type:"some_item",reference:ay,async:!1,expects:null,requirement:b,message:m,"~run"(h,E){return h.typed&&!h.value.some(this.requirement)&&I(this,"item",h,E),h}}}function uy(b){return{kind:"transformation",type:"sort_items",reference:uy,async:!1,operation:b,"~run"(m){return m.value=m.value.sort(this.operation),m}}}function cy(b,m){return{kind:"validation",type:"starts_with",reference:cy,async:!1,expects:`"${b}"`,requirement:b,message:m,"~run"(h,E){return h.typed&&!h.value.startsWith(this.requirement)&&I(this,"start",h,E,{received:`"${h.value.slice(0,this.requirement.length)}"`}),h}}}function ly(b,m){return{kind:"transformation",type:"stringify_json",reference:ly,message:m,config:b,async:!1,"~run"(h,E){try{const F=JSON.stringify(h.value,this.config?.replacer,this.config?.space);F===void 0&&(I(this,"JSON",h,E),h.typed=!1),h.value=F}catch(F){if(F instanceof Error)I(this,"JSON",h,E,{received:`"${F.message}"`}),h.typed=!1;else throw F}return h}}}function fy(b){return{kind:"metadata",type:"title",reference:fy,title:b}}function hy(b){return{kind:"transformation",type:"to_bigint",reference:hy,async:!1,message:b,"~run"(m,h){try{m.value=BigInt(m.value)}catch{I(this,"bigint",m,h),m.typed=!1}return m}}}function dy(){return{kind:"transformation",type:"to_boolean",reference:dy,async:!1,"~run"(b){return b.value=!!b.value,b}}}function py(b){return{kind:"transformation",type:"to_date",reference:py,async:!1,message:b,"~run"(m,h){try{m.value=new Date(m.value),isNaN(m.value)&&(I(this,"date",m,h,{received:'"Invalid Date"'}),m.typed=!1)}catch{I(this,"date",m,h),m.typed=!1}return m}}}function gy(){return{kind:"transformation",type:"to_lower_case",reference:gy,async:!1,"~run"(b){return b.value=b.value.toLowerCase(),b}}}function yy(b){return{kind:"transformation",type:"to_max_value",reference:yy,async:!1,requirement:b,"~run"(m){return m.value=m.value>this.requirement?this.requirement:m.value,m}}}function my(b){return{kind:"transformation",type:"to_min_value",reference:my,async:!1,requirement:b,"~run"(m){return m.value=m.value<this.requirement?this.requirement:m.value,m}}}function by(b){return{kind:"transformation",type:"to_number",reference:by,async:!1,message:b,"~run"(m,h){try{m.value=Number(m.value),isNaN(m.value)&&(I(this,"number",m,h),m.typed=!1)}catch{I(this,"number",m,h),m.typed=!1}return m}}}function wy(b){return{kind:"transformation",type:"to_string",reference:wy,async:!1,message:b,"~run"(m,h){try{m.value=String(m.value)}catch{I(this,"string",m,h),m.typed=!1}return m}}}function vy(){return{kind:"transformation",type:"to_upper_case",reference:vy,async:!1,"~run"(b){return b.value=b.value.toUpperCase(),b}}}function Ey(b){return{kind:"transformation",type:"transform",reference:Ey,async:!1,operation:b,"~run"(m){return m.value=this.operation(m.value),m}}}function Sy(b){return{kind:"transformation",type:"transform",reference:Sy,async:!0,operation:b,async"~run"(m){return m.value=await this.operation(m.value),m}}}function Ay(){return{kind:"transformation",type:"trim",reference:Ay,async:!1,"~run"(b){return b.value=b.value.trim(),b}}}function ky(){return{kind:"transformation",type:"trim_end",reference:ky,async:!1,"~run"(b){return b.value=b.value.trimEnd(),b}}}function Iy(){return{kind:"transformation",type:"trim_start",reference:Iy,async:!1,"~run"(b){return b.value=b.value.trimStart(),b}}}function _y(b){return{kind:"validation",type:"ulid",reference:_y,async:!1,expects:null,requirement:c,message:b,"~run"(m,h){return m.typed&&!this.requirement.test(m.value)&&I(this,"ULID",m,h),m}}}function xy(b){return{kind:"validation",type:"url",reference:xy,async:!1,expects:null,requirement(m){try{return new URL(m),!0}catch{return!1}},message:b,"~run"(m,h){return m.typed&&!this.requirement(m.value)&&I(this,"URL",m,h),m}}}function Ty(b){return{kind:"validation",type:"uuid",reference:Ty,async:!1,expects:null,requirement:d,message:b,"~run"(m,h){return m.typed&&!this.requirement.test(m.value)&&I(this,"UUID",m,h),m}}}function By(b,m){return{kind:"validation",type:"value",reference:By,async:!1,expects:b instanceof Date?b.toJSON():k(b),requirement:b,message:m,"~run"(h,E){return h.typed&&!(this.requirement<=h.value&&this.requirement>=h.value)&&I(this,"value",h,E,{received:h.value instanceof Date?h.value.toJSON():k(h.value)}),h}}}function Py(b,m){return{kind:"validation",type:"values",reference:Py,async:!1,expects:`${P(b.map(h=>h instanceof Date?h.toJSON():k(h)),"|")}`,requirement:b,message:m,"~run"(h,E){return h.typed&&!this.requirement.some(F=>F<=h.value&&F>=h.value)&&I(this,"value",h,E,{received:h.value instanceof Date?h.value.toJSON():k(h.value)}),h}}}function Oy(b,m,h){return{kind:"validation",type:"words",reference:Oy,async:!1,expects:`${m}`,locales:b,requirement:m,message:h,"~run"(E,F){if(E.typed){const Q=T(this.locales,E.value);Q!==this.requirement&&I(this,"words",E,F,{received:`${Q}`})}return E}}}function s6(b,m){const h=b["~run"]({value:m},{abortEarly:!0}).issues;if(h)throw new K(h)}function a6(b,m){return{...b,get"~standard"(){return H(this)},"~run"(h,E){return b["~run"](h,{...E,...m})}}}function Cr(b,m,h){return typeof b.fallback=="function"?b.fallback(m,h):b.fallback}function u6(b,m){return{...b,fallback:m,get"~standard"(){return H(this)},"~run"(h,E){const F=b["~run"](h,E);return F.issues?{typed:!0,value:Cr(this,F,E)}:F}}}function c6(b,m){return{...b,fallback:m,async:!0,get"~standard"(){return H(this)},async"~run"(h,E){const F=await b["~run"](h,E);return F.issues?{typed:!0,value:await Cr(this,F,E)}:F}}}function l6(b){const m={};for(const h of b)if(h.path){const E=z(h);E?(m.nested||(m.nested={}),m.nested[E]?m.nested[E].push(h.message):m.nested[E]=[h.message]):m.other?m.other.push(h.message):m.other=[h.message]}else m.root?m.root.push(h.message):m.root=[h.message];return m}function f6(b,m){return{...b,"~run"(h,E){const F=h.issues&&[...h.issues];if(h=b["~run"](h,E),h.issues){for(const Q of h.issues)if(!F?.includes(Q)){let ne=h.value;for(const ue of m){const oe=ne[ue],de={type:"unknown",origin:"value",input:ne,key:ue,value:oe};if(Q.path?Q.path.push(de):Q.path=[de],!oe)break;ne=oe}}}return h}}}function h6(b,m){return{...b,async:!0,async"~run"(h,E){const F=h.issues&&[...h.issues];if(h=await b["~run"](h,E),h.issues){for(const Q of h.issues)if(!F?.includes(Q)){let ne=h.value;for(const ue of m){const oe=ne[ue],de={type:"unknown",origin:"value",input:ne,key:ue,value:oe};if(Q.path?Q.path.push(de):Q.path=[de],!oe)break;ne=oe}}}return h}}}function Wt(b,m,h){return typeof b.default=="function"?b.default(m,h):b.default}function of(b){if("entries"in b){const m={};for(const h in b.entries)m[h]=of(b.entries[h]);return m}return"items"in b?b.items.map(of):Wt(b)}async function sf(b){return"entries"in b?Object.fromEntries(await Promise.all(Object.entries(b.entries).map(async([m,h])=>[m,await sf(h)]))):"items"in b?Promise.all(b.items.map(sf)):Wt(b)}function d6(b){return Y(b,"description")}function p6(b){const m=[];function h(E){if("pipe"in E)for(const F of E.pipe)F.kind==="schema"&&"pipe"in F?h(F):F.kind==="metadata"&&F.type==="examples"&&m.push(...F.examples)}return h(b),m}function af(b){if("entries"in b){const m={};for(const h in b.entries)m[h]=af(b.entries[h]);return m}return"items"in b?b.items.map(af):Cr(b)}async function uf(b){return"entries"in b?Object.fromEntries(await Promise.all(Object.entries(b.entries).map(async([m,h])=>[m,await uf(h)]))):"items"in b?Promise.all(b.items.map(uf)):Cr(b)}function g6(b){const m={};function h(E){if("pipe"in E)for(const F of E.pipe)F.kind==="schema"&&"pipe"in F?h(F):F.kind==="metadata"&&F.type==="metadata"&&Object.assign(m,F.metadata)}return h(b),m}function y6(b){return Y(b,"title")}function m6(b,m){return!b["~run"]({value:m},{abortEarly:!0}).issues}function Uy(){return{kind:"schema",type:"any",reference:Uy,expects:"any",async:!1,get"~standard"(){return H(this)},"~run"(b){return b.typed=!0,b}}}function Ly(b,m){return{kind:"schema",type:"array",reference:Ly,expects:"Array",async:!1,item:b,message:m,get"~standard"(){return H(this)},"~run"(h,E){const F=h.value;if(Array.isArray(F)){h.typed=!0,h.value=[];for(let Q=0;Q<F.length;Q++){const ne=F[Q],ue=this.item["~run"]({value:ne},E);if(ue.issues){const oe={type:"array",origin:"value",input:F,key:Q,value:ne};for(const de of ue.issues)de.path?de.path.unshift(oe):de.path=[oe],h.issues?.push(de);if(h.issues||(h.issues=ue.issues),E.abortEarly){h.typed=!1;break}}ue.typed||(h.typed=!1),h.value.push(ue.value)}}else I(this,"type",h,E);return h}}}function Ry(b,m){return{kind:"schema",type:"array",reference:Ry,expects:"Array",async:!0,item:b,message:m,get"~standard"(){return H(this)},async"~run"(h,E){const F=h.value;if(Array.isArray(F)){h.typed=!0,h.value=[];const Q=await Promise.all(F.map(ne=>this.item["~run"]({value:ne},E)));for(let ne=0;ne<Q.length;ne++){const ue=Q[ne];if(ue.issues){const oe={type:"array",origin:"value",input:F,key:ne,value:F[ne]};for(const de of ue.issues)de.path?de.path.unshift(oe):de.path=[oe],h.issues?.push(de);if(h.issues||(h.issues=ue.issues),E.abortEarly){h.typed=!1;break}}ue.typed||(h.typed=!1),h.value.push(ue.value)}}else I(this,"type",h,E);return h}}}function $y(b){return{kind:"schema",type:"bigint",reference:$y,expects:"bigint",async:!1,message:b,get"~standard"(){return H(this)},"~run"(m,h){return typeof m.value=="bigint"?m.typed=!0:I(this,"type",m,h),m}}}function Cy(b){return{kind:"schema",type:"blob",reference:Cy,expects:"Blob",async:!1,message:b,get"~standard"(){return H(this)},"~run"(m,h){return m.value instanceof Blob?m.typed=!0:I(this,"type",m,h),m}}}function Ny(b){return{kind:"schema",type:"boolean",reference:Ny,expects:"boolean",async:!1,message:b,get"~standard"(){return H(this)},"~run"(m,h){return typeof m.value=="boolean"?m.typed=!0:I(this,"type",m,h),m}}}function Hy(b,m){return{kind:"schema",type:"custom",reference:Hy,expects:"unknown",async:!1,check:b,message:m,get"~standard"(){return H(this)},"~run"(h,E){return this.check(h.value)?h.typed=!0:I(this,"type",h,E),h}}}function Dy(b,m){return{kind:"schema",type:"custom",reference:Dy,expects:"unknown",async:!0,check:b,message:m,get"~standard"(){return H(this)},async"~run"(h,E){return await this.check(h.value)?h.typed=!0:I(this,"type",h,E),h}}}function zy(b){return{kind:"schema",type:"date",reference:zy,expects:"Date",async:!1,message:b,get"~standard"(){return H(this)},"~run"(m,h){return m.value instanceof Date?isNaN(m.value)?I(this,"type",m,h,{received:'"Invalid Date"'}):m.typed=!0:I(this,"type",m,h),m}}}function cf(b,m){const h=[];for(const E in b)(`${+E}`!==E||typeof b[E]!="string"||!Object.is(b[b[E]],+E))&&h.push(b[E]);return{kind:"schema",type:"enum",reference:cf,expects:P(h.map(k),"|"),async:!1,enum:b,options:h,message:m,get"~standard"(){return H(this)},"~run"(E,F){return this.options.includes(E.value)?E.typed=!0:I(this,"type",E,F),E}}}function My(b,m){return{kind:"schema",type:"exact_optional",reference:My,expects:b.expects,async:!1,wrapped:b,default:m,get"~standard"(){return H(this)},"~run"(h,E){return this.wrapped["~run"](h,E)}}}function Fy(b,m){return{kind:"schema",type:"exact_optional",reference:Fy,expects:b.expects,async:!0,wrapped:b,default:m,get"~standard"(){return H(this)},async"~run"(h,E){return this.wrapped["~run"](h,E)}}}function Ky(b){return{kind:"schema",type:"file",reference:Ky,expects:"File",async:!1,message:b,get"~standard"(){return H(this)},"~run"(m,h){return m.value instanceof File?m.typed=!0:I(this,"type",m,h),m}}}function lf(b){return{kind:"schema",type:"function",reference:lf,expects:"Function",async:!1,message:b,get"~standard"(){return H(this)},"~run"(m,h){return typeof m.value=="function"?m.typed=!0:I(this,"type",m,h),m}}}function jy(b,m){return{kind:"schema",type:"instance",reference:jy,expects:b.name,async:!1,class:b,message:m,get"~standard"(){return H(this)},"~run"(h,E){return h.value instanceof this.class?h.typed=!0:I(this,"type",h,E),h}}}function Au(b,m){if(typeof b==typeof m){if(b===m||b instanceof Date&&m instanceof Date&&+b==+m)return{value:b};if(b&&m&&b.constructor===Object&&m.constructor===Object){for(const h in m)if(h in b){const E=Au(b[h],m[h]);if(E.issue)return E;b[h]=E.value}else b[h]=m[h];return{value:b}}if(Array.isArray(b)&&Array.isArray(m)&&b.length===m.length){for(let h=0;h<b.length;h++){const E=Au(b[h],m[h]);if(E.issue)return E;b[h]=E.value}return{value:b}}}return{issue:!0}}function Vy(b,m){return{kind:"schema",type:"intersect",reference:Vy,expects:P(b.map(h=>h.expects),"&"),async:!1,options:b,message:m,get"~standard"(){return H(this)},"~run"(h,E){if(this.options.length){const F=h.value;let Q;h.typed=!0;for(const ne of this.options){const ue=ne["~run"]({value:F},E);if(ue.issues&&(h.issues?h.issues.push(...ue.issues):h.issues=ue.issues,E.abortEarly)){h.typed=!1;break}ue.typed||(h.typed=!1),h.typed&&(Q?Q.push(ue.value):Q=[ue.value])}if(h.typed){h.value=Q[0];for(let ne=1;ne<Q.length;ne++){const ue=Au(h.value,Q[ne]);if(ue.issue){I(this,"type",h,E,{received:"unknown"});break}h.value=ue.value}}}else I(this,"type",h,E);return h}}}function Wy(b,m){return{kind:"schema",type:"intersect",reference:Wy,expects:P(b.map(h=>h.expects),"&"),async:!0,options:b,message:m,get"~standard"(){return H(this)},async"~run"(h,E){if(this.options.length){const F=h.value;let Q;h.typed=!0;const ne=await Promise.all(this.options.map(ue=>ue["~run"]({value:F},E)));for(const ue of ne){if(ue.issues&&(h.issues?h.issues.push(...ue.issues):h.issues=ue.issues,E.abortEarly)){h.typed=!1;break}ue.typed||(h.typed=!1),h.typed&&(Q?Q.push(ue.value):Q=[ue.value])}if(h.typed){h.value=Q[0];for(let ue=1;ue<Q.length;ue++){const oe=Au(h.value,Q[ue]);if(oe.issue){I(this,"type",h,E,{received:"unknown"});break}h.value=oe.value}}}else I(this,"type",h,E);return h}}}function qy(b){return{kind:"schema",type:"lazy",reference:qy,expects:"unknown",async:!1,getter:b,get"~standard"(){return H(this)},"~run"(m,h){return this.getter(m.value)["~run"](m,h)}}}function Gy(b){return{kind:"schema",type:"lazy",reference:Gy,expects:"unknown",async:!0,getter:b,get"~standard"(){return H(this)},async"~run"(m,h){return(await this.getter(m.value))["~run"](m,h)}}}function Xy(b,m){return{kind:"schema",type:"literal",reference:Xy,expects:k(b),async:!1,literal:b,message:m,get"~standard"(){return H(this)},"~run"(h,E){return h.value===this.literal?h.typed=!0:I(this,"type",h,E),h}}}function Yy(b,m){return{kind:"schema",type:"loose_object",reference:Yy,expects:"Object",async:!1,entries:b,message:m,get"~standard"(){return H(this)},"~run"(h,E){const F=h.value;if(F&&typeof F=="object"){h.typed=!0,h.value={};for(const Q in this.entries){const ne=this.entries[Q];if(Q in F||(ne.type==="exact_optional"||ne.type==="optional"||ne.type==="nullish")&&ne.default!==void 0){const ue=Q in F?F[Q]:Wt(ne),oe=ne["~run"]({value:ue},E);if(oe.issues){const de={type:"object",origin:"value",input:F,key:Q,value:ue};for(const we of oe.issues)we.path?we.path.unshift(de):we.path=[de],h.issues?.push(we);if(h.issues||(h.issues=oe.issues),E.abortEarly){h.typed=!1;break}}oe.typed||(h.typed=!1),h.value[Q]=oe.value}else if(ne.fallback!==void 0)h.value[Q]=Cr(ne);else if(ne.type!=="exact_optional"&&ne.type!=="optional"&&ne.type!=="nullish"&&(I(this,"key",h,E,{input:void 0,expected:`"${Q}"`,path:[{type:"object",origin:"key",input:F,key:Q,value:F[Q]}]}),E.abortEarly))break}if(!h.issues||!E.abortEarly)for(const Q in F)U(F,Q)&&!(Q in this.entries)&&(h.value[Q]=F[Q])}else I(this,"type",h,E);return h}}}function Zy(b,m){return{kind:"schema",type:"loose_object",reference:Zy,expects:"Object",async:!0,entries:b,message:m,get"~standard"(){return H(this)},async"~run"(h,E){const F=h.value;if(F&&typeof F=="object"){h.typed=!0,h.value={};const Q=await Promise.all(Object.entries(this.entries).map(async([ne,ue])=>{if(ne in F||(ue.type==="exact_optional"||ue.type==="optional"||ue.type==="nullish")&&ue.default!==void 0){const oe=ne in F?F[ne]:await Wt(ue);return[ne,oe,ue,await ue["~run"]({value:oe},E)]}return[ne,F[ne],ue,null]}));for(const[ne,ue,oe,de]of Q)if(de){if(de.issues){const we={type:"object",origin:"value",input:F,key:ne,value:ue};for(const Te of de.issues)Te.path?Te.path.unshift(we):Te.path=[we],h.issues?.push(Te);if(h.issues||(h.issues=de.issues),E.abortEarly){h.typed=!1;break}}de.typed||(h.typed=!1),h.value[ne]=de.value}else if(oe.fallback!==void 0)h.value[ne]=await Cr(oe);else if(oe.type!=="exact_optional"&&oe.type!=="optional"&&oe.type!=="nullish"&&(I(this,"key",h,E,{input:void 0,expected:`"${ne}"`,path:[{type:"object",origin:"key",input:F,key:ne,value:ue}]}),E.abortEarly))break;if(!h.issues||!E.abortEarly)for(const ne in F)U(F,ne)&&!(ne in this.entries)&&(h.value[ne]=F[ne])}else I(this,"type",h,E);return h}}}function Qy(b,m){return{kind:"schema",type:"loose_tuple",reference:Qy,expects:"Array",async:!1,items:b,message:m,get"~standard"(){return H(this)},"~run"(h,E){const F=h.value;if(Array.isArray(F)){h.typed=!0,h.value=[];for(let Q=0;Q<this.items.length;Q++){const ne=F[Q],ue=this.items[Q]["~run"]({value:ne},E);if(ue.issues){const oe={type:"array",origin:"value",input:F,key:Q,value:ne};for(const de of ue.issues)de.path?de.path.unshift(oe):de.path=[oe],h.issues?.push(de);if(h.issues||(h.issues=ue.issues),E.abortEarly){h.typed=!1;break}}ue.typed||(h.typed=!1),h.value.push(ue.value)}if(!h.issues||!E.abortEarly)for(let Q=this.items.length;Q<F.length;Q++)h.value.push(F[Q])}else I(this,"type",h,E);return h}}}function Jy(b,m){return{kind:"schema",type:"loose_tuple",reference:Jy,expects:"Array",async:!0,items:b,message:m,get"~standard"(){return H(this)},async"~run"(h,E){const F=h.value;if(Array.isArray(F)){h.typed=!0,h.value=[];const Q=await Promise.all(this.items.map(async(ne,ue)=>{const oe=F[ue];return[ue,oe,await ne["~run"]({value:oe},E)]}));for(const[ne,ue,oe]of Q){if(oe.issues){const de={type:"array",origin:"value",input:F,key:ne,value:ue};for(const we of oe.issues)we.path?we.path.unshift(de):we.path=[de],h.issues?.push(we);if(h.issues||(h.issues=oe.issues),E.abortEarly){h.typed=!1;break}}oe.typed||(h.typed=!1),h.value.push(oe.value)}if(!h.issues||!E.abortEarly)for(let ne=this.items.length;ne<F.length;ne++)h.value.push(F[ne])}else I(this,"type",h,E);return h}}}function em(b,m,h){return{kind:"schema",type:"map",reference:em,expects:"Map",async:!1,key:b,value:m,message:h,get"~standard"(){return H(this)},"~run"(E,F){const Q=E.value;if(Q instanceof Map){E.typed=!0,E.value=new Map;for(const[ne,ue]of Q){const oe=this.key["~run"]({value:ne},F);if(oe.issues){const we={type:"map",origin:"key",input:Q,key:ne,value:ue};for(const Te of oe.issues)Te.path?Te.path.unshift(we):Te.path=[we],E.issues?.push(Te);if(E.issues||(E.issues=oe.issues),F.abortEarly){E.typed=!1;break}}const de=this.value["~run"]({value:ue},F);if(de.issues){const we={type:"map",origin:"value",input:Q,key:ne,value:ue};for(const Te of de.issues)Te.path?Te.path.unshift(we):Te.path=[we],E.issues?.push(Te);if(E.issues||(E.issues=de.issues),F.abortEarly){E.typed=!1;break}}(!oe.typed||!de.typed)&&(E.typed=!1),E.value.set(oe.value,de.value)}}else I(this,"type",E,F);return E}}}function tm(b,m,h){return{kind:"schema",type:"map",reference:tm,expects:"Map",async:!0,key:b,value:m,message:h,get"~standard"(){return H(this)},async"~run"(E,F){const Q=E.value;if(Q instanceof Map){E.typed=!0,E.value=new Map;const ne=await Promise.all([...Q].map(([ue,oe])=>Promise.all([ue,oe,this.key["~run"]({value:ue},F),this.value["~run"]({value:oe},F)])));for(const[ue,oe,de,we]of ne){if(de.issues){const Te={type:"map",origin:"key",input:Q,key:ue,value:oe};for(const Xe of de.issues)Xe.path?Xe.path.unshift(Te):Xe.path=[Te],E.issues?.push(Xe);if(E.issues||(E.issues=de.issues),F.abortEarly){E.typed=!1;break}}if(we.issues){const Te={type:"map",origin:"value",input:Q,key:ue,value:oe};for(const Xe of we.issues)Xe.path?Xe.path.unshift(Te):Xe.path=[Te],E.issues?.push(Xe);if(E.issues||(E.issues=we.issues),F.abortEarly){E.typed=!1;break}}(!de.typed||!we.typed)&&(E.typed=!1),E.value.set(de.value,we.value)}}else I(this,"type",E,F);return E}}}function rm(b){return{kind:"schema",type:"nan",reference:rm,expects:"NaN",async:!1,message:b,get"~standard"(){return H(this)},"~run"(m,h){return Number.isNaN(m.value)?m.typed=!0:I(this,"type",m,h),m}}}function nm(b){return{kind:"schema",type:"never",reference:nm,expects:"never",async:!1,message:b,get"~standard"(){return H(this)},"~run"(m,h){return I(this,"type",m,h),m}}}function im(b,m){return{kind:"schema",type:"non_nullable",reference:im,expects:"!null",async:!1,wrapped:b,message:m,get"~standard"(){return H(this)},"~run"(h,E){return h.value!==null&&(h=this.wrapped["~run"](h,E)),h.value===null&&I(this,"type",h,E),h}}}function om(b,m){return{kind:"schema",type:"non_nullable",reference:om,expects:"!null",async:!0,wrapped:b,message:m,get"~standard"(){return H(this)},async"~run"(h,E){return h.value!==null&&(h=await this.wrapped["~run"](h,E)),h.value===null&&I(this,"type",h,E),h}}}function sm(b,m){return{kind:"schema",type:"non_nullish",reference:sm,expects:"(!null & !undefined)",async:!1,wrapped:b,message:m,get"~standard"(){return H(this)},"~run"(h,E){return h.value===null||h.value===void 0||(h=this.wrapped["~run"](h,E)),(h.value===null||h.value===void 0)&&I(this,"type",h,E),h}}}function am(b,m){return{kind:"schema",type:"non_nullish",reference:am,expects:"(!null & !undefined)",async:!0,wrapped:b,message:m,get"~standard"(){return H(this)},async"~run"(h,E){return h.value===null||h.value===void 0||(h=await this.wrapped["~run"](h,E)),(h.value===null||h.value===void 0)&&I(this,"type",h,E),h}}}function ff(b,m){return{kind:"schema",type:"non_optional",reference:ff,expects:"!undefined",async:!1,wrapped:b,message:m,get"~standard"(){return H(this)},"~run"(h,E){return h.value!==void 0&&(h=this.wrapped["~run"](h,E)),h.value===void 0&&I(this,"type",h,E),h}}}function hf(b,m){return{kind:"schema",type:"non_optional",reference:hf,expects:"!undefined",async:!0,wrapped:b,message:m,get"~standard"(){return H(this)},async"~run"(h,E){return h.value!==void 0&&(h=await this.wrapped["~run"](h,E)),h.value===void 0&&I(this,"type",h,E),h}}}function df(b){return{kind:"schema",type:"null",reference:df,expects:"null",async:!1,message:b,get"~standard"(){return H(this)},"~run"(m,h){return m.value===null?m.typed=!0:I(this,"type",m,h),m}}}function um(b,m){return{kind:"schema",type:"nullable",reference:um,expects:`(${b.expects} | null)`,async:!1,wrapped:b,default:m,get"~standard"(){return H(this)},"~run"(h,E){return h.value===null&&(this.default!==void 0&&(h.value=Wt(this,h,E)),h.value===null)?(h.typed=!0,h):this.wrapped["~run"](h,E)}}}function cm(b,m){return{kind:"schema",type:"nullable",reference:cm,expects:`(${b.expects} | null)`,async:!0,wrapped:b,default:m,get"~standard"(){return H(this)},async"~run"(h,E){return h.value===null&&(this.default!==void 0&&(h.value=await Wt(this,h,E)),h.value===null)?(h.typed=!0,h):this.wrapped["~run"](h,E)}}}function lm(b,m){return{kind:"schema",type:"nullish",reference:lm,expects:`(${b.expects} | null | undefined)`,async:!1,wrapped:b,default:m,get"~standard"(){return H(this)},"~run"(h,E){return(h.value===null||h.value===void 0)&&(this.default!==void 0&&(h.value=Wt(this,h,E)),h.value===null||h.value===void 0)?(h.typed=!0,h):this.wrapped["~run"](h,E)}}}function fm(b,m){return{kind:"schema",type:"nullish",reference:fm,expects:`(${b.expects} | null | undefined)`,async:!0,wrapped:b,default:m,get"~standard"(){return H(this)},async"~run"(h,E){return(h.value===null||h.value===void 0)&&(this.default!==void 0&&(h.value=await Wt(this,h,E)),h.value===null||h.value===void 0)?(h.typed=!0,h):this.wrapped["~run"](h,E)}}}function hm(b){return{kind:"schema",type:"number",reference:hm,expects:"number",async:!1,message:b,get"~standard"(){return H(this)},"~run"(m,h){return typeof m.value=="number"&&!isNaN(m.value)?m.typed=!0:I(this,"type",m,h),m}}}function dm(b,m){return{kind:"schema",type:"object",reference:dm,expects:"Object",async:!1,entries:b,message:m,get"~standard"(){return H(this)},"~run"(h,E){const F=h.value;if(F&&typeof F=="object"){h.typed=!0,h.value={};for(const Q in this.entries){const ne=this.entries[Q];if(Q in F||(ne.type==="exact_optional"||ne.type==="optional"||ne.type==="nullish")&&ne.default!==void 0){const ue=Q in F?F[Q]:Wt(ne),oe=ne["~run"]({value:ue},E);if(oe.issues){const de={type:"object",origin:"value",input:F,key:Q,value:ue};for(const we of oe.issues)we.path?we.path.unshift(de):we.path=[de],h.issues?.push(we);if(h.issues||(h.issues=oe.issues),E.abortEarly){h.typed=!1;break}}oe.typed||(h.typed=!1),h.value[Q]=oe.value}else if(ne.fallback!==void 0)h.value[Q]=Cr(ne);else if(ne.type!=="exact_optional"&&ne.type!=="optional"&&ne.type!=="nullish"&&(I(this,"key",h,E,{input:void 0,expected:`"${Q}"`,path:[{type:"object",origin:"key",input:F,key:Q,value:F[Q]}]}),E.abortEarly))break}}else I(this,"type",h,E);return h}}}function pm(b,m){return{kind:"schema",type:"object",reference:pm,expects:"Object",async:!0,entries:b,message:m,get"~standard"(){return H(this)},async"~run"(h,E){const F=h.value;if(F&&typeof F=="object"){h.typed=!0,h.value={};const Q=await Promise.all(Object.entries(this.entries).map(async([ne,ue])=>{if(ne in F||(ue.type==="exact_optional"||ue.type==="optional"||ue.type==="nullish")&&ue.default!==void 0){const oe=ne in F?F[ne]:await Wt(ue);return[ne,oe,ue,await ue["~run"]({value:oe},E)]}return[ne,F[ne],ue,null]}));for(const[ne,ue,oe,de]of Q)if(de){if(de.issues){const we={type:"object",origin:"value",input:F,key:ne,value:ue};for(const Te of de.issues)Te.path?Te.path.unshift(we):Te.path=[we],h.issues?.push(Te);if(h.issues||(h.issues=de.issues),E.abortEarly){h.typed=!1;break}}de.typed||(h.typed=!1),h.value[ne]=de.value}else if(oe.fallback!==void 0)h.value[ne]=await Cr(oe);else if(oe.type!=="exact_optional"&&oe.type!=="optional"&&oe.type!=="nullish"&&(I(this,"key",h,E,{input:void 0,expected:`"${ne}"`,path:[{type:"object",origin:"key",input:F,key:ne,value:ue}]}),E.abortEarly))break}else I(this,"type",h,E);return h}}}function gm(b,m,h){return{kind:"schema",type:"object_with_rest",reference:gm,expects:"Object",async:!1,entries:b,rest:m,message:h,get"~standard"(){return H(this)},"~run"(E,F){const Q=E.value;if(Q&&typeof Q=="object"){E.typed=!0,E.value={};for(const ne in this.entries){const ue=this.entries[ne];if(ne in Q||(ue.type==="exact_optional"||ue.type==="optional"||ue.type==="nullish")&&ue.default!==void 0){const oe=ne in Q?Q[ne]:Wt(ue),de=ue["~run"]({value:oe},F);if(de.issues){const we={type:"object",origin:"value",input:Q,key:ne,value:oe};for(const Te of de.issues)Te.path?Te.path.unshift(we):Te.path=[we],E.issues?.push(Te);if(E.issues||(E.issues=de.issues),F.abortEarly){E.typed=!1;break}}de.typed||(E.typed=!1),E.value[ne]=de.value}else if(ue.fallback!==void 0)E.value[ne]=Cr(ue);else if(ue.type!=="exact_optional"&&ue.type!=="optional"&&ue.type!=="nullish"&&(I(this,"key",E,F,{input:void 0,expected:`"${ne}"`,path:[{type:"object",origin:"key",input:Q,key:ne,value:Q[ne]}]}),F.abortEarly))break}if(!E.issues||!F.abortEarly){for(const ne in Q)if(U(Q,ne)&&!(ne in this.entries)){const ue=this.rest["~run"]({value:Q[ne]},F);if(ue.issues){const oe={type:"object",origin:"value",input:Q,key:ne,value:Q[ne]};for(const de of ue.issues)de.path?de.path.unshift(oe):de.path=[oe],E.issues?.push(de);if(E.issues||(E.issues=ue.issues),F.abortEarly){E.typed=!1;break}}ue.typed||(E.typed=!1),E.value[ne]=ue.value}}}else I(this,"type",E,F);return E}}}function ym(b,m,h){return{kind:"schema",type:"object_with_rest",reference:ym,expects:"Object",async:!0,entries:b,rest:m,message:h,get"~standard"(){return H(this)},async"~run"(E,F){const Q=E.value;if(Q&&typeof Q=="object"){E.typed=!0,E.value={};const[ne,ue]=await Promise.all([Promise.all(Object.entries(this.entries).map(async([oe,de])=>{if(oe in Q||(de.type==="exact_optional"||de.type==="optional"||de.type==="nullish")&&de.default!==void 0){const we=oe in Q?Q[oe]:await Wt(de);return[oe,we,de,await de["~run"]({value:we},F)]}return[oe,Q[oe],de,null]})),Promise.all(Object.entries(Q).filter(([oe])=>U(Q,oe)&&!(oe in this.entries)).map(async([oe,de])=>[oe,de,await this.rest["~run"]({value:de},F)]))]);for(const[oe,de,we,Te]of ne)if(Te){if(Te.issues){const Xe={type:"object",origin:"value",input:Q,key:oe,value:de};for(const Xt of Te.issues)Xt.path?Xt.path.unshift(Xe):Xt.path=[Xe],E.issues?.push(Xt);if(E.issues||(E.issues=Te.issues),F.abortEarly){E.typed=!1;break}}Te.typed||(E.typed=!1),E.value[oe]=Te.value}else if(we.fallback!==void 0)E.value[oe]=await Cr(we);else if(we.type!=="exact_optional"&&we.type!=="optional"&&we.type!=="nullish"&&(I(this,"key",E,F,{input:void 0,expected:`"${oe}"`,path:[{type:"object",origin:"key",input:Q,key:oe,value:de}]}),F.abortEarly))break;if(!E.issues||!F.abortEarly)for(const[oe,de,we]of ue){if(we.issues){const Te={type:"object",origin:"value",input:Q,key:oe,value:de};for(const Xe of we.issues)Xe.path?Xe.path.unshift(Te):Xe.path=[Te],E.issues?.push(Xe);if(E.issues||(E.issues=we.issues),F.abortEarly){E.typed=!1;break}}we.typed||(E.typed=!1),E.value[oe]=we.value}}else I(this,"type",E,F);return E}}}function pf(b,m){return{kind:"schema",type:"optional",reference:pf,expects:`(${b.expects} | undefined)`,async:!1,wrapped:b,default:m,get"~standard"(){return H(this)},"~run"(h,E){return h.value===void 0&&(this.default!==void 0&&(h.value=Wt(this,h,E)),h.value===void 0)?(h.typed=!0,h):this.wrapped["~run"](h,E)}}}function gf(b,m){return{kind:"schema",type:"optional",reference:gf,expects:`(${b.expects} | undefined)`,async:!0,wrapped:b,default:m,get"~standard"(){return H(this)},async"~run"(h,E){return h.value===void 0&&(this.default!==void 0&&(h.value=await Wt(this,h,E)),h.value===void 0)?(h.typed=!0,h):this.wrapped["~run"](h,E)}}}function yf(b,m){return{kind:"schema",type:"picklist",reference:yf,expects:P(b.map(k),"|"),async:!1,options:b,message:m,get"~standard"(){return H(this)},"~run"(h,E){return this.options.includes(h.value)?h.typed=!0:I(this,"type",h,E),h}}}function mm(b){return{kind:"schema",type:"promise",reference:mm,expects:"Promise",async:!1,message:b,get"~standard"(){return H(this)},"~run"(m,h){return m.value instanceof Promise?m.typed=!0:I(this,"type",m,h),m}}}function bm(b,m,h){return{kind:"schema",type:"record",reference:bm,expects:"Object",async:!1,key:b,value:m,message:h,get"~standard"(){return H(this)},"~run"(E,F){const Q=E.value;if(Q&&typeof Q=="object"){E.typed=!0,E.value={};for(const ne in Q)if(U(Q,ne)){const ue=Q[ne],oe=this.key["~run"]({value:ne},F);if(oe.issues){const we={type:"object",origin:"key",input:Q,key:ne,value:ue};for(const Te of oe.issues)Te.path=[we],E.issues?.push(Te);if(E.issues||(E.issues=oe.issues),F.abortEarly){E.typed=!1;break}}const de=this.value["~run"]({value:ue},F);if(de.issues){const we={type:"object",origin:"value",input:Q,key:ne,value:ue};for(const Te of de.issues)Te.path?Te.path.unshift(we):Te.path=[we],E.issues?.push(Te);if(E.issues||(E.issues=de.issues),F.abortEarly){E.typed=!1;break}}(!oe.typed||!de.typed)&&(E.typed=!1),oe.typed&&(E.value[oe.value]=de.value)}}else I(this,"type",E,F);return E}}}function wm(b,m,h){return{kind:"schema",type:"record",reference:wm,expects:"Object",async:!0,key:b,value:m,message:h,get"~standard"(){return H(this)},async"~run"(E,F){const Q=E.value;if(Q&&typeof Q=="object"){E.typed=!0,E.value={};const ne=await Promise.all(Object.entries(Q).filter(([ue])=>U(Q,ue)).map(([ue,oe])=>Promise.all([ue,oe,this.key["~run"]({value:ue},F),this.value["~run"]({value:oe},F)])));for(const[ue,oe,de,we]of ne){if(de.issues){const Te={type:"object",origin:"key",input:Q,key:ue,value:oe};for(const Xe of de.issues)Xe.path=[Te],E.issues?.push(Xe);if(E.issues||(E.issues=de.issues),F.abortEarly){E.typed=!1;break}}if(we.issues){const Te={type:"object",origin:"value",input:Q,key:ue,value:oe};for(const Xe of we.issues)Xe.path?Xe.path.unshift(Te):Xe.path=[Te],E.issues?.push(Xe);if(E.issues||(E.issues=we.issues),F.abortEarly){E.typed=!1;break}}(!de.typed||!we.typed)&&(E.typed=!1),de.typed&&(E.value[de.value]=we.value)}}else I(this,"type",E,F);return E}}}function vm(b,m){return{kind:"schema",type:"set",reference:vm,expects:"Set",async:!1,value:b,message:m,get"~standard"(){return H(this)},"~run"(h,E){const F=h.value;if(F instanceof Set){h.typed=!0,h.value=new Set;for(const Q of F){const ne=this.value["~run"]({value:Q},E);if(ne.issues){const ue={type:"set",origin:"value",input:F,key:null,value:Q};for(const oe of ne.issues)oe.path?oe.path.unshift(ue):oe.path=[ue],h.issues?.push(oe);if(h.issues||(h.issues=ne.issues),E.abortEarly){h.typed=!1;break}}ne.typed||(h.typed=!1),h.value.add(ne.value)}}else I(this,"type",h,E);return h}}}function Em(b,m){return{kind:"schema",type:"set",reference:Em,expects:"Set",async:!0,value:b,message:m,get"~standard"(){return H(this)},async"~run"(h,E){const F=h.value;if(F instanceof Set){h.typed=!0,h.value=new Set;const Q=await Promise.all([...F].map(async ne=>[ne,await this.value["~run"]({value:ne},E)]));for(const[ne,ue]of Q){if(ue.issues){const oe={type:"set",origin:"value",input:F,key:null,value:ne};for(const de of ue.issues)de.path?de.path.unshift(oe):de.path=[oe],h.issues?.push(de);if(h.issues||(h.issues=ue.issues),E.abortEarly){h.typed=!1;break}}ue.typed||(h.typed=!1),h.value.add(ue.value)}}else I(this,"type",h,E);return h}}}function Sm(b,m){return{kind:"schema",type:"strict_object",reference:Sm,expects:"Object",async:!1,entries:b,message:m,get"~standard"(){return H(this)},"~run"(h,E){const F=h.value;if(F&&typeof F=="object"){h.typed=!0,h.value={};for(const Q in this.entries){const ne=this.entries[Q];if(Q in F||(ne.type==="exact_optional"||ne.type==="optional"||ne.type==="nullish")&&ne.default!==void 0){const ue=Q in F?F[Q]:Wt(ne),oe=ne["~run"]({value:ue},E);if(oe.issues){const de={type:"object",origin:"value",input:F,key:Q,value:ue};for(const we of oe.issues)we.path?we.path.unshift(de):we.path=[de],h.issues?.push(we);if(h.issues||(h.issues=oe.issues),E.abortEarly){h.typed=!1;break}}oe.typed||(h.typed=!1),h.value[Q]=oe.value}else if(ne.fallback!==void 0)h.value[Q]=Cr(ne);else if(ne.type!=="exact_optional"&&ne.type!=="optional"&&ne.type!=="nullish"&&(I(this,"key",h,E,{input:void 0,expected:`"${Q}"`,path:[{type:"object",origin:"key",input:F,key:Q,value:F[Q]}]}),E.abortEarly))break}if(!h.issues||!E.abortEarly){for(const Q in F)if(!(Q in this.entries)){I(this,"key",h,E,{input:Q,expected:"never",path:[{type:"object",origin:"key",input:F,key:Q,value:F[Q]}]});break}}}else I(this,"type",h,E);return h}}}function Am(b,m){return{kind:"schema",type:"strict_object",reference:Am,expects:"Object",async:!0,entries:b,message:m,get"~standard"(){return H(this)},async"~run"(h,E){const F=h.value;if(F&&typeof F=="object"){h.typed=!0,h.value={};const Q=await Promise.all(Object.entries(this.entries).map(async([ne,ue])=>{if(ne in F||(ue.type==="exact_optional"||ue.type==="optional"||ue.type==="nullish")&&ue.default!==void 0){const oe=ne in F?F[ne]:await Wt(ue);return[ne,oe,ue,await ue["~run"]({value:oe},E)]}return[ne,F[ne],ue,null]}));for(const[ne,ue,oe,de]of Q)if(de){if(de.issues){const we={type:"object",origin:"value",input:F,key:ne,value:ue};for(const Te of de.issues)Te.path?Te.path.unshift(we):Te.path=[we],h.issues?.push(Te);if(h.issues||(h.issues=de.issues),E.abortEarly){h.typed=!1;break}}de.typed||(h.typed=!1),h.value[ne]=de.value}else if(oe.fallback!==void 0)h.value[ne]=await Cr(oe);else if(oe.type!=="exact_optional"&&oe.type!=="optional"&&oe.type!=="nullish"&&(I(this,"key",h,E,{input:void 0,expected:`"${ne}"`,path:[{type:"object",origin:"key",input:F,key:ne,value:ue}]}),E.abortEarly))break;if(!h.issues||!E.abortEarly){for(const ne in F)if(!(ne in this.entries)){I(this,"key",h,E,{input:ne,expected:"never",path:[{type:"object",origin:"key",input:F,key:ne,value:F[ne]}]});break}}}else I(this,"type",h,E);return h}}}function km(b,m){return{kind:"schema",type:"strict_tuple",reference:km,expects:"Array",async:!1,items:b,message:m,get"~standard"(){return H(this)},"~run"(h,E){const F=h.value;if(Array.isArray(F)){h.typed=!0,h.value=[];for(let Q=0;Q<this.items.length;Q++){const ne=F[Q],ue=this.items[Q]["~run"]({value:ne},E);if(ue.issues){const oe={type:"array",origin:"value",input:F,key:Q,value:ne};for(const de of ue.issues)de.path?de.path.unshift(oe):de.path=[oe],h.issues?.push(de);if(h.issues||(h.issues=ue.issues),E.abortEarly){h.typed=!1;break}}ue.typed||(h.typed=!1),h.value.push(ue.value)}!(h.issues&&E.abortEarly)&&this.items.length<F.length&&I(this,"type",h,E,{input:F[this.items.length],expected:"never",path:[{type:"array",origin:"value",input:F,key:this.items.length,value:F[this.items.length]}]})}else I(this,"type",h,E);return h}}}function Im(b,m){return{kind:"schema",type:"strict_tuple",reference:Im,expects:"Array",async:!0,items:b,message:m,get"~standard"(){return H(this)},async"~run"(h,E){const F=h.value;if(Array.isArray(F)){h.typed=!0,h.value=[];const Q=await Promise.all(this.items.map(async(ne,ue)=>{const oe=F[ue];return[ue,oe,await ne["~run"]({value:oe},E)]}));for(const[ne,ue,oe]of Q){if(oe.issues){const de={type:"array",origin:"value",input:F,key:ne,value:ue};for(const we of oe.issues)we.path?we.path.unshift(de):we.path=[de],h.issues?.push(we);if(h.issues||(h.issues=oe.issues),E.abortEarly){h.typed=!1;break}}oe.typed||(h.typed=!1),h.value.push(oe.value)}!(h.issues&&E.abortEarly)&&this.items.length<F.length&&I(this,"type",h,E,{input:F[this.items.length],expected:"never",path:[{type:"array",origin:"value",input:F,key:this.items.length,value:F[this.items.length]}]})}else I(this,"type",h,E);return h}}}function _m(b){return{kind:"schema",type:"string",reference:_m,expects:"string",async:!1,message:b,get"~standard"(){return H(this)},"~run"(m,h){return typeof m.value=="string"?m.typed=!0:I(this,"type",m,h),m}}}function xm(b){return{kind:"schema",type:"symbol",reference:xm,expects:"symbol",async:!1,message:b,get"~standard"(){return H(this)},"~run"(m,h){return typeof m.value=="symbol"?m.typed=!0:I(this,"type",m,h),m}}}function Tm(b,m){return{kind:"schema",type:"tuple",reference:Tm,expects:"Array",async:!1,items:b,message:m,get"~standard"(){return H(this)},"~run"(h,E){const F=h.value;if(Array.isArray(F)){h.typed=!0,h.value=[];for(let Q=0;Q<this.items.length;Q++){const ne=F[Q],ue=this.items[Q]["~run"]({value:ne},E);if(ue.issues){const oe={type:"array",origin:"value",input:F,key:Q,value:ne};for(const de of ue.issues)de.path?de.path.unshift(oe):de.path=[oe],h.issues?.push(de);if(h.issues||(h.issues=ue.issues),E.abortEarly){h.typed=!1;break}}ue.typed||(h.typed=!1),h.value.push(ue.value)}}else I(this,"type",h,E);return h}}}function Bm(b,m){return{kind:"schema",type:"tuple",reference:Bm,expects:"Array",async:!0,items:b,message:m,get"~standard"(){return H(this)},async"~run"(h,E){const F=h.value;if(Array.isArray(F)){h.typed=!0,h.value=[];const Q=await Promise.all(this.items.map(async(ne,ue)=>{const oe=F[ue];return[ue,oe,await ne["~run"]({value:oe},E)]}));for(const[ne,ue,oe]of Q){if(oe.issues){const de={type:"array",origin:"value",input:F,key:ne,value:ue};for(const we of oe.issues)we.path?we.path.unshift(de):we.path=[de],h.issues?.push(we);if(h.issues||(h.issues=oe.issues),E.abortEarly){h.typed=!1;break}}oe.typed||(h.typed=!1),h.value.push(oe.value)}}else I(this,"type",h,E);return h}}}function Pm(b,m,h){return{kind:"schema",type:"tuple_with_rest",reference:Pm,expects:"Array",async:!1,items:b,rest:m,message:h,get"~standard"(){return H(this)},"~run"(E,F){const Q=E.value;if(Array.isArray(Q)){E.typed=!0,E.value=[];for(let ne=0;ne<this.items.length;ne++){const ue=Q[ne],oe=this.items[ne]["~run"]({value:ue},F);if(oe.issues){const de={type:"array",origin:"value",input:Q,key:ne,value:ue};for(const we of oe.issues)we.path?we.path.unshift(de):we.path=[de],E.issues?.push(we);if(E.issues||(E.issues=oe.issues),F.abortEarly){E.typed=!1;break}}oe.typed||(E.typed=!1),E.value.push(oe.value)}if(!E.issues||!F.abortEarly)for(let ne=this.items.length;ne<Q.length;ne++){const ue=Q[ne],oe=this.rest["~run"]({value:ue},F);if(oe.issues){const de={type:"array",origin:"value",input:Q,key:ne,value:ue};for(const we of oe.issues)we.path?we.path.unshift(de):we.path=[de],E.issues?.push(we);if(E.issues||(E.issues=oe.issues),F.abortEarly){E.typed=!1;break}}oe.typed||(E.typed=!1),E.value.push(oe.value)}}else I(this,"type",E,F);return E}}}function Om(b,m,h){return{kind:"schema",type:"tuple_with_rest",reference:Om,expects:"Array",async:!0,items:b,rest:m,message:h,get"~standard"(){return H(this)},async"~run"(E,F){const Q=E.value;if(Array.isArray(Q)){E.typed=!0,E.value=[];const[ne,ue]=await Promise.all([Promise.all(this.items.map(async(oe,de)=>{const we=Q[de];return[de,we,await oe["~run"]({value:we},F)]})),Promise.all(Q.slice(this.items.length).map(async(oe,de)=>[de+this.items.length,oe,await this.rest["~run"]({value:oe},F)]))]);for(const[oe,de,we]of ne){if(we.issues){const Te={type:"array",origin:"value",input:Q,key:oe,value:de};for(const Xe of we.issues)Xe.path?Xe.path.unshift(Te):Xe.path=[Te],E.issues?.push(Xe);if(E.issues||(E.issues=we.issues),F.abortEarly){E.typed=!1;break}}we.typed||(E.typed=!1),E.value.push(we.value)}if(!E.issues||!F.abortEarly)for(const[oe,de,we]of ue){if(we.issues){const Te={type:"array",origin:"value",input:Q,key:oe,value:de};for(const Xe of we.issues)Xe.path?Xe.path.unshift(Te):Xe.path=[Te],E.issues?.push(Xe);if(E.issues||(E.issues=we.issues),F.abortEarly){E.typed=!1;break}}we.typed||(E.typed=!1),E.value.push(we.value)}}else I(this,"type",E,F);return E}}}function mf(b){return{kind:"schema",type:"undefined",reference:mf,expects:"undefined",async:!1,message:b,get"~standard"(){return H(this)},"~run"(m,h){return m.value===void 0?m.typed=!0:I(this,"type",m,h),m}}}function Um(b,m){return{kind:"schema",type:"undefinedable",reference:Um,expects:`(${b.expects} | undefined)`,async:!1,wrapped:b,default:m,get"~standard"(){return H(this)},"~run"(h,E){return h.value===void 0&&(this.default!==void 0&&(h.value=Wt(this,h,E)),h.value===void 0)?(h.typed=!0,h):this.wrapped["~run"](h,E)}}}function Lm(b,m){return{kind:"schema",type:"undefinedable",reference:Lm,expects:`(${b.expects} | undefined)`,async:!0,wrapped:b,default:m,get"~standard"(){return H(this)},async"~run"(h,E){return h.value===void 0&&(this.default!==void 0&&(h.value=await Wt(this,h,E)),h.value===void 0)?(h.typed=!0,h):this.wrapped["~run"](h,E)}}}function ku(b){let m;if(b)for(const h of b)m?m.push(...h.issues):m=h.issues;return m}function Rm(b,m){return{kind:"schema",type:"union",reference:Rm,expects:P(b.map(h=>h.expects),"|"),async:!1,options:b,message:m,get"~standard"(){return H(this)},"~run"(h,E){let F,Q,ne;for(const ue of this.options){const oe=ue["~run"]({value:h.value},E);if(oe.typed)if(oe.issues)Q?Q.push(oe):Q=[oe];else{F=oe;break}else ne?ne.push(oe):ne=[oe]}if(F)return F;if(Q){if(Q.length===1)return Q[0];I(this,"type",h,E,{issues:ku(Q)}),h.typed=!0}else{if(ne?.length===1)return ne[0];I(this,"type",h,E,{issues:ku(ne)})}return h}}}function $m(b,m){return{kind:"schema",type:"union",reference:$m,expects:P(b.map(h=>h.expects),"|"),async:!0,options:b,message:m,get"~standard"(){return H(this)},async"~run"(h,E){let F,Q,ne;for(const ue of this.options){const oe=await ue["~run"]({value:h.value},E);if(oe.typed)if(oe.issues)Q?Q.push(oe):Q=[oe];else{F=oe;break}else ne?ne.push(oe):ne=[oe]}if(F)return F;if(Q){if(Q.length===1)return Q[0];I(this,"type",h,E,{issues:ku(Q)}),h.typed=!0}else{if(ne?.length===1)return ne[0];I(this,"type",h,E,{issues:ku(ne)})}return h}}}function Cm(){return{kind:"schema",type:"unknown",reference:Cm,expects:"unknown",async:!1,get"~standard"(){return H(this)},"~run"(b){return b.typed=!0,b}}}function Nm(b,m,h){return{kind:"schema",type:"variant",reference:Nm,expects:"Object",async:!1,key:b,options:m,message:h,get"~standard"(){return H(this)},"~run"(E,F){const Q=E.value;if(Q&&typeof Q=="object"){let ne,ue=0,oe=this.key,de=[];const we=(Te,Xe)=>{for(const Xt of Te.options){if(Xt.type==="variant")we(Xt,new Set(Xe).add(Xt.key));else{let Gs=!0,Wn=0;for(const Ut of Xe){const qn=Xt.entries[Ut];if(Ut in Q?qn["~run"]({typed:!1,value:Q[Ut]},{abortEarly:!0}).issues:qn.type!=="exact_optional"&&qn.type!=="optional"&&qn.type!=="nullish"){Gs=!1,oe!==Ut&&(ue<Wn||ue===Wn&&Ut in Q&&!(oe in Q))&&(ue=Wn,oe=Ut,de=[]),oe===Ut&&de.push(Xt.entries[Ut].expects);break}Wn++}if(Gs){const Ut=Xt["~run"]({value:Q},F);(!ne||!ne.typed&&Ut.typed)&&(ne=Ut)}}if(ne&&!ne.issues)break}};if(we(this,new Set([this.key])),ne)return ne;I(this,"type",E,F,{input:Q[oe],expected:P(de,"|"),path:[{type:"object",origin:"value",input:Q,key:oe,value:Q[oe]}]})}else I(this,"type",E,F);return E}}}function Hm(b,m,h){return{kind:"schema",type:"variant",reference:Hm,expects:"Object",async:!0,key:b,options:m,message:h,get"~standard"(){return H(this)},async"~run"(E,F){const Q=E.value;if(Q&&typeof Q=="object"){let ne,ue=0,oe=this.key,de=[];const we=async(Te,Xe)=>{for(const Xt of Te.options){if(Xt.type==="variant")await we(Xt,new Set(Xe).add(Xt.key));else{let Gs=!0,Wn=0;for(const Ut of Xe){const qn=Xt.entries[Ut];if(Ut in Q?(await qn["~run"]({typed:!1,value:Q[Ut]},{abortEarly:!0})).issues:qn.type!=="exact_optional"&&qn.type!=="optional"&&qn.type!=="nullish"){Gs=!1,oe!==Ut&&(ue<Wn||ue===Wn&&Ut in Q&&!(oe in Q))&&(ue=Wn,oe=Ut,de=[]),oe===Ut&&de.push(Xt.entries[Ut].expects);break}Wn++}if(Gs){const Ut=await Xt["~run"]({value:Q},F);(!ne||!ne.typed&&Ut.typed)&&(ne=Ut)}}if(ne&&!ne.issues)break}};if(await we(this,new Set([this.key])),ne)return ne;I(this,"type",E,F,{input:Q[oe],expected:P(de,"|"),path:[{type:"object",origin:"value",input:Q,key:oe,value:Q[oe]}]})}else I(this,"type",E,F);return E}}}function bf(b){return{kind:"schema",type:"void",reference:bf,expects:"void",async:!1,message:b,get"~standard"(){return H(this)},"~run"(m,h){return m.value===void 0?m.typed=!0:I(this,"type",m,h),m}}}function b6(b,m){return yf(Object.keys(b.entries),m)}function w6(b,m){return{...b,get"~standard"(){return H(this)},"~run"(h,E){return b["~run"](h,{...E,message:m})}}}function v6(b,m){const h={...b.entries};for(const E of m)delete h[E];return{...b,entries:h,get"~standard"(){return H(this)}}}function Dm(b,m,h){const E=b["~run"]({value:m},r(h));if(E.issues)throw new K(E.issues);return E.value}async function zm(b,m,h){const E=await b["~run"]({value:m},r(h));if(E.issues)throw new K(E.issues);return E.value}function E6(b,m){const h=E=>Dm(b,E,m);return h.schema=b,h.config=m,h}function S6(b,m){const h=E=>zm(b,E,m);return h.schema=b,h.config=m,h}function A6(b,m){const h={};for(const E in b.entries)h[E]=!m||m.includes(E)?pf(b.entries[E]):b.entries[E];return{...b,entries:h,get"~standard"(){return H(this)}}}function k6(b,m){const h={};for(const E in b.entries)h[E]=!m||m.includes(E)?gf(b.entries[E]):b.entries[E];return{...b,entries:h,get"~standard"(){return H(this)}}}function I6(b,m){const h={};for(const E of m)h[E]=b.entries[E];return{...b,entries:h,get"~standard"(){return H(this)}}}function _6(...b){return{...b[0],pipe:b,get"~standard"(){return H(this)},"~run"(m,h){for(const E of b)if(E.kind!=="metadata"){if(m.issues&&(E.kind==="schema"||E.kind==="transformation")){m.typed=!1;break}(!m.issues||!h.abortEarly&&!h.abortPipeEarly)&&(m=E["~run"](m,h))}return m}}}function x6(...b){return{...b[0],pipe:b,async:!0,get"~standard"(){return H(this)},async"~run"(m,h){for(const E of b)if(E.kind!=="metadata"){if(m.issues&&(E.kind==="schema"||E.kind==="transformation")){m.typed=!1;break}(!m.issues||!h.abortEarly&&!h.abortPipeEarly)&&(m=await E["~run"](m,h))}return m}}}function T6(b,m,h){const E=Array.isArray(m)?m:void 0,F=Array.isArray(m)?h:m,Q={};for(const ne in b.entries)Q[ne]=!E||E.includes(ne)?ff(b.entries[ne],F):b.entries[ne];return{...b,entries:Q,get"~standard"(){return H(this)}}}function B6(b,m,h){const E=Array.isArray(m)?m:void 0,F=Array.isArray(m)?h:m,Q={};for(const ne in b.entries)Q[ne]=!E||E.includes(ne)?hf(b.entries[ne],F):b.entries[ne];return{...b,entries:Q,get"~standard"(){return H(this)}}}function Mm(b,m,h){const E=b["~run"]({value:m},r(h));return{typed:E.typed,success:!E.issues,output:E.value,issues:E.issues}}async function Fm(b,m,h){const E=await b["~run"]({value:m},r(h));return{typed:E.typed,success:!E.issues,output:E.value,issues:E.issues}}function P6(b,m){const h=E=>Mm(b,E,m);return h.schema=b,h.config=m,h}function O6(b,m){const h=E=>Fm(b,E,m);return h.schema=b,h.config=m,h}function U6(b){let m="";for(const h of b){m&&(m+=`
`),m+=` ${h.message}`;const E=z(h);E&&(m+=`
   at ${E}`)}return m}function L6(b){return b.wrapped}return q.BASE64_REGEX=j,q.BIC_REGEX=te,q.CUID2_REGEX=ae,q.DECIMAL_REGEX=ce,q.DIGITS_REGEX=pe,q.EMAIL_REGEX=le,q.EMOJI_REGEX=ye,q.HEXADECIMAL_REGEX=Ae,q.HEX_COLOR_REGEX=xe,q.IMEI_REGEX=Be,q.IPV4_REGEX=We,q.IPV6_REGEX=ze,q.IP_REGEX=Qe,q.ISO_DATE_REGEX=qe,q.ISO_DATE_TIME_REGEX=lt,q.ISO_TIMESTAMP_REGEX=Ie,q.ISO_TIME_REGEX=me,q.ISO_TIME_SECOND_REGEX=at,q.ISO_WEEK_REGEX=He,q.MAC48_REGEX=Ke,q.MAC64_REGEX=ft,q.MAC_REGEX=Je,q.NANO_ID_REGEX=Vt,q.OCTAL_REGEX=kr,q.RFC_EMAIL_REGEX=yt,q.SLUG_REGEX=rr,q.ULID_REGEX=c,q.UUID_REGEX=d,q.ValiError=K,q._addIssue=I,q._getByteCount=B,q._getGraphemeCount=W,q._getLastMetadata=Y,q._getStandardProps=H,q._getWordCount=T,q._isLuhnAlgo=G,q._isValidObjectKey=U,q._joinExpects=P,q._stringify=k,q.any=Uy,q.args=Z,q.argsAsync=D,q.array=Ly,q.arrayAsync=Ry,q.assert=s6,q.awaitAsync=J,q.base64=g,q.bic=O,q.bigint=$y,q.blob=Cy,q.boolean=Ny,q.brand=M,q.bytes=re,q.check=fe,q.checkAsync=Ue,q.checkItems=Ge,q.checkItemsAsync=Ne,q.config=a6,q.creditCard=$r,q.cuid2=Wo,q.custom=Hy,q.customAsync=Dy,q.date=zy,q.decimal=Eu,q.deleteGlobalConfig=n,q.deleteGlobalMessage=a,q.deleteSchemaMessage=p,q.deleteSpecificMessage=S,q.description=an,q.digits=Su,q.email=v,q.emoji=x,q.empty=$,q.endsWith=se,q.entries=he,q.entriesFromList=L,q.entriesFromObjects=R,q.enum=cf,q.enum_=cf,q.everyItem=be,q.exactOptional=My,q.exactOptionalAsync=Fy,q.examples=ke,q.excludes=mt,q.fallback=u6,q.fallbackAsync=c6,q.file=Ky,q.filterItems=Dt,q.findItem=wt,q.finite=ht,q.flatten=l6,q.flavor=Ot,q.forward=f6,q.forwardAsync=h6,q.function=lf,q.function_=lf,q.getDefault=Wt,q.getDefaults=of,q.getDefaultsAsync=sf,q.getDescription=d6,q.getDotPath=z,q.getExamples=p6,q.getFallback=Cr,q.getFallbacks=af,q.getFallbacksAsync=uf,q.getGlobalConfig=r,q.getGlobalMessage=s,q.getMetadata=g6,q.getSchemaMessage=u,q.getSpecificMessage=A,q.getTitle=y6,q.graphemes=W0,q.gtValue=q0,q.hash=G0,q.hexColor=Y0,q.hexadecimal=X0,q.imei=Z0,q.includes=Q0,q.instance=jy,q.integer=J0,q.intersect=Vy,q.intersectAsync=Wy,q.ip=eg,q.ipv4=tg,q.ipv6=rg,q.is=m6,q.isOfKind=X,q.isOfType=ee,q.isValiError=_,q.isoDate=ng,q.isoDateTime=ig,q.isoTime=og,q.isoTimeSecond=sg,q.isoTimestamp=ag,q.isoWeek=ug,q.keyof=b6,q.lazy=qy,q.lazyAsync=Gy,q.length=cg,q.literal=Xy,q.looseObject=Yy,q.looseObjectAsync=Zy,q.looseTuple=Qy,q.looseTupleAsync=Jy,q.ltValue=lg,q.mac=fg,q.mac48=hg,q.mac64=dg,q.map=em,q.mapAsync=tm,q.mapItems=pg,q.maxBytes=gg,q.maxEntries=yg,q.maxGraphemes=mg,q.maxLength=bg,q.maxSize=wg,q.maxValue=vg,q.maxWords=Eg,q.message=w6,q.metadata=Sg,q.mimeType=Ag,q.minBytes=kg,q.minEntries=Ig,q.minGraphemes=_g,q.minLength=xg,q.minSize=Tg,q.minValue=Bg,q.minWords=Pg,q.multipleOf=Og,q.nan=rm,q.nanoid=Ug,q.never=nm,q.nonEmpty=Lg,q.nonNullable=im,q.nonNullableAsync=om,q.nonNullish=sm,q.nonNullishAsync=am,q.nonOptional=ff,q.nonOptionalAsync=hf,q.normalize=Rg,q.notBytes=$g,q.notEntries=Cg,q.notGraphemes=Ng,q.notLength=Hg,q.notSize=Dg,q.notValue=zg,q.notValues=Mg,q.notWords=Fg,q.null=df,q.null_=df,q.nullable=um,q.nullableAsync=cm,q.nullish=lm,q.nullishAsync=fm,q.number=hm,q.object=dm,q.objectAsync=pm,q.objectWithRest=gm,q.objectWithRestAsync=ym,q.octal=Kg,q.omit=v6,q.optional=pf,q.optionalAsync=gf,q.parse=Dm,q.parseAsync=zm,q.parseJson=jg,q.parser=E6,q.parserAsync=S6,q.partial=A6,q.partialAsync=k6,q.partialCheck=Wg,q.partialCheckAsync=qg,q.pick=I6,q.picklist=yf,q.pipe=_6,q.pipeAsync=x6,q.promise=mm,q.rawCheck=Gg,q.rawCheckAsync=Xg,q.rawTransform=Yg,q.rawTransformAsync=Zg,q.readonly=Qg,q.record=bm,q.recordAsync=wm,q.reduceItems=Jg,q.regex=ey,q.required=T6,q.requiredAsync=B6,q.returns=ty,q.returnsAsync=ry,q.rfcEmail=ny,q.safeInteger=iy,q.safeParse=Mm,q.safeParseAsync=Fm,q.safeParser=P6,q.safeParserAsync=O6,q.set=vm,q.setAsync=Em,q.setGlobalConfig=e,q.setGlobalMessage=o,q.setSchemaMessage=f,q.setSpecificMessage=w,q.size=oy,q.slug=sy,q.someItem=ay,q.sortItems=uy,q.startsWith=cy,q.strictObject=Sm,q.strictObjectAsync=Am,q.strictTuple=km,q.strictTupleAsync=Im,q.string=_m,q.stringifyJson=ly,q.summarize=U6,q.symbol=xm,q.title=fy,q.toBigint=hy,q.toBoolean=dy,q.toDate=py,q.toLowerCase=gy,q.toMaxValue=yy,q.toMinValue=my,q.toNumber=by,q.toString=wy,q.toUpperCase=vy,q.transform=Ey,q.transformAsync=Sy,q.trim=Ay,q.trimEnd=ky,q.trimStart=Iy,q.tuple=Tm,q.tupleAsync=Bm,q.tupleWithRest=Pm,q.tupleWithRestAsync=Om,q.ulid=_y,q.undefined=mf,q.undefined_=mf,q.undefinedable=Um,q.undefinedableAsync=Lm,q.union=Rm,q.unionAsync=$m,q.unknown=Cm,q.unwrap=L6,q.url=xy,q.uuid=Ty,q.value=By,q.values=Py,q.variant=Nm,q.variantAsync=Hm,q.void=bf,q.void_=bf,q.words=Oy,q}var ki={},$w;function aS(){return $w||($w=1,(function(t){var e=ki&&ki.__createBinding||(Object.create?(function(a,l,f,u){u===void 0&&(u=f);var p=Object.getOwnPropertyDescriptor(l,f);(!p||("get"in p?!l.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return l[f]}}),Object.defineProperty(a,u,p)}):(function(a,l,f,u){u===void 0&&(u=f),a[u]=l[f]})),r=ki&&ki.__setModuleDefault||(Object.create?(function(a,l){Object.defineProperty(a,"default",{enumerable:!0,value:l})}):function(a,l){a.default=l}),n=ki&&ki.__importStar||(function(){var a=function(l){return a=Object.getOwnPropertyNames||function(f){var u=[];for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(u[u.length]=p);return u},a(l)};return function(l){if(l&&l.__esModule)return l;var f={};if(l!=null)for(var u=a(l),p=0;p<u.length;p++)u[p]!=="default"&&e(f,l,u[p]);return r(f,l),f}})();Object.defineProperty(t,"__esModule",{value:!0}),t.Bip32PathSchema=t.NetworkSchema=t.Buffer33Bytes=t.Buffer256Bit=t.Uint31Schema=t.Uint32Schema=void 0;const i=n(zp());t.Uint32Schema=i.pipe(i.number(),i.integer(),i.minValue(0),i.maxValue(4294967295)),t.Uint31Schema=i.pipe(i.number(),i.integer(),i.minValue(0),i.maxValue(2147483647));const o=i.pipe(i.number(),i.integer(),i.minValue(0),i.maxValue(255));t.Buffer256Bit=i.pipe(i.instance(Uint8Array),i.length(32)),t.Buffer33Bytes=i.pipe(i.instance(Uint8Array),i.length(33));const s=i.object({public:t.Uint32Schema,private:t.Uint32Schema});t.NetworkSchema=i.object({wif:o,bip32:s,messagePrefix:i.union([i.string(),i.instance(Uint8Array)]),bech32:i.string(),bech32Opnet:i.optional(i.string()),pubKeyHash:o,scriptHash:o}),t.Bip32PathSchema=i.pipe(i.string(),i.regex(/^(m\/)?(\d+'?\/)*\d+'?$/))})(ki)),ki}var Nr={},Jo={},es={},ts={},Fu={},Cw;function C7(){if(Cw)return Fu;Cw=1,Object.defineProperty(Fu,"__esModule",{value:!0});function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");const r=new Uint8Array(256);for(let u=0;u<r.length;u++)r[u]=255;for(let u=0;u<e.length;u++){const p=e.charAt(u),y=p.charCodeAt(0);if(r[y]!==255)throw new TypeError(p+" is ambiguous");r[y]=u}const n=e.length,i=e.charAt(0),o=Math.log(n)/Math.log(256),s=Math.log(256)/Math.log(n);function a(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(u.length===0)return"";let p=0,y=0,w=0;const A=u.length;for(;w!==A&&u[w]===0;)w++,p++;const S=(A-w)*s+1>>>0,k=new Uint8Array(S);for(;w!==A;){let B=u[w],V=0;for(let W=S-1;(B!==0||V<y)&&W!==-1;W--,V++)B+=256*k[W]>>>0,k[W]=B%n>>>0,B=B/n>>>0;if(B!==0)throw new Error("Non-zero carry");y=V,w++}let I=S-y;for(;I!==S&&k[I]===0;)I++;let N=i.repeat(p);for(;I<S;++I)N+=e.charAt(k[I]);return N}function l(u){if(typeof u!="string")throw new TypeError("Expected String");if(u.length===0)return new Uint8Array;let p=0,y=0,w=0;for(;u[p]===i;)y++,p++;const A=(u.length-p)*o+1>>>0,S=new Uint8Array(A);for(;p<u.length;){const B=u.charCodeAt(p);if(B>255)return;let V=r[B];if(V===255)return;let W=0;for(let Y=A-1;(V!==0||W<w)&&Y!==-1;Y--,W++)V+=n*S[Y]>>>0,S[Y]=V%256>>>0,V=V/256>>>0;if(V!==0)throw new Error("Non-zero carry");w=W,p++}let k=A-w;for(;k!==A&&S[k]===0;)k++;const I=new Uint8Array(y+(A-k));let N=y;for(;k!==A;)I[N++]=S[k++];return I}function f(u){const p=l(u);if(p)return p;throw new Error("Non-base"+n+" character")}return{encode:a,decodeUnsafe:l,decode:f}}return Fu.default=t,Fu}var Nw;function N7(){if(Nw)return ts;Nw=1;var t=ts&&ts.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ts,"__esModule",{value:!0});var e=t(C7()),r="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return ts.default=(0,e.default)(r),ts}var Hw;function H7(){if(Hw)return es;Hw=1;var t=es&&es.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(es,"__esModule",{value:!0}),es.default=r;var e=t(N7());function r(n){function i(l){var f=Uint8Array.from(l),u=n(f),p=f.length+4,y=new Uint8Array(p);return y.set(f,0),y.set(u.subarray(0,4),f.length),e.default.encode(y)}function o(l){var f=l.slice(0,-4),u=l.slice(-4),p=n(f);if(!(u[0]^p[0]|u[1]^p[1]|u[2]^p[2]|u[3]^p[3]))return f}function s(l){var f=e.default.decodeUnsafe(l);if(f!=null)return o(f)}function a(l){var f=e.default.decode(l),u=o(f);if(u==null)throw new Error("Invalid checksum");return u}return{encode:i,decode:a,decodeUnsafe:s}}return es}var Dw;function D7(){if(Dw)return Jo;Dw=1;var t=Jo&&Jo.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Jo,"__esModule",{value:!0});var e=$A(),r=t(H7());function n(i){return(0,e.sha256)((0,e.sha256)(i))}return Jo.default=(0,r.default)(n),Jo}var zw;function z7(){if(zw)return Nr;zw=1;var t=Nr&&Nr.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.encode=Nr.decode=Nr.encodeRaw=Nr.decodeRaw=void 0;var e=t(D7());function r(s,a){if(a!==void 0&&s[0]!==a)throw new Error("Invalid network version");if(s.length===33)return{version:s[0],privateKey:s.slice(1,33),compressed:!1};if(s.length!==34)throw new Error("Invalid WIF length");if(s[33]!==1)throw new Error("Invalid compression flag");return{version:s[0],privateKey:s.slice(1,33),compressed:!0}}Nr.decodeRaw=r;function n(s,a,l){if(a.length!==32)throw new TypeError("Invalid privateKey length");var f=new Uint8Array(l?34:33),u=new DataView(f.buffer);return u.setUint8(0,s),f.set(a,1),l&&(f[33]=1),f}Nr.encodeRaw=n;function i(s,a){return r(e.default.decode(s),a)}Nr.decode=i;function o(s){return e.default.encode(n(s.version,s.privateKey,s.compressed))}return Nr.encode=o,Nr}var Ii={},Mw;function Dl(){return Mw||(Mw=1,Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.REGTEST=Ii.TESTNET=Ii.BITCOIN=void 0,Ii.BITCOIN={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},Ii.TESTNET={messagePrefix:`Bitcoin Signed Message:
`,bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239},Ii.REGTEST={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bcrt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}),Ii}var Fw;function M7(){if(Fw)return An;Fw=1;var t=An&&An.__createBinding||(Object.create?(function(N,B,V,W){W===void 0&&(W=V);var Y=Object.getOwnPropertyDescriptor(B,V);(!Y||("get"in Y?!B.__esModule:Y.writable||Y.configurable))&&(Y={enumerable:!0,get:function(){return B[V]}}),Object.defineProperty(N,W,Y)}):(function(N,B,V,W){W===void 0&&(W=V),N[W]=B[V]})),e=An&&An.__setModuleDefault||(Object.create?(function(N,B){Object.defineProperty(N,"default",{enumerable:!0,value:B})}):function(N,B){N.default=B}),r=An&&An.__importStar||(function(){var N=function(B){return N=Object.getOwnPropertyNames||function(V){var W=[];for(var Y in V)Object.prototype.hasOwnProperty.call(V,Y)&&(W[W.length]=Y);return W},N(B)};return function(B){if(B&&B.__esModule)return B;var V={};if(B!=null)for(var W=N(B),Y=0;Y<W.length;Y++)W[Y]!=="default"&&t(V,B,W[Y]);return e(V,B),V}})();Object.defineProperty(An,"__esModule",{value:!0}),An.BIP32Factory=I;const n=r(N8()),i=b7(),o=sS,s=cp,a=r(zp()),l=aS(),f=r(z7()),u=r($p),p=Dl(),y=H8,w=(0,o.base58check)(s.sha256),A={encode:N=>w.encode(N),decode:N=>w.decode(N)},S=u.fromUtf8("Bitcoin seed"),k=new WeakSet;function I(N){const B=N;k.has(B)||((0,i.testEcc)(B),k.add(B));const V=2147483648;function W(R){return R.length===32?R:R.slice(1,33)}class Y{__D;__Q;network;lowR=!1;constructor(z,X,ee){this.__D=z,this.__Q=X,this.network=ee}get publicKey(){return this.__Q===void 0&&(this.__Q=B.pointFromScalar(this.__D,!0)),this.__Q}get xOnlyPublicKey(){return W(this.publicKey)}get privateKey(){return this.__D}get compressed(){return!0}get capabilities(){let z=y.SignerCapability.EcdsaVerify|y.SignerCapability.PublicKeyTweak;return this.__D!==void 0&&(z|=y.SignerCapability.EcdsaSign|y.SignerCapability.PrivateKeyExport),B.signSchnorr&&this.__D!==void 0&&(z|=y.SignerCapability.SchnorrSign),B.verifySchnorr&&(z|=y.SignerCapability.SchnorrVerify),z}hasCapability(z){return(this.capabilities&z)!==0}sign(z,X){if(!this.privateKey)throw new Error("Missing private key");if(X===void 0&&(X=this.lowR),X){let ee=B.sign(z,this.privateKey);const _=new Uint8Array(32);let K=0;for(;ee[0]>127;)K++,u.writeUInt32(_,0,K,"LE"),ee=B.sign(z,this.privateKey,_);return ee}else return B.sign(z,this.privateKey)}signSchnorr(z){if(!this.privateKey)throw new Error("Missing private key");if(!B.signSchnorr)throw new Error("signSchnorr not supported by ecc library");return B.signSchnorr(z,this.privateKey)}verify(z,X){return B.verify(z,this.publicKey,X)}verifySchnorr(z,X){if(!B.verifySchnorr)throw new Error("verifySchnorr not supported by ecc library");return B.verifySchnorr(z,this.publicKey.subarray(1,33),X)}tweak(z){return this.privateKey?this.tweakFromPrivateKey(z):this.tweakFromPublicKey(z)}toWIF(){if(!this.privateKey)throw new TypeError("Missing private key");return f.encode({version:this.network.wif,privateKey:this.privateKey,compressed:!0})}tweakFromPublicKey(z){const X=W(this.publicKey),ee=B.xOnlyPointAddTweak;if(!ee)throw new Error("xOnlyPointAddTweak not supported by ecc library");const _=ee(X,z);if(!_||_.xOnlyPubkey===null)throw new Error("Cannot tweak public key!");const K=Uint8Array.from([_.parity===0?2:3]),Z=u.concat([K,_.xOnlyPubkey]);return new Y(void 0,Z,this.network)}tweakFromPrivateKey(z){const X=this.publicKey[0]===3||this.publicKey[0]===4&&(this.publicKey[64]&1)===1,ee=(()=>{if(X){if(B.privateNegate)return B.privateNegate(this.privateKey);throw new Error("privateNegate not supported by ecc library")}else return this.privateKey})(),_=B.privateAdd(ee,z);if(!_)throw new Error("Invalid tweaked private key!");return new Y(_,void 0,this.network)}}class H extends Y{chainCode;__DEPTH;__INDEX;__PARENT_FINGERPRINT;constructor(z,X,ee,_,K=0,Z=0,D=0){super(z,X,_),this.chainCode=ee,this.__DEPTH=K,this.__INDEX=Z,this.__PARENT_FINGERPRINT=D}#e;get capabilities(){return super.capabilities|y.SignerCapability.HdDerivation}get depth(){return this.__DEPTH}get index(){return this.__INDEX}get parentFingerprint(){return this.__PARENT_FINGERPRINT}get identifier(){return this.#e===void 0&&(this.#e=n.hash160(this.publicKey)),this.#e}get fingerprint(){return this.identifier.subarray(0,4)}isNeutered(){return this.__D===void 0}neutered(){return new H(void 0,this.publicKey,this.chainCode,this.network,this.depth,this.index,this.parentFingerprint)}toBase58(){const z=this.network,X=this.isNeutered()?z.bip32.public:z.bip32.private,ee=new Uint8Array(78);return u.writeUInt32(ee,0,X,"BE"),u.writeUInt8(ee,4,this.depth),u.writeUInt32(ee,5,this.parentFingerprint,"BE"),u.writeUInt32(ee,9,this.index,"BE"),ee.set(this.chainCode,13),this.isNeutered()?ee.set(this.publicKey,45):(u.writeUInt8(ee,45,0),ee.set(this.privateKey,46)),A.encode(ee)}derive(z){if(z!==z>>>0)throw new TypeError("Expected UInt32, got "+z);const X=z>=V,ee=new Uint8Array(37);if(X){if(this.isNeutered())throw new TypeError("Missing private key for hardened child key");ee[0]=0,ee.set(this.privateKey,1),u.writeUInt32(ee,33,z,"BE")}else ee.set(this.publicKey,0),u.writeUInt32(ee,33,z,"BE");const _=n.hmacSHA512(this.chainCode,ee),K=_.slice(0,32),Z=_.slice(32);if(!B.isPrivate(K))return this.derive(z+1);const D=u.readUInt32(this.fingerprint,0,"BE"),J=this.depth+1;if(this.isNeutered()){const j=B.pointAddScalar(this.publicKey,K,!0);return j===null?this.derive(z+1):new H(void 0,j,Z,this.network,J,z,D)}else{const j=B.privateAdd(this.privateKey,K);return j==null?this.derive(z+1):new H(j,void 0,Z,this.network,J,z,D)}}deriveHardened(z){if(!Number.isInteger(z)||z<0||z>2147483647)throw new TypeError("Expected UInt31, got "+z);return this.derive(z+V)}derivePath(z){a.parse(l.Bip32PathSchema,z);let X=z.split("/");if(X[0]==="m"){if(this.parentFingerprint)throw new TypeError("Expected master, got child");X=X.slice(1)}return X.reduce((ee,_)=>{let K;return _.slice(-1)==="'"?(K=parseInt(_.slice(0,-1),10),ee.deriveHardened(K)):(K=parseInt(_,10),ee.derive(K))},this)}}function ie(R,z){const X=A.decode(R);if(X.length!==78)throw new TypeError("Invalid buffer length");z=z||p.BITCOIN;const ee=u.readUInt32(X,0,"BE");if(ee!==z.bip32.private&&ee!==z.bip32.public)throw new TypeError("Invalid network version");const _=X[4],K=u.readUInt32(X,5,"BE");if(_===0&&K!==0)throw new TypeError("Invalid parent fingerprint");const Z=u.readUInt32(X,9,"BE");if(_===0&&Z!==0)throw new TypeError("Invalid index");const D=X.slice(13,45);let J;if(ee===z.bip32.private){if(X[45]!==0)throw new TypeError("Invalid private key");const j=X.slice(46,78);J=C(j,D,z,_,Z,K)}else{const j=X.slice(45,78);J=U(j,D,z,_,Z,K)}return J}function T(R,z,X){return C(R,z,X)}function C(R,z,X,ee,_,K){if(a.parse(l.Buffer256Bit,R),a.parse(l.Buffer256Bit,z),X=X||p.BITCOIN,a.parse(l.NetworkSchema,X),!B.isPrivate(R))throw new TypeError("Private key not in range [1, n)");return new H(R,void 0,z,X,ee,_,K)}function G(R,z,X){return U(R,z,X)}function U(R,z,X,ee,_,K){if(a.parse(l.Buffer33Bytes,R),a.parse(l.Buffer256Bit,z),X=X||p.BITCOIN,a.parse(l.NetworkSchema,X),!B.isPoint(R))throw new TypeError("Point is not on the curve");return new H(void 0,R,z,X,ee,_,K)}function P(R,z){if(!(R instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(R.length<16)throw new TypeError("Seed should be at least 128 bits");if(R.length>64)throw new TypeError("Seed should be at most 512 bits");z=z||p.BITCOIN;const X=n.hmacSHA512(S,R),ee=X.slice(0,32),_=X.slice(32);return T(ee,_,z)}function L(R,z,X,ee,_,K,Z){return new H(R,z,X,Z||p.BITCOIN,ee,_,K)}return{fromSeed:P,fromBase58:ie,fromPublicKey:G,fromPrivateKey:T,fromPrecomputed:L}}return An}var Kw={},ln={};const bd=ds;function Mp(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function F7(t){return Uint8Array.from(t)}function Fp(t){if(typeof t!="object"||t===null||Il(t))throw new Error("expected opts to be an object")}function Wc(t){Fp(t),t.context!==void 0&&rt(t.context,void 0,"opts.context")}function oc(t){Wc(t),t.extraEntropy!==!1&&t.extraEntropy!==void 0&&rt(t.extraEntropy,void 0,"opts.extraEntropy")}function ca(t,...e){const r=i=>typeof i=="number"?i:i.bytesLen,n=e.reduce((i,o)=>i+r(o),0);return{bytesLen:n,encode:i=>{const o=new Uint8Array(n);for(let s=0,a=0;s<e.length;s++){const l=e[s],f=r(l),u=typeof l=="number"?i[s]:l.encode(i[s]);rt(u,f,t),o.set(u,a),typeof l!="number"&&u.fill(0),a+=f}return o},decode:i=>{rt(i,n,t);const o=[];for(const s of e){const a=r(s),l=i.subarray(0,a);o.push(typeof s=="number"?l:s.decode(l)),i=i.subarray(a)}return o}}}function po(t,e){const r=e*t.bytesLen;return{bytesLen:r,encode:n=>{if(n.length!==e)throw new Error(`vecCoder.encode: wrong length=${n.length}. Expected: ${e}`);const i=new Uint8Array(r);for(let o=0,s=0;o<n.length;o++){const a=t.encode(n[o]);i.set(a,s),a.fill(0),s+=a.length}return i},decode:n=>{rt(n,r);const i=[];for(let o=0;o<n.length;o+=t.bytesLen)i.push(t.decode(n.subarray(o,o+t.bytesLen)));return i}}}function ri(...t){for(const e of t)if(Array.isArray(e))for(const r of e)r.fill(0);else e.fill(0)}function wd(t){return(1<<t)-1}const Kp=Uint8Array.of();function vd(t,e=Kp){if(rt(t),rt(e),e.length>255)throw new Error("context should be less than 255 bytes");return rn(new Uint8Array([0,e.length]),e,t)}const K7=Uint8Array.from([6,9,96,134,72,1,101,3,4,2]);function uS(t,e=0){if(!t.oid||!Mp(t.oid.subarray(0,10),K7))throw new Error("hash.oid is invalid: expected NIST hash");const r=t.outputLen*8/2;if(e>r)throw new Error("Pre-hash security strength too low: "+r+", required: "+e)}function Ed(t,e,r=Kp){if(rt(e),rt(r),r.length>255)throw new Error("context should be less than 255 bytes");const n=t(e);return rn(new Uint8Array([1,r.length]),r,t.oid,n)}const j7=Object.freeze(Object.defineProperty({__proto__:null,EMPTY:Kp,abytes:rt,checkHash:uS,cleanBytes:ri,concatBytes:rn,copyBytes:F7,equalBytes:Mp,getMask:wd,getMessage:vd,getMessagePrehash:Ed,randomBytes:bd,splitCoder:ca,validateOpts:Fp,validateSigOpts:oc,validateVerOpts:Wc,vecCoder:po},Symbol.toStringTag,{value:"Module"})),V7=no(j7);var Qn={};const W7=t=>{const{newPoly:e,N:r,Q:n,F:i,ROOT_OF_UNITY:o,brvBits:s}=t,a=(S,k=n)=>{const I=S%k|0;return(I>=0?I|0:k+I|0)|0},l=(S,k=n)=>{const I=a(S,k)|0;return(I>k>>1?I-k|0:I)|0};function f(){const S=e(r);for(let k=0;k<r;k++){const I=VE(k,s),N=BigInt(o)**BigInt(I)%BigInt(n);S[k]=Number(N)|0}return S}const u=f(),p={add:(S,k)=>a((S|0)+(k|0))|0,sub:(S,k)=>a((S|0)-(k|0))|0,mul:(S,k)=>a((S|0)*(k|0))|0,inv:S=>{throw new Error("not implemented")}},y={N:r,roots:u,invertButterflies:!0,skipStages:0,brp:!1},w=wb(p,{dit:!1,...y}),A=wb(p,{dit:!0,...y});return{mod:a,smod:l,nttZetas:u,NTT:{encode:S=>w(S),decode:S=>{A(S);for(let k=0;k<S.length;k++)S[k]=a(i*S[k]);return S}},bitsCoder:(S,k)=>{const I=wd(S),N=S*(r/8);return{bytesLen:N,encode:B=>{const V=new Uint8Array(N);for(let W=0,Y=0,H=0,ie=0;W<B.length;W++)for(Y|=(k.encode(B[W])&I)<<H,H+=S;H>=8;H-=8,Y>>=8)V[ie++]=Y&wd(H);return V},decode:B=>{const V=e(r);for(let W=0,Y=0,H=0,ie=0;W<B.length;W++)for(Y|=B[W]<<H,H+=8;H>=S;H-=S,Y>>=S)V[ie++]=k.decode(Y&I);return V}}}}},cS=t=>(e,r)=>{r||(r=t.blockLen);const n=new Uint8Array(e.length+2);n.set(e);const i=e.length,o=new Uint8Array(r);let s=t.create({}),a=0,l=0;return{stats:()=>({calls:a,xofs:l}),get:(f,u)=>(n[i+0]=f,n[i+1]=u,s.destroy(),s=t.create({}).update(n),a++,()=>(l++,s.xofInto(o))),clean:()=>{s.destroy(),ri(o,n)}}},jp=cS(VA),Vp=cS(Xr);function jw(t){Fp(t),t.externalMu!==void 0&&Ba(t.externalMu,"opts.externalMu")}const _t=256,Xi=8380417,q7=1753,G7=8347681,To=13,Sd=Math.floor((Xi-1)/88)|0,Ad=Math.floor((Xi-1)/32)|0,zl={2:{K:4,L:4,D:To,GAMMA1:2**17,GAMMA2:Sd,TAU:39,ETA:2,OMEGA:80},3:{K:6,L:5,D:To,GAMMA1:2**19,GAMMA2:Ad,TAU:49,ETA:4,OMEGA:55},5:{K:8,L:7,D:To,GAMMA1:2**19,GAMMA2:Ad,TAU:60,ETA:2,OMEGA:75}},Dr=t=>new Int32Array(t),{mod:Ao,smod:sc,NTT:Jt,bitsCoder:X7}=W7({N:_t,Q:Xi,F:G7,ROOT_OF_UNITY:q7,newPoly:Dr,brvBits:8}),Vw=t=>t,ea=(t,e=Vw,r=Vw)=>X7(t,{encode:n=>e(r(n)),decode:n=>r(e(n))}),_i=(t,e)=>{for(let r=0;r<t.length;r++)t[r]=Ao(t[r]+e[r]);return t},Ww=(t,e)=>{for(let r=0;r<t.length;r++)t[r]=Ao(t[r]-e[r]);return t},Y7=t=>{for(let e=0;e<_t;e++)t[e]<<=To;return t},ta=(t,e)=>{for(let r=0;r<_t;r++)if(Math.abs(sc(t[r]))>=e)return!0;return!1},xi=(t,e)=>{const r=Dr(_t);for(let n=0;n<t.length;n++)r[n]=Ao(t[n]*e[n]);return r};function Ku(t){const e=Dr(_t);for(let r=0;r<_t;){const n=t();if(n.length%3)throw new Error("RejNTTPoly: unaligned block");for(let i=0;r<_t&&i<=n.length-3;i+=3){const o=(n[i+0]|n[i+1]<<8|n[i+2]<<16)&8388607;o<Xi&&(e[r++]=o)}}return e}function Wp(t){const{K:e,L:r,GAMMA1:n,GAMMA2:i,TAU:o,ETA:s,OMEGA:a}=t,{CRH_BYTES:l,TR_BYTES:f,C_TILDE_BYTES:u,XOF128:p,XOF256:y,securityLevel:w}=t;if(![2,4].includes(s))throw new Error("Wrong ETA");if(![1<<17,1<<19].includes(n))throw new Error("Wrong GAMMA1");if(![Sd,Ad].includes(i))throw new Error("Wrong GAMMA2");const A=o*s,S=j=>{const te=Ao(j),ae=sc(te,2*i)|0;return te-ae===Xi-1?{r1:0,r0:ae-1|0}:{r1:Math.floor((te-ae)/(2*i))|0,r0:ae}},k=j=>S(j).r1,I=j=>S(j).r0,N=(j,te)=>j<=i||j>Xi-i||j===Xi-i&&te===0?0:1,B=(j,te)=>{const ae=Math.floor((Xi-1)/(2*i)),{r1:ce,r0:pe}=S(te);return j===1?pe>0?Ao(ce+1,ae)|0:Ao(ce-1,ae)|0:ce|0},V=j=>{const te=Ao(j),ae=sc(te,2**To)|0;return{r1:Math.floor((te-ae)/2**To)|0,r0:ae}},W={bytesLen:a+e,encode:j=>{if(j===!1)throw new Error("hint.encode: hint is false");const te=new Uint8Array(a+e);for(let ae=0,ce=0;ae<e;ae++){for(let pe=0;pe<_t;pe++)j[ae][pe]!==0&&(te[ce++]=pe);te[a+ae]=ce}return te},decode:j=>{const te=[];let ae=0;for(let ce=0;ce<e;ce++){const pe=Dr(_t);if(j[a+ce]<ae||j[a+ce]>a)return!1;for(let le=ae;le<j[a+ce];le++){if(le>ae&&j[le]<=j[le-1])return!1;pe[j[le]]=1}ae=j[a+ce],te.push(pe)}for(let ce=ae;ce<a;ce++)if(j[ce]!==0)return!1;return te}},Y=ea(s===2?3:4,j=>s-j,j=>{if(!(-s<=j&&j<=s))throw new Error(`malformed key s1/s3 ${j} outside of ETA range [${-s}, ${s}]`);return j}),H=ea(13,j=>(1<<To-1)-j),ie=ea(10),T=ea(n===1<<17?18:20,j=>sc(n-j)),C=ea(i===Sd?6:4),G=po(C,e),U=ca("publicKey",32,po(ie,e)),P=ca("secretKey",32,32,f,po(Y,r),po(Y,e),po(H,e)),L=ca("signature",u,po(T,r),W),R=s===2?j=>j<15?2-j%5:!1:j=>j<9?4-j:!1;function z(j){const te=Dr(_t);for(let ae=0;ae<_t;){const ce=j();for(let pe=0;ae<_t&&pe<ce.length;pe+=1){const le=R(ce[pe]&15),ye=R(ce[pe]>>4&15);le!==!1&&(te[ae++]=le),ae<_t&&ye!==!1&&(te[ae++]=ye)}}return te}const X=j=>{const te=Dr(_t),ae=Xr.create({}).update(j),ce=new Uint8Array(Xr.blockLen);ae.xofInto(ce);const pe=ce.slice(0,8);for(let le=_t-o,ye=8,Ae=0,xe=0;le<_t;le++){let Be=le+1;for(;Be>le;)Be=ce[ye++],!(ye<Xr.blockLen)&&(ae.xofInto(ce),ye=0);te[le]=te[Be],te[Be]=1-((pe[Ae]>>xe++&1)<<1),xe>=8&&(Ae++,xe=0)}return te},ee=j=>{const te=Dr(_t),ae=Dr(_t);for(let ce=0;ce<j.length;ce++){const{r0:pe,r1:le}=V(j[ce]);te[ce]=pe,ae[ce]=le}return{r0:te,r1:ae}},_=(j,te)=>{for(let ae=0;ae<_t;ae++)j[ae]=B(te[ae],j[ae]);return j},K=(j,te)=>{const ae=Dr(_t);let ce=0;for(let pe=0;pe<_t;pe++){const le=N(j[pe],te[pe]);ae[pe]=le,ce+=le}return{v:ae,cnt:ce}},Z=32,D=ca("seed",32,64,32),J={info:{type:"internal-ml-dsa"},lengths:{secretKey:P.bytesLen,publicKey:U.bytesLen,seed:32,signature:L.bytesLen,signRand:Z},keygen:j=>{const te=new Uint8Array(34),ae=j===void 0;ae&&(j=bd(32)),rt(j,32,"seed"),te.set(j),ae&&ri(j),te[32]=e,te[33]=r;const[ce,pe,le]=D.decode(Xr(te,{dkLen:D.bytesLen})),ye=y(pe),Ae=[];for(let Ie=0;Ie<r;Ie++)Ae.push(z(ye.get(Ie&255,Ie>>8&255)));const xe=[];for(let Ie=r;Ie<r+e;Ie++)xe.push(z(ye.get(Ie&255,Ie>>8&255)));const Be=Ae.map(Ie=>Jt.encode(Ie.slice())),We=[],ze=[],Qe=p(ce),qe=Dr(_t);for(let Ie=0;Ie<e;Ie++){ri(qe);for(let ft=0;ft<r;ft++){const Je=Ku(Qe.get(ft,Ie));_i(qe,xi(Je,Be[ft]))}Jt.decode(qe);const{r0:He,r1:Ke}=ee(_i(qe,xe[Ie]));We.push(He),ze.push(Ke)}const lt=U.encode([ce,ze]),me=Xr(lt,{dkLen:f}),at=P.encode([ce,le,me,Ae,xe,We]);return Qe.clean(),ye.clean(),ri(ce,pe,le,Ae,xe,Be,qe,We,ze,me,te),{publicKey:lt,secretKey:at}},getPublicKey:j=>{const[te,ae,ce,pe,le,ye]=P.decode(j),Ae=p(te),xe=pe.map(ze=>Jt.encode(ze.slice())),Be=[],We=Dr(_t);for(let ze=0;ze<e;ze++){We.fill(0);for(let qe=0;qe<r;qe++){const lt=Ku(Ae.get(qe,ze));_i(We,xi(lt,xe[qe]))}Jt.decode(We),_i(We,le[ze]);const{r1:Qe}=ee(We);Be.push(Qe)}return Ae.clean(),ri(We,xe,ye,pe,le),U.encode([te,Be])},sign:(j,te,ae={})=>{oc(ae),jw(ae);let{extraEntropy:ce,externalMu:pe=!1}=ae;const[le,ye,Ae,xe,Be,We]=P.decode(te),ze=[],Qe=p(le);for(let Ie=0;Ie<e;Ie++){const He=[];for(let Ke=0;Ke<r;Ke++)He.push(Ku(Qe.get(Ke,Ie)));ze.push(He)}Qe.clean();for(let Ie=0;Ie<r;Ie++)Jt.encode(xe[Ie]);for(let Ie=0;Ie<e;Ie++)Jt.encode(Be[Ie]),Jt.encode(We[Ie]);const qe=pe?j:Xr.create({dkLen:l}).update(Ae).update(j).digest(),lt=ce===!1?new Uint8Array(32):ce===void 0?bd(Z):ce;rt(lt,32,"extraEntropy");const me=Xr.create({dkLen:l}).update(ye).update(lt).update(qe).digest();rt(me,l);const at=y(me,T.bytesLen);e:for(let Ie=0;;){const He=[];for(let g=0;g<r;g++,Ie++)He.push(T.decode(at.get(Ie&255,Ie>>8)()));const Ke=He.map(g=>Jt.encode(g.slice())),ft=[];for(let g=0;g<e;g++){const O=Dr(_t);for(let M=0;M<r;M++)_i(O,xi(ze[g][M],Ke[M]));Jt.decode(O),ft.push(O)}const Je=ft.map(g=>g.map(k)),Vt=Xr.create({dkLen:u}).update(qe).update(G.encode(Je)).digest(),kr=Jt.encode(X(Vt)),yt=xe.map(g=>xi(g,kr));for(let g=0;g<r;g++)if(_i(Jt.decode(yt[g]),He[g]),ta(yt[g],n-A))continue e;let rr=0;const c=[];for(let g=0;g<e;g++){const O=Jt.decode(xi(Be[g],kr)),M=Ww(ft[g],O).map(I);if(ta(M,i-A))continue e;const re=Jt.decode(xi(We[g],kr));if(ta(re,i))continue e;_i(M,re);const fe=K(M,Je[g]);c.push(fe.v),rr+=fe.cnt}if(rr>a)continue;at.clean();const d=L.encode([Vt,yt,c]);return ri(Vt,yt,c,kr,Je,ft,Ke,He,me,qe,xe,Be,We,...ze),d}throw new Error("Unreachable code path reached, report this error")},verify:(j,te,ae,ce={})=>{jw(ce);const{externalMu:pe=!1}=ce,[le,ye]=U.decode(ae),Ae=Xr(ae,{dkLen:f});if(j.length!==L.bytesLen)return!1;const[xe,Be,We]=L.decode(j);if(We===!1)return!1;for(let Ie=0;Ie<r;Ie++)if(ta(Be[Ie],n-A))return!1;const ze=pe?te:Xr.create({dkLen:l}).update(Ae).update(te).digest(),Qe=Jt.encode(X(xe)),qe=Be.map(Ie=>Ie.slice());for(let Ie=0;Ie<r;Ie++)Jt.encode(qe[Ie]);const lt=[],me=p(le);for(let Ie=0;Ie<e;Ie++){const He=xi(Jt.encode(Y7(ye[Ie])),Qe),Ke=Dr(_t);for(let Je=0;Je<r;Je++){const Vt=Ku(me.get(Je,Ie));_i(Ke,xi(Vt,qe[Je]))}const ft=Jt.decode(Ww(Ke,He));lt.push(_(ft,We[Ie]))}me.clean();const at=Xr.create({dkLen:u}).update(ze).update(G.encode(lt)).digest();for(const Ie of We)if(!(Ie.reduce((He,Ke)=>He+Ke,0)<=a))return!1;for(const Ie of Be)if(ta(Ie,n-A))return!1;return Mp(xe,at)}};return{info:{type:"ml-dsa"},internal:J,securityLevel:w,keygen:J.keygen,lengths:J.lengths,getPublicKey:J.getPublicKey,sign:(j,te,ae={})=>{oc(ae);const ce=vd(j,ae.context),pe=J.sign(ce,te,ae);return ri(ce),pe},verify:(j,te,ae,ce={})=>(Wc(ce),J.verify(j,vd(te,ce.context),ae)),prehash:j=>(uS(j,w),{info:{type:"hashml-dsa"},securityLevel:w,lengths:J.lengths,keygen:J.keygen,getPublicKey:J.getPublicKey,sign:(te,ae,ce={})=>{oc(ce);const pe=Ed(j,te,ce.context),le=J.sign(pe,ae,ce);return ri(pe),le},verify:(te,ae,ce,pe={})=>(Wc(pe),J.verify(te,Ed(j,ae,pe.context),ce))})}}const Z7=Wp({...zl[2],CRH_BYTES:64,TR_BYTES:64,C_TILDE_BYTES:32,XOF128:jp,XOF256:Vp,securityLevel:128}),Q7=Wp({...zl[3],CRH_BYTES:64,TR_BYTES:64,C_TILDE_BYTES:48,XOF128:jp,XOF256:Vp,securityLevel:192}),J7=Wp({...zl[5],CRH_BYTES:64,TR_BYTES:64,C_TILDE_BYTES:64,XOF128:jp,XOF256:Vp,securityLevel:256}),e9=Object.freeze(Object.defineProperty({__proto__:null,PARAMS:zl,ml_dsa44:Z7,ml_dsa65:Q7,ml_dsa87:J7},Symbol.toStringTag,{value:"Module"})),t9=no(e9);var qw;function lS(){if(qw)return Qn;qw=1,Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.DEFAULT_SECURITY_LEVEL=Qn.MLDSASecurityLevel=void 0,Qn.getMLDSAConfig=i,Qn.findNetworkByVersion=o;const t=t9,e=Dl();var r;(function(s){s[s.LEVEL2=44]="LEVEL2",s[s.LEVEL3=65]="LEVEL3",s[s.LEVEL5=87]="LEVEL5"})(r||(Qn.MLDSASecurityLevel=r={}));const n={[r.LEVEL2]:{level:r.LEVEL2,privateKeySize:2560,publicKeySize:1312,signatureSize:2420,algorithm:t.ml_dsa44},[r.LEVEL3]:{level:r.LEVEL3,privateKeySize:4032,publicKeySize:1952,signatureSize:3309,algorithm:t.ml_dsa65},[r.LEVEL5]:{level:r.LEVEL5,privateKeySize:4896,publicKeySize:2592,signatureSize:4627,algorithm:t.ml_dsa87}};Qn.DEFAULT_SECURITY_LEVEL=r.LEVEL2;function i(s,a){const l=n[s];if(!l)throw new TypeError(`Invalid ML-DSA security level: ${s}. Must be MLDSASecurityLevel.LEVEL2 (44), LEVEL3 (65), or LEVEL5 (87)`);return{...l,network:a}}function o(s){const a=[e.BITCOIN,e.TESTNET,e.REGTEST];for(const l of a){if(s===l.bip32.private)return{network:l,isPrivate:!0};if(s===l.bip32.public)return{network:l,isPrivate:!1}}return null}return Qn}var Gw;function r9(){if(Gw)return ln;Gw=1;var t=ln&&ln.__createBinding||(Object.create?(function(T,C,G,U){U===void 0&&(U=G);var P=Object.getOwnPropertyDescriptor(C,G);(!P||("get"in P?!C.__esModule:P.writable||P.configurable))&&(P={enumerable:!0,get:function(){return C[G]}}),Object.defineProperty(T,U,P)}):(function(T,C,G,U){U===void 0&&(U=G),T[U]=C[G]})),e=ln&&ln.__setModuleDefault||(Object.create?(function(T,C){Object.defineProperty(T,"default",{enumerable:!0,value:C})}):function(T,C){T.default=C}),r=ln&&ln.__importStar||(function(){var T=function(C){return T=Object.getOwnPropertyNames||function(G){var U=[];for(var P in G)Object.prototype.hasOwnProperty.call(G,P)&&(U[U.length]=P);return U},T(C)};return function(C){if(C&&C.__esModule)return C;var G={};if(C!=null)for(var U=T(C),P=0;P<U.length;P++)U[P]!=="default"&&t(G,C,U[P]);return e(G,C),G}})();Object.defineProperty(ln,"__esModule",{value:!0}),ln.QuantumBIP32Factory=void 0;const n=V7,i=r(N8()),o=r($p),s=r(zp()),a=aS(),l=sS,f=cp,u=lS(),p=Dl(),y=(0,l.base58check)(f.sha256),w={encode:T=>y.encode(T),decode:T=>y.decode(T)},A=32,S=2147483648,k=o.fromUtf8("Bitcoin seed");class I{_privateKey;_publicKey;config;constructor(C,G,U){this._privateKey=C,this._publicKey=G,this.config=U}get publicKey(){if(!this._publicKey)throw new Error("Public key not available");return this._publicKey}get privateKey(){return this._privateKey}sign(C){if(!this._privateKey)throw new Error("Missing private key");return this.config.algorithm.sign(C,this._privateKey,{extraEntropy:(0,n.randomBytes)(32)})}verify(C,G){return this.config.algorithm.verify(G,C,this._publicKey)}}class N extends I{chainCode;_depth;_index;_parentFingerprint;constructor(C,G,U,P,L=0,R=0,z=0){super(C,G,P),this.chainCode=U,this._depth=L,this._index=R,this._parentFingerprint=z}get depth(){return this._depth}get index(){return this._index}get parentFingerprint(){return this._parentFingerprint}#e;get identifier(){return this.#e===void 0&&(this.#e=i.hash160(this.publicKey)),this.#e}get fingerprint(){return this.identifier.subarray(0,4)}get securityLevel(){return this.config.level}get network(){return this.config.network}isNeutered(){return this._privateKey===void 0}neutered(){return new N(void 0,this.publicKey,this.chainCode,this.config,this.depth,this.index,this.parentFingerprint)}toBase58(){const C=this.isNeutered()?this.config.network.bip32.public:this.config.network.bip32.private,G=!this.isNeutered(),U=45+(G?this.config.privateKeySize:this.config.publicKeySize),P=new Uint8Array(U);let L=0;return o.writeUInt32(P,L,C,"BE"),L+=4,o.writeUInt8(P,L,this.depth),L+=1,o.writeUInt32(P,L,this.parentFingerprint,"BE"),L+=4,o.writeUInt32(P,L,this.index,"BE"),L+=4,P.set(this.chainCode,L),L+=32,G?P.set(this._privateKey,L):P.set(this._publicKey,L),w.encode(P)}derive(C){if(C!==C>>>0)throw new TypeError("Expected UInt32, got "+C);if(this.isNeutered())throw new TypeError("Cannot derive child keys without private key");const G=C>=S;let U;if(G){const ee=i.hash256(this._privateKey);U=new Uint8Array(37),U[0]=0,U.set(ee,1),o.writeUInt32(U,33,C,"BE")}else{const ee=i.hash256(this._privateKey);U=new Uint8Array(36),U.set(ee,0),o.writeUInt32(U,32,C,"BE")}const P=i.hmacSHA512(this.chainCode,U),L=P.slice(0,32),R=P.slice(32),{secretKey:z,publicKey:X}=this.config.algorithm.keygen(L);return new N(z,X,R,this.config,this.depth+1,C,o.readUInt32(this.fingerprint,0,"BE"))}deriveHardened(C){if(!Number.isInteger(C)||C<0||C>2147483647)throw new TypeError("Expected UInt31, got "+C);return this.derive(C+S)}derivePath(C){s.parse(a.Bip32PathSchema,C);let G=C.split("/");if(G[0]==="m"){if(this.parentFingerprint)throw new TypeError("Expected master, got child");G=G.slice(1)}return G.reduce((U,P)=>{let L;return P.slice(-1)==="'"?(L=parseInt(P.slice(0,-1),10),U.deriveHardened(L)):(L=parseInt(P,10),U.derive(L))},this)}}function B(T,C,G){if(!(T instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(T.length<16)throw new TypeError("Seed should be at least 128 bits");if(T.length>64)throw new TypeError("Seed should be at most 512 bits");const U=(0,u.getMLDSAConfig)(G||u.MLDSASecurityLevel.LEVEL2,C||p.BITCOIN),P=i.hmacSHA512(k,T),L=P.slice(0,32),R=P.slice(32),{secretKey:z,publicKey:X}=U.algorithm.keygen(L);return new N(z,X,R,U,0,0,0)}function V(T){const C=w.decode(T),G=o.readUInt32(C,0,"BE"),U=(0,u.findNetworkByVersion)(G);if(!U)throw new TypeError("Unknown network version");const{network:P,isPrivate:L}=U,R=C.length-45;let z;if(L)if(R===2560)z=u.MLDSASecurityLevel.LEVEL2;else if(R===4032)z=u.MLDSASecurityLevel.LEVEL3;else if(R===4896)z=u.MLDSASecurityLevel.LEVEL5;else throw new TypeError(`Invalid private key size: ${R}`);else if(R===1312)z=u.MLDSASecurityLevel.LEVEL2;else if(R===1952)z=u.MLDSASecurityLevel.LEVEL3;else if(R===2592)z=u.MLDSASecurityLevel.LEVEL5;else throw new TypeError(`Invalid public key size: ${R}`);const X=(0,u.getMLDSAConfig)(z,P),ee=L?45+X.privateKeySize:45+X.publicKeySize;if(C.length!==ee)throw new TypeError(`Invalid buffer length: expected ${ee}, got ${C.length}`);let _=4;const K=C[_];_+=1;const Z=o.readUInt32(C,_,"BE");if(K===0&&Z!==0)throw new TypeError("Invalid parent fingerprint");_+=4;const D=o.readUInt32(C,_,"BE");if(K===0&&D!==0)throw new TypeError("Invalid index");_+=4;const J=C.slice(_,_+32);if(_+=32,L){const j=C.slice(_,_+X.privateKeySize),te=X.algorithm.getPublicKey(j);return new N(j,te,J,X,K,D,Z)}else{const j=C.slice(_,_+X.publicKeySize);return new N(void 0,j,J,X,K,D,Z)}}function W(T,C,G,U){const P=(0,u.getMLDSAConfig)(U||u.MLDSASecurityLevel.LEVEL2,G||p.BITCOIN);if(T.length!==P.publicKeySize)throw new TypeError(`Invalid public key length for ML-DSA-${U}: expected ${P.publicKeySize}, got ${T.length}`);if(C.length!==A)throw new TypeError(`Invalid chain code length: expected ${A}, got ${C.length}`);return new N(void 0,T,C,P,0,0,0)}function Y(T,C,G,U){const P=(0,u.getMLDSAConfig)(U||u.MLDSASecurityLevel.LEVEL2,G||p.BITCOIN);if(T.length!==P.privateKeySize)throw new TypeError(`Invalid private key length for ML-DSA-${U}: expected ${P.privateKeySize}, got ${T.length}`);if(C.length!==A)throw new TypeError(`Invalid chain code length: expected ${A}, got ${C.length}`);const L=P.algorithm.getPublicKey(T);return new N(T,L,C,P,0,0,0)}function H(T,C,G,U,P){const L=(0,u.getMLDSAConfig)(P||u.MLDSASecurityLevel.LEVEL2,U||p.BITCOIN);if(T.length!==L.privateKeySize)throw new TypeError(`Invalid private key length for ML-DSA-${P}: expected ${L.privateKeySize}, got ${T.length}`);if(C.length!==L.publicKeySize)throw new TypeError(`Invalid public key length for ML-DSA-${P}: expected ${L.publicKeySize}, got ${C.length}`);if(G.length!==A)throw new TypeError(`Invalid chain code length: expected ${A}, got ${G.length}`);return new N(T,C,G,L,0,0,0)}function ie(T,C,G,U,P,L,R,z){const X=(0,u.getMLDSAConfig)(z||u.MLDSASecurityLevel.LEVEL2,R||p.BITCOIN);return new N(T,C,G,X,U,P,L)}return ln.QuantumBIP32Factory={fromSeed:B,fromBase58:V,fromPublicKey:W,fromPrivateKey:Y,fromKeyPair:H,fromPrecomputed:ie},ln}var Jn={},Xw;function fS(){if(Xw)return Jn;Xw=1,Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.QuantumDerivationPath=Jn.DerivationPath=void 0,Jn.getQuantumPath=r,Jn.getBitcoinPath=n;var t;(function(i){i.BIP44="m/44'/0'/0'/0/0",i.BIP49="m/49'/0'/0'/0/0",i.BIP84="m/84'/0'/0'/0/0",i.BIP86="m/86'/0'/0'/0/0",i.BIP360="m/360'/0'/0'/0/0"})(t||(Jn.DerivationPath=t={}));var e;(function(i){i.STANDARD="m/360'/0'/0'/0/0",i.CHANGE="m/360'/0'/0'/1/0",i.ACCOUNT_0_ADDRESS_0="m/360'/0'/0'/0/0",i.ACCOUNT_0_ADDRESS_1="m/360'/0'/0'/0/1",i.ACCOUNT_1_ADDRESS_0="m/360'/1'/0'/0/0"})(e||(Jn.QuantumDerivationPath=e={}));function r(i=0,o=0,s=!1){return`m/360'/${i}'/${s?1:0}'/${o}`}function n(i,o=0,s=0,a=!1){return`m/${i}'/0'/${o}'/${a?1:0}/${s}`}return Jn}var Yw;function n9(){return Yw||(Yw=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getBitcoinPath=t.getQuantumPath=t.QuantumDerivationPath=t.DerivationPath=t.getMLDSAConfig=t.DEFAULT_SECURITY_LEVEL=t.MLDSASecurityLevel=t.QuantumBIP32Factory=void 0;var e=r9();Object.defineProperty(t,"QuantumBIP32Factory",{enumerable:!0,get:function(){return e.QuantumBIP32Factory}});var r=lS();Object.defineProperty(t,"MLDSASecurityLevel",{enumerable:!0,get:function(){return r.MLDSASecurityLevel}}),Object.defineProperty(t,"DEFAULT_SECURITY_LEVEL",{enumerable:!0,get:function(){return r.DEFAULT_SECURITY_LEVEL}}),Object.defineProperty(t,"getMLDSAConfig",{enumerable:!0,get:function(){return r.getMLDSAConfig}});var n=fS();Object.defineProperty(t,"DerivationPath",{enumerable:!0,get:function(){return n.DerivationPath}}),Object.defineProperty(t,"QuantumDerivationPath",{enumerable:!0,get:function(){return n.QuantumDerivationPath}}),Object.defineProperty(t,"getQuantumPath",{enumerable:!0,get:function(){return n.getQuantumPath}}),Object.defineProperty(t,"getBitcoinPath",{enumerable:!0,get:function(){return n.getBitcoinPath}})})(Kw)),Kw}var Zw;function i9(){return Zw||(Zw=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getBitcoinPath=t.getQuantumPath=t.QuantumDerivationPath=t.DerivationPath=t.getMLDSAConfig=t.DEFAULT_SECURITY_LEVEL=t.MLDSASecurityLevel=t.QuantumBIP32Factory=t.REGTEST=t.TESTNET=t.BITCOIN=t.BIP32Factory=t.default=void 0;var e=M7();Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.BIP32Factory}}),Object.defineProperty(t,"BIP32Factory",{enumerable:!0,get:function(){return e.BIP32Factory}});var r=Dl();Object.defineProperty(t,"BITCOIN",{enumerable:!0,get:function(){return r.BITCOIN}}),Object.defineProperty(t,"TESTNET",{enumerable:!0,get:function(){return r.TESTNET}}),Object.defineProperty(t,"REGTEST",{enumerable:!0,get:function(){return r.REGTEST}});var n=n9();Object.defineProperty(t,"QuantumBIP32Factory",{enumerable:!0,get:function(){return n.QuantumBIP32Factory}}),Object.defineProperty(t,"MLDSASecurityLevel",{enumerable:!0,get:function(){return n.MLDSASecurityLevel}}),Object.defineProperty(t,"DEFAULT_SECURITY_LEVEL",{enumerable:!0,get:function(){return n.DEFAULT_SECURITY_LEVEL}}),Object.defineProperty(t,"getMLDSAConfig",{enumerable:!0,get:function(){return n.getMLDSAConfig}});var i=fS();Object.defineProperty(t,"DerivationPath",{enumerable:!0,get:function(){return i.DerivationPath}}),Object.defineProperty(t,"QuantumDerivationPath",{enumerable:!0,get:function(){return i.QuantumDerivationPath}}),Object.defineProperty(t,"getQuantumPath",{enumerable:!0,get:function(){return i.getQuantumPath}}),Object.defineProperty(t,"getBitcoinPath",{enumerable:!0,get:function(){return i.getBitcoinPath}})})(xw)),xw}var ct=i9();const Qw=cE(ct);function In(t,e){t=t.replace("#","");const r=parseInt(t,16),n=Math.round(2.55*e),i=(r>>16)+n,o=(r>>8&255)+n,s=(r&255)+n;return(16777216+(i<255?i<1?0:i:255)*65536+(o<255?o<1?0:o:255)*256+(s<255?s<1?0:s:255)).toString(16).slice(1)}const Gf=10,Jw=(t=0)=>e=>`\x1B[${e+t}m`,e2=(t=0)=>e=>`\x1B[${38+t};5;${e}m`,t2=(t=0)=>(e,r,n)=>`\x1B[${38+t};2;${e};${r};${n}m`,Bt={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};Object.keys(Bt.modifier);const o9=Object.keys(Bt.color),s9=Object.keys(Bt.bgColor);[...o9,...s9];function a9(){const t=new Map;for(const[e,r]of Object.entries(Bt)){for(const[n,i]of Object.entries(r))Bt[n]={open:`\x1B[${i[0]}m`,close:`\x1B[${i[1]}m`},r[n]=Bt[n],t.set(i[0],i[1]);Object.defineProperty(Bt,e,{value:r,enumerable:!1})}return Object.defineProperty(Bt,"codes",{value:t,enumerable:!1}),Bt.color.close="\x1B[39m",Bt.bgColor.close="\x1B[49m",Bt.color.ansi=Jw(),Bt.color.ansi256=e2(),Bt.color.ansi16m=t2(),Bt.bgColor.ansi=Jw(Gf),Bt.bgColor.ansi256=e2(Gf),Bt.bgColor.ansi16m=t2(Gf),Object.defineProperties(Bt,{rgbToAnsi256:{value(e,r,n){return e===r&&r===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)},enumerable:!1},hexToRgb:{value(e){const r=/[a-f\d]{6}|[a-f\d]{3}/i.exec(e.toString(16));if(!r)return[0,0,0];let[n]=r;n.length===3&&(n=[...n].map(o=>o+o).join(""));const i=Number.parseInt(n,16);return[i>>16&255,i>>8&255,i&255]},enumerable:!1},hexToAnsi256:{value:e=>Bt.rgbToAnsi256(...Bt.hexToRgb(e)),enumerable:!1},ansi256ToAnsi:{value(e){if(e<8)return 30+e;if(e<16)return 90+(e-8);let r,n,i;if(e>=232)r=((e-232)*10+8)/255,n=r,i=r;else{e-=16;const a=e%36;r=Math.floor(e/36)/5,n=Math.floor(a/6)/5,i=a%6/5}const o=Math.max(r,n,i)*2;if(o===0)return 30;let s=30+(Math.round(i)<<2|Math.round(n)<<1|Math.round(r));return o===2&&(s+=60),s},enumerable:!1},rgbToAnsi:{value:(e,r,n)=>Bt.ansi256ToAnsi(Bt.rgbToAnsi256(e,r,n)),enumerable:!1},hexToAnsi:{value:e=>Bt.ansi256ToAnsi(Bt.hexToAnsi256(e)),enumerable:!1}}),Bt}const On=a9(),r2=(()=>{if(!("navigator"in globalThis))return 0;if(globalThis.navigator.userAgentData){const t=navigator.userAgentData.brands.find(({brand:e})=>e==="Chromium");if(t&&t.version>93)return 3}return/\b(Chrome|Chromium)\//.test(globalThis.navigator.userAgent)?1:0})(),n2=r2!==0&&{level:r2},u9={stdout:n2,stderr:n2};function c9(t,e,r){let n=t.indexOf(e);if(n===-1)return t;const i=e.length;let o=0,s="";do s+=t.slice(o,n)+e+r,o=n+i,n=t.indexOf(e,o);while(n!==-1);return s+=t.slice(o),s}function l9(t,e,r,n){let i=0,o="";do{const s=t[n-1]==="\r";o+=t.slice(i,s?n-1:n)+e+(s?`\r
`:`
`)+r,i=n+1,n=t.indexOf(`
`,i)}while(n!==-1);return o+=t.slice(i),o}const{stdout:i2,stderr:o2}=u9,kd=Symbol("GENERATOR"),Ps=Symbol("STYLER"),Da=Symbol("IS_EMPTY"),s2=["ansi","ansi","ansi256","ansi16m"],Os=Object.create(null),f9=(t,e={})=>{if(e.level&&!(Number.isInteger(e.level)&&e.level>=0&&e.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const r=i2?i2.level:0;t.level=e.level===void 0?r:e.level};class h9{constructor(e){return hS(e)}}const hS=t=>{const e=(...r)=>r.join(" ");return f9(e,t),Object.setPrototypeOf(e,cu.prototype),e};function cu(t){return hS(t)}Object.setPrototypeOf(cu.prototype,Function.prototype);for(const[t,e]of Object.entries(On))Os[t]={get(){const r=qc(this,_d(e.open,e.close,this[Ps]),this[Da]);return Object.defineProperty(this,t,{value:r}),r}};Os.visible={get(){const t=qc(this,this[Ps],!0);return Object.defineProperty(this,"visible",{value:t}),t}};const Id=(t,e,r,...n)=>t==="rgb"?e==="ansi16m"?On[r].ansi16m(...n):e==="ansi256"?On[r].ansi256(On.rgbToAnsi256(...n)):On[r].ansi(On.rgbToAnsi(...n)):t==="hex"?Id("rgb",e,r,...On.hexToRgb(...n)):On[r][t](...n),d9=["rgb","hex","ansi256"];for(const t of d9){Os[t]={get(){const{level:r}=this;return function(...n){const i=_d(Id(t,s2[r],"color",...n),On.color.close,this[Ps]);return qc(this,i,this[Da])}}};const e="bg"+t[0].toUpperCase()+t.slice(1);Os[e]={get(){const{level:r}=this;return function(...n){const i=_d(Id(t,s2[r],"bgColor",...n),On.bgColor.close,this[Ps]);return qc(this,i,this[Da])}}}}const p9=Object.defineProperties(()=>{},{...Os,level:{enumerable:!0,get(){return this[kd].level},set(t){this[kd].level=t}}}),_d=(t,e,r)=>{let n,i;return r===void 0?(n=t,i=e):(n=r.openAll+t,i=e+r.closeAll),{open:t,close:e,openAll:n,closeAll:i,parent:r}},qc=(t,e,r)=>{const n=(...i)=>g9(n,i.length===1?""+i[0]:i.join(" "));return Object.setPrototypeOf(n,p9),n[kd]=t,n[Ps]=e,n[Da]=r,n},g9=(t,e)=>{if(t.level<=0||!e)return t[Da]?"":e;let r=t[Ps];if(r===void 0)return e;const{openAll:n,closeAll:i}=r;if(e.includes("\x1B"))for(;r!==void 0;)e=c9(e,r.close,r.open),r=r.parent;const o=e.indexOf(`
`);return o!==-1&&(e=l9(e,i,n,o)),n+e+i};Object.defineProperties(cu.prototype,Os);cu();cu({level:o2?o2.level:0});var et=function(t,e,r,n){if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:e.get(t)},as,xd,ac,uc,Td,cc,Bd,lc,Pd,fc,la,fa,hc,Ci,Od,dc,Ud;class y9{constructor(e=new h9){this.chalk=e,this.moduleName="",this.logColor="#00bfff",this.enableLogs=!0,this.hideLogs=!1,as.set(this,"#ff00ff"),xd.set(this,In(et(this,as,"f"),75)),ac.set(this,"#9400d3"),uc.set(this,In(et(this,ac,"f"),15)),Td.set(this,In(et(this,uc,"f"),15)),cc.set(this,"#7cfc00"),Bd.set(this,In(et(this,cc,"f"),15)),lc.set(this,"#ffdead"),Pd.set(this,In(et(this,lc,"f"),15)),fc.set(this,"#ff8c00"),la.set(this,In(et(this,fc,"f"),15)),fa.set(this,"#ff4500"),hc.set(this,In(et(this,fa,"f"),15)),Ci.set(this,"#ffffff"),Od.set(this,In(et(this,Ci,"f"),15)),dc.set(this,"#8b0000"),Ud.set(this,In(et(this,dc,"f"),15)),this.prefix="",this.moduleName=this.constructor.name}setLogPrefix(e){this.prefix=e}getStartPrefix(){return this.prefix}disable(){this.enableLogs=!1}enable(){this.enableLogs=!0}fancyLog(e,r,n,i,o){this.enableLogs&&console.log(this.chalk.hex(et(this,as,"f"))(`${this.getStartPrefix()}[${this.moduleName} INFO]: `)+this.chalk.hex(et(this,Ci,"f"))(e)+" "+this.chalk.hex(et(this,la,"f"))(r)+" "+this.chalk.hex(et(this,Ci,"f"))(n)+" "+this.chalk.hex(et(this,Td,"f"))(i)+" "+this.chalk.hex(et(this,Ci,"f"))(o))}log(...e){if(this.enableLogs&&!this.hideLogs){const r=In(this.logColor,15);console.log(this.chalk.hex(this.logColor)(`${this.getStartPrefix()}[${this.moduleName} LOG]: `)+this.chalk.hex(r)(...e))}}lightOrangeLog(...e){this.enableLogs&&(this.hideLogs||console.log(this.chalk.hex(et(this,la,"f"))(`${this.getStartPrefix()}[${this.moduleName} LOG]: `)+this.chalk.hex(et(this,Ci,"f"))(...e)))}error(...e){this.enableLogs&&console.log(this.chalk.hex(et(this,fa,"f"))(`${this.getStartPrefix()}[${this.moduleName} ERROR]: `)+this.chalk.hex(et(this,hc,"f"))(...e))}warn(...e){this.enableLogs&&console.log(this.chalk.hex(et(this,fc,"f"))(`${this.getStartPrefix()}[${this.moduleName} WARN]: `)+this.chalk.hex(et(this,la,"f"))(...e))}debug(...e){this.enableLogs&&(this.hideLogs||console.log(this.chalk.hex(et(this,lc,"f"))(`${this.getStartPrefix()}[${this.moduleName} DEBUG]: `)+this.chalk.hex(et(this,Pd,"f"))(...e)))}success(...e){this.enableLogs&&(this.hideLogs||console.log(this.chalk.hex(et(this,cc,"f"))(`${this.getStartPrefix()}[${this.moduleName} SUCCESS]: `)+this.chalk.hex(et(this,Bd,"f"))(...e)))}fail(...e){this.enableLogs&&(this.hideLogs||console.log(this.chalk.hex(et(this,fa,"f"))(`${this.getStartPrefix()}[${this.moduleName} FAIL]: `)+this.chalk.hex(et(this,hc,"f"))(...e)))}debugBright(...e){this.enableLogs&&(this.hideLogs||console.log(this.chalk.hex(et(this,ac,"f"))(`${this.getStartPrefix()}[${this.moduleName} DEBUG]: `)+this.chalk.hex(et(this,uc,"f"))(...e)))}important(...e){this.enableLogs&&console.log(this.chalk.hex(et(this,as,"f"))(`${this.getStartPrefix()}[${this.moduleName} IMPORTANT]: `)+this.chalk.hex(et(this,xd,"f"))(...e))}panic(...e){this.enableLogs&&console.log(this.chalk.hex(et(this,dc,"f"))(`${this.getStartPrefix()}[${this.moduleName} HELP PANIC]: `)+this.chalk.hex(et(this,Ud,"f"))(...e))}info(...e){this.enableLogs&&console.log(this.chalk.hex(et(this,as,"f"))(`${this.getStartPrefix()}[${this.moduleName} INFO]: `)+this.chalk.hex(et(this,Ci,"f"))(...e))}securityNotice(...e){this.enableLogs&&console.log(this.chalk.hex("#22d8e6")(`${this.getStartPrefix()}[${this.moduleName} SECURITY NOTICE]: `)+this.chalk.hex("#22e3e6")(...e))}traceLog(...e){this.enableLogs&&console.log(this.chalk.hex("#ffffff")(`${this.getStartPrefix()}[${this.moduleName} TRACE LOG]: `)+this.chalk.hex(et(this,Od,"f"))(...e))}}as=new WeakMap,xd=new WeakMap,ac=new WeakMap,uc=new WeakMap,Td=new WeakMap,cc=new WeakMap,Bd=new WeakMap,lc=new WeakMap,Pd=new WeakMap,fc=new WeakMap,la=new WeakMap,fa=new WeakMap,hc=new WeakMap,Ci=new WeakMap,Od=new WeakMap,dc=new WeakMap,Ud=new WeakMap;class dS extends y9{constructor(){super()}}var a2;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=1]="ERROR",t[t.WARN=2]="WARN",t[t.INFO=3]="INFO",t[t.DEBUG=4]="DEBUG",t[t.TRACE=5]="TRACE",t[t.ALL=6]="ALL"})(a2||(a2={}));var ao={},u2;function m9(){if(u2)return ao;u2=1,Object.defineProperty(ao,"__esModule",{value:!0}),ao.bech32m=ao.bech32=void 0;const t="qpzry9x8gf2tvdw0s3jn54khce6mua7l",e={};for(let f=0;f<t.length;f++){const u=t.charAt(f);e[u]=f}function r(f){const u=f>>25;return(f&33554431)<<5^-(u>>0&1)&996825010^-(u>>1&1)&642813549^-(u>>2&1)&513874426^-(u>>3&1)&1027748829^-(u>>4&1)&705979059}function n(f){let u=1;for(let p=0;p<f.length;++p){const y=f.charCodeAt(p);if(y<33||y>126)return"Invalid prefix ("+f+")";u=r(u)^y>>5}u=r(u);for(let p=0;p<f.length;++p){const y=f.charCodeAt(p);u=r(u)^y&31}return u}function i(f,u,p,y){let w=0,A=0;const S=(1<<p)-1,k=[];for(let I=0;I<f.length;++I)for(w=w<<u|f[I],A+=u;A>=p;)A-=p,k.push(w>>A&S);if(y)A>0&&k.push(w<<p-A&S);else{if(A>=u)return"Excess padding";if(w<<p-A&S)return"Non-zero padding"}return k}function o(f){return i(f,8,5,!0)}function s(f){const u=i(f,5,8,!1);if(Array.isArray(u))return u}function a(f){const u=i(f,5,8,!1);if(Array.isArray(u))return u;throw new Error(u)}function l(f){let u;f==="bech32"?u=1:u=734539939;function p(S,k,I){if(I=I||90,S.length+7+k.length>I)throw new TypeError("Exceeds length limit");S=S.toLowerCase();let N=n(S);if(typeof N=="string")throw new Error(N);let B=S+"1";for(let V=0;V<k.length;++V){const W=k[V];if(W>>5!==0)throw new Error("Non 5-bit word");N=r(N)^W,B+=t.charAt(W)}for(let V=0;V<6;++V)N=r(N);N^=u;for(let V=0;V<6;++V){const W=N>>(5-V)*5&31;B+=t.charAt(W)}return B}function y(S,k){if(k=k||90,S.length<8)return S+" too short";if(S.length>k)return"Exceeds length limit";const I=S.toLowerCase(),N=S.toUpperCase();if(S!==I&&S!==N)return"Mixed-case string "+S;S=I;const B=S.lastIndexOf("1");if(B===-1)return"No separator character for "+S;if(B===0)return"Missing prefix for "+S;const V=S.slice(0,B),W=S.slice(B+1);if(W.length<6)return"Data too short";let Y=n(V);if(typeof Y=="string")return Y;const H=[];for(let ie=0;ie<W.length;++ie){const T=W.charAt(ie),C=e[T];if(C===void 0)return"Unknown character "+T;Y=r(Y)^C,!(ie+6>=W.length)&&H.push(C)}return Y!==u?"Invalid checksum for "+S:{prefix:V,words:H}}function w(S,k){const I=y(S,k);if(typeof I=="object")return I}function A(S,k){const I=y(S,k);if(typeof I=="object")return I;throw new Error(I)}return{decodeUnsafe:w,decode:A,encode:p,toWords:o,fromWordsUnsafe:s,fromWords:a}}return ao.bech32=l("bech32"),ao.bech32m=l("bech32m"),ao}var ju=m9(),qr={},dr={};const b9=JSON.parse('["abdikace","abeceda","adresa","agrese","akce","aktovka","alej","alkohol","amputace","ananas","andulka","anekdota","anketa","antika","anulovat","archa","arogance","asfalt","asistent","aspirace","astma","astronom","atlas","atletika","atol","autobus","azyl","babka","bachor","bacil","baculka","badatel","bageta","bagr","bahno","bakterie","balada","baletka","balkon","balonek","balvan","balza","bambus","bankomat","barbar","baret","barman","baroko","barva","baterka","batoh","bavlna","bazalka","bazilika","bazuka","bedna","beran","beseda","bestie","beton","bezinka","bezmoc","beztak","bicykl","bidlo","biftek","bikiny","bilance","biograf","biolog","bitva","bizon","blahobyt","blatouch","blecha","bledule","blesk","blikat","blizna","blokovat","bloudit","blud","bobek","bobr","bodlina","bodnout","bohatost","bojkot","bojovat","bokorys","bolest","borec","borovice","bota","boubel","bouchat","bouda","boule","bourat","boxer","bradavka","brambora","branka","bratr","brepta","briketa","brko","brloh","bronz","broskev","brunetka","brusinka","brzda","brzy","bublina","bubnovat","buchta","buditel","budka","budova","bufet","bujarost","bukvice","buldok","bulva","bunda","bunkr","burza","butik","buvol","buzola","bydlet","bylina","bytovka","bzukot","capart","carevna","cedr","cedule","cejch","cejn","cela","celer","celkem","celnice","cenina","cennost","cenovka","centrum","cenzor","cestopis","cetka","chalupa","chapadlo","charita","chata","chechtat","chemie","chichot","chirurg","chlad","chleba","chlubit","chmel","chmura","chobot","chochol","chodba","cholera","chomout","chopit","choroba","chov","chrapot","chrlit","chrt","chrup","chtivost","chudina","chutnat","chvat","chvilka","chvost","chyba","chystat","chytit","cibule","cigareta","cihelna","cihla","cinkot","cirkus","cisterna","citace","citrus","cizinec","cizost","clona","cokoliv","couvat","ctitel","ctnost","cudnost","cuketa","cukr","cupot","cvaknout","cval","cvik","cvrkot","cyklista","daleko","dareba","datel","datum","dcera","debata","dechovka","decibel","deficit","deflace","dekl","dekret","demokrat","deprese","derby","deska","detektiv","dikobraz","diktovat","dioda","diplom","disk","displej","divadlo","divoch","dlaha","dlouho","dluhopis","dnes","dobro","dobytek","docent","dochutit","dodnes","dohled","dohoda","dohra","dojem","dojnice","doklad","dokola","doktor","dokument","dolar","doleva","dolina","doma","dominant","domluvit","domov","donutit","dopad","dopis","doplnit","doposud","doprovod","dopustit","dorazit","dorost","dort","dosah","doslov","dostatek","dosud","dosyta","dotaz","dotek","dotknout","doufat","doutnat","dovozce","dozadu","doznat","dozorce","drahota","drak","dramatik","dravec","draze","drdol","drobnost","drogerie","drozd","drsnost","drtit","drzost","duben","duchovno","dudek","duha","duhovka","dusit","dusno","dutost","dvojice","dvorec","dynamit","ekolog","ekonomie","elektron","elipsa","email","emise","emoce","empatie","epizoda","epocha","epopej","epos","esej","esence","eskorta","eskymo","etiketa","euforie","evoluce","exekuce","exkurze","expedice","exploze","export","extrakt","facka","fajfka","fakulta","fanatik","fantazie","farmacie","favorit","fazole","federace","fejeton","fenka","fialka","figurant","filozof","filtr","finance","finta","fixace","fjord","flanel","flirt","flotila","fond","fosfor","fotbal","fotka","foton","frakce","freska","fronta","fukar","funkce","fyzika","galeje","garant","genetika","geolog","gilotina","glazura","glejt","golem","golfista","gotika","graf","gramofon","granule","grep","gril","grog","groteska","guma","hadice","hadr","hala","halenka","hanba","hanopis","harfa","harpuna","havran","hebkost","hejkal","hejno","hejtman","hektar","helma","hematom","herec","herna","heslo","hezky","historik","hladovka","hlasivky","hlava","hledat","hlen","hlodavec","hloh","hloupost","hltat","hlubina","hluchota","hmat","hmota","hmyz","hnis","hnojivo","hnout","hoblina","hoboj","hoch","hodiny","hodlat","hodnota","hodovat","hojnost","hokej","holinka","holka","holub","homole","honitba","honorace","horal","horda","horizont","horko","horlivec","hormon","hornina","horoskop","horstvo","hospoda","hostina","hotovost","houba","houf","houpat","houska","hovor","hradba","hranice","hravost","hrazda","hrbolek","hrdina","hrdlo","hrdost","hrnek","hrobka","hromada","hrot","hrouda","hrozen","hrstka","hrubost","hryzat","hubenost","hubnout","hudba","hukot","humr","husita","hustota","hvozd","hybnost","hydrant","hygiena","hymna","hysterik","idylka","ihned","ikona","iluze","imunita","infekce","inflace","inkaso","inovace","inspekce","internet","invalida","investor","inzerce","ironie","jablko","jachta","jahoda","jakmile","jakost","jalovec","jantar","jarmark","jaro","jasan","jasno","jatka","javor","jazyk","jedinec","jedle","jednatel","jehlan","jekot","jelen","jelito","jemnost","jenom","jepice","jeseter","jevit","jezdec","jezero","jinak","jindy","jinoch","jiskra","jistota","jitrnice","jizva","jmenovat","jogurt","jurta","kabaret","kabel","kabinet","kachna","kadet","kadidlo","kahan","kajak","kajuta","kakao","kaktus","kalamita","kalhoty","kalibr","kalnost","kamera","kamkoliv","kamna","kanibal","kanoe","kantor","kapalina","kapela","kapitola","kapka","kaple","kapota","kapr","kapusta","kapybara","karamel","karotka","karton","kasa","katalog","katedra","kauce","kauza","kavalec","kazajka","kazeta","kazivost","kdekoliv","kdesi","kedluben","kemp","keramika","kino","klacek","kladivo","klam","klapot","klasika","klaun","klec","klenba","klepat","klesnout","klid","klima","klisna","klobouk","klokan","klopa","kloub","klubovna","klusat","kluzkost","kmen","kmitat","kmotr","kniha","knot","koalice","koberec","kobka","kobliha","kobyla","kocour","kohout","kojenec","kokos","koktejl","kolaps","koleda","kolize","kolo","komando","kometa","komik","komnata","komora","kompas","komunita","konat","koncept","kondice","konec","konfese","kongres","konina","konkurs","kontakt","konzerva","kopanec","kopie","kopnout","koprovka","korbel","korektor","kormidlo","koroptev","korpus","koruna","koryto","korzet","kosatec","kostka","kotel","kotleta","kotoul","koukat","koupelna","kousek","kouzlo","kovboj","koza","kozoroh","krabice","krach","krajina","kralovat","krasopis","kravata","kredit","krejcar","kresba","kreveta","kriket","kritik","krize","krkavec","krmelec","krmivo","krocan","krok","kronika","kropit","kroupa","krovka","krtek","kruhadlo","krupice","krutost","krvinka","krychle","krypta","krystal","kryt","kudlanka","kufr","kujnost","kukla","kulajda","kulich","kulka","kulomet","kultura","kuna","kupodivu","kurt","kurzor","kutil","kvalita","kvasinka","kvestor","kynolog","kyselina","kytara","kytice","kytka","kytovec","kyvadlo","labrador","lachtan","ladnost","laik","lakomec","lamela","lampa","lanovka","lasice","laso","lastura","latinka","lavina","lebka","leckdy","leden","lednice","ledovka","ledvina","legenda","legie","legrace","lehce","lehkost","lehnout","lektvar","lenochod","lentilka","lepenka","lepidlo","letadlo","letec","letmo","letokruh","levhart","levitace","levobok","libra","lichotka","lidojed","lidskost","lihovina","lijavec","lilek","limetka","linie","linka","linoleum","listopad","litina","litovat","lobista","lodivod","logika","logoped","lokalita","loket","lomcovat","lopata","lopuch","lord","losos","lotr","loudal","louh","louka","louskat","lovec","lstivost","lucerna","lucifer","lump","lusk","lustrace","lvice","lyra","lyrika","lysina","madam","madlo","magistr","mahagon","majetek","majitel","majorita","makak","makovice","makrela","malba","malina","malovat","malvice","maminka","mandle","manko","marnost","masakr","maskot","masopust","matice","matrika","maturita","mazanec","mazivo","mazlit","mazurka","mdloba","mechanik","meditace","medovina","melasa","meloun","mentolka","metla","metoda","metr","mezera","migrace","mihnout","mihule","mikina","mikrofon","milenec","milimetr","milost","mimika","mincovna","minibar","minomet","minulost","miska","mistr","mixovat","mladost","mlha","mlhovina","mlok","mlsat","mluvit","mnich","mnohem","mobil","mocnost","modelka","modlitba","mohyla","mokro","molekula","momentka","monarcha","monokl","monstrum","montovat","monzun","mosaz","moskyt","most","motivace","motorka","motyka","moucha","moudrost","mozaika","mozek","mozol","mramor","mravenec","mrkev","mrtvola","mrzet","mrzutost","mstitel","mudrc","muflon","mulat","mumie","munice","muset","mutace","muzeum","muzikant","myslivec","mzda","nabourat","nachytat","nadace","nadbytek","nadhoz","nadobro","nadpis","nahlas","nahnat","nahodile","nahradit","naivita","najednou","najisto","najmout","naklonit","nakonec","nakrmit","nalevo","namazat","namluvit","nanometr","naoko","naopak","naostro","napadat","napevno","naplnit","napnout","naposled","naprosto","narodit","naruby","narychlo","nasadit","nasekat","naslepo","nastat","natolik","navenek","navrch","navzdory","nazvat","nebe","nechat","necky","nedaleko","nedbat","neduh","negace","nehet","nehoda","nejen","nejprve","neklid","nelibost","nemilost","nemoc","neochota","neonka","nepokoj","nerost","nerv","nesmysl","nesoulad","netvor","neuron","nevina","nezvykle","nicota","nijak","nikam","nikdy","nikl","nikterak","nitro","nocleh","nohavice","nominace","nora","norek","nositel","nosnost","nouze","noviny","novota","nozdra","nuda","nudle","nuget","nutit","nutnost","nutrie","nymfa","obal","obarvit","obava","obdiv","obec","obehnat","obejmout","obezita","obhajoba","obilnice","objasnit","objekt","obklopit","oblast","oblek","obliba","obloha","obluda","obnos","obohatit","obojek","obout","obrazec","obrna","obruba","obrys","obsah","obsluha","obstarat","obuv","obvaz","obvinit","obvod","obvykle","obyvatel","obzor","ocas","ocel","ocenit","ochladit","ochota","ochrana","ocitnout","odboj","odbyt","odchod","odcizit","odebrat","odeslat","odevzdat","odezva","odhadce","odhodit","odjet","odjinud","odkaz","odkoupit","odliv","odluka","odmlka","odolnost","odpad","odpis","odplout","odpor","odpustit","odpykat","odrazka","odsoudit","odstup","odsun","odtok","odtud","odvaha","odveta","odvolat","odvracet","odznak","ofina","ofsajd","ohlas","ohnisko","ohrada","ohrozit","ohryzek","okap","okenice","oklika","okno","okouzlit","okovy","okrasa","okres","okrsek","okruh","okupant","okurka","okusit","olejnina","olizovat","omak","omeleta","omezit","omladina","omlouvat","omluva","omyl","onehdy","opakovat","opasek","operace","opice","opilost","opisovat","opora","opozice","opravdu","oproti","orbital","orchestr","orgie","orlice","orloj","ortel","osada","oschnout","osika","osivo","oslava","oslepit","oslnit","oslovit","osnova","osoba","osolit","ospalec","osten","ostraha","ostuda","ostych","osvojit","oteplit","otisk","otop","otrhat","otrlost","otrok","otruby","otvor","ovanout","ovar","oves","ovlivnit","ovoce","oxid","ozdoba","pachatel","pacient","padouch","pahorek","pakt","palanda","palec","palivo","paluba","pamflet","pamlsek","panenka","panika","panna","panovat","panstvo","pantofle","paprika","parketa","parodie","parta","paruka","paryba","paseka","pasivita","pastelka","patent","patrona","pavouk","pazneht","pazourek","pecka","pedagog","pejsek","peklo","peloton","penalta","pendrek","penze","periskop","pero","pestrost","petarda","petice","petrolej","pevnina","pexeso","pianista","piha","pijavice","pikle","piknik","pilina","pilnost","pilulka","pinzeta","pipeta","pisatel","pistole","pitevna","pivnice","pivovar","placenta","plakat","plamen","planeta","plastika","platit","plavidlo","plaz","plech","plemeno","plenta","ples","pletivo","plevel","plivat","plnit","plno","plocha","plodina","plomba","plout","pluk","plyn","pobavit","pobyt","pochod","pocit","poctivec","podat","podcenit","podepsat","podhled","podivit","podklad","podmanit","podnik","podoba","podpora","podraz","podstata","podvod","podzim","poezie","pohanka","pohnutka","pohovor","pohroma","pohyb","pointa","pojistka","pojmout","pokazit","pokles","pokoj","pokrok","pokuta","pokyn","poledne","polibek","polknout","poloha","polynom","pomalu","pominout","pomlka","pomoc","pomsta","pomyslet","ponechat","ponorka","ponurost","popadat","popel","popisek","poplach","poprosit","popsat","popud","poradce","porce","porod","porucha","poryv","posadit","posed","posila","poskok","poslanec","posoudit","pospolu","postava","posudek","posyp","potah","potkan","potlesk","potomek","potrava","potupa","potvora","poukaz","pouto","pouzdro","povaha","povidla","povlak","povoz","povrch","povstat","povyk","povzdech","pozdrav","pozemek","poznatek","pozor","pozvat","pracovat","prahory","praktika","prales","praotec","praporek","prase","pravda","princip","prkno","probudit","procento","prodej","profese","prohra","projekt","prolomit","promile","pronikat","propad","prorok","prosba","proton","proutek","provaz","prskavka","prsten","prudkost","prut","prvek","prvohory","psanec","psovod","pstruh","ptactvo","puberta","puch","pudl","pukavec","puklina","pukrle","pult","pumpa","punc","pupen","pusa","pusinka","pustina","putovat","putyka","pyramida","pysk","pytel","racek","rachot","radiace","radnice","radon","raft","ragby","raketa","rakovina","rameno","rampouch","rande","rarach","rarita","rasovna","rastr","ratolest","razance","razidlo","reagovat","reakce","recept","redaktor","referent","reflex","rejnok","reklama","rekord","rekrut","rektor","reputace","revize","revma","revolver","rezerva","riskovat","riziko","robotika","rodokmen","rohovka","rokle","rokoko","romaneto","ropovod","ropucha","rorejs","rosol","rostlina","rotmistr","rotoped","rotunda","roubenka","roucho","roup","roura","rovina","rovnice","rozbor","rozchod","rozdat","rozeznat","rozhodce","rozinka","rozjezd","rozkaz","rozloha","rozmar","rozpad","rozruch","rozsah","roztok","rozum","rozvod","rubrika","ruchadlo","rukavice","rukopis","ryba","rybolov","rychlost","rydlo","rypadlo","rytina","ryzost","sadista","sahat","sako","samec","samizdat","samota","sanitka","sardinka","sasanka","satelit","sazba","sazenice","sbor","schovat","sebranka","secese","sedadlo","sediment","sedlo","sehnat","sejmout","sekera","sekta","sekunda","sekvoje","semeno","seno","servis","sesadit","seshora","seskok","seslat","sestra","sesuv","sesypat","setba","setina","setkat","setnout","setrvat","sever","seznam","shoda","shrnout","sifon","silnice","sirka","sirotek","sirup","situace","skafandr","skalisko","skanzen","skaut","skeptik","skica","skladba","sklenice","sklo","skluz","skoba","skokan","skoro","skripta","skrz","skupina","skvost","skvrna","slabika","sladidlo","slanina","slast","slavnost","sledovat","slepec","sleva","slezina","slib","slina","sliznice","slon","sloupek","slovo","sluch","sluha","slunce","slupka","slza","smaragd","smetana","smilstvo","smlouva","smog","smrad","smrk","smrtka","smutek","smysl","snad","snaha","snob","sobota","socha","sodovka","sokol","sopka","sotva","souboj","soucit","soudce","souhlas","soulad","soumrak","souprava","soused","soutok","souviset","spalovna","spasitel","spis","splav","spodek","spojenec","spolu","sponzor","spornost","spousta","sprcha","spustit","sranda","sraz","srdce","srna","srnec","srovnat","srpen","srst","srub","stanice","starosta","statika","stavba","stehno","stezka","stodola","stolek","stopa","storno","stoupat","strach","stres","strhnout","strom","struna","studna","stupnice","stvol","styk","subjekt","subtropy","suchar","sudost","sukno","sundat","sunout","surikata","surovina","svah","svalstvo","svetr","svatba","svazek","svisle","svitek","svoboda","svodidlo","svorka","svrab","sykavka","sykot","synek","synovec","sypat","sypkost","syrovost","sysel","sytost","tabletka","tabule","tahoun","tajemno","tajfun","tajga","tajit","tajnost","taktika","tamhle","tampon","tancovat","tanec","tanker","tapeta","tavenina","tazatel","technika","tehdy","tekutina","telefon","temnota","tendence","tenista","tenor","teplota","tepna","teprve","terapie","termoska","textil","ticho","tiskopis","titulek","tkadlec","tkanina","tlapka","tleskat","tlukot","tlupa","tmel","toaleta","topinka","topol","torzo","touha","toulec","tradice","traktor","tramp","trasa","traverza","trefit","trest","trezor","trhavina","trhlina","trochu","trojice","troska","trouba","trpce","trpitel","trpkost","trubec","truchlit","truhlice","trus","trvat","tudy","tuhnout","tuhost","tundra","turista","turnaj","tuzemsko","tvaroh","tvorba","tvrdost","tvrz","tygr","tykev","ubohost","uboze","ubrat","ubrousek","ubrus","ubytovna","ucho","uctivost","udivit","uhradit","ujednat","ujistit","ujmout","ukazatel","uklidnit","uklonit","ukotvit","ukrojit","ulice","ulita","ulovit","umyvadlo","unavit","uniforma","uniknout","upadnout","uplatnit","uplynout","upoutat","upravit","uran","urazit","usednout","usilovat","usmrtit","usnadnit","usnout","usoudit","ustlat","ustrnout","utahovat","utkat","utlumit","utonout","utopenec","utrousit","uvalit","uvolnit","uvozovka","uzdravit","uzel","uzenina","uzlina","uznat","vagon","valcha","valoun","vana","vandal","vanilka","varan","varhany","varovat","vcelku","vchod","vdova","vedro","vegetace","vejce","velbloud","veletrh","velitel","velmoc","velryba","venkov","veranda","verze","veselka","veskrze","vesnice","vespodu","vesta","veterina","veverka","vibrace","vichr","videohra","vidina","vidle","vila","vinice","viset","vitalita","vize","vizitka","vjezd","vklad","vkus","vlajka","vlak","vlasec","vlevo","vlhkost","vliv","vlnovka","vloupat","vnucovat","vnuk","voda","vodivost","vodoznak","vodstvo","vojensky","vojna","vojsko","volant","volba","volit","volno","voskovka","vozidlo","vozovna","vpravo","vrabec","vracet","vrah","vrata","vrba","vrcholek","vrhat","vrstva","vrtule","vsadit","vstoupit","vstup","vtip","vybavit","vybrat","vychovat","vydat","vydra","vyfotit","vyhledat","vyhnout","vyhodit","vyhradit","vyhubit","vyjasnit","vyjet","vyjmout","vyklopit","vykonat","vylekat","vymazat","vymezit","vymizet","vymyslet","vynechat","vynikat","vynutit","vypadat","vyplatit","vypravit","vypustit","vyrazit","vyrovnat","vyrvat","vyslovit","vysoko","vystavit","vysunout","vysypat","vytasit","vytesat","vytratit","vyvinout","vyvolat","vyvrhel","vyzdobit","vyznat","vzadu","vzbudit","vzchopit","vzdor","vzduch","vzdychat","vzestup","vzhledem","vzkaz","vzlykat","vznik","vzorek","vzpoura","vztah","vztek","xylofon","zabrat","zabydlet","zachovat","zadarmo","zadusit","zafoukat","zahltit","zahodit","zahrada","zahynout","zajatec","zajet","zajistit","zaklepat","zakoupit","zalepit","zamezit","zamotat","zamyslet","zanechat","zanikat","zaplatit","zapojit","zapsat","zarazit","zastavit","zasunout","zatajit","zatemnit","zatknout","zaujmout","zavalit","zavelet","zavinit","zavolat","zavrtat","zazvonit","zbavit","zbrusu","zbudovat","zbytek","zdaleka","zdarma","zdatnost","zdivo","zdobit","zdroj","zdvih","zdymadlo","zelenina","zeman","zemina","zeptat","zezadu","zezdola","zhatit","zhltnout","zhluboka","zhotovit","zhruba","zima","zimnice","zjemnit","zklamat","zkoumat","zkratka","zkumavka","zlato","zlehka","zloba","zlom","zlost","zlozvyk","zmapovat","zmar","zmatek","zmije","zmizet","zmocnit","zmodrat","zmrzlina","zmutovat","znak","znalost","znamenat","znovu","zobrazit","zotavit","zoubek","zoufale","zplodit","zpomalit","zprava","zprostit","zprudka","zprvu","zrada","zranit","zrcadlo","zrnitost","zrno","zrovna","zrychlit","zrzavost","zticha","ztratit","zubovina","zubr","zvednout","zvenku","zvesela","zvon","zvrat","zvukovod","zvyk"]'),w9=JSON.parse('["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]'),v9=JSON.parse('["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]'),E9=JSON.parse('["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]'),S9=JSON.parse('["abaisser","abandon","abdiquer","abeille","abolir","aborder","aboutir","aboyer","abrasif","abreuver","abriter","abroger","abrupt","absence","absolu","absurde","abusif","abyssal","academie","acajou","acarien","accabler","accepter","acclamer","accolade","accroche","accuser","acerbe","achat","acheter","aciduler","acier","acompte","acquerir","acronyme","acteur","actif","actuel","adepte","adequat","adhesif","adjectif","adjuger","admettre","admirer","adopter","adorer","adoucir","adresse","adroit","adulte","adverbe","aerer","aeronef","affaire","affecter","affiche","affreux","affubler","agacer","agencer","agile","agiter","agrafer","agreable","agrume","aider","aiguille","ailier","aimable","aisance","ajouter","ajuster","alarmer","alchimie","alerte","algebre","algue","aliener","aliment","alleger","alliage","allouer","allumer","alourdir","alpaga","altesse","alveole","amateur","ambigu","ambre","amenager","amertume","amidon","amiral","amorcer","amour","amovible","amphibie","ampleur","amusant","analyse","anaphore","anarchie","anatomie","ancien","aneantir","angle","angoisse","anguleux","animal","annexer","annonce","annuel","anodin","anomalie","anonyme","anormal","antenne","antidote","anxieux","apaiser","aperitif","aplanir","apologie","appareil","appeler","apporter","appuyer","aquarium","aqueduc","arbitre","arbuste","ardeur","ardoise","argent","arlequin","armature","armement","armoire","armure","arpenter","arracher","arriver","arroser","arsenic","arteriel","article","aspect","asphalte","aspirer","assaut","asservir","assiette","associer","assurer","asticot","astre","astuce","atelier","atome","atrium","atroce","attaque","attentif","attirer","attraper","aubaine","auberge","audace","audible","augurer","aurore","automne","autruche","avaler","avancer","avarice","avenir","averse","aveugle","aviateur","avide","avion","aviser","avoine","avouer","avril","axial","axiome","badge","bafouer","bagage","baguette","baignade","balancer","balcon","baleine","balisage","bambin","bancaire","bandage","banlieue","banniere","banquier","barbier","baril","baron","barque","barrage","bassin","bastion","bataille","bateau","batterie","baudrier","bavarder","belette","belier","belote","benefice","berceau","berger","berline","bermuda","besace","besogne","betail","beurre","biberon","bicycle","bidule","bijou","bilan","bilingue","billard","binaire","biologie","biopsie","biotype","biscuit","bison","bistouri","bitume","bizarre","blafard","blague","blanchir","blessant","blinder","blond","bloquer","blouson","bobard","bobine","boire","boiser","bolide","bonbon","bondir","bonheur","bonifier","bonus","bordure","borne","botte","boucle","boueux","bougie","boulon","bouquin","bourse","boussole","boutique","boxeur","branche","brasier","brave","brebis","breche","breuvage","bricoler","brigade","brillant","brioche","brique","brochure","broder","bronzer","brousse","broyeur","brume","brusque","brutal","bruyant","buffle","buisson","bulletin","bureau","burin","bustier","butiner","butoir","buvable","buvette","cabanon","cabine","cachette","cadeau","cadre","cafeine","caillou","caisson","calculer","calepin","calibre","calmer","calomnie","calvaire","camarade","camera","camion","campagne","canal","caneton","canon","cantine","canular","capable","caporal","caprice","capsule","capter","capuche","carabine","carbone","caresser","caribou","carnage","carotte","carreau","carton","cascade","casier","casque","cassure","causer","caution","cavalier","caverne","caviar","cedille","ceinture","celeste","cellule","cendrier","censurer","central","cercle","cerebral","cerise","cerner","cerveau","cesser","chagrin","chaise","chaleur","chambre","chance","chapitre","charbon","chasseur","chaton","chausson","chavirer","chemise","chenille","chequier","chercher","cheval","chien","chiffre","chignon","chimere","chiot","chlorure","chocolat","choisir","chose","chouette","chrome","chute","cigare","cigogne","cimenter","cinema","cintrer","circuler","cirer","cirque","citerne","citoyen","citron","civil","clairon","clameur","claquer","classe","clavier","client","cligner","climat","clivage","cloche","clonage","cloporte","cobalt","cobra","cocasse","cocotier","coder","codifier","coffre","cogner","cohesion","coiffer","coincer","colere","colibri","colline","colmater","colonel","combat","comedie","commande","compact","concert","conduire","confier","congeler","connoter","consonne","contact","convexe","copain","copie","corail","corbeau","cordage","corniche","corpus","correct","cortege","cosmique","costume","coton","coude","coupure","courage","couteau","couvrir","coyote","crabe","crainte","cravate","crayon","creature","crediter","cremeux","creuser","crevette","cribler","crier","cristal","critere","croire","croquer","crotale","crucial","cruel","crypter","cubique","cueillir","cuillere","cuisine","cuivre","culminer","cultiver","cumuler","cupide","curatif","curseur","cyanure","cycle","cylindre","cynique","daigner","damier","danger","danseur","dauphin","debattre","debiter","deborder","debrider","debutant","decaler","decembre","dechirer","decider","declarer","decorer","decrire","decupler","dedale","deductif","deesse","defensif","defiler","defrayer","degager","degivrer","deglutir","degrafer","dejeuner","delice","deloger","demander","demeurer","demolir","denicher","denouer","dentelle","denuder","depart","depenser","dephaser","deplacer","deposer","deranger","derober","desastre","descente","desert","designer","desobeir","dessiner","destrier","detacher","detester","detourer","detresse","devancer","devenir","deviner","devoir","diable","dialogue","diamant","dicter","differer","digerer","digital","digne","diluer","dimanche","diminuer","dioxyde","directif","diriger","discuter","disposer","dissiper","distance","divertir","diviser","docile","docteur","dogme","doigt","domaine","domicile","dompter","donateur","donjon","donner","dopamine","dortoir","dorure","dosage","doseur","dossier","dotation","douanier","double","douceur","douter","doyen","dragon","draper","dresser","dribbler","droiture","duperie","duplexe","durable","durcir","dynastie","eblouir","ecarter","echarpe","echelle","eclairer","eclipse","eclore","ecluse","ecole","economie","ecorce","ecouter","ecraser","ecremer","ecrivain","ecrou","ecume","ecureuil","edifier","eduquer","effacer","effectif","effigie","effort","effrayer","effusion","egaliser","egarer","ejecter","elaborer","elargir","electron","elegant","elephant","eleve","eligible","elitisme","eloge","elucider","eluder","emballer","embellir","embryon","emeraude","emission","emmener","emotion","emouvoir","empereur","employer","emporter","emprise","emulsion","encadrer","enchere","enclave","encoche","endiguer","endosser","endroit","enduire","energie","enfance","enfermer","enfouir","engager","engin","englober","enigme","enjamber","enjeu","enlever","ennemi","ennuyeux","enrichir","enrobage","enseigne","entasser","entendre","entier","entourer","entraver","enumerer","envahir","enviable","envoyer","enzyme","eolien","epaissir","epargne","epatant","epaule","epicerie","epidemie","epier","epilogue","epine","episode","epitaphe","epoque","epreuve","eprouver","epuisant","equerre","equipe","eriger","erosion","erreur","eruption","escalier","espadon","espece","espiegle","espoir","esprit","esquiver","essayer","essence","essieu","essorer","estime","estomac","estrade","etagere","etaler","etanche","etatique","eteindre","etendoir","eternel","ethanol","ethique","ethnie","etirer","etoffer","etoile","etonnant","etourdir","etrange","etroit","etude","euphorie","evaluer","evasion","eventail","evidence","eviter","evolutif","evoquer","exact","exagerer","exaucer","exceller","excitant","exclusif","excuse","executer","exemple","exercer","exhaler","exhorter","exigence","exiler","exister","exotique","expedier","explorer","exposer","exprimer","exquis","extensif","extraire","exulter","fable","fabuleux","facette","facile","facture","faiblir","falaise","fameux","famille","farceur","farfelu","farine","farouche","fasciner","fatal","fatigue","faucon","fautif","faveur","favori","febrile","feconder","federer","felin","femme","femur","fendoir","feodal","fermer","feroce","ferveur","festival","feuille","feutre","fevrier","fiasco","ficeler","fictif","fidele","figure","filature","filetage","filiere","filleul","filmer","filou","filtrer","financer","finir","fiole","firme","fissure","fixer","flairer","flamme","flasque","flatteur","fleau","fleche","fleur","flexion","flocon","flore","fluctuer","fluide","fluvial","folie","fonderie","fongible","fontaine","forcer","forgeron","formuler","fortune","fossile","foudre","fougere","fouiller","foulure","fourmi","fragile","fraise","franchir","frapper","frayeur","fregate","freiner","frelon","fremir","frenesie","frere","friable","friction","frisson","frivole","froid","fromage","frontal","frotter","fruit","fugitif","fuite","fureur","furieux","furtif","fusion","futur","gagner","galaxie","galerie","gambader","garantir","gardien","garnir","garrigue","gazelle","gazon","geant","gelatine","gelule","gendarme","general","genie","genou","gentil","geologie","geometre","geranium","germe","gestuel","geyser","gibier","gicler","girafe","givre","glace","glaive","glisser","globe","gloire","glorieux","golfeur","gomme","gonfler","gorge","gorille","goudron","gouffre","goulot","goupille","gourmand","goutte","graduel","graffiti","graine","grand","grappin","gratuit","gravir","grenat","griffure","griller","grimper","grogner","gronder","grotte","groupe","gruger","grutier","gruyere","guepard","guerrier","guide","guimauve","guitare","gustatif","gymnaste","gyrostat","habitude","hachoir","halte","hameau","hangar","hanneton","haricot","harmonie","harpon","hasard","helium","hematome","herbe","herisson","hermine","heron","hesiter","heureux","hiberner","hibou","hilarant","histoire","hiver","homard","hommage","homogene","honneur","honorer","honteux","horde","horizon","horloge","hormone","horrible","houleux","housse","hublot","huileux","humain","humble","humide","humour","hurler","hydromel","hygiene","hymne","hypnose","idylle","ignorer","iguane","illicite","illusion","image","imbiber","imiter","immense","immobile","immuable","impact","imperial","implorer","imposer","imprimer","imputer","incarner","incendie","incident","incliner","incolore","indexer","indice","inductif","inedit","ineptie","inexact","infini","infliger","informer","infusion","ingerer","inhaler","inhiber","injecter","injure","innocent","inoculer","inonder","inscrire","insecte","insigne","insolite","inspirer","instinct","insulter","intact","intense","intime","intrigue","intuitif","inutile","invasion","inventer","inviter","invoquer","ironique","irradier","irreel","irriter","isoler","ivoire","ivresse","jaguar","jaillir","jambe","janvier","jardin","jauger","jaune","javelot","jetable","jeton","jeudi","jeunesse","joindre","joncher","jongler","joueur","jouissif","journal","jovial","joyau","joyeux","jubiler","jugement","junior","jupon","juriste","justice","juteux","juvenile","kayak","kimono","kiosque","label","labial","labourer","lacerer","lactose","lagune","laine","laisser","laitier","lambeau","lamelle","lampe","lanceur","langage","lanterne","lapin","largeur","larme","laurier","lavabo","lavoir","lecture","legal","leger","legume","lessive","lettre","levier","lexique","lezard","liasse","liberer","libre","licence","licorne","liege","lievre","ligature","ligoter","ligue","limer","limite","limonade","limpide","lineaire","lingot","lionceau","liquide","lisiere","lister","lithium","litige","littoral","livreur","logique","lointain","loisir","lombric","loterie","louer","lourd","loutre","louve","loyal","lubie","lucide","lucratif","lueur","lugubre","luisant","lumiere","lunaire","lundi","luron","lutter","luxueux","machine","magasin","magenta","magique","maigre","maillon","maintien","mairie","maison","majorer","malaxer","malefice","malheur","malice","mallette","mammouth","mandater","maniable","manquant","manteau","manuel","marathon","marbre","marchand","mardi","maritime","marqueur","marron","marteler","mascotte","massif","materiel","matiere","matraque","maudire","maussade","mauve","maximal","mechant","meconnu","medaille","medecin","mediter","meduse","meilleur","melange","melodie","membre","memoire","menacer","mener","menhir","mensonge","mentor","mercredi","merite","merle","messager","mesure","metal","meteore","methode","metier","meuble","miauler","microbe","miette","mignon","migrer","milieu","million","mimique","mince","mineral","minimal","minorer","minute","miracle","miroiter","missile","mixte","mobile","moderne","moelleux","mondial","moniteur","monnaie","monotone","monstre","montagne","monument","moqueur","morceau","morsure","mortier","moteur","motif","mouche","moufle","moulin","mousson","mouton","mouvant","multiple","munition","muraille","murene","murmure","muscle","museum","musicien","mutation","muter","mutuel","myriade","myrtille","mystere","mythique","nageur","nappe","narquois","narrer","natation","nation","nature","naufrage","nautique","navire","nebuleux","nectar","nefaste","negation","negliger","negocier","neige","nerveux","nettoyer","neurone","neutron","neveu","niche","nickel","nitrate","niveau","noble","nocif","nocturne","noirceur","noisette","nomade","nombreux","nommer","normatif","notable","notifier","notoire","nourrir","nouveau","novateur","novembre","novice","nuage","nuancer","nuire","nuisible","numero","nuptial","nuque","nutritif","obeir","objectif","obliger","obscur","observer","obstacle","obtenir","obturer","occasion","occuper","ocean","octobre","octroyer","octupler","oculaire","odeur","odorant","offenser","officier","offrir","ogive","oiseau","oisillon","olfactif","olivier","ombrage","omettre","onctueux","onduler","onereux","onirique","opale","opaque","operer","opinion","opportun","opprimer","opter","optique","orageux","orange","orbite","ordonner","oreille","organe","orgueil","orifice","ornement","orque","ortie","osciller","osmose","ossature","otarie","ouragan","ourson","outil","outrager","ouvrage","ovation","oxyde","oxygene","ozone","paisible","palace","palmares","palourde","palper","panache","panda","pangolin","paniquer","panneau","panorama","pantalon","papaye","papier","papoter","papyrus","paradoxe","parcelle","paresse","parfumer","parler","parole","parrain","parsemer","partager","parure","parvenir","passion","pasteque","paternel","patience","patron","pavillon","pavoiser","payer","paysage","peigne","peintre","pelage","pelican","pelle","pelouse","peluche","pendule","penetrer","penible","pensif","penurie","pepite","peplum","perdrix","perforer","periode","permuter","perplexe","persil","perte","peser","petale","petit","petrir","peuple","pharaon","phobie","phoque","photon","phrase","physique","piano","pictural","piece","pierre","pieuvre","pilote","pinceau","pipette","piquer","pirogue","piscine","piston","pivoter","pixel","pizza","placard","plafond","plaisir","planer","plaque","plastron","plateau","pleurer","plexus","pliage","plomb","plonger","pluie","plumage","pochette","poesie","poete","pointe","poirier","poisson","poivre","polaire","policier","pollen","polygone","pommade","pompier","ponctuel","ponderer","poney","portique","position","posseder","posture","potager","poteau","potion","pouce","poulain","poumon","pourpre","poussin","pouvoir","prairie","pratique","precieux","predire","prefixe","prelude","prenom","presence","pretexte","prevoir","primitif","prince","prison","priver","probleme","proceder","prodige","profond","progres","proie","projeter","prologue","promener","propre","prospere","proteger","prouesse","proverbe","prudence","pruneau","psychose","public","puceron","puiser","pulpe","pulsar","punaise","punitif","pupitre","purifier","puzzle","pyramide","quasar","querelle","question","quietude","quitter","quotient","racine","raconter","radieux","ragondin","raideur","raisin","ralentir","rallonge","ramasser","rapide","rasage","ratisser","ravager","ravin","rayonner","reactif","reagir","realiser","reanimer","recevoir","reciter","reclamer","recolter","recruter","reculer","recycler","rediger","redouter","refaire","reflexe","reformer","refrain","refuge","regalien","region","reglage","regulier","reiterer","rejeter","rejouer","relatif","relever","relief","remarque","remede","remise","remonter","remplir","remuer","renard","renfort","renifler","renoncer","rentrer","renvoi","replier","reporter","reprise","reptile","requin","reserve","resineux","resoudre","respect","rester","resultat","retablir","retenir","reticule","retomber","retracer","reunion","reussir","revanche","revivre","revolte","revulsif","richesse","rideau","rieur","rigide","rigoler","rincer","riposter","risible","risque","rituel","rival","riviere","rocheux","romance","rompre","ronce","rondin","roseau","rosier","rotatif","rotor","rotule","rouge","rouille","rouleau","routine","royaume","ruban","rubis","ruche","ruelle","rugueux","ruiner","ruisseau","ruser","rustique","rythme","sabler","saboter","sabre","sacoche","safari","sagesse","saisir","salade","salive","salon","saluer","samedi","sanction","sanglier","sarcasme","sardine","saturer","saugrenu","saumon","sauter","sauvage","savant","savonner","scalpel","scandale","scelerat","scenario","sceptre","schema","science","scinder","score","scrutin","sculpter","seance","secable","secher","secouer","secreter","sedatif","seduire","seigneur","sejour","selectif","semaine","sembler","semence","seminal","senateur","sensible","sentence","separer","sequence","serein","sergent","serieux","serrure","serum","service","sesame","sevir","sevrage","sextuple","sideral","siecle","sieger","siffler","sigle","signal","silence","silicium","simple","sincere","sinistre","siphon","sirop","sismique","situer","skier","social","socle","sodium","soigneux","soldat","soleil","solitude","soluble","sombre","sommeil","somnoler","sonde","songeur","sonnette","sonore","sorcier","sortir","sosie","sottise","soucieux","soudure","souffle","soulever","soupape","source","soutirer","souvenir","spacieux","spatial","special","sphere","spiral","stable","station","sternum","stimulus","stipuler","strict","studieux","stupeur","styliste","sublime","substrat","subtil","subvenir","succes","sucre","suffixe","suggerer","suiveur","sulfate","superbe","supplier","surface","suricate","surmener","surprise","sursaut","survie","suspect","syllabe","symbole","symetrie","synapse","syntaxe","systeme","tabac","tablier","tactile","tailler","talent","talisman","talonner","tambour","tamiser","tangible","tapis","taquiner","tarder","tarif","tartine","tasse","tatami","tatouage","taupe","taureau","taxer","temoin","temporel","tenaille","tendre","teneur","tenir","tension","terminer","terne","terrible","tetine","texte","theme","theorie","therapie","thorax","tibia","tiede","timide","tirelire","tiroir","tissu","titane","titre","tituber","toboggan","tolerant","tomate","tonique","tonneau","toponyme","torche","tordre","tornade","torpille","torrent","torse","tortue","totem","toucher","tournage","tousser","toxine","traction","trafic","tragique","trahir","train","trancher","travail","trefle","tremper","tresor","treuil","triage","tribunal","tricoter","trilogie","triomphe","tripler","triturer","trivial","trombone","tronc","tropical","troupeau","tuile","tulipe","tumulte","tunnel","turbine","tuteur","tutoyer","tuyau","tympan","typhon","typique","tyran","ubuesque","ultime","ultrason","unanime","unifier","union","unique","unitaire","univers","uranium","urbain","urticant","usage","usine","usuel","usure","utile","utopie","vacarme","vaccin","vagabond","vague","vaillant","vaincre","vaisseau","valable","valise","vallon","valve","vampire","vanille","vapeur","varier","vaseux","vassal","vaste","vecteur","vedette","vegetal","vehicule","veinard","veloce","vendredi","venerer","venger","venimeux","ventouse","verdure","verin","vernir","verrou","verser","vertu","veston","veteran","vetuste","vexant","vexer","viaduc","viande","victoire","vidange","video","vignette","vigueur","vilain","village","vinaigre","violon","vipere","virement","virtuose","virus","visage","viseur","vision","visqueux","visuel","vital","vitesse","viticole","vitrine","vivace","vivipare","vocation","voguer","voile","voisin","voiture","volaille","volcan","voltiger","volume","vorace","vortex","voter","vouloir","voyage","voyelle","wagon","xenon","yacht","zebre","zenith","zeste","zoologie"]'),A9=JSON.parse('["abaco","abbaglio","abbinato","abete","abisso","abolire","abrasivo","abrogato","accadere","accenno","accusato","acetone","achille","acido","acqua","acre","acrilico","acrobata","acuto","adagio","addebito","addome","adeguato","aderire","adipe","adottare","adulare","affabile","affetto","affisso","affranto","aforisma","afoso","africano","agave","agente","agevole","aggancio","agire","agitare","agonismo","agricolo","agrumeto","aguzzo","alabarda","alato","albatro","alberato","albo","albume","alce","alcolico","alettone","alfa","algebra","aliante","alibi","alimento","allagato","allegro","allievo","allodola","allusivo","almeno","alogeno","alpaca","alpestre","altalena","alterno","alticcio","altrove","alunno","alveolo","alzare","amalgama","amanita","amarena","ambito","ambrato","ameba","america","ametista","amico","ammasso","ammenda","ammirare","ammonito","amore","ampio","ampliare","amuleto","anacardo","anagrafe","analista","anarchia","anatra","anca","ancella","ancora","andare","andrea","anello","angelo","angolare","angusto","anima","annegare","annidato","anno","annuncio","anonimo","anticipo","anzi","apatico","apertura","apode","apparire","appetito","appoggio","approdo","appunto","aprile","arabica","arachide","aragosta","araldica","arancio","aratura","arazzo","arbitro","archivio","ardito","arenile","argento","argine","arguto","aria","armonia","arnese","arredato","arringa","arrosto","arsenico","arso","artefice","arzillo","asciutto","ascolto","asepsi","asettico","asfalto","asino","asola","aspirato","aspro","assaggio","asse","assoluto","assurdo","asta","astenuto","astice","astratto","atavico","ateismo","atomico","atono","attesa","attivare","attorno","attrito","attuale","ausilio","austria","autista","autonomo","autunno","avanzato","avere","avvenire","avviso","avvolgere","azione","azoto","azzimo","azzurro","babele","baccano","bacino","baco","badessa","badilata","bagnato","baita","balcone","baldo","balena","ballata","balzano","bambino","bandire","baraonda","barbaro","barca","baritono","barlume","barocco","basilico","basso","batosta","battuto","baule","bava","bavosa","becco","beffa","belgio","belva","benda","benevole","benigno","benzina","bere","berlina","beta","bibita","bici","bidone","bifido","biga","bilancia","bimbo","binocolo","biologo","bipede","bipolare","birbante","birra","biscotto","bisesto","bisnonno","bisonte","bisturi","bizzarro","blando","blatta","bollito","bonifico","bordo","bosco","botanico","bottino","bozzolo","braccio","bradipo","brama","branca","bravura","bretella","brevetto","brezza","briglia","brillante","brindare","broccolo","brodo","bronzina","brullo","bruno","bubbone","buca","budino","buffone","buio","bulbo","buono","burlone","burrasca","bussola","busta","cadetto","caduco","calamaro","calcolo","calesse","calibro","calmo","caloria","cambusa","camerata","camicia","cammino","camola","campale","canapa","candela","cane","canino","canotto","cantina","capace","capello","capitolo","capogiro","cappero","capra","capsula","carapace","carcassa","cardo","carisma","carovana","carretto","cartolina","casaccio","cascata","caserma","caso","cassone","castello","casuale","catasta","catena","catrame","cauto","cavillo","cedibile","cedrata","cefalo","celebre","cellulare","cena","cenone","centesimo","ceramica","cercare","certo","cerume","cervello","cesoia","cespo","ceto","chela","chiaro","chicca","chiedere","chimera","china","chirurgo","chitarra","ciao","ciclismo","cifrare","cigno","cilindro","ciottolo","circa","cirrosi","citrico","cittadino","ciuffo","civetta","civile","classico","clinica","cloro","cocco","codardo","codice","coerente","cognome","collare","colmato","colore","colposo","coltivato","colza","coma","cometa","commando","comodo","computer","comune","conciso","condurre","conferma","congelare","coniuge","connesso","conoscere","consumo","continuo","convegno","coperto","copione","coppia","copricapo","corazza","cordata","coricato","cornice","corolla","corpo","corredo","corsia","cortese","cosmico","costante","cottura","covato","cratere","cravatta","creato","credere","cremoso","crescita","creta","criceto","crinale","crisi","critico","croce","cronaca","crostata","cruciale","crusca","cucire","cuculo","cugino","cullato","cupola","curatore","cursore","curvo","cuscino","custode","dado","daino","dalmata","damerino","daniela","dannoso","danzare","datato","davanti","davvero","debutto","decennio","deciso","declino","decollo","decreto","dedicato","definito","deforme","degno","delegare","delfino","delirio","delta","demenza","denotato","dentro","deposito","derapata","derivare","deroga","descritto","deserto","desiderio","desumere","detersivo","devoto","diametro","dicembre","diedro","difeso","diffuso","digerire","digitale","diluvio","dinamico","dinnanzi","dipinto","diploma","dipolo","diradare","dire","dirotto","dirupo","disagio","discreto","disfare","disgelo","disposto","distanza","disumano","dito","divano","divelto","dividere","divorato","doblone","docente","doganale","dogma","dolce","domato","domenica","dominare","dondolo","dono","dormire","dote","dottore","dovuto","dozzina","drago","druido","dubbio","dubitare","ducale","duna","duomo","duplice","duraturo","ebano","eccesso","ecco","eclissi","economia","edera","edicola","edile","editoria","educare","egemonia","egli","egoismo","egregio","elaborato","elargire","elegante","elencato","eletto","elevare","elfico","elica","elmo","elsa","eluso","emanato","emblema","emesso","emiro","emotivo","emozione","empirico","emulo","endemico","enduro","energia","enfasi","enoteca","entrare","enzima","epatite","epilogo","episodio","epocale","eppure","equatore","erario","erba","erboso","erede","eremita","erigere","ermetico","eroe","erosivo","errante","esagono","esame","esanime","esaudire","esca","esempio","esercito","esibito","esigente","esistere","esito","esofago","esortato","esoso","espanso","espresso","essenza","esso","esteso","estimare","estonia","estroso","esultare","etilico","etnico","etrusco","etto","euclideo","europa","evaso","evidenza","evitato","evoluto","evviva","fabbrica","faccenda","fachiro","falco","famiglia","fanale","fanfara","fango","fantasma","fare","farfalla","farinoso","farmaco","fascia","fastoso","fasullo","faticare","fato","favoloso","febbre","fecola","fede","fegato","felpa","feltro","femmina","fendere","fenomeno","fermento","ferro","fertile","fessura","festivo","fetta","feudo","fiaba","fiducia","fifa","figurato","filo","finanza","finestra","finire","fiore","fiscale","fisico","fiume","flacone","flamenco","flebo","flemma","florido","fluente","fluoro","fobico","focaccia","focoso","foderato","foglio","folata","folclore","folgore","fondente","fonetico","fonia","fontana","forbito","forchetta","foresta","formica","fornaio","foro","fortezza","forzare","fosfato","fosso","fracasso","frana","frassino","fratello","freccetta","frenata","fresco","frigo","frollino","fronde","frugale","frutta","fucilata","fucsia","fuggente","fulmine","fulvo","fumante","fumetto","fumoso","fune","funzione","fuoco","furbo","furgone","furore","fuso","futile","gabbiano","gaffe","galateo","gallina","galoppo","gambero","gamma","garanzia","garbo","garofano","garzone","gasdotto","gasolio","gastrico","gatto","gaudio","gazebo","gazzella","geco","gelatina","gelso","gemello","gemmato","gene","genitore","gennaio","genotipo","gergo","ghepardo","ghiaccio","ghisa","giallo","gilda","ginepro","giocare","gioiello","giorno","giove","girato","girone","gittata","giudizio","giurato","giusto","globulo","glutine","gnomo","gobba","golf","gomito","gommone","gonfio","gonna","governo","gracile","grado","grafico","grammo","grande","grattare","gravoso","grazia","greca","gregge","grifone","grigio","grinza","grotta","gruppo","guadagno","guaio","guanto","guardare","gufo","guidare","ibernato","icona","identico","idillio","idolo","idra","idrico","idrogeno","igiene","ignaro","ignorato","ilare","illeso","illogico","illudere","imballo","imbevuto","imbocco","imbuto","immane","immerso","immolato","impacco","impeto","impiego","importo","impronta","inalare","inarcare","inattivo","incanto","incendio","inchino","incisivo","incluso","incontro","incrocio","incubo","indagine","india","indole","inedito","infatti","infilare","inflitto","ingaggio","ingegno","inglese","ingordo","ingrosso","innesco","inodore","inoltrare","inondato","insano","insetto","insieme","insonnia","insulina","intasato","intero","intonaco","intuito","inumidire","invalido","invece","invito","iperbole","ipnotico","ipotesi","ippica","iride","irlanda","ironico","irrigato","irrorare","isolato","isotopo","isterico","istituto","istrice","italia","iterare","labbro","labirinto","lacca","lacerato","lacrima","lacuna","laddove","lago","lampo","lancetta","lanterna","lardoso","larga","laringe","lastra","latenza","latino","lattuga","lavagna","lavoro","legale","leggero","lembo","lentezza","lenza","leone","lepre","lesivo","lessato","lesto","letterale","leva","levigato","libero","lido","lievito","lilla","limatura","limitare","limpido","lineare","lingua","liquido","lira","lirica","lisca","lite","litigio","livrea","locanda","lode","logica","lombare","londra","longevo","loquace","lorenzo","loto","lotteria","luce","lucidato","lumaca","luminoso","lungo","lupo","luppolo","lusinga","lusso","lutto","macabro","macchina","macero","macinato","madama","magico","maglia","magnete","magro","maiolica","malafede","malgrado","malinteso","malsano","malto","malumore","mana","mancia","mandorla","mangiare","manifesto","mannaro","manovra","mansarda","mantide","manubrio","mappa","maratona","marcire","maretta","marmo","marsupio","maschera","massaia","mastino","materasso","matricola","mattone","maturo","mazurca","meandro","meccanico","mecenate","medesimo","meditare","mega","melassa","melis","melodia","meninge","meno","mensola","mercurio","merenda","merlo","meschino","mese","messere","mestolo","metallo","metodo","mettere","miagolare","mica","micelio","michele","microbo","midollo","miele","migliore","milano","milite","mimosa","minerale","mini","minore","mirino","mirtillo","miscela","missiva","misto","misurare","mitezza","mitigare","mitra","mittente","mnemonico","modello","modifica","modulo","mogano","mogio","mole","molosso","monastero","monco","mondina","monetario","monile","monotono","monsone","montato","monviso","mora","mordere","morsicato","mostro","motivato","motosega","motto","movenza","movimento","mozzo","mucca","mucosa","muffa","mughetto","mugnaio","mulatto","mulinello","multiplo","mummia","munto","muovere","murale","musa","muscolo","musica","mutevole","muto","nababbo","nafta","nanometro","narciso","narice","narrato","nascere","nastrare","naturale","nautica","naviglio","nebulosa","necrosi","negativo","negozio","nemmeno","neofita","neretto","nervo","nessuno","nettuno","neutrale","neve","nevrotico","nicchia","ninfa","nitido","nobile","nocivo","nodo","nome","nomina","nordico","normale","norvegese","nostrano","notare","notizia","notturno","novella","nucleo","nulla","numero","nuovo","nutrire","nuvola","nuziale","oasi","obbedire","obbligo","obelisco","oblio","obolo","obsoleto","occasione","occhio","occidente","occorrere","occultare","ocra","oculato","odierno","odorare","offerta","offrire","offuscato","oggetto","oggi","ognuno","olandese","olfatto","oliato","oliva","ologramma","oltre","omaggio","ombelico","ombra","omega","omissione","ondoso","onere","onice","onnivoro","onorevole","onta","operato","opinione","opposto","oracolo","orafo","ordine","orecchino","orefice","orfano","organico","origine","orizzonte","orma","ormeggio","ornativo","orologio","orrendo","orribile","ortensia","ortica","orzata","orzo","osare","oscurare","osmosi","ospedale","ospite","ossa","ossidare","ostacolo","oste","otite","otre","ottagono","ottimo","ottobre","ovale","ovest","ovino","oviparo","ovocito","ovunque","ovviare","ozio","pacchetto","pace","pacifico","padella","padrone","paese","paga","pagina","palazzina","palesare","pallido","palo","palude","pandoro","pannello","paolo","paonazzo","paprica","parabola","parcella","parere","pargolo","pari","parlato","parola","partire","parvenza","parziale","passivo","pasticca","patacca","patologia","pattume","pavone","peccato","pedalare","pedonale","peggio","peloso","penare","pendice","penisola","pennuto","penombra","pensare","pentola","pepe","pepita","perbene","percorso","perdonato","perforare","pergamena","periodo","permesso","perno","perplesso","persuaso","pertugio","pervaso","pesatore","pesista","peso","pestifero","petalo","pettine","petulante","pezzo","piacere","pianta","piattino","piccino","picozza","piega","pietra","piffero","pigiama","pigolio","pigro","pila","pilifero","pillola","pilota","pimpante","pineta","pinna","pinolo","pioggia","piombo","piramide","piretico","pirite","pirolisi","pitone","pizzico","placebo","planare","plasma","platano","plenario","pochezza","poderoso","podismo","poesia","poggiare","polenta","poligono","pollice","polmonite","polpetta","polso","poltrona","polvere","pomice","pomodoro","ponte","popoloso","porfido","poroso","porpora","porre","portata","posa","positivo","possesso","postulato","potassio","potere","pranzo","prassi","pratica","precluso","predica","prefisso","pregiato","prelievo","premere","prenotare","preparato","presenza","pretesto","prevalso","prima","principe","privato","problema","procura","produrre","profumo","progetto","prolunga","promessa","pronome","proposta","proroga","proteso","prova","prudente","prugna","prurito","psiche","pubblico","pudica","pugilato","pugno","pulce","pulito","pulsante","puntare","pupazzo","pupilla","puro","quadro","qualcosa","quasi","querela","quota","raccolto","raddoppio","radicale","radunato","raffica","ragazzo","ragione","ragno","ramarro","ramingo","ramo","randagio","rantolare","rapato","rapina","rappreso","rasatura","raschiato","rasente","rassegna","rastrello","rata","ravveduto","reale","recepire","recinto","recluta","recondito","recupero","reddito","redimere","regalato","registro","regola","regresso","relazione","remare","remoto","renna","replica","reprimere","reputare","resa","residente","responso","restauro","rete","retina","retorica","rettifica","revocato","riassunto","ribadire","ribelle","ribrezzo","ricarica","ricco","ricevere","riciclato","ricordo","ricreduto","ridicolo","ridurre","rifasare","riflesso","riforma","rifugio","rigare","rigettato","righello","rilassato","rilevato","rimanere","rimbalzo","rimedio","rimorchio","rinascita","rincaro","rinforzo","rinnovo","rinomato","rinsavito","rintocco","rinuncia","rinvenire","riparato","ripetuto","ripieno","riportare","ripresa","ripulire","risata","rischio","riserva","risibile","riso","rispetto","ristoro","risultato","risvolto","ritardo","ritegno","ritmico","ritrovo","riunione","riva","riverso","rivincita","rivolto","rizoma","roba","robotico","robusto","roccia","roco","rodaggio","rodere","roditore","rogito","rollio","romantico","rompere","ronzio","rosolare","rospo","rotante","rotondo","rotula","rovescio","rubizzo","rubrica","ruga","rullino","rumine","rumoroso","ruolo","rupe","russare","rustico","sabato","sabbiare","sabotato","sagoma","salasso","saldatura","salgemma","salivare","salmone","salone","saltare","saluto","salvo","sapere","sapido","saporito","saraceno","sarcasmo","sarto","sassoso","satellite","satira","satollo","saturno","savana","savio","saziato","sbadiglio","sbalzo","sbancato","sbarra","sbattere","sbavare","sbendare","sbirciare","sbloccato","sbocciato","sbrinare","sbruffone","sbuffare","scabroso","scadenza","scala","scambiare","scandalo","scapola","scarso","scatenare","scavato","scelto","scenico","scettro","scheda","schiena","sciarpa","scienza","scindere","scippo","sciroppo","scivolo","sclerare","scodella","scolpito","scomparto","sconforto","scoprire","scorta","scossone","scozzese","scriba","scrollare","scrutinio","scuderia","scultore","scuola","scuro","scusare","sdebitare","sdoganare","seccatura","secondo","sedano","seggiola","segnalato","segregato","seguito","selciato","selettivo","sella","selvaggio","semaforo","sembrare","seme","seminato","sempre","senso","sentire","sepolto","sequenza","serata","serbato","sereno","serio","serpente","serraglio","servire","sestina","setola","settimana","sfacelo","sfaldare","sfamato","sfarzoso","sfaticato","sfera","sfida","sfilato","sfinge","sfocato","sfoderare","sfogo","sfoltire","sforzato","sfratto","sfruttato","sfuggito","sfumare","sfuso","sgabello","sgarbato","sgonfiare","sgorbio","sgrassato","sguardo","sibilo","siccome","sierra","sigla","signore","silenzio","sillaba","simbolo","simpatico","simulato","sinfonia","singolo","sinistro","sino","sintesi","sinusoide","sipario","sisma","sistole","situato","slitta","slogatura","sloveno","smarrito","smemorato","smentito","smeraldo","smilzo","smontare","smottato","smussato","snellire","snervato","snodo","sobbalzo","sobrio","soccorso","sociale","sodale","soffitto","sogno","soldato","solenne","solido","sollazzo","solo","solubile","solvente","somatico","somma","sonda","sonetto","sonnifero","sopire","soppeso","sopra","sorgere","sorpasso","sorriso","sorso","sorteggio","sorvolato","sospiro","sosta","sottile","spada","spalla","spargere","spatola","spavento","spazzola","specie","spedire","spegnere","spelatura","speranza","spessore","spettrale","spezzato","spia","spigoloso","spillato","spinoso","spirale","splendido","sportivo","sposo","spranga","sprecare","spronato","spruzzo","spuntino","squillo","sradicare","srotolato","stabile","stacco","staffa","stagnare","stampato","stantio","starnuto","stasera","statuto","stelo","steppa","sterzo","stiletto","stima","stirpe","stivale","stizzoso","stonato","storico","strappo","stregato","stridulo","strozzare","strutto","stuccare","stufo","stupendo","subentro","succoso","sudore","suggerito","sugo","sultano","suonare","superbo","supporto","surgelato","surrogato","sussurro","sutura","svagare","svedese","sveglio","svelare","svenuto","svezia","sviluppo","svista","svizzera","svolta","svuotare","tabacco","tabulato","tacciare","taciturno","tale","talismano","tampone","tannino","tara","tardivo","targato","tariffa","tarpare","tartaruga","tasto","tattico","taverna","tavolata","tazza","teca","tecnico","telefono","temerario","tempo","temuto","tendone","tenero","tensione","tentacolo","teorema","terme","terrazzo","terzetto","tesi","tesserato","testato","tetro","tettoia","tifare","tigella","timbro","tinto","tipico","tipografo","tiraggio","tiro","titanio","titolo","titubante","tizio","tizzone","toccare","tollerare","tolto","tombola","tomo","tonfo","tonsilla","topazio","topologia","toppa","torba","tornare","torrone","tortora","toscano","tossire","tostatura","totano","trabocco","trachea","trafila","tragedia","tralcio","tramonto","transito","trapano","trarre","trasloco","trattato","trave","treccia","tremolio","trespolo","tributo","tricheco","trifoglio","trillo","trincea","trio","tristezza","triturato","trivella","tromba","trono","troppo","trottola","trovare","truccato","tubatura","tuffato","tulipano","tumulto","tunisia","turbare","turchino","tuta","tutela","ubicato","uccello","uccisore","udire","uditivo","uffa","ufficio","uguale","ulisse","ultimato","umano","umile","umorismo","uncinetto","ungere","ungherese","unicorno","unificato","unisono","unitario","unte","uovo","upupa","uragano","urgenza","urlo","usanza","usato","uscito","usignolo","usuraio","utensile","utilizzo","utopia","vacante","vaccinato","vagabondo","vagliato","valanga","valgo","valico","valletta","valoroso","valutare","valvola","vampata","vangare","vanitoso","vano","vantaggio","vanvera","vapore","varano","varcato","variante","vasca","vedetta","vedova","veduto","vegetale","veicolo","velcro","velina","velluto","veloce","venato","vendemmia","vento","verace","verbale","vergogna","verifica","vero","verruca","verticale","vescica","vessillo","vestale","veterano","vetrina","vetusto","viandante","vibrante","vicenda","vichingo","vicinanza","vidimare","vigilia","vigneto","vigore","vile","villano","vimini","vincitore","viola","vipera","virgola","virologo","virulento","viscoso","visione","vispo","vissuto","visura","vita","vitello","vittima","vivanda","vivido","viziare","voce","voga","volatile","volere","volpe","voragine","vulcano","zampogna","zanna","zappato","zattera","zavorra","zefiro","zelante","zelo","zenzero","zerbino","zibetto","zinco","zircone","zitto","zolla","zotico","zucchero","zufolo","zulu","zuppa"]'),k9=JSON.parse('["abaco","abdomen","abeja","abierto","abogado","abono","aborto","abrazo","abrir","abuelo","abuso","acabar","academia","acceso","accion","aceite","acelga","acento","aceptar","acido","aclarar","acne","acoger","acoso","activo","acto","actriz","actuar","acudir","acuerdo","acusar","adicto","admitir","adoptar","adorno","aduana","adulto","aereo","afectar","aficion","afinar","afirmar","agil","agitar","agonia","agosto","agotar","agregar","agrio","agua","agudo","aguila","aguja","ahogo","ahorro","aire","aislar","ajedrez","ajeno","ajuste","alacran","alambre","alarma","alba","album","alcalde","aldea","alegre","alejar","alerta","aleta","alfiler","alga","algodon","aliado","aliento","alivio","alma","almeja","almibar","altar","alteza","altivo","alto","altura","alumno","alzar","amable","amante","amapola","amargo","amasar","ambar","ambito","ameno","amigo","amistad","amor","amparo","amplio","ancho","anciano","ancla","andar","anden","anemia","angulo","anillo","animo","anis","anotar","antena","antiguo","antojo","anual","anular","anuncio","anadir","anejo","ano","apagar","aparato","apetito","apio","aplicar","apodo","aporte","apoyo","aprender","aprobar","apuesta","apuro","arado","arana","arar","arbitro","arbol","arbusto","archivo","arco","arder","ardilla","arduo","area","arido","aries","armonia","arnes","aroma","arpa","arpon","arreglo","arroz","arruga","arte","artista","asa","asado","asalto","ascenso","asegurar","aseo","asesor","asiento","asilo","asistir","asno","asombro","aspero","astilla","astro","astuto","asumir","asunto","atajo","ataque","atar","atento","ateo","atico","atleta","atomo","atraer","atroz","atun","audaz","audio","auge","aula","aumento","ausente","autor","aval","avance","avaro","ave","avellana","avena","avestruz","avion","aviso","ayer","ayuda","ayuno","azafran","azar","azote","azucar","azufre","azul","baba","babor","bache","bahia","baile","bajar","balanza","balcon","balde","bambu","banco","banda","bano","barba","barco","barniz","barro","bascula","baston","basura","batalla","bateria","batir","batuta","baul","bazar","bebe","bebida","bello","besar","beso","bestia","bicho","bien","bingo","blanco","bloque","blusa","boa","bobina","bobo","boca","bocina","boda","bodega","boina","bola","bolero","bolsa","bomba","bondad","bonito","bono","bonsai","borde","borrar","bosque","bote","botin","boveda","bozal","bravo","brazo","brecha","breve","brillo","brinco","brisa","broca","broma","bronce","brote","bruja","brusco","bruto","buceo","bucle","bueno","buey","bufanda","bufon","buho","buitre","bulto","burbuja","burla","burro","buscar","butaca","buzon","caballo","cabeza","cabina","cabra","cacao","cadaver","cadena","caer","cafe","caida","caiman","caja","cajon","cal","calamar","calcio","caldo","calidad","calle","calma","calor","calvo","cama","cambio","camello","camino","campo","cancer","candil","canela","canguro","canica","canto","cana","canon","caoba","caos","capaz","capitan","capote","captar","capucha","cara","carbon","carcel","careta","carga","carino","carne","carpeta","carro","carta","casa","casco","casero","caspa","castor","catorce","catre","caudal","causa","cazo","cebolla","ceder","cedro","celda","celebre","celoso","celula","cemento","ceniza","centro","cerca","cerdo","cereza","cero","cerrar","certeza","cesped","cetro","chacal","chaleco","champu","chancla","chapa","charla","chico","chiste","chivo","choque","choza","chuleta","chupar","ciclon","ciego","cielo","cien","cierto","cifra","cigarro","cima","cinco","cine","cinta","cipres","circo","ciruela","cisne","cita","ciudad","clamor","clan","claro","clase","clave","cliente","clima","clinica","cobre","coccion","cochino","cocina","coco","codigo","codo","cofre","coger","cohete","cojin","cojo","cola","colcha","colegio","colgar","colina","collar","colmo","columna","combate","comer","comida","comodo","compra","conde","conejo","conga","conocer","consejo","contar","copa","copia","corazon","corbata","corcho","cordon","corona","correr","coser","cosmos","costa","craneo","crater","crear","crecer","creido","crema","cria","crimen","cripta","crisis","cromo","cronica","croqueta","crudo","cruz","cuadro","cuarto","cuatro","cubo","cubrir","cuchara","cuello","cuento","cuerda","cuesta","cueva","cuidar","culebra","culpa","culto","cumbre","cumplir","cuna","cuneta","cuota","cupon","cupula","curar","curioso","curso","curva","cutis","dama","danza","dar","dardo","datil","deber","debil","decada","decir","dedo","defensa","definir","dejar","delfin","delgado","delito","demora","denso","dental","deporte","derecho","derrota","desayuno","deseo","desfile","desnudo","destino","desvio","detalle","detener","deuda","dia","diablo","diadema","diamante","diana","diario","dibujo","dictar","diente","dieta","diez","dificil","digno","dilema","diluir","dinero","directo","dirigir","disco","diseno","disfraz","diva","divino","doble","doce","dolor","domingo","don","donar","dorado","dormir","dorso","dos","dosis","dragon","droga","ducha","duda","duelo","dueno","dulce","duo","duque","durar","dureza","duro","ebano","ebrio","echar","eco","ecuador","edad","edicion","edificio","editor","educar","efecto","eficaz","eje","ejemplo","elefante","elegir","elemento","elevar","elipse","elite","elixir","elogio","eludir","embudo","emitir","emocion","empate","empeno","empleo","empresa","enano","encargo","enchufe","encia","enemigo","enero","enfado","enfermo","engano","enigma","enlace","enorme","enredo","ensayo","ensenar","entero","entrar","envase","envio","epoca","equipo","erizo","escala","escena","escolar","escribir","escudo","esencia","esfera","esfuerzo","espada","espejo","espia","esposa","espuma","esqui","estar","este","estilo","estufa","etapa","eterno","etica","etnia","evadir","evaluar","evento","evitar","exacto","examen","exceso","excusa","exento","exigir","exilio","existir","exito","experto","explicar","exponer","extremo","fabrica","fabula","fachada","facil","factor","faena","faja","falda","fallo","falso","faltar","fama","familia","famoso","faraon","farmacia","farol","farsa","fase","fatiga","fauna","favor","fax","febrero","fecha","feliz","feo","feria","feroz","fertil","fervor","festin","fiable","fianza","fiar","fibra","ficcion","ficha","fideo","fiebre","fiel","fiera","fiesta","figura","fijar","fijo","fila","filete","filial","filtro","fin","finca","fingir","finito","firma","flaco","flauta","flecha","flor","flota","fluir","flujo","fluor","fobia","foca","fogata","fogon","folio","folleto","fondo","forma","forro","fortuna","forzar","fosa","foto","fracaso","fragil","franja","frase","fraude","freir","freno","fresa","frio","frito","fruta","fuego","fuente","fuerza","fuga","fumar","funcion","funda","furgon","furia","fusil","futbol","futuro","gacela","gafas","gaita","gajo","gala","galeria","gallo","gamba","ganar","gancho","ganga","ganso","garaje","garza","gasolina","gastar","gato","gavilan","gemelo","gemir","gen","genero","genio","gente","geranio","gerente","germen","gesto","gigante","gimnasio","girar","giro","glaciar","globo","gloria","gol","golfo","goloso","golpe","goma","gordo","gorila","gorra","gota","goteo","gozar","grada","grafico","grano","grasa","gratis","grave","grieta","grillo","gripe","gris","grito","grosor","grua","grueso","grumo","grupo","guante","guapo","guardia","guerra","guia","guino","guion","guiso","guitarra","gusano","gustar","haber","habil","hablar","hacer","hacha","hada","hallar","hamaca","harina","haz","hazana","hebilla","hebra","hecho","helado","helio","hembra","herir","hermano","heroe","hervir","hielo","hierro","higado","higiene","hijo","himno","historia","hocico","hogar","hoguera","hoja","hombre","hongo","honor","honra","hora","hormiga","horno","hostil","hoyo","hueco","huelga","huerta","hueso","huevo","huida","huir","humano","humedo","humilde","humo","hundir","huracan","hurto","icono","ideal","idioma","idolo","iglesia","iglu","igual","ilegal","ilusion","imagen","iman","imitar","impar","imperio","imponer","impulso","incapaz","indice","inerte","infiel","informe","ingenio","inicio","inmenso","inmune","innato","insecto","instante","interes","intimo","intuir","inutil","invierno","ira","iris","ironia","isla","islote","jabali","jabon","jamon","jarabe","jardin","jarra","jaula","jazmin","jefe","jeringa","jinete","jornada","joroba","joven","joya","juerga","jueves","juez","jugador","jugo","juguete","juicio","junco","jungla","junio","juntar","jupiter","jurar","justo","juvenil","juzgar","kilo","koala","labio","lacio","lacra","lado","ladron","lagarto","lagrima","laguna","laico","lamer","lamina","lampara","lana","lancha","langosta","lanza","lapiz","largo","larva","lastima","lata","latex","latir","laurel","lavar","lazo","leal","leccion","leche","lector","leer","legion","legumbre","lejano","lengua","lento","lena","leon","leopardo","lesion","letal","letra","leve","leyenda","libertad","libro","licor","lider","lidiar","lienzo","liga","ligero","lima","limite","limon","limpio","lince","lindo","linea","lingote","lino","linterna","liquido","liso","lista","litera","litio","litro","llaga","llama","llanto","llave","llegar","llenar","llevar","llorar","llover","lluvia","lobo","locion","loco","locura","logica","logro","lombriz","lomo","lonja","lote","lucha","lucir","lugar","lujo","luna","lunes","lupa","lustro","luto","luz","maceta","macho","madera","madre","maduro","maestro","mafia","magia","mago","maiz","maldad","maleta","malla","malo","mama","mambo","mamut","manco","mando","manejar","manga","maniqui","manjar","mano","manso","manta","manana","mapa","maquina","mar","marco","marea","marfil","margen","marido","marmol","marron","martes","marzo","masa","mascara","masivo","matar","materia","matiz","matriz","maximo","mayor","mazorca","mecha","medalla","medio","medula","mejilla","mejor","melena","melon","memoria","menor","mensaje","mente","menu","mercado","merengue","merito","mes","meson","meta","meter","metodo","metro","mezcla","miedo","miel","miembro","miga","mil","milagro","militar","millon","mimo","mina","minero","minimo","minuto","miope","mirar","misa","miseria","misil","mismo","mitad","mito","mochila","mocion","moda","modelo","moho","mojar","molde","moler","molino","momento","momia","monarca","moneda","monja","monto","mono","morada","morder","moreno","morir","morro","morsa","mortal","mosca","mostrar","motivo","mover","movil","mozo","mucho","mudar","mueble","muela","muerte","muestra","mugre","mujer","mula","muleta","multa","mundo","muneca","mural","muro","musculo","museo","musgo","musica","muslo","nacar","nacion","nadar","naipe","naranja","nariz","narrar","nasal","natal","nativo","natural","nausea","naval","nave","navidad","necio","nectar","negar","negocio","negro","neon","nervio","neto","neutro","nevar","nevera","nicho","nido","niebla","nieto","ninez","nino","nitido","nivel","nobleza","noche","nomina","noria","norma","norte","nota","noticia","novato","novela","novio","nube","nuca","nucleo","nudillo","nudo","nuera","nueve","nuez","nulo","numero","nutria","oasis","obeso","obispo","objeto","obra","obrero","observar","obtener","obvio","oca","ocaso","oceano","ochenta","ocho","ocio","ocre","octavo","octubre","oculto","ocupar","ocurrir","odiar","odio","odisea","oeste","ofensa","oferta","oficio","ofrecer","ogro","oido","oir","ojo","ola","oleada","olfato","olivo","olla","olmo","olor","olvido","ombligo","onda","onza","opaco","opcion","opera","opinar","oponer","optar","optica","opuesto","oracion","orador","oral","orbita","orca","orden","oreja","organo","orgia","orgullo","oriente","origen","orilla","oro","orquesta","oruga","osadia","oscuro","osezno","oso","ostra","otono","otro","oveja","ovulo","oxido","oxigeno","oyente","ozono","pacto","padre","paella","pagina","pago","pais","pajaro","palabra","palco","paleta","palido","palma","paloma","palpar","pan","panal","panico","pantera","panuelo","papa","papel","papilla","paquete","parar","parcela","pared","parir","paro","parpado","parque","parrafo","parte","pasar","paseo","pasion","paso","pasta","pata","patio","patria","pausa","pauta","pavo","payaso","peaton","pecado","pecera","pecho","pedal","pedir","pegar","peine","pelar","peldano","pelea","peligro","pellejo","pelo","peluca","pena","pensar","penon","peon","peor","pepino","pequeno","pera","percha","perder","pereza","perfil","perico","perla","permiso","perro","persona","pesa","pesca","pesimo","pestana","petalo","petroleo","pez","pezuna","picar","pichon","pie","piedra","pierna","pieza","pijama","pilar","piloto","pimienta","pino","pintor","pinza","pina","piojo","pipa","pirata","pisar","piscina","piso","pista","piton","pizca","placa","plan","plata","playa","plaza","pleito","pleno","plomo","pluma","plural","pobre","poco","poder","podio","poema","poesia","poeta","polen","policia","pollo","polvo","pomada","pomelo","pomo","pompa","poner","porcion","portal","posada","poseer","posible","poste","potencia","potro","pozo","prado","precoz","pregunta","premio","prensa","preso","previo","primo","principe","prision","privar","proa","probar","proceso","producto","proeza","profesor","programa","prole","promesa","pronto","propio","proximo","prueba","publico","puchero","pudor","pueblo","puerta","puesto","pulga","pulir","pulmon","pulpo","pulso","puma","punto","punal","puno","pupa","pupila","pure","quedar","queja","quemar","querer","queso","quieto","quimica","quince","quitar","rabano","rabia","rabo","racion","radical","raiz","rama","rampa","rancho","rango","rapaz","rapido","rapto","rasgo","raspa","rato","rayo","raza","razon","reaccion","realidad","rebano","rebote","recaer","receta","rechazo","recoger","recreo","recto","recurso","red","redondo","reducir","reflejo","reforma","refran","refugio","regalo","regir","regla","regreso","rehen","reino","reir","reja","relato","relevo","relieve","relleno","reloj","remar","remedio","remo","rencor","rendir","renta","reparto","repetir","reposo","reptil","res","rescate","resina","respeto","resto","resumen","retiro","retorno","retrato","reunir","reves","revista","rey","rezar","rico","riego","rienda","riesgo","rifa","rigido","rigor","rincon","rinon","rio","riqueza","risa","ritmo","rito","rizo","roble","roce","rociar","rodar","rodeo","rodilla","roer","rojizo","rojo","romero","romper","ron","ronco","ronda","ropa","ropero","rosa","rosca","rostro","rotar","rubi","rubor","rudo","rueda","rugir","ruido","ruina","ruleta","rulo","rumbo","rumor","ruptura","ruta","rutina","sabado","saber","sabio","sable","sacar","sagaz","sagrado","sala","saldo","salero","salir","salmon","salon","salsa","salto","salud","salvar","samba","sancion","sandia","sanear","sangre","sanidad","sano","santo","sapo","saque","sardina","sarten","sastre","satan","sauna","saxofon","seccion","seco","secreto","secta","sed","seguir","seis","sello","selva","semana","semilla","senda","sensor","senal","senor","separar","sepia","sequia","ser","serie","sermon","servir","sesenta","sesion","seta","setenta","severo","sexo","sexto","sidra","siesta","siete","siglo","signo","silaba","silbar","silencio","silla","simbolo","simio","sirena","sistema","sitio","situar","sobre","socio","sodio","sol","solapa","soldado","soledad","solido","soltar","solucion","sombra","sondeo","sonido","sonoro","sonrisa","sopa","soplar","soporte","sordo","sorpresa","sorteo","sosten","sotano","suave","subir","suceso","sudor","suegra","suelo","sueno","suerte","sufrir","sujeto","sultan","sumar","superar","suplir","suponer","supremo","sur","surco","sureno","surgir","susto","sutil","tabaco","tabique","tabla","tabu","taco","tacto","tajo","talar","talco","talento","talla","talon","tamano","tambor","tango","tanque","tapa","tapete","tapia","tapon","taquilla","tarde","tarea","tarifa","tarjeta","tarot","tarro","tarta","tatuaje","tauro","taza","tazon","teatro","techo","tecla","tecnica","tejado","tejer","tejido","tela","telefono","tema","temor","templo","tenaz","tender","tener","tenis","tenso","teoria","terapia","terco","termino","ternura","terror","tesis","tesoro","testigo","tetera","texto","tez","tibio","tiburon","tiempo","tienda","tierra","tieso","tigre","tijera","tilde","timbre","timido","timo","tinta","tio","tipico","tipo","tira","tiron","titan","titere","titulo","tiza","toalla","tobillo","tocar","tocino","todo","toga","toldo","tomar","tono","tonto","topar","tope","toque","torax","torero","tormenta","torneo","toro","torpedo","torre","torso","tortuga","tos","tosco","toser","toxico","trabajo","tractor","traer","trafico","trago","traje","tramo","trance","trato","trauma","trazar","trebol","tregua","treinta","tren","trepar","tres","tribu","trigo","tripa","triste","triunfo","trofeo","trompa","tronco","tropa","trote","trozo","truco","trueno","trufa","tuberia","tubo","tuerto","tumba","tumor","tunel","tunica","turbina","turismo","turno","tutor","ubicar","ulcera","umbral","unidad","unir","universo","uno","untar","una","urbano","urbe","urgente","urna","usar","usuario","util","utopia","uva","vaca","vacio","vacuna","vagar","vago","vaina","vajilla","vale","valido","valle","valor","valvula","vampiro","vara","variar","varon","vaso","vecino","vector","vehiculo","veinte","vejez","vela","velero","veloz","vena","vencer","venda","veneno","vengar","venir","venta","venus","ver","verano","verbo","verde","vereda","verja","verso","verter","via","viaje","vibrar","vicio","victima","vida","video","vidrio","viejo","viernes","vigor","vil","villa","vinagre","vino","vinedo","violin","viral","virgo","virtud","visor","vispera","vista","vitamina","viudo","vivaz","vivero","vivir","vivo","volcan","volumen","volver","voraz","votar","voto","voz","vuelo","vulgar","yacer","yate","yegua","yema","yerno","yeso","yodo","yoga","yogur","zafiro","zanja","zapato","zarza","zona","zorro","zumo","zurdo"]'),I9=JSON.parse('["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]'),_9=JSON.parse('["abacate","abaixo","abalar","abater","abduzir","abelha","aberto","abismo","abotoar","abranger","abreviar","abrigar","abrupto","absinto","absoluto","absurdo","abutre","acabado","acalmar","acampar","acanhar","acaso","aceitar","acelerar","acenar","acervo","acessar","acetona","achatar","acidez","acima","acionado","acirrar","aclamar","aclive","acolhida","acomodar","acoplar","acordar","acumular","acusador","adaptar","adega","adentro","adepto","adequar","aderente","adesivo","adeus","adiante","aditivo","adjetivo","adjunto","admirar","adorar","adquirir","adubo","adverso","advogado","aeronave","afastar","aferir","afetivo","afinador","afivelar","aflito","afluente","afrontar","agachar","agarrar","agasalho","agenciar","agilizar","agiota","agitado","agora","agradar","agreste","agrupar","aguardar","agulha","ajoelhar","ajudar","ajustar","alameda","alarme","alastrar","alavanca","albergue","albino","alcatra","aldeia","alecrim","alegria","alertar","alface","alfinete","algum","alheio","aliar","alicate","alienar","alinhar","aliviar","almofada","alocar","alpiste","alterar","altitude","alucinar","alugar","aluno","alusivo","alvo","amaciar","amador","amarelo","amassar","ambas","ambiente","ameixa","amenizar","amido","amistoso","amizade","amolador","amontoar","amoroso","amostra","amparar","ampliar","ampola","anagrama","analisar","anarquia","anatomia","andaime","anel","anexo","angular","animar","anjo","anomalia","anotado","ansioso","anterior","anuidade","anunciar","anzol","apagador","apalpar","apanhado","apego","apelido","apertada","apesar","apetite","apito","aplauso","aplicada","apoio","apontar","aposta","aprendiz","aprovar","aquecer","arame","aranha","arara","arcada","ardente","areia","arejar","arenito","aresta","argiloso","argola","arma","arquivo","arraial","arrebate","arriscar","arroba","arrumar","arsenal","arterial","artigo","arvoredo","asfaltar","asilado","aspirar","assador","assinar","assoalho","assunto","astral","atacado","atadura","atalho","atarefar","atear","atender","aterro","ateu","atingir","atirador","ativo","atoleiro","atracar","atrevido","atriz","atual","atum","auditor","aumentar","aura","aurora","autismo","autoria","autuar","avaliar","avante","avaria","avental","avesso","aviador","avisar","avulso","axila","azarar","azedo","azeite","azulejo","babar","babosa","bacalhau","bacharel","bacia","bagagem","baiano","bailar","baioneta","bairro","baixista","bajular","baleia","baliza","balsa","banal","bandeira","banho","banir","banquete","barato","barbado","baronesa","barraca","barulho","baseado","bastante","batata","batedor","batida","batom","batucar","baunilha","beber","beijo","beirada","beisebol","beldade","beleza","belga","beliscar","bendito","bengala","benzer","berimbau","berlinda","berro","besouro","bexiga","bezerro","bico","bicudo","bienal","bifocal","bifurcar","bigorna","bilhete","bimestre","bimotor","biologia","biombo","biosfera","bipolar","birrento","biscoito","bisneto","bispo","bissexto","bitola","bizarro","blindado","bloco","bloquear","boato","bobagem","bocado","bocejo","bochecha","boicotar","bolada","boletim","bolha","bolo","bombeiro","bonde","boneco","bonita","borbulha","borda","boreal","borracha","bovino","boxeador","branco","brasa","braveza","breu","briga","brilho","brincar","broa","brochura","bronzear","broto","bruxo","bucha","budismo","bufar","bule","buraco","busca","busto","buzina","cabana","cabelo","cabide","cabo","cabrito","cacau","cacetada","cachorro","cacique","cadastro","cadeado","cafezal","caiaque","caipira","caixote","cajado","caju","calafrio","calcular","caldeira","calibrar","calmante","calota","camada","cambista","camisa","camomila","campanha","camuflar","canavial","cancelar","caneta","canguru","canhoto","canivete","canoa","cansado","cantar","canudo","capacho","capela","capinar","capotar","capricho","captador","capuz","caracol","carbono","cardeal","careca","carimbar","carneiro","carpete","carreira","cartaz","carvalho","casaco","casca","casebre","castelo","casulo","catarata","cativar","caule","causador","cautelar","cavalo","caverna","cebola","cedilha","cegonha","celebrar","celular","cenoura","censo","centeio","cercar","cerrado","certeiro","cerveja","cetim","cevada","chacota","chaleira","chamado","chapada","charme","chatice","chave","chefe","chegada","cheiro","cheque","chicote","chifre","chinelo","chocalho","chover","chumbo","chutar","chuva","cicatriz","ciclone","cidade","cidreira","ciente","cigana","cimento","cinto","cinza","ciranda","circuito","cirurgia","citar","clareza","clero","clicar","clone","clube","coado","coagir","cobaia","cobertor","cobrar","cocada","coelho","coentro","coeso","cogumelo","coibir","coifa","coiote","colar","coleira","colher","colidir","colmeia","colono","coluna","comando","combinar","comentar","comitiva","comover","complexo","comum","concha","condor","conectar","confuso","congelar","conhecer","conjugar","consumir","contrato","convite","cooperar","copeiro","copiador","copo","coquetel","coragem","cordial","corneta","coronha","corporal","correio","cortejo","coruja","corvo","cosseno","costela","cotonete","couro","couve","covil","cozinha","cratera","cravo","creche","credor","creme","crer","crespo","criada","criminal","crioulo","crise","criticar","crosta","crua","cruzeiro","cubano","cueca","cuidado","cujo","culatra","culminar","culpar","cultura","cumprir","cunhado","cupido","curativo","curral","cursar","curto","cuspir","custear","cutelo","damasco","datar","debater","debitar","deboche","debulhar","decalque","decimal","declive","decote","decretar","dedal","dedicado","deduzir","defesa","defumar","degelo","degrau","degustar","deitado","deixar","delator","delegado","delinear","delonga","demanda","demitir","demolido","dentista","depenado","depilar","depois","depressa","depurar","deriva","derramar","desafio","desbotar","descanso","desenho","desfiado","desgaste","desigual","deslize","desmamar","desova","despesa","destaque","desviar","detalhar","detentor","detonar","detrito","deusa","dever","devido","devotado","dezena","diagrama","dialeto","didata","difuso","digitar","dilatado","diluente","diminuir","dinastia","dinheiro","diocese","direto","discreta","disfarce","disparo","disquete","dissipar","distante","ditador","diurno","diverso","divisor","divulgar","dizer","dobrador","dolorido","domador","dominado","donativo","donzela","dormente","dorsal","dosagem","dourado","doutor","drenagem","drible","drogaria","duelar","duende","dueto","duplo","duquesa","durante","duvidoso","eclodir","ecoar","ecologia","edificar","edital","educado","efeito","efetivar","ejetar","elaborar","eleger","eleitor","elenco","elevador","eliminar","elogiar","embargo","embolado","embrulho","embutido","emenda","emergir","emissor","empatia","empenho","empinado","empolgar","emprego","empurrar","emulador","encaixe","encenado","enchente","encontro","endeusar","endossar","enfaixar","enfeite","enfim","engajado","engenho","englobar","engomado","engraxar","enguia","enjoar","enlatar","enquanto","enraizar","enrolado","enrugar","ensaio","enseada","ensino","ensopado","entanto","enteado","entidade","entortar","entrada","entulho","envergar","enviado","envolver","enxame","enxerto","enxofre","enxuto","epiderme","equipar","ereto","erguido","errata","erva","ervilha","esbanjar","esbelto","escama","escola","escrita","escuta","esfinge","esfolar","esfregar","esfumado","esgrima","esmalte","espanto","espelho","espiga","esponja","espreita","espumar","esquerda","estaca","esteira","esticar","estofado","estrela","estudo","esvaziar","etanol","etiqueta","euforia","europeu","evacuar","evaporar","evasivo","eventual","evidente","evoluir","exagero","exalar","examinar","exato","exausto","excesso","excitar","exclamar","executar","exemplo","exibir","exigente","exonerar","expandir","expelir","expirar","explanar","exposto","expresso","expulsar","externo","extinto","extrato","fabricar","fabuloso","faceta","facial","fada","fadiga","faixa","falar","falta","familiar","fandango","fanfarra","fantoche","fardado","farelo","farinha","farofa","farpa","fartura","fatia","fator","favorita","faxina","fazenda","fechado","feijoada","feirante","felino","feminino","fenda","feno","fera","feriado","ferrugem","ferver","festejar","fetal","feudal","fiapo","fibrose","ficar","ficheiro","figurado","fileira","filho","filme","filtrar","firmeza","fisgada","fissura","fita","fivela","fixador","fixo","flacidez","flamingo","flanela","flechada","flora","flutuar","fluxo","focal","focinho","fofocar","fogo","foguete","foice","folgado","folheto","forjar","formiga","forno","forte","fosco","fossa","fragata","fralda","frango","frasco","fraterno","freira","frente","fretar","frieza","friso","fritura","fronha","frustrar","fruteira","fugir","fulano","fuligem","fundar","fungo","funil","furador","furioso","futebol","gabarito","gabinete","gado","gaiato","gaiola","gaivota","galega","galho","galinha","galocha","ganhar","garagem","garfo","gargalo","garimpo","garoupa","garrafa","gasoduto","gasto","gata","gatilho","gaveta","gazela","gelado","geleia","gelo","gemada","gemer","gemido","generoso","gengiva","genial","genoma","genro","geologia","gerador","germinar","gesso","gestor","ginasta","gincana","gingado","girafa","girino","glacial","glicose","global","glorioso","goela","goiaba","golfe","golpear","gordura","gorjeta","gorro","gostoso","goteira","governar","gracejo","gradual","grafite","gralha","grampo","granada","gratuito","graveto","graxa","grego","grelhar","greve","grilo","grisalho","gritaria","grosso","grotesco","grudado","grunhido","gruta","guache","guarani","guaxinim","guerrear","guiar","guincho","guisado","gula","guloso","guru","habitar","harmonia","haste","haver","hectare","herdar","heresia","hesitar","hiato","hibernar","hidratar","hiena","hino","hipismo","hipnose","hipoteca","hoje","holofote","homem","honesto","honrado","hormonal","hospedar","humorado","iate","ideia","idoso","ignorado","igreja","iguana","ileso","ilha","iludido","iluminar","ilustrar","imagem","imediato","imenso","imersivo","iminente","imitador","imortal","impacto","impedir","implante","impor","imprensa","impune","imunizar","inalador","inapto","inativo","incenso","inchar","incidir","incluir","incolor","indeciso","indireto","indutor","ineficaz","inerente","infantil","infestar","infinito","inflamar","informal","infrator","ingerir","inibido","inicial","inimigo","injetar","inocente","inodoro","inovador","inox","inquieto","inscrito","inseto","insistir","inspetor","instalar","insulto","intacto","integral","intimar","intocado","intriga","invasor","inverno","invicto","invocar","iogurte","iraniano","ironizar","irreal","irritado","isca","isento","isolado","isqueiro","italiano","janeiro","jangada","janta","jararaca","jardim","jarro","jasmim","jato","javali","jazida","jejum","joaninha","joelhada","jogador","joia","jornal","jorrar","jovem","juba","judeu","judoca","juiz","julgador","julho","jurado","jurista","juro","justa","labareda","laboral","lacre","lactante","ladrilho","lagarta","lagoa","laje","lamber","lamentar","laminar","lampejo","lanche","lapidar","lapso","laranja","lareira","largura","lasanha","lastro","lateral","latido","lavanda","lavoura","lavrador","laxante","lazer","lealdade","lebre","legado","legendar","legista","leigo","leiloar","leitura","lembrete","leme","lenhador","lentilha","leoa","lesma","leste","letivo","letreiro","levar","leveza","levitar","liberal","libido","liderar","ligar","ligeiro","limitar","limoeiro","limpador","linda","linear","linhagem","liquidez","listagem","lisura","litoral","livro","lixa","lixeira","locador","locutor","lojista","lombo","lona","longe","lontra","lorde","lotado","loteria","loucura","lousa","louvar","luar","lucidez","lucro","luneta","lustre","lutador","luva","macaco","macete","machado","macio","madeira","madrinha","magnata","magreza","maior","mais","malandro","malha","malote","maluco","mamilo","mamoeiro","mamute","manada","mancha","mandato","manequim","manhoso","manivela","manobrar","mansa","manter","manusear","mapeado","maquinar","marcador","maresia","marfim","margem","marinho","marmita","maroto","marquise","marreco","martelo","marujo","mascote","masmorra","massagem","mastigar","matagal","materno","matinal","matutar","maxilar","medalha","medida","medusa","megafone","meiga","melancia","melhor","membro","memorial","menino","menos","mensagem","mental","merecer","mergulho","mesada","mesclar","mesmo","mesquita","mestre","metade","meteoro","metragem","mexer","mexicano","micro","migalha","migrar","milagre","milenar","milhar","mimado","minerar","minhoca","ministro","minoria","miolo","mirante","mirtilo","misturar","mocidade","moderno","modular","moeda","moer","moinho","moita","moldura","moleza","molho","molinete","molusco","montanha","moqueca","morango","morcego","mordomo","morena","mosaico","mosquete","mostarda","motel","motim","moto","motriz","muda","muito","mulata","mulher","multar","mundial","munido","muralha","murcho","muscular","museu","musical","nacional","nadador","naja","namoro","narina","narrado","nascer","nativa","natureza","navalha","navegar","navio","neblina","nebuloso","negativa","negociar","negrito","nervoso","neta","neural","nevasca","nevoeiro","ninar","ninho","nitidez","nivelar","nobreza","noite","noiva","nomear","nominal","nordeste","nortear","notar","noticiar","noturno","novelo","novilho","novo","nublado","nudez","numeral","nupcial","nutrir","nuvem","obcecado","obedecer","objetivo","obrigado","obscuro","obstetra","obter","obturar","ocidente","ocioso","ocorrer","oculista","ocupado","ofegante","ofensiva","oferenda","oficina","ofuscado","ogiva","olaria","oleoso","olhar","oliveira","ombro","omelete","omisso","omitir","ondulado","oneroso","ontem","opcional","operador","oponente","oportuno","oposto","orar","orbitar","ordem","ordinal","orfanato","orgasmo","orgulho","oriental","origem","oriundo","orla","ortodoxo","orvalho","oscilar","ossada","osso","ostentar","otimismo","ousadia","outono","outubro","ouvido","ovelha","ovular","oxidar","oxigenar","pacato","paciente","pacote","pactuar","padaria","padrinho","pagar","pagode","painel","pairar","paisagem","palavra","palestra","palheta","palito","palmada","palpitar","pancada","panela","panfleto","panqueca","pantanal","papagaio","papelada","papiro","parafina","parcial","pardal","parede","partida","pasmo","passado","pastel","patamar","patente","patinar","patrono","paulada","pausar","peculiar","pedalar","pedestre","pediatra","pedra","pegada","peitoral","peixe","pele","pelicano","penca","pendurar","peneira","penhasco","pensador","pente","perceber","perfeito","pergunta","perito","permitir","perna","perplexo","persiana","pertence","peruca","pescado","pesquisa","pessoa","petiscar","piada","picado","piedade","pigmento","pilastra","pilhado","pilotar","pimenta","pincel","pinguim","pinha","pinote","pintar","pioneiro","pipoca","piquete","piranha","pires","pirueta","piscar","pistola","pitanga","pivete","planta","plaqueta","platina","plebeu","plumagem","pluvial","pneu","poda","poeira","poetisa","polegada","policiar","poluente","polvilho","pomar","pomba","ponderar","pontaria","populoso","porta","possuir","postal","pote","poupar","pouso","povoar","praia","prancha","prato","praxe","prece","predador","prefeito","premiar","prensar","preparar","presilha","pretexto","prevenir","prezar","primata","princesa","prisma","privado","processo","produto","profeta","proibido","projeto","prometer","propagar","prosa","protetor","provador","publicar","pudim","pular","pulmonar","pulseira","punhal","punir","pupilo","pureza","puxador","quadra","quantia","quarto","quase","quebrar","queda","queijo","quente","querido","quimono","quina","quiosque","rabanada","rabisco","rachar","racionar","radial","raiar","rainha","raio","raiva","rajada","ralado","ramal","ranger","ranhura","rapadura","rapel","rapidez","raposa","raquete","raridade","rasante","rascunho","rasgar","raspador","rasteira","rasurar","ratazana","ratoeira","realeza","reanimar","reaver","rebaixar","rebelde","rebolar","recado","recente","recheio","recibo","recordar","recrutar","recuar","rede","redimir","redonda","reduzida","reenvio","refinar","refletir","refogar","refresco","refugiar","regalia","regime","regra","reinado","reitor","rejeitar","relativo","remador","remendo","remorso","renovado","reparo","repelir","repleto","repolho","represa","repudiar","requerer","resenha","resfriar","resgatar","residir","resolver","respeito","ressaca","restante","resumir","retalho","reter","retirar","retomada","retratar","revelar","revisor","revolta","riacho","rica","rigidez","rigoroso","rimar","ringue","risada","risco","risonho","robalo","rochedo","rodada","rodeio","rodovia","roedor","roleta","romano","roncar","rosado","roseira","rosto","rota","roteiro","rotina","rotular","rouco","roupa","roxo","rubro","rugido","rugoso","ruivo","rumo","rupestre","russo","sabor","saciar","sacola","sacudir","sadio","safira","saga","sagrada","saibro","salada","saleiro","salgado","saliva","salpicar","salsicha","saltar","salvador","sambar","samurai","sanar","sanfona","sangue","sanidade","sapato","sarda","sargento","sarjeta","saturar","saudade","saxofone","sazonal","secar","secular","seda","sedento","sediado","sedoso","sedutor","segmento","segredo","segundo","seiva","seleto","selvagem","semanal","semente","senador","senhor","sensual","sentado","separado","sereia","seringa","serra","servo","setembro","setor","sigilo","silhueta","silicone","simetria","simpatia","simular","sinal","sincero","singular","sinopse","sintonia","sirene","siri","situado","soberano","sobra","socorro","sogro","soja","solda","soletrar","solteiro","sombrio","sonata","sondar","sonegar","sonhador","sono","soprano","soquete","sorrir","sorteio","sossego","sotaque","soterrar","sovado","sozinho","suavizar","subida","submerso","subsolo","subtrair","sucata","sucesso","suco","sudeste","sufixo","sugador","sugerir","sujeito","sulfato","sumir","suor","superior","suplicar","suposto","suprimir","surdina","surfista","surpresa","surreal","surtir","suspiro","sustento","tabela","tablete","tabuada","tacho","tagarela","talher","talo","talvez","tamanho","tamborim","tampa","tangente","tanto","tapar","tapioca","tardio","tarefa","tarja","tarraxa","tatuagem","taurino","taxativo","taxista","teatral","tecer","tecido","teclado","tedioso","teia","teimar","telefone","telhado","tempero","tenente","tensor","tentar","termal","terno","terreno","tese","tesoura","testado","teto","textura","texugo","tiara","tigela","tijolo","timbrar","timidez","tingido","tinteiro","tiragem","titular","toalha","tocha","tolerar","tolice","tomada","tomilho","tonel","tontura","topete","tora","torcido","torneio","torque","torrada","torto","tostar","touca","toupeira","toxina","trabalho","tracejar","tradutor","trafegar","trajeto","trama","trancar","trapo","traseiro","tratador","travar","treino","tremer","trepidar","trevo","triagem","tribo","triciclo","tridente","trilogia","trindade","triplo","triturar","triunfal","trocar","trombeta","trova","trunfo","truque","tubular","tucano","tudo","tulipa","tupi","turbo","turma","turquesa","tutelar","tutorial","uivar","umbigo","unha","unidade","uniforme","urologia","urso","urtiga","urubu","usado","usina","usufruir","vacina","vadiar","vagaroso","vaidoso","vala","valente","validade","valores","vantagem","vaqueiro","varanda","vareta","varrer","vascular","vasilha","vassoura","vazar","vazio","veado","vedar","vegetar","veicular","veleiro","velhice","veludo","vencedor","vendaval","venerar","ventre","verbal","verdade","vereador","vergonha","vermelho","verniz","versar","vertente","vespa","vestido","vetorial","viaduto","viagem","viajar","viatura","vibrador","videira","vidraria","viela","viga","vigente","vigiar","vigorar","vilarejo","vinco","vinheta","vinil","violeta","virada","virtude","visitar","visto","vitral","viveiro","vizinho","voador","voar","vogal","volante","voleibol","voltagem","volumoso","vontade","vulto","vuvuzela","xadrez","xarope","xeque","xeretar","xerife","xingar","zangado","zarpar","zebu","zelador","zombar","zoologia","zumbido"]'),x9=JSON.parse('["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"]');var c2;function l2(){if(c2)return dr;c2=1,Object.defineProperty(dr,"__esModule",{value:!0});const t={};dr.wordlists=t;let e;dr._default=e;try{dr._default=e=b9,t.czech=e}catch{}try{dr._default=e=w9,t.chinese_simplified=e}catch{}try{dr._default=e=v9,t.chinese_traditional=e}catch{}try{dr._default=e=E9,t.korean=e}catch{}try{dr._default=e=S9,t.french=e}catch{}try{dr._default=e=A9,t.italian=e}catch{}try{dr._default=e=k9,t.spanish=e}catch{}try{dr._default=e=I9,t.japanese=e,t.JA=e}catch{}try{dr._default=e=_9,t.portuguese=e}catch{}try{dr._default=e=x9,t.english=e,t.EN=e}catch{}return dr}var f2;function T9(){if(f2)return qr;f2=1,Object.defineProperty(qr,"__esModule",{value:!0});const t=XA(),e=YA(),r=QA(),n=Qa(),i=l2();let o=i._default;const s="Invalid mnemonic",a="Invalid entropy",l="Invalid mnemonic checksum",f=`A wordlist is required but a default could not be found.
Please pass a 2048 word array explicitly.`;function u(T){return(T||"").normalize("NFKD")}function p(T,C,G){for(;T.length<G;)T=C+T;return T}function y(T){return parseInt(T,2)}function w(T){return T.map(C=>p(C.toString(2),"0",8)).join("")}function A(T){const C=T.length*8/32,G=t.sha256(Uint8Array.from(T));return w(Array.from(G)).slice(0,C)}function S(T){return"mnemonic"+(T||"")}function k(T,C){const G=Uint8Array.from(Pt.from(u(T),"utf8")),U=Uint8Array.from(Pt.from(S(u(C)),"utf8")),P=r.pbkdf2(e.sha512,G,U,{c:2048,dkLen:64});return Pt.from(P)}qr.mnemonicToSeedSync=k;function I(T,C){const G=Uint8Array.from(Pt.from(u(T),"utf8")),U=Uint8Array.from(Pt.from(S(u(C)),"utf8"));return r.pbkdf2Async(e.sha512,G,U,{c:2048,dkLen:64}).then(P=>Pt.from(P))}qr.mnemonicToSeed=I;function N(T,C){if(C=C||o,!C)throw new Error(f);const G=u(T).split(" ");if(G.length%3!==0)throw new Error(s);const U=G.map(ee=>{const _=C.indexOf(ee);if(_===-1)throw new Error(s);return p(_.toString(2),"0",11)}).join(""),P=Math.floor(U.length/33)*32,L=U.slice(0,P),R=U.slice(P),z=L.match(/(.{1,8})/g).map(y);if(z.length<16)throw new Error(a);if(z.length>32)throw new Error(a);if(z.length%4!==0)throw new Error(a);const X=Pt.from(z);if(A(X)!==R)throw new Error(l);return X.toString("hex")}qr.mnemonicToEntropy=N;function B(T,C){if(Pt.isBuffer(T)||(T=Pt.from(T,"hex")),C=C||o,!C)throw new Error(f);if(T.length<16)throw new TypeError(a);if(T.length>32)throw new TypeError(a);if(T.length%4!==0)throw new TypeError(a);const G=w(Array.from(T)),U=A(T),P=(G+U).match(/(.{1,11})/g).map(L=>{const R=y(L);return C[R]});return C[0]===""?P.join(""):P.join(" ")}qr.entropyToMnemonic=B;function V(T,C,G){if(T=T||128,T%32!==0)throw new TypeError(a);return C=C||(U=>Pt.from(n.randomBytes(U))),B(C(T/8),G)}qr.generateMnemonic=V;function W(T,C){try{N(T,C)}catch{return!1}return!0}qr.validateMnemonic=W;function Y(T){const C=i.wordlists[T];if(C)o=C;else throw new Error('Could not find wordlist for language "'+T+'"')}qr.setDefaultWordlist=Y;function H(){if(!o)throw new Error("No Default Wordlist set");return Object.keys(i.wordlists).filter(T=>T==="JA"||T==="EN"?!1:i.wordlists[T].every((C,G)=>C===o[G]))[0]}qr.getDefaultWordlist=H;var ie=l2();return qr.wordlists=ie.wordlists,qr}var ra=T9(),h2={exports:{}},Vu={exports:{}};function B9(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pS={exports:{}},Ht=pS.exports={},Un,Ln;function Ld(){throw new Error("setTimeout has not been defined")}function Rd(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Un=setTimeout:Un=Ld}catch{Un=Ld}try{typeof clearTimeout=="function"?Ln=clearTimeout:Ln=Rd}catch{Ln=Rd}})();function gS(t){if(Un===setTimeout)return setTimeout(t,0);if((Un===Ld||!Un)&&setTimeout)return Un=setTimeout,setTimeout(t,0);try{return Un(t,0)}catch{try{return Un.call(null,t,0)}catch{return Un.call(this,t,0)}}}function P9(t){if(Ln===clearTimeout)return clearTimeout(t);if((Ln===Rd||!Ln)&&clearTimeout)return Ln=clearTimeout,clearTimeout(t);try{return Ln(t)}catch{try{return Ln.call(null,t)}catch{return Ln.call(this,t)}}}var ci=[],ms=!1,ko,pc=-1;function O9(){!ms||!ko||(ms=!1,ko.length?ci=ko.concat(ci):pc=-1,ci.length&&yS())}function yS(){if(!ms){var t=gS(O9);ms=!0;for(var e=ci.length;e;){for(ko=ci,ci=[];++pc<e;)ko&&ko[pc].run();pc=-1,e=ci.length}ko=null,ms=!1,P9(t)}}Ht.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];ci.push(new mS(t,e)),ci.length===1&&!ms&&gS(yS)};function mS(t,e){this.fun=t,this.array=e}mS.prototype.run=function(){this.fun.apply(null,this.array)};Ht.title="browser";Ht.browser=!0;Ht.env={};Ht.argv=[];Ht.version="";Ht.versions={};function di(){}Ht.on=di;Ht.addListener=di;Ht.once=di;Ht.off=di;Ht.removeListener=di;Ht.removeAllListeners=di;Ht.emit=di;Ht.prependListener=di;Ht.prependOnceListener=di;Ht.listeners=function(t){return[]};Ht.binding=function(t){throw new Error("process.binding is not supported")};Ht.cwd=function(){return"/"};Ht.chdir=function(t){throw new Error("process.chdir is not supported")};Ht.umask=function(){return 0};var U9=pS.exports;const _n=B9(U9);var d2={},p2={},g2,y2;function bS(){return y2||(y2=1,g2=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},e=Symbol("test"),r=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var n=42;t[e]=n;for(var i in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(t,e);if(s.value!==n||s.enumerable!==!0)return!1}return!0}),g2}var Xf,m2;function Ml(){if(m2)return Xf;m2=1;var t=bS();return Xf=function(){return t()&&!!Symbol.toStringTag},Xf}var b2,w2;function wS(){return w2||(w2=1,b2=Object),b2}var v2,E2;function L9(){return E2||(E2=1,v2=Error),v2}var S2,A2;function R9(){return A2||(A2=1,S2=EvalError),S2}var k2,I2;function $9(){return I2||(I2=1,k2=RangeError),k2}var _2,x2;function C9(){return x2||(x2=1,_2=ReferenceError),_2}var T2,B2;function vS(){return B2||(B2=1,T2=SyntaxError),T2}var P2,O2;function Fs(){return O2||(O2=1,P2=TypeError),P2}var U2,L2;function N9(){return L2||(L2=1,U2=URIError),U2}var R2,$2;function H9(){return $2||($2=1,R2=Math.abs),R2}var C2,N2;function D9(){return N2||(N2=1,C2=Math.floor),C2}var H2,D2;function z9(){return D2||(D2=1,H2=Math.max),H2}var z2,M2;function M9(){return M2||(M2=1,z2=Math.min),z2}var F2,K2;function F9(){return K2||(K2=1,F2=Math.pow),F2}var j2,V2;function K9(){return V2||(V2=1,j2=Math.round),j2}var W2,q2;function j9(){return q2||(q2=1,W2=Number.isNaN||function(t){return t!==t}),W2}var Yf,G2;function V9(){if(G2)return Yf;G2=1;var t=j9();return Yf=function(e){return t(e)||e===0?e:e<0?-1:1},Yf}var X2,Y2;function W9(){return Y2||(Y2=1,X2=Object.getOwnPropertyDescriptor),X2}var Zf,Z2;function Ks(){if(Z2)return Zf;Z2=1;var t=W9();if(t)try{t([],"length")}catch{t=null}return Zf=t,Zf}var Qf,Q2;function Fl(){if(Q2)return Qf;Q2=1;var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return Qf=t,Qf}var Jf,J2;function q9(){if(J2)return Jf;J2=1;var t=typeof Symbol<"u"&&Symbol,e=bS();return Jf=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},Jf}var e1,t1;function ES(){return t1||(t1=1,e1=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),e1}var eh,r1;function SS(){if(r1)return eh;r1=1;var t=wS();return eh=t.getPrototypeOf||null,eh}var th,n1;function G9(){if(n1)return th;n1=1;var t="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,r=Math.max,n="[object Function]",i=function(a,l){for(var f=[],u=0;u<a.length;u+=1)f[u]=a[u];for(var p=0;p<l.length;p+=1)f[p+a.length]=l[p];return f},o=function(a,l){for(var f=[],u=l,p=0;u<a.length;u+=1,p+=1)f[p]=a[u];return f},s=function(a,l){for(var f="",u=0;u<a.length;u+=1)f+=a[u],u+1<a.length&&(f+=l);return f};return th=function(a){var l=this;if(typeof l!="function"||e.apply(l)!==n)throw new TypeError(t+l);for(var f=o(arguments,1),u,p=function(){if(this instanceof u){var k=l.apply(this,i(f,arguments));return Object(k)===k?k:this}return l.apply(a,i(f,arguments))},y=r(0,l.length-f.length),w=[],A=0;A<y;A++)w[A]="$"+A;if(u=Function("binder","return function ("+s(w,",")+"){ return binder.apply(this,arguments); }")(p),l.prototype){var S=function(){};S.prototype=l.prototype,u.prototype=new S,S.prototype=null}return u},th}var rh,i1;function lu(){if(i1)return rh;i1=1;var t=G9();return rh=Function.prototype.bind||t,rh}var o1,s1;function qp(){return s1||(s1=1,o1=Function.prototype.call),o1}var a1,u1;function Gp(){return u1||(u1=1,a1=Function.prototype.apply),a1}var c1,l1;function X9(){return l1||(l1=1,c1=typeof Reflect<"u"&&Reflect&&Reflect.apply),c1}var nh,f1;function AS(){if(f1)return nh;f1=1;var t=lu(),e=Gp(),r=qp(),n=X9();return nh=n||t.call(r,e),nh}var ih,h1;function Xp(){if(h1)return ih;h1=1;var t=lu(),e=Fs(),r=qp(),n=AS();return ih=function(i){if(i.length<1||typeof i[0]!="function")throw new e("a function is required");return n(t,r,i)},ih}var oh,d1;function Y9(){if(d1)return oh;d1=1;var t=Xp(),e=Ks(),r;try{r=[].__proto__===Array.prototype}catch(s){if(!s||typeof s!="object"||!("code"in s)||s.code!=="ERR_PROTO_ACCESS")throw s}var n=!!r&&e&&e(Object.prototype,"__proto__"),i=Object,o=i.getPrototypeOf;return oh=n&&typeof n.get=="function"?t([n.get]):typeof o=="function"?(function(s){return o(s==null?s:i(s))}):!1,oh}var sh,p1;function Yp(){if(p1)return sh;p1=1;var t=ES(),e=SS(),r=Y9();return sh=t?function(n){return t(n)}:e?function(n){if(!n||typeof n!="object"&&typeof n!="function")throw new TypeError("getProto: not an object");return e(n)}:r?function(n){return r(n)}:null,sh}var ah,g1;function kS(){if(g1)return ah;g1=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,r=lu();return ah=r.call(t,e),ah}var uh,y1;function IS(){if(y1)return uh;y1=1;var t,e=wS(),r=L9(),n=R9(),i=$9(),o=C9(),s=vS(),a=Fs(),l=N9(),f=H9(),u=D9(),p=z9(),y=M9(),w=F9(),A=K9(),S=V9(),k=Function,I=function(le){try{return k('"use strict"; return ('+le+").constructor;")()}catch{}},N=Ks(),B=Fl(),V=function(){throw new a},W=N?(function(){try{return arguments.callee,V}catch{try{return N(arguments,"callee").get}catch{return V}}})():V,Y=q9()(),H=Yp(),ie=SS(),T=ES(),C=Gp(),G=qp(),U={},P=typeof Uint8Array>"u"||!H?t:H(Uint8Array),L={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?t:ArrayBuffer,"%ArrayIteratorPrototype%":Y&&H?H([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":U,"%AsyncGenerator%":U,"%AsyncGeneratorFunction%":U,"%AsyncIteratorPrototype%":U,"%Atomics%":typeof Atomics>"u"?t:Atomics,"%BigInt%":typeof BigInt>"u"?t:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?t:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?t:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":r,"%eval%":eval,"%EvalError%":n,"%Float16Array%":typeof Float16Array>"u"?t:Float16Array,"%Float32Array%":typeof Float32Array>"u"?t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?t:FinalizationRegistry,"%Function%":k,"%GeneratorFunction%":U,"%Int8Array%":typeof Int8Array>"u"?t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Y&&H?H(H([][Symbol.iterator]())):t,"%JSON%":typeof JSON=="object"?JSON:t,"%Map%":typeof Map>"u"?t:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Y||!H?t:H(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":N,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?t:Promise,"%Proxy%":typeof Proxy>"u"?t:Proxy,"%RangeError%":i,"%ReferenceError%":o,"%Reflect%":typeof Reflect>"u"?t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?t:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Y||!H?t:H(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Y&&H?H(""[Symbol.iterator]()):t,"%Symbol%":Y?Symbol:t,"%SyntaxError%":s,"%ThrowTypeError%":W,"%TypedArray%":P,"%TypeError%":a,"%Uint8Array%":typeof Uint8Array>"u"?t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?t:Uint32Array,"%URIError%":l,"%WeakMap%":typeof WeakMap>"u"?t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?t:WeakSet,"%Function.prototype.call%":G,"%Function.prototype.apply%":C,"%Object.defineProperty%":B,"%Object.getPrototypeOf%":ie,"%Math.abs%":f,"%Math.floor%":u,"%Math.max%":p,"%Math.min%":y,"%Math.pow%":w,"%Math.round%":A,"%Math.sign%":S,"%Reflect.getPrototypeOf%":T};if(H)try{null.error}catch(le){var R=H(H(le));L["%Error.prototype%"]=R}var z=function le(ye){var Ae;if(ye==="%AsyncFunction%")Ae=I("async function () {}");else if(ye==="%GeneratorFunction%")Ae=I("function* () {}");else if(ye==="%AsyncGeneratorFunction%")Ae=I("async function* () {}");else if(ye==="%AsyncGenerator%"){var xe=le("%AsyncGeneratorFunction%");xe&&(Ae=xe.prototype)}else if(ye==="%AsyncIteratorPrototype%"){var Be=le("%AsyncGenerator%");Be&&H&&(Ae=H(Be.prototype))}return L[ye]=Ae,Ae},X={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ee=lu(),_=kS(),K=ee.call(G,Array.prototype.concat),Z=ee.call(C,Array.prototype.splice),D=ee.call(G,String.prototype.replace),J=ee.call(G,String.prototype.slice),j=ee.call(G,RegExp.prototype.exec),te=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ae=/\\(\\)?/g,ce=function(le){var ye=J(le,0,1),Ae=J(le,-1);if(ye==="%"&&Ae!=="%")throw new s("invalid intrinsic syntax, expected closing `%`");if(Ae==="%"&&ye!=="%")throw new s("invalid intrinsic syntax, expected opening `%`");var xe=[];return D(le,te,function(Be,We,ze,Qe){xe[xe.length]=ze?D(Qe,ae,"$1"):We||Be}),xe},pe=function(le,ye){var Ae=le,xe;if(_(X,Ae)&&(xe=X[Ae],Ae="%"+xe[0]+"%"),_(L,Ae)){var Be=L[Ae];if(Be===U&&(Be=z(Ae)),typeof Be>"u"&&!ye)throw new a("intrinsic "+le+" exists, but is not available. Please file an issue!");return{alias:xe,name:Ae,value:Be}}throw new s("intrinsic "+le+" does not exist!")};return uh=function(le,ye){if(typeof le!="string"||le.length===0)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof ye!="boolean")throw new a('"allowMissing" argument must be a boolean');if(j(/^%?[^%]*%?$/,le)===null)throw new s("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Ae=ce(le),xe=Ae.length>0?Ae[0]:"",Be=pe("%"+xe+"%",ye),We=Be.name,ze=Be.value,Qe=!1,qe=Be.alias;qe&&(xe=qe[0],Z(Ae,K([0,1],qe)));for(var lt=1,me=!0;lt<Ae.length;lt+=1){var at=Ae[lt],Ie=J(at,0,1),He=J(at,-1);if((Ie==='"'||Ie==="'"||Ie==="`"||He==='"'||He==="'"||He==="`")&&Ie!==He)throw new s("property names with quotes must have matching quotes");if((at==="constructor"||!me)&&(Qe=!0),xe+="."+at,We="%"+xe+"%",_(L,We))ze=L[We];else if(ze!=null){if(!(at in ze)){if(!ye)throw new a("base intrinsic for "+le+" exists, but the property is not available.");return}if(N&&lt+1>=Ae.length){var Ke=N(ze,at);me=!!Ke,me&&"get"in Ke&&!("originalValue"in Ke.get)?ze=Ke.get:ze=ze[at]}else me=_(ze,at),ze=ze[at];me&&!Qe&&(L[We]=ze)}}return ze},uh}var ch,m1;function js(){if(m1)return ch;m1=1;var t=IS(),e=Xp(),r=e([t("%String.prototype.indexOf%")]);return ch=function(n,i){var o=t(n,!!i);return typeof o=="function"&&r(n,".prototype.")>-1?e([o]):o},ch}var lh,b1;function Z9(){if(b1)return lh;b1=1;var t=Ml()(),e=js(),r=e("Object.prototype.toString"),n=function(s){return t&&s&&typeof s=="object"&&Symbol.toStringTag in s?!1:r(s)==="[object Arguments]"},i=function(s){return n(s)?!0:s!==null&&typeof s=="object"&&"length"in s&&typeof s.length=="number"&&s.length>=0&&r(s)!=="[object Array]"&&"callee"in s&&r(s.callee)==="[object Function]"},o=(function(){return n(arguments)})();return n.isLegacyArguments=i,lh=o?n:i,lh}var fh,w1;function Q9(){if(w1)return fh;w1=1;var t=js(),e=Ml()(),r=kS(),n=Ks(),i;if(e){var o=t("RegExp.prototype.exec"),s={},a=function(){throw s},l={toString:a,valueOf:a};typeof Symbol.toPrimitive=="symbol"&&(l[Symbol.toPrimitive]=a),i=function(p){if(!p||typeof p!="object")return!1;var y=n(p,"lastIndex"),w=y&&r(y,"value");if(!w)return!1;try{o(p,l)}catch(A){return A===s}}}else{var f=t("Object.prototype.toString"),u="[object RegExp]";i=function(p){return!p||typeof p!="object"&&typeof p!="function"?!1:f(p)===u}}return fh=i,fh}var hh,v1;function J9(){if(v1)return hh;v1=1;var t=js(),e=Q9(),r=t("RegExp.prototype.exec"),n=Fs();return hh=function(i){if(!e(i))throw new n("`regex` must be a RegExp");return function(o){return r(i,o)!==null}},hh}var dh,E1;function eB(){if(E1)return dh;E1=1;const t=function*(){}.constructor;return dh=()=>t,dh}var ph,S1;function tB(){if(S1)return ph;S1=1;var t=js(),e=J9(),r=e(/^\s*(?:function)?\*/),n=Ml()(),i=Yp(),o=t("Object.prototype.toString"),s=t("Function.prototype.toString"),a=eB();return ph=function(l){if(typeof l!="function")return!1;if(r(s(l)))return!0;if(!n){var f=o(l);return f==="[object GeneratorFunction]"}if(!i)return!1;var u=a();return u&&i(l)===u.prototype},ph}var gh,A1;function rB(){if(A1)return gh;A1=1;var t=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,r,n;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{r=Object.defineProperty({},"length",{get:function(){throw n}}),n={},e(function(){throw 42},null,r)}catch(N){N!==n&&(e=null)}else e=null;var i=/^\s*class\b/,o=function(N){try{var B=t.call(N);return i.test(B)}catch{return!1}},s=function(N){try{return o(N)?!1:(t.call(N),!0)}catch{return!1}},a=Object.prototype.toString,l="[object Object]",f="[object Function]",u="[object GeneratorFunction]",p="[object HTMLAllCollection]",y="[object HTML document.all class]",w="[object HTMLCollection]",A=typeof Symbol=="function"&&!!Symbol.toStringTag,S=!(0 in[,]),k=function(){return!1};if(typeof document=="object"){var I=document.all;a.call(I)===a.call(document.all)&&(k=function(N){if((S||!N)&&(typeof N>"u"||typeof N=="object"))try{var B=a.call(N);return(B===p||B===y||B===w||B===l)&&N("")==null}catch{}return!1})}return gh=e?function(N){if(k(N))return!0;if(!N||typeof N!="function"&&typeof N!="object")return!1;try{e(N,null,r)}catch(B){if(B!==n)return!1}return!o(N)&&s(N)}:function(N){if(k(N))return!0;if(!N||typeof N!="function"&&typeof N!="object")return!1;if(A)return s(N);if(o(N))return!1;var B=a.call(N);return B!==f&&B!==u&&!/^\[object HTML/.test(B)?!1:s(N)},gh}var yh,k1;function nB(){if(k1)return yh;k1=1;var t=rB(),e=Object.prototype.toString,r=Object.prototype.hasOwnProperty,n=function(a,l,f){for(var u=0,p=a.length;u<p;u++)r.call(a,u)&&(f==null?l(a[u],u,a):l.call(f,a[u],u,a))},i=function(a,l,f){for(var u=0,p=a.length;u<p;u++)f==null?l(a.charAt(u),u,a):l.call(f,a.charAt(u),u,a)},o=function(a,l,f){for(var u in a)r.call(a,u)&&(f==null?l(a[u],u,a):l.call(f,a[u],u,a))};function s(a){return e.call(a)==="[object Array]"}return yh=function(a,l,f){if(!t(l))throw new TypeError("iterator must be a function");var u;arguments.length>=3&&(u=f),s(a)?n(a,l,u):typeof a=="string"?i(a,l,u):o(a,l,u)},yh}var I1,_1;function iB(){return _1||(_1=1,I1=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),I1}var mh,x1;function oB(){if(x1)return mh;x1=1;var t=iB(),e=globalThis;return mh=function(){for(var r=[],n=0;n<t.length;n++)typeof e[t[n]]=="function"&&(r[r.length]=t[n]);return r},mh}var T1={exports:{}},bh,B1;function sB(){if(B1)return bh;B1=1;var t=Fl(),e=vS(),r=Fs(),n=Ks();return bh=function(i,o,s){if(!i||typeof i!="object"&&typeof i!="function")throw new r("`obj` must be an object or a function`");if(typeof o!="string"&&typeof o!="symbol")throw new r("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new r("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new r("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new r("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new r("`loose`, if provided, must be a boolean");var a=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,f=arguments.length>5?arguments[5]:null,u=arguments.length>6?arguments[6]:!1,p=!!n&&n(i,o);if(t)t(i,o,{configurable:f===null&&p?p.configurable:!f,enumerable:a===null&&p?p.enumerable:!a,value:s,writable:l===null&&p?p.writable:!l});else if(u||!a&&!l&&!f)i[o]=s;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},bh}var wh,P1;function aB(){if(P1)return wh;P1=1;var t=Fl(),e=function(){return!!t};return e.hasArrayLengthDefineBug=function(){if(!t)return null;try{return t([],"length",{value:1}).length!==1}catch{return!0}},wh=e,wh}var vh,O1;function uB(){if(O1)return vh;O1=1;var t=IS(),e=sB(),r=aB()(),n=Ks(),i=Fs(),o=t("%Math.floor%");return vh=function(s,a){if(typeof s!="function")throw new i("`fn` is not a function");if(typeof a!="number"||a<0||a>4294967295||o(a)!==a)throw new i("`length` must be a positive 32-bit integer");var l=arguments.length>2&&!!arguments[2],f=!0,u=!0;if("length"in s&&n){var p=n(s,"length");p&&!p.configurable&&(f=!1),p&&!p.writable&&(u=!1)}return(f||u||!l)&&(r?e(s,"length",a,!0,!0):e(s,"length",a)),s},vh}var Eh,U1;function cB(){if(U1)return Eh;U1=1;var t=lu(),e=Gp(),r=AS();return Eh=function(){return r(t,e,arguments)},Eh}var L1;function lB(){return L1||(L1=1,(function(t){var e=uB(),r=Fl(),n=Xp(),i=cB();t.exports=function(o){var s=n(arguments),a=o.length-(arguments.length-1);return e(s,1+(a>0?a:0),!0)},r?r(t.exports,"apply",{value:i}):t.exports.apply=i})(T1)),T1.exports}var Sh,R1;function _S(){if(R1)return Sh;R1=1;var t=nB(),e=oB(),r=lB(),n=js(),i=Ks(),o=Yp(),s=n("Object.prototype.toString"),a=Ml()(),l=globalThis,f=e(),u=n("String.prototype.slice"),p=n("Array.prototype.indexOf",!0)||function(S,k){for(var I=0;I<S.length;I+=1)if(S[I]===k)return I;return-1},y={__proto__:null};a&&i&&o?t(f,function(S){var k=new l[S];if(Symbol.toStringTag in k&&o){var I=o(k),N=i(I,Symbol.toStringTag);if(!N&&I){var B=o(I);N=i(B,Symbol.toStringTag)}if(N&&N.get){var V=r(N.get);y["$"+S]=V}}}):t(f,function(S){var k=new l[S],I=k.slice||k.set;if(I){var N=r(I);y["$"+S]=N}});var w=function(S){var k=!1;return t(y,function(I,N){if(!k)try{"$"+I(S)===N&&(k=u(N,1))}catch{}}),k},A=function(S){var k=!1;return t(y,function(I,N){if(!k)try{I(S),k=u(N,1)}catch{}}),k};return Sh=function(S){if(!S||typeof S!="object")return!1;if(!a){var k=u(s(S),8,-1);return p(f,k)>-1?k:k!=="Object"?!1:A(S)}return i?w(S):null},Sh}var Ah,$1;function xS(){if($1)return Ah;$1=1;var t=_S();return Ah=function(e){return!!t(e)},Ah}var C1;function fB(){return C1||(C1=1,(function(t){var e=Z9(),r=tB(),n=_S(),i=xS();function o(me){return me.call.bind(me)}var s=typeof BigInt<"u",a=typeof Symbol<"u",l=o(Object.prototype.toString),f=o(Number.prototype.valueOf),u=o(String.prototype.valueOf),p=o(Boolean.prototype.valueOf);if(s)var y=o(BigInt.prototype.valueOf);if(a)var w=o(Symbol.prototype.valueOf);function A(me,at){if(typeof me!="object")return!1;try{return at(me),!0}catch{return!1}}t.isArgumentsObject=e,t.isGeneratorFunction=r,t.isTypedArray=i;function S(me){return typeof Promise<"u"&&me instanceof Promise||me!==null&&typeof me=="object"&&typeof me.then=="function"&&typeof me.catch=="function"}t.isPromise=S;function k(me){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(me):i(me)||J(me)}t.isArrayBufferView=k;function I(me){return n(me)==="Uint8Array"}t.isUint8Array=I;function N(me){return n(me)==="Uint8ClampedArray"}t.isUint8ClampedArray=N;function B(me){return n(me)==="Uint16Array"}t.isUint16Array=B;function V(me){return n(me)==="Uint32Array"}t.isUint32Array=V;function W(me){return n(me)==="Int8Array"}t.isInt8Array=W;function Y(me){return n(me)==="Int16Array"}t.isInt16Array=Y;function H(me){return n(me)==="Int32Array"}t.isInt32Array=H;function ie(me){return n(me)==="Float32Array"}t.isFloat32Array=ie;function T(me){return n(me)==="Float64Array"}t.isFloat64Array=T;function C(me){return n(me)==="BigInt64Array"}t.isBigInt64Array=C;function G(me){return n(me)==="BigUint64Array"}t.isBigUint64Array=G;function U(me){return l(me)==="[object Map]"}U.working=typeof Map<"u"&&U(new Map);function P(me){return typeof Map>"u"?!1:U.working?U(me):me instanceof Map}t.isMap=P;function L(me){return l(me)==="[object Set]"}L.working=typeof Set<"u"&&L(new Set);function R(me){return typeof Set>"u"?!1:L.working?L(me):me instanceof Set}t.isSet=R;function z(me){return l(me)==="[object WeakMap]"}z.working=typeof WeakMap<"u"&&z(new WeakMap);function X(me){return typeof WeakMap>"u"?!1:z.working?z(me):me instanceof WeakMap}t.isWeakMap=X;function ee(me){return l(me)==="[object WeakSet]"}ee.working=typeof WeakSet<"u"&&ee(new WeakSet);function _(me){return ee(me)}t.isWeakSet=_;function K(me){return l(me)==="[object ArrayBuffer]"}K.working=typeof ArrayBuffer<"u"&&K(new ArrayBuffer);function Z(me){return typeof ArrayBuffer>"u"?!1:K.working?K(me):me instanceof ArrayBuffer}t.isArrayBuffer=Z;function D(me){return l(me)==="[object DataView]"}D.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&D(new DataView(new ArrayBuffer(1),0,1));function J(me){return typeof DataView>"u"?!1:D.working?D(me):me instanceof DataView}t.isDataView=J;var j=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function te(me){return l(me)==="[object SharedArrayBuffer]"}function ae(me){return typeof j>"u"?!1:(typeof te.working>"u"&&(te.working=te(new j)),te.working?te(me):me instanceof j)}t.isSharedArrayBuffer=ae;function ce(me){return l(me)==="[object AsyncFunction]"}t.isAsyncFunction=ce;function pe(me){return l(me)==="[object Map Iterator]"}t.isMapIterator=pe;function le(me){return l(me)==="[object Set Iterator]"}t.isSetIterator=le;function ye(me){return l(me)==="[object Generator]"}t.isGeneratorObject=ye;function Ae(me){return l(me)==="[object WebAssembly.Module]"}t.isWebAssemblyCompiledModule=Ae;function xe(me){return A(me,f)}t.isNumberObject=xe;function Be(me){return A(me,u)}t.isStringObject=Be;function We(me){return A(me,p)}t.isBooleanObject=We;function ze(me){return s&&A(me,y)}t.isBigIntObject=ze;function Qe(me){return a&&A(me,w)}t.isSymbolObject=Qe;function qe(me){return xe(me)||Be(me)||We(me)||ze(me)||Qe(me)}t.isBoxedPrimitive=qe;function lt(me){return typeof Uint8Array<"u"&&(Z(me)||ae(me))}t.isAnyArrayBuffer=lt,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(me){Object.defineProperty(t,me,{enumerable:!1,value:function(){throw new Error(me+" is not supported in userland")}})})})(p2)),p2}var N1,H1;function hB(){return H1||(H1=1,N1=function(t){return t instanceof Pt}),N1}var D1;function dB(){return D1||(D1=1,(function(t){var e=Object.getOwnPropertyDescriptors||function(D){for(var J=Object.keys(D),j={},te=0;te<J.length;te++)j[J[te]]=Object.getOwnPropertyDescriptor(D,J[te]);return j},r=/%[sdj%]/g;t.format=function(D){if(!W(D)){for(var J=[],j=0;j<arguments.length;j++)J.push(s(arguments[j]));return J.join(" ")}for(var j=1,te=arguments,ae=te.length,ce=String(D).replace(r,function(ye){if(ye==="%%")return"%";if(j>=ae)return ye;switch(ye){case"%s":return String(te[j++]);case"%d":return Number(te[j++]);case"%j":try{return JSON.stringify(te[j++])}catch{return"[Circular]"}default:return ye}}),pe=te[j];j<ae;pe=te[++j])N(pe)||!T(pe)?ce+=" "+pe:ce+=" "+s(pe);return ce},t.deprecate=function(D,J){if(typeof _n<"u"&&_n.noDeprecation===!0)return D;if(typeof _n>"u")return function(){return t.deprecate(D,J).apply(this,arguments)};var j=!1;function te(){if(!j){if(_n.throwDeprecation)throw new Error(J);_n.traceDeprecation?console.trace(J):console.error(J),j=!0}return D.apply(this,arguments)}return te};var n={},i=/^$/;if(_n.env.NODE_DEBUG){var o=_n.env.NODE_DEBUG;o=o.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),i=new RegExp("^"+o+"$","i")}t.debuglog=function(D){if(D=D.toUpperCase(),!n[D])if(i.test(D)){var J=_n.pid;n[D]=function(){var j=t.format.apply(t,arguments);console.error("%s %d: %s",D,J,j)}}else n[D]=function(){};return n[D]};function s(D,J){var j={seen:[],stylize:l};return arguments.length>=3&&(j.depth=arguments[2]),arguments.length>=4&&(j.colors=arguments[3]),I(J)?j.showHidden=J:J&&t._extend(j,J),H(j.showHidden)&&(j.showHidden=!1),H(j.depth)&&(j.depth=2),H(j.colors)&&(j.colors=!1),H(j.customInspect)&&(j.customInspect=!0),j.colors&&(j.stylize=a),u(j,D,j.depth)}t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function a(D,J){var j=s.styles[J];return j?"\x1B["+s.colors[j][0]+"m"+D+"\x1B["+s.colors[j][1]+"m":D}function l(D,J){return D}function f(D){var J={};return D.forEach(function(j,te){J[j]=!0}),J}function u(D,J,j){if(D.customInspect&&J&&U(J.inspect)&&J.inspect!==t.inspect&&!(J.constructor&&J.constructor.prototype===J)){var te=J.inspect(j,D);return W(te)||(te=u(D,te,j)),te}var ae=p(D,J);if(ae)return ae;var ce=Object.keys(J),pe=f(ce);if(D.showHidden&&(ce=Object.getOwnPropertyNames(J)),G(J)&&(ce.indexOf("message")>=0||ce.indexOf("description")>=0))return y(J);if(ce.length===0){if(U(J)){var le=J.name?": "+J.name:"";return D.stylize("[Function"+le+"]","special")}if(ie(J))return D.stylize(RegExp.prototype.toString.call(J),"regexp");if(C(J))return D.stylize(Date.prototype.toString.call(J),"date");if(G(J))return y(J)}var ye="",Ae=!1,xe=["{","}"];if(k(J)&&(Ae=!0,xe=["[","]"]),U(J)){var Be=J.name?": "+J.name:"";ye=" [Function"+Be+"]"}if(ie(J)&&(ye=" "+RegExp.prototype.toString.call(J)),C(J)&&(ye=" "+Date.prototype.toUTCString.call(J)),G(J)&&(ye=" "+y(J)),ce.length===0&&(!Ae||J.length==0))return xe[0]+ye+xe[1];if(j<0)return ie(J)?D.stylize(RegExp.prototype.toString.call(J),"regexp"):D.stylize("[Object]","special");D.seen.push(J);var We;return Ae?We=w(D,J,j,pe,ce):We=ce.map(function(ze){return A(D,J,j,pe,ze,Ae)}),D.seen.pop(),S(We,ye,xe)}function p(D,J){if(H(J))return D.stylize("undefined","undefined");if(W(J)){var j="'"+JSON.stringify(J).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return D.stylize(j,"string")}if(V(J))return D.stylize(""+J,"number");if(I(J))return D.stylize(""+J,"boolean");if(N(J))return D.stylize("null","null")}function y(D){return"["+Error.prototype.toString.call(D)+"]"}function w(D,J,j,te,ae){for(var ce=[],pe=0,le=J.length;pe<le;++pe)ee(J,String(pe))?ce.push(A(D,J,j,te,String(pe),!0)):ce.push("");return ae.forEach(function(ye){ye.match(/^\d+$/)||ce.push(A(D,J,j,te,ye,!0))}),ce}function A(D,J,j,te,ae,ce){var pe,le,ye;if(ye=Object.getOwnPropertyDescriptor(J,ae)||{value:J[ae]},ye.get?ye.set?le=D.stylize("[Getter/Setter]","special"):le=D.stylize("[Getter]","special"):ye.set&&(le=D.stylize("[Setter]","special")),ee(te,ae)||(pe="["+ae+"]"),le||(D.seen.indexOf(ye.value)<0?(N(j)?le=u(D,ye.value,null):le=u(D,ye.value,j-1),le.indexOf(`
`)>-1&&(ce?le=le.split(`
`).map(function(Ae){return"  "+Ae}).join(`
`).slice(2):le=`
`+le.split(`
`).map(function(Ae){return"   "+Ae}).join(`
`))):le=D.stylize("[Circular]","special")),H(pe)){if(ce&&ae.match(/^\d+$/))return le;pe=JSON.stringify(""+ae),pe.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(pe=pe.slice(1,-1),pe=D.stylize(pe,"name")):(pe=pe.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),pe=D.stylize(pe,"string"))}return pe+": "+le}function S(D,J,j){var te=D.reduce(function(ae,ce){return ce.indexOf(`
`)>=0,ae+ce.replace(/\u001b\[\d\d?m/g,"").length+1},0);return te>60?j[0]+(J===""?"":J+`
 `)+" "+D.join(`,
  `)+" "+j[1]:j[0]+J+" "+D.join(", ")+" "+j[1]}t.types=fB();function k(D){return Array.isArray(D)}t.isArray=k;function I(D){return typeof D=="boolean"}t.isBoolean=I;function N(D){return D===null}t.isNull=N;function B(D){return D==null}t.isNullOrUndefined=B;function V(D){return typeof D=="number"}t.isNumber=V;function W(D){return typeof D=="string"}t.isString=W;function Y(D){return typeof D=="symbol"}t.isSymbol=Y;function H(D){return D===void 0}t.isUndefined=H;function ie(D){return T(D)&&L(D)==="[object RegExp]"}t.isRegExp=ie,t.types.isRegExp=ie;function T(D){return typeof D=="object"&&D!==null}t.isObject=T;function C(D){return T(D)&&L(D)==="[object Date]"}t.isDate=C,t.types.isDate=C;function G(D){return T(D)&&(L(D)==="[object Error]"||D instanceof Error)}t.isError=G,t.types.isNativeError=G;function U(D){return typeof D=="function"}t.isFunction=U;function P(D){return D===null||typeof D=="boolean"||typeof D=="number"||typeof D=="string"||typeof D=="symbol"||typeof D>"u"}t.isPrimitive=P,t.isBuffer=hB();function L(D){return Object.prototype.toString.call(D)}function R(D){return D<10?"0"+D.toString(10):D.toString(10)}var z=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function X(){var D=new Date,J=[R(D.getHours()),R(D.getMinutes()),R(D.getSeconds())].join(":");return[D.getDate(),z[D.getMonth()],J].join(" ")}t.log=function(){console.log("%s - %s",X(),t.format.apply(t,arguments))},t.inherits=Fo(),t._extend=function(D,J){if(!J||!T(J))return D;for(var j=Object.keys(J),te=j.length;te--;)D[j[te]]=J[j[te]];return D};function ee(D,J){return Object.prototype.hasOwnProperty.call(D,J)}var _=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;t.promisify=function(D){if(typeof D!="function")throw new TypeError('The "original" argument must be of type Function');if(_&&D[_]){var J=D[_];if(typeof J!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(J,_,{value:J,enumerable:!1,writable:!1,configurable:!0}),J}function J(){for(var j,te,ae=new Promise(function(le,ye){j=le,te=ye}),ce=[],pe=0;pe<arguments.length;pe++)ce.push(arguments[pe]);ce.push(function(le,ye){le?te(le):j(ye)});try{D.apply(this,ce)}catch(le){te(le)}return ae}return Object.setPrototypeOf(J,Object.getPrototypeOf(D)),_&&Object.defineProperty(J,_,{value:J,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(J,e(D))},t.promisify.custom=_;function K(D,J){if(!D){var j=new Error("Promise was rejected with a falsy value");j.reason=D,D=j}return J(D)}function Z(D){if(typeof D!="function")throw new TypeError('The "original" argument must be of type Function');function J(){for(var j=[],te=0;te<arguments.length;te++)j.push(arguments[te]);var ae=j.pop();if(typeof ae!="function")throw new TypeError("The last argument must be of type Function");var ce=this,pe=function(){return ae.apply(ce,arguments)};D.apply(this,j).then(function(le){_n.nextTick(pe.bind(null,null,le))},function(le){_n.nextTick(K.bind(null,le,pe))})}return Object.setPrototypeOf(J,Object.getPrototypeOf(D)),Object.defineProperties(J,e(D)),J}t.callbackify=Z})(d2)),d2}var kh={exports:{}},z1;function pB(){return z1||(z1=1,typeof Object.create=="function"?kh.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:kh.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}),kh.exports}var M1;function Fo(){if(M1)return Vu.exports;M1=1;try{var t=dB();if(typeof t.inherits!="function")throw"";Vu.exports=t.inherits}catch{Vu.exports=pB()}return Vu.exports}var Ih={exports:{}},F1={},K1;function gB(){return K1||(K1=1,(function(t){Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var e={},r={};r.byteLength=u,r.toByteArray=y,r.fromByteArray=S;for(var n=[],i=[],o=typeof Uint8Array<"u"?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=s.length;a<l;++a)n[a]=s[a],i[s.charCodeAt(a)]=a;i[45]=62,i[95]=63;function f(N){var B=N.length;if(B%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var V=N.indexOf("=");V===-1&&(V=B);var W=V===B?0:4-V%4;return[V,W]}function u(N){var B=f(N),V=B[0],W=B[1];return(V+W)*3/4-W}function p(N,B,V){return(B+V)*3/4-V}function y(N){var B,V=f(N),W=V[0],Y=V[1],H=new o(p(N,W,Y)),ie=0,T=Y>0?W-4:W,C;for(C=0;C<T;C+=4)B=i[N.charCodeAt(C)]<<18|i[N.charCodeAt(C+1)]<<12|i[N.charCodeAt(C+2)]<<6|i[N.charCodeAt(C+3)],H[ie++]=B>>16&255,H[ie++]=B>>8&255,H[ie++]=B&255;return Y===2&&(B=i[N.charCodeAt(C)]<<2|i[N.charCodeAt(C+1)]>>4,H[ie++]=B&255),Y===1&&(B=i[N.charCodeAt(C)]<<10|i[N.charCodeAt(C+1)]<<4|i[N.charCodeAt(C+2)]>>2,H[ie++]=B>>8&255,H[ie++]=B&255),H}function w(N){return n[N>>18&63]+n[N>>12&63]+n[N>>6&63]+n[N&63]}function A(N,B,V){for(var W,Y=[],H=B;H<V;H+=3)W=(N[H]<<16&16711680)+(N[H+1]<<8&65280)+(N[H+2]&255),Y.push(w(W));return Y.join("")}function S(N){for(var B,V=N.length,W=V%3,Y=[],H=16383,ie=0,T=V-W;ie<T;ie+=H)Y.push(A(N,ie,ie+H>T?T:ie+H));return W===1?(B=N[V-1],Y.push(n[B>>2]+n[B<<4&63]+"==")):W===2&&(B=(N[V-2]<<8)+N[V-1],Y.push(n[B>>10]+n[B>>4&63]+n[B<<2&63]+"=")),Y.join("")}var k={};k.read=function(N,B,V,W,Y){var H,ie,T=Y*8-W-1,C=(1<<T)-1,G=C>>1,U=-7,P=V?Y-1:0,L=V?-1:1,R=N[B+P];for(P+=L,H=R&(1<<-U)-1,R>>=-U,U+=T;U>0;H=H*256+N[B+P],P+=L,U-=8);for(ie=H&(1<<-U)-1,H>>=-U,U+=W;U>0;ie=ie*256+N[B+P],P+=L,U-=8);if(H===0)H=1-G;else{if(H===C)return ie?NaN:(R?-1:1)*(1/0);ie=ie+Math.pow(2,W),H=H-G}return(R?-1:1)*ie*Math.pow(2,H-W)},k.write=function(N,B,V,W,Y,H){var ie,T,C,G=H*8-Y-1,U=(1<<G)-1,P=U>>1,L=Y===23?Math.pow(2,-24)-Math.pow(2,-77):0,R=W?0:H-1,z=W?1:-1,X=B<0||B===0&&1/B<0?1:0;for(B=Math.abs(B),isNaN(B)||B===1/0?(T=isNaN(B)?1:0,ie=U):(ie=Math.floor(Math.log(B)/Math.LN2),B*(C=Math.pow(2,-ie))<1&&(ie--,C*=2),ie+P>=1?B+=L/C:B+=L*Math.pow(2,1-P),B*C>=2&&(ie++,C/=2),ie+P>=U?(T=0,ie=U):ie+P>=1?(T=(B*C-1)*Math.pow(2,Y),ie=ie+P):(T=B*Math.pow(2,P-1)*Math.pow(2,Y),ie=0));Y>=8;N[V+R]=T&255,R+=z,T/=256,Y-=8);for(ie=ie<<Y|T,G+=Y;G>0;N[V+R]=ie&255,R+=z,ie/=256,G-=8);N[V+R-z]|=X*128},(function(N){const B=r,V=k,W=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;N.Buffer=U,N.SlowBuffer=J,N.INSPECT_MAX_BYTES=50;const Y=2147483647;N.kMaxLength=Y;const{Uint8Array:H,ArrayBuffer:ie,SharedArrayBuffer:T}=globalThis;U.TYPED_ARRAY_SUPPORT=C(),!U.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function C(){try{const v=new H(1),x={foo:function(){return 42}};return Object.setPrototypeOf(x,H.prototype),Object.setPrototypeOf(v,x),v.foo()===42}catch{return!1}}Object.defineProperty(U.prototype,"parent",{enumerable:!0,get:function(){if(U.isBuffer(this))return this.buffer}}),Object.defineProperty(U.prototype,"offset",{enumerable:!0,get:function(){if(U.isBuffer(this))return this.byteOffset}});function G(v){if(v>Y)throw new RangeError('The value "'+v+'" is invalid for option "size"');const x=new H(v);return Object.setPrototypeOf(x,U.prototype),x}function U(v,x,$){if(typeof v=="number"){if(typeof x=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return z(v)}return P(v,x,$)}U.poolSize=8192;function P(v,x,$){if(typeof v=="string")return X(v,x);if(ie.isView(v))return _(v);if(v==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v);if($r(v,ie)||v&&$r(v.buffer,ie)||typeof T<"u"&&($r(v,T)||v&&$r(v.buffer,T)))return K(v,x,$);if(typeof v=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const se=v.valueOf&&v.valueOf();if(se!=null&&se!==v)return U.from(se,x,$);const he=Z(v);if(he)return he;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof v[Symbol.toPrimitive]=="function")return U.from(v[Symbol.toPrimitive]("string"),x,$);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v)}U.from=function(v,x,$){return P(v,x,$)},Object.setPrototypeOf(U.prototype,H.prototype),Object.setPrototypeOf(U,H);function L(v){if(typeof v!="number")throw new TypeError('"size" argument must be of type number');if(v<0)throw new RangeError('The value "'+v+'" is invalid for option "size"')}function R(v,x,$){return L(v),v<=0?G(v):x!==void 0?typeof $=="string"?G(v).fill(x,$):G(v).fill(x):G(v)}U.alloc=function(v,x,$){return R(v,x,$)};function z(v){return L(v),G(v<0?0:D(v)|0)}U.allocUnsafe=function(v){return z(v)},U.allocUnsafeSlow=function(v){return z(v)};function X(v,x){if((typeof x!="string"||x==="")&&(x="utf8"),!U.isEncoding(x))throw new TypeError("Unknown encoding: "+x);const $=j(v,x)|0;let se=G($);const he=se.write(v,x);return he!==$&&(se=se.slice(0,he)),se}function ee(v){const x=v.length<0?0:D(v.length)|0,$=G(x);for(let se=0;se<x;se+=1)$[se]=v[se]&255;return $}function _(v){if($r(v,H)){const x=new H(v);return K(x.buffer,x.byteOffset,x.byteLength)}return ee(v)}function K(v,x,$){if(x<0||v.byteLength<x)throw new RangeError('"offset" is outside of buffer bounds');if(v.byteLength<x+($||0))throw new RangeError('"length" is outside of buffer bounds');let se;return x===void 0&&$===void 0?se=new H(v):$===void 0?se=new H(v,x):se=new H(v,x,$),Object.setPrototypeOf(se,U.prototype),se}function Z(v){if(U.isBuffer(v)){const x=D(v.length)|0,$=G(x);return $.length===0||v.copy($,0,0,x),$}if(v.length!==void 0)return typeof v.length!="number"||Wo(v.length)?G(0):ee(v);if(v.type==="Buffer"&&Array.isArray(v.data))return ee(v.data)}function D(v){if(v>=Y)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Y.toString(16)+" bytes");return v|0}function J(v){return+v!=v&&(v=0),U.alloc(+v)}U.isBuffer=function(v){return v!=null&&v._isBuffer===!0&&v!==U.prototype},U.compare=function(v,x){if($r(v,H)&&(v=U.from(v,v.offset,v.byteLength)),$r(x,H)&&(x=U.from(x,x.offset,x.byteLength)),!U.isBuffer(v)||!U.isBuffer(x))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(v===x)return 0;let $=v.length,se=x.length;for(let he=0,be=Math.min($,se);he<be;++he)if(v[he]!==x[he]){$=v[he],se=x[he];break}return $<se?-1:se<$?1:0},U.isEncoding=function(v){switch(String(v).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},U.concat=function(v,x){if(!Array.isArray(v))throw new TypeError('"list" argument must be an Array of Buffers');if(v.length===0)return U.alloc(0);let $;if(x===void 0)for(x=0,$=0;$<v.length;++$)x+=v[$].length;const se=U.allocUnsafe(x);let he=0;for($=0;$<v.length;++$){let be=v[$];if($r(be,H))he+be.length>se.length?(U.isBuffer(be)||(be=U.from(be)),be.copy(se,he)):H.prototype.set.call(se,be,he);else if(U.isBuffer(be))be.copy(se,he);else throw new TypeError('"list" argument must be an Array of Buffers');he+=be.length}return se};function j(v,x){if(U.isBuffer(v))return v.length;if(ie.isView(v)||$r(v,ie))return v.byteLength;if(typeof v!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof v);const $=v.length,se=arguments.length>2&&arguments[2]===!0;if(!se&&$===0)return 0;let he=!1;for(;;)switch(x){case"ascii":case"latin1":case"binary":return $;case"utf8":case"utf-8":return Ge(v).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $*2;case"hex":return $>>>1;case"base64":return Fe(v).length;default:if(he)return se?-1:Ge(v).length;x=(""+x).toLowerCase(),he=!0}}U.byteLength=j;function te(v,x,$){let se=!1;if((x===void 0||x<0)&&(x=0),x>this.length||(($===void 0||$>this.length)&&($=this.length),$<=0)||($>>>=0,x>>>=0,$<=x))return"";for(v||(v="utf8");;)switch(v){case"hex":return at(this,x,$);case"utf8":case"utf-8":return ze(this,x,$);case"ascii":return lt(this,x,$);case"latin1":case"binary":return me(this,x,$);case"base64":return We(this,x,$);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ie(this,x,$);default:if(se)throw new TypeError("Unknown encoding: "+v);v=(v+"").toLowerCase(),se=!0}}U.prototype._isBuffer=!0;function ae(v,x,$){const se=v[x];v[x]=v[$],v[$]=se}U.prototype.swap16=function(){const v=this.length;if(v%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let x=0;x<v;x+=2)ae(this,x,x+1);return this},U.prototype.swap32=function(){const v=this.length;if(v%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let x=0;x<v;x+=4)ae(this,x,x+3),ae(this,x+1,x+2);return this},U.prototype.swap64=function(){const v=this.length;if(v%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let x=0;x<v;x+=8)ae(this,x,x+7),ae(this,x+1,x+6),ae(this,x+2,x+5),ae(this,x+3,x+4);return this},U.prototype.toString=function(){const v=this.length;return v===0?"":arguments.length===0?ze(this,0,v):te.apply(this,arguments)},U.prototype.toLocaleString=U.prototype.toString,U.prototype.equals=function(v){if(!U.isBuffer(v))throw new TypeError("Argument must be a Buffer");return this===v?!0:U.compare(this,v)===0},U.prototype.inspect=function(){let v="";const x=N.INSPECT_MAX_BYTES;return v=this.toString("hex",0,x).replace(/(.{2})/g,"$1 ").trim(),this.length>x&&(v+=" ... "),"<Buffer "+v+">"},W&&(U.prototype[W]=U.prototype.inspect),U.prototype.compare=function(v,x,$,se,he){if($r(v,H)&&(v=U.from(v,v.offset,v.byteLength)),!U.isBuffer(v))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof v);if(x===void 0&&(x=0),$===void 0&&($=v?v.length:0),se===void 0&&(se=0),he===void 0&&(he=this.length),x<0||$>v.length||se<0||he>this.length)throw new RangeError("out of range index");if(se>=he&&x>=$)return 0;if(se>=he)return-1;if(x>=$)return 1;if(x>>>=0,$>>>=0,se>>>=0,he>>>=0,this===v)return 0;let be=he-se,ke=$-x;const mt=Math.min(be,ke),Dt=this.slice(se,he),wt=v.slice(x,$);for(let ht=0;ht<mt;++ht)if(Dt[ht]!==wt[ht]){be=Dt[ht],ke=wt[ht];break}return be<ke?-1:ke<be?1:0};function ce(v,x,$,se,he){if(v.length===0)return-1;if(typeof $=="string"?(se=$,$=0):$>2147483647?$=2147483647:$<-2147483648&&($=-2147483648),$=+$,Wo($)&&($=he?0:v.length-1),$<0&&($=v.length+$),$>=v.length){if(he)return-1;$=v.length-1}else if($<0)if(he)$=0;else return-1;if(typeof x=="string"&&(x=U.from(x,se)),U.isBuffer(x))return x.length===0?-1:pe(v,x,$,se,he);if(typeof x=="number")return x=x&255,typeof H.prototype.indexOf=="function"?he?H.prototype.indexOf.call(v,x,$):H.prototype.lastIndexOf.call(v,x,$):pe(v,[x],$,se,he);throw new TypeError("val must be string, number or Buffer")}function pe(v,x,$,se,he){let be=1,ke=v.length,mt=x.length;if(se!==void 0&&(se=String(se).toLowerCase(),se==="ucs2"||se==="ucs-2"||se==="utf16le"||se==="utf-16le")){if(v.length<2||x.length<2)return-1;be=2,ke/=2,mt/=2,$/=2}function Dt(ht,Ot){return be===1?ht[Ot]:ht.readUInt16BE(Ot*be)}let wt;if(he){let ht=-1;for(wt=$;wt<ke;wt++)if(Dt(v,wt)===Dt(x,ht===-1?0:wt-ht)){if(ht===-1&&(ht=wt),wt-ht+1===mt)return ht*be}else ht!==-1&&(wt-=wt-ht),ht=-1}else for($+mt>ke&&($=ke-mt),wt=$;wt>=0;wt--){let ht=!0;for(let Ot=0;Ot<mt;Ot++)if(Dt(v,wt+Ot)!==Dt(x,Ot)){ht=!1;break}if(ht)return wt}return-1}U.prototype.includes=function(v,x,$){return this.indexOf(v,x,$)!==-1},U.prototype.indexOf=function(v,x,$){return ce(this,v,x,$,!0)},U.prototype.lastIndexOf=function(v,x,$){return ce(this,v,x,$,!1)};function le(v,x,$,se){$=Number($)||0;const he=v.length-$;se?(se=Number(se),se>he&&(se=he)):se=he;const be=x.length;se>be/2&&(se=be/2);let ke;for(ke=0;ke<se;++ke){const mt=parseInt(x.substr(ke*2,2),16);if(Wo(mt))return ke;v[$+ke]=mt}return ke}function ye(v,x,$,se){return Vo(Ge(x,v.length-$),v,$,se)}function Ae(v,x,$,se){return Vo(Ne(x),v,$,se)}function xe(v,x,$,se){return Vo(Fe(x),v,$,se)}function Be(v,x,$,se){return Vo(Oe(x,v.length-$),v,$,se)}U.prototype.write=function(v,x,$,se){if(x===void 0)se="utf8",$=this.length,x=0;else if($===void 0&&typeof x=="string")se=x,$=this.length,x=0;else if(isFinite(x))x=x>>>0,isFinite($)?($=$>>>0,se===void 0&&(se="utf8")):(se=$,$=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const he=this.length-x;if(($===void 0||$>he)&&($=he),v.length>0&&($<0||x<0)||x>this.length)throw new RangeError("Attempt to write outside buffer bounds");se||(se="utf8");let be=!1;for(;;)switch(se){case"hex":return le(this,v,x,$);case"utf8":case"utf-8":return ye(this,v,x,$);case"ascii":case"latin1":case"binary":return Ae(this,v,x,$);case"base64":return xe(this,v,x,$);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Be(this,v,x,$);default:if(be)throw new TypeError("Unknown encoding: "+se);se=(""+se).toLowerCase(),be=!0}},U.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function We(v,x,$){return x===0&&$===v.length?B.fromByteArray(v):B.fromByteArray(v.slice(x,$))}function ze(v,x,$){$=Math.min(v.length,$);const se=[];let he=x;for(;he<$;){const be=v[he];let ke=null,mt=be>239?4:be>223?3:be>191?2:1;if(he+mt<=$){let Dt,wt,ht,Ot;switch(mt){case 1:be<128&&(ke=be);break;case 2:Dt=v[he+1],(Dt&192)===128&&(Ot=(be&31)<<6|Dt&63,Ot>127&&(ke=Ot));break;case 3:Dt=v[he+1],wt=v[he+2],(Dt&192)===128&&(wt&192)===128&&(Ot=(be&15)<<12|(Dt&63)<<6|wt&63,Ot>2047&&(Ot<55296||Ot>57343)&&(ke=Ot));break;case 4:Dt=v[he+1],wt=v[he+2],ht=v[he+3],(Dt&192)===128&&(wt&192)===128&&(ht&192)===128&&(Ot=(be&15)<<18|(Dt&63)<<12|(wt&63)<<6|ht&63,Ot>65535&&Ot<1114112&&(ke=Ot))}}ke===null?(ke=65533,mt=1):ke>65535&&(ke-=65536,se.push(ke>>>10&1023|55296),ke=56320|ke&1023),se.push(ke),he+=mt}return qe(se)}const Qe=4096;function qe(v){const x=v.length;if(x<=Qe)return String.fromCharCode.apply(String,v);let $="",se=0;for(;se<x;)$+=String.fromCharCode.apply(String,v.slice(se,se+=Qe));return $}function lt(v,x,$){let se="";$=Math.min(v.length,$);for(let he=x;he<$;++he)se+=String.fromCharCode(v[he]&127);return se}function me(v,x,$){let se="";$=Math.min(v.length,$);for(let he=x;he<$;++he)se+=String.fromCharCode(v[he]);return se}function at(v,x,$){const se=v.length;(!x||x<0)&&(x=0),(!$||$<0||$>se)&&($=se);let he="";for(let be=x;be<$;++be)he+=Eu[v[be]];return he}function Ie(v,x,$){const se=v.slice(x,$);let he="";for(let be=0;be<se.length-1;be+=2)he+=String.fromCharCode(se[be]+se[be+1]*256);return he}U.prototype.slice=function(v,x){const $=this.length;v=~~v,x=x===void 0?$:~~x,v<0?(v+=$,v<0&&(v=0)):v>$&&(v=$),x<0?(x+=$,x<0&&(x=0)):x>$&&(x=$),x<v&&(x=v);const se=this.subarray(v,x);return Object.setPrototypeOf(se,U.prototype),se};function He(v,x,$){if(v%1!==0||v<0)throw new RangeError("offset is not uint");if(v+x>$)throw new RangeError("Trying to access beyond buffer length")}U.prototype.readUintLE=U.prototype.readUIntLE=function(v,x,$){v=v>>>0,x=x>>>0,$||He(v,x,this.length);let se=this[v],he=1,be=0;for(;++be<x&&(he*=256);)se+=this[v+be]*he;return se},U.prototype.readUintBE=U.prototype.readUIntBE=function(v,x,$){v=v>>>0,x=x>>>0,$||He(v,x,this.length);let se=this[v+--x],he=1;for(;x>0&&(he*=256);)se+=this[v+--x]*he;return se},U.prototype.readUint8=U.prototype.readUInt8=function(v,x){return v=v>>>0,x||He(v,1,this.length),this[v]},U.prototype.readUint16LE=U.prototype.readUInt16LE=function(v,x){return v=v>>>0,x||He(v,2,this.length),this[v]|this[v+1]<<8},U.prototype.readUint16BE=U.prototype.readUInt16BE=function(v,x){return v=v>>>0,x||He(v,2,this.length),this[v]<<8|this[v+1]},U.prototype.readUint32LE=U.prototype.readUInt32LE=function(v,x){return v=v>>>0,x||He(v,4,this.length),(this[v]|this[v+1]<<8|this[v+2]<<16)+this[v+3]*16777216},U.prototype.readUint32BE=U.prototype.readUInt32BE=function(v,x){return v=v>>>0,x||He(v,4,this.length),this[v]*16777216+(this[v+1]<<16|this[v+2]<<8|this[v+3])},U.prototype.readBigUInt64LE=an(function(v){v=v>>>0,M(v,"offset");const x=this[v],$=this[v+7];(x===void 0||$===void 0)&&re(v,this.length-8);const se=x+this[++v]*2**8+this[++v]*2**16+this[++v]*2**24,he=this[++v]+this[++v]*2**8+this[++v]*2**16+$*2**24;return BigInt(se)+(BigInt(he)<<BigInt(32))}),U.prototype.readBigUInt64BE=an(function(v){v=v>>>0,M(v,"offset");const x=this[v],$=this[v+7];(x===void 0||$===void 0)&&re(v,this.length-8);const se=x*2**24+this[++v]*2**16+this[++v]*2**8+this[++v],he=this[++v]*2**24+this[++v]*2**16+this[++v]*2**8+$;return(BigInt(se)<<BigInt(32))+BigInt(he)}),U.prototype.readIntLE=function(v,x,$){v=v>>>0,x=x>>>0,$||He(v,x,this.length);let se=this[v],he=1,be=0;for(;++be<x&&(he*=256);)se+=this[v+be]*he;return he*=128,se>=he&&(se-=Math.pow(2,8*x)),se},U.prototype.readIntBE=function(v,x,$){v=v>>>0,x=x>>>0,$||He(v,x,this.length);let se=x,he=1,be=this[v+--se];for(;se>0&&(he*=256);)be+=this[v+--se]*he;return he*=128,be>=he&&(be-=Math.pow(2,8*x)),be},U.prototype.readInt8=function(v,x){return v=v>>>0,x||He(v,1,this.length),this[v]&128?(255-this[v]+1)*-1:this[v]},U.prototype.readInt16LE=function(v,x){v=v>>>0,x||He(v,2,this.length);const $=this[v]|this[v+1]<<8;return $&32768?$|4294901760:$},U.prototype.readInt16BE=function(v,x){v=v>>>0,x||He(v,2,this.length);const $=this[v+1]|this[v]<<8;return $&32768?$|4294901760:$},U.prototype.readInt32LE=function(v,x){return v=v>>>0,x||He(v,4,this.length),this[v]|this[v+1]<<8|this[v+2]<<16|this[v+3]<<24},U.prototype.readInt32BE=function(v,x){return v=v>>>0,x||He(v,4,this.length),this[v]<<24|this[v+1]<<16|this[v+2]<<8|this[v+3]},U.prototype.readBigInt64LE=an(function(v){v=v>>>0,M(v,"offset");const x=this[v],$=this[v+7];(x===void 0||$===void 0)&&re(v,this.length-8);const se=this[v+4]+this[v+5]*2**8+this[v+6]*2**16+($<<24);return(BigInt(se)<<BigInt(32))+BigInt(x+this[++v]*2**8+this[++v]*2**16+this[++v]*2**24)}),U.prototype.readBigInt64BE=an(function(v){v=v>>>0,M(v,"offset");const x=this[v],$=this[v+7];(x===void 0||$===void 0)&&re(v,this.length-8);const se=(x<<24)+this[++v]*2**16+this[++v]*2**8+this[++v];return(BigInt(se)<<BigInt(32))+BigInt(this[++v]*2**24+this[++v]*2**16+this[++v]*2**8+$)}),U.prototype.readFloatLE=function(v,x){return v=v>>>0,x||He(v,4,this.length),V.read(this,v,!0,23,4)},U.prototype.readFloatBE=function(v,x){return v=v>>>0,x||He(v,4,this.length),V.read(this,v,!1,23,4)},U.prototype.readDoubleLE=function(v,x){return v=v>>>0,x||He(v,8,this.length),V.read(this,v,!0,52,8)},U.prototype.readDoubleBE=function(v,x){return v=v>>>0,x||He(v,8,this.length),V.read(this,v,!1,52,8)};function Ke(v,x,$,se,he,be){if(!U.isBuffer(v))throw new TypeError('"buffer" argument must be a Buffer instance');if(x>he||x<be)throw new RangeError('"value" argument is out of bounds');if($+se>v.length)throw new RangeError("Index out of range")}U.prototype.writeUintLE=U.prototype.writeUIntLE=function(v,x,$,se){if(v=+v,x=x>>>0,$=$>>>0,!se){const ke=Math.pow(2,8*$)-1;Ke(this,v,x,$,ke,0)}let he=1,be=0;for(this[x]=v&255;++be<$&&(he*=256);)this[x+be]=v/he&255;return x+$},U.prototype.writeUintBE=U.prototype.writeUIntBE=function(v,x,$,se){if(v=+v,x=x>>>0,$=$>>>0,!se){const ke=Math.pow(2,8*$)-1;Ke(this,v,x,$,ke,0)}let he=$-1,be=1;for(this[x+he]=v&255;--he>=0&&(be*=256);)this[x+he]=v/be&255;return x+$},U.prototype.writeUint8=U.prototype.writeUInt8=function(v,x,$){return v=+v,x=x>>>0,$||Ke(this,v,x,1,255,0),this[x]=v&255,x+1},U.prototype.writeUint16LE=U.prototype.writeUInt16LE=function(v,x,$){return v=+v,x=x>>>0,$||Ke(this,v,x,2,65535,0),this[x]=v&255,this[x+1]=v>>>8,x+2},U.prototype.writeUint16BE=U.prototype.writeUInt16BE=function(v,x,$){return v=+v,x=x>>>0,$||Ke(this,v,x,2,65535,0),this[x]=v>>>8,this[x+1]=v&255,x+2},U.prototype.writeUint32LE=U.prototype.writeUInt32LE=function(v,x,$){return v=+v,x=x>>>0,$||Ke(this,v,x,4,4294967295,0),this[x+3]=v>>>24,this[x+2]=v>>>16,this[x+1]=v>>>8,this[x]=v&255,x+4},U.prototype.writeUint32BE=U.prototype.writeUInt32BE=function(v,x,$){return v=+v,x=x>>>0,$||Ke(this,v,x,4,4294967295,0),this[x]=v>>>24,this[x+1]=v>>>16,this[x+2]=v>>>8,this[x+3]=v&255,x+4};function ft(v,x,$,se,he){O(x,se,he,v,$,7);let be=Number(x&BigInt(4294967295));v[$++]=be,be=be>>8,v[$++]=be,be=be>>8,v[$++]=be,be=be>>8,v[$++]=be;let ke=Number(x>>BigInt(32)&BigInt(4294967295));return v[$++]=ke,ke=ke>>8,v[$++]=ke,ke=ke>>8,v[$++]=ke,ke=ke>>8,v[$++]=ke,$}function Je(v,x,$,se,he){O(x,se,he,v,$,7);let be=Number(x&BigInt(4294967295));v[$+7]=be,be=be>>8,v[$+6]=be,be=be>>8,v[$+5]=be,be=be>>8,v[$+4]=be;let ke=Number(x>>BigInt(32)&BigInt(4294967295));return v[$+3]=ke,ke=ke>>8,v[$+2]=ke,ke=ke>>8,v[$+1]=ke,ke=ke>>8,v[$]=ke,$+8}U.prototype.writeBigUInt64LE=an(function(v,x=0){return ft(this,v,x,BigInt(0),BigInt("0xffffffffffffffff"))}),U.prototype.writeBigUInt64BE=an(function(v,x=0){return Je(this,v,x,BigInt(0),BigInt("0xffffffffffffffff"))}),U.prototype.writeIntLE=function(v,x,$,se){if(v=+v,x=x>>>0,!se){const mt=Math.pow(2,8*$-1);Ke(this,v,x,$,mt-1,-mt)}let he=0,be=1,ke=0;for(this[x]=v&255;++he<$&&(be*=256);)v<0&&ke===0&&this[x+he-1]!==0&&(ke=1),this[x+he]=(v/be>>0)-ke&255;return x+$},U.prototype.writeIntBE=function(v,x,$,se){if(v=+v,x=x>>>0,!se){const mt=Math.pow(2,8*$-1);Ke(this,v,x,$,mt-1,-mt)}let he=$-1,be=1,ke=0;for(this[x+he]=v&255;--he>=0&&(be*=256);)v<0&&ke===0&&this[x+he+1]!==0&&(ke=1),this[x+he]=(v/be>>0)-ke&255;return x+$},U.prototype.writeInt8=function(v,x,$){return v=+v,x=x>>>0,$||Ke(this,v,x,1,127,-128),v<0&&(v=255+v+1),this[x]=v&255,x+1},U.prototype.writeInt16LE=function(v,x,$){return v=+v,x=x>>>0,$||Ke(this,v,x,2,32767,-32768),this[x]=v&255,this[x+1]=v>>>8,x+2},U.prototype.writeInt16BE=function(v,x,$){return v=+v,x=x>>>0,$||Ke(this,v,x,2,32767,-32768),this[x]=v>>>8,this[x+1]=v&255,x+2},U.prototype.writeInt32LE=function(v,x,$){return v=+v,x=x>>>0,$||Ke(this,v,x,4,2147483647,-2147483648),this[x]=v&255,this[x+1]=v>>>8,this[x+2]=v>>>16,this[x+3]=v>>>24,x+4},U.prototype.writeInt32BE=function(v,x,$){return v=+v,x=x>>>0,$||Ke(this,v,x,4,2147483647,-2147483648),v<0&&(v=4294967295+v+1),this[x]=v>>>24,this[x+1]=v>>>16,this[x+2]=v>>>8,this[x+3]=v&255,x+4},U.prototype.writeBigInt64LE=an(function(v,x=0){return ft(this,v,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),U.prototype.writeBigInt64BE=an(function(v,x=0){return Je(this,v,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Vt(v,x,$,se,he,be){if($+se>v.length)throw new RangeError("Index out of range");if($<0)throw new RangeError("Index out of range")}function kr(v,x,$,se,he){return x=+x,$=$>>>0,he||Vt(v,x,$,4),V.write(v,x,$,se,23,4),$+4}U.prototype.writeFloatLE=function(v,x,$){return kr(this,v,x,!0,$)},U.prototype.writeFloatBE=function(v,x,$){return kr(this,v,x,!1,$)};function yt(v,x,$,se,he){return x=+x,$=$>>>0,he||Vt(v,x,$,8),V.write(v,x,$,se,52,8),$+8}U.prototype.writeDoubleLE=function(v,x,$){return yt(this,v,x,!0,$)},U.prototype.writeDoubleBE=function(v,x,$){return yt(this,v,x,!1,$)},U.prototype.copy=function(v,x,$,se){if(!U.isBuffer(v))throw new TypeError("argument should be a Buffer");if($||($=0),!se&&se!==0&&(se=this.length),x>=v.length&&(x=v.length),x||(x=0),se>0&&se<$&&(se=$),se===$||v.length===0||this.length===0)return 0;if(x<0)throw new RangeError("targetStart out of bounds");if($<0||$>=this.length)throw new RangeError("Index out of range");if(se<0)throw new RangeError("sourceEnd out of bounds");se>this.length&&(se=this.length),v.length-x<se-$&&(se=v.length-x+$);const he=se-$;return this===v&&typeof H.prototype.copyWithin=="function"?this.copyWithin(x,$,se):H.prototype.set.call(v,this.subarray($,se),x),he},U.prototype.fill=function(v,x,$,se){if(typeof v=="string"){if(typeof x=="string"?(se=x,x=0,$=this.length):typeof $=="string"&&(se=$,$=this.length),se!==void 0&&typeof se!="string")throw new TypeError("encoding must be a string");if(typeof se=="string"&&!U.isEncoding(se))throw new TypeError("Unknown encoding: "+se);if(v.length===1){const be=v.charCodeAt(0);(se==="utf8"&&be<128||se==="latin1")&&(v=be)}}else typeof v=="number"?v=v&255:typeof v=="boolean"&&(v=Number(v));if(x<0||this.length<x||this.length<$)throw new RangeError("Out of range index");if($<=x)return this;x=x>>>0,$=$===void 0?this.length:$>>>0,v||(v=0);let he;if(typeof v=="number")for(he=x;he<$;++he)this[he]=v;else{const be=U.isBuffer(v)?v:U.from(v,se),ke=be.length;if(ke===0)throw new TypeError('The value "'+v+'" is invalid for argument "value"');for(he=0;he<$-x;++he)this[he+x]=be[he%ke]}return this};const rr={};function c(v,x,$){rr[v]=class extends ${constructor(){super(),Object.defineProperty(this,"message",{value:x.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${v}]`,this.stack,delete this.name}get code(){return v}set code(se){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:se,writable:!0})}toString(){return`${this.name} [${v}]: ${this.message}`}}}c("ERR_BUFFER_OUT_OF_BOUNDS",function(v){return v?`${v} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),c("ERR_INVALID_ARG_TYPE",function(v,x){return`The "${v}" argument must be of type number. Received type ${typeof x}`},TypeError),c("ERR_OUT_OF_RANGE",function(v,x,$){let se=`The value of "${v}" is out of range.`,he=$;return Number.isInteger($)&&Math.abs($)>2**32?he=d(String($)):typeof $=="bigint"&&(he=String($),($>BigInt(2)**BigInt(32)||$<-(BigInt(2)**BigInt(32)))&&(he=d(he)),he+="n"),se+=` It must be ${x}. Received ${he}`,se},RangeError);function d(v){let x="",$=v.length;const se=v[0]==="-"?1:0;for(;$>=se+4;$-=3)x=`_${v.slice($-3,$)}${x}`;return`${v.slice(0,$)}${x}`}function g(v,x,$){M(x,"offset"),(v[x]===void 0||v[x+$]===void 0)&&re(x,v.length-($+1))}function O(v,x,$,se,he,be){if(v>$||v<x){const ke=typeof x=="bigint"?"n":"";let mt;throw x===0||x===BigInt(0)?mt=`>= 0${ke} and < 2${ke} ** ${(be+1)*8}${ke}`:mt=`>= -(2${ke} ** ${(be+1)*8-1}${ke}) and < 2 ** ${(be+1)*8-1}${ke}`,new rr.ERR_OUT_OF_RANGE("value",mt,v)}g(se,he,be)}function M(v,x){if(typeof v!="number")throw new rr.ERR_INVALID_ARG_TYPE(x,"number",v)}function re(v,x,$){throw Math.floor(v)!==v?(M(v,$),new rr.ERR_OUT_OF_RANGE("offset","an integer",v)):x<0?new rr.ERR_BUFFER_OUT_OF_BOUNDS:new rr.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${x}`,v)}const fe=/[^+/0-9A-Za-z-_]/g;function Ue(v){if(v=v.split("=")[0],v=v.trim().replace(fe,""),v.length<2)return"";for(;v.length%4!==0;)v=v+"=";return v}function Ge(v,x){x=x||1/0;let $;const se=v.length;let he=null;const be=[];for(let ke=0;ke<se;++ke){if($=v.charCodeAt(ke),$>55295&&$<57344){if(!he){if($>56319){(x-=3)>-1&&be.push(239,191,189);continue}else if(ke+1===se){(x-=3)>-1&&be.push(239,191,189);continue}he=$;continue}if($<56320){(x-=3)>-1&&be.push(239,191,189),he=$;continue}$=(he-55296<<10|$-56320)+65536}else he&&(x-=3)>-1&&be.push(239,191,189);if(he=null,$<128){if((x-=1)<0)break;be.push($)}else if($<2048){if((x-=2)<0)break;be.push($>>6|192,$&63|128)}else if($<65536){if((x-=3)<0)break;be.push($>>12|224,$>>6&63|128,$&63|128)}else if($<1114112){if((x-=4)<0)break;be.push($>>18|240,$>>12&63|128,$>>6&63|128,$&63|128)}else throw new Error("Invalid code point")}return be}function Ne(v){const x=[];for(let $=0;$<v.length;++$)x.push(v.charCodeAt($)&255);return x}function Oe(v,x){let $,se,he;const be=[];for(let ke=0;ke<v.length&&!((x-=2)<0);++ke)$=v.charCodeAt(ke),se=$>>8,he=$%256,be.push(he),be.push(se);return be}function Fe(v){return B.toByteArray(Ue(v))}function Vo(v,x,$,se){let he;for(he=0;he<se&&!(he+$>=x.length||he>=v.length);++he)x[he+$]=v[he];return he}function $r(v,x){return v instanceof x||v!=null&&v.constructor!=null&&v.constructor.name!=null&&v.constructor.name===x.name}function Wo(v){return v!==v}const Eu=(function(){const v="0123456789abcdef",x=new Array(256);for(let $=0;$<16;++$){const se=$*16;for(let he=0;he<16;++he)x[se+he]=v[$]+v[he]}return x})();function an(v){return typeof BigInt>"u"?Su:v}function Su(){throw new Error("BigInt not supported")}})(e);const I=e.Buffer;t.Blob=e.Blob,t.BlobOptions=e.BlobOptions,t.Buffer=e.Buffer,t.File=e.File,t.FileOptions=e.FileOptions,t.INSPECT_MAX_BYTES=e.INSPECT_MAX_BYTES,t.SlowBuffer=e.SlowBuffer,t.TranscodeEncoding=e.TranscodeEncoding,t.atob=e.atob,t.btoa=e.btoa,t.constants=e.constants,t.default=I,t.isAscii=e.isAscii,t.isUtf8=e.isUtf8,t.kMaxLength=e.kMaxLength,t.kStringMaxLength=e.kStringMaxLength,t.resolveObjectURL=e.resolveObjectURL,t.transcode=e.transcode})(F1)),F1}var j1;function oo(){return j1||(j1=1,(function(t,e){var r=gB(),n=r.Buffer;function i(s,a){for(var l in s)a[l]=s[l]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=o);function o(s,a,l){return n(s,a,l)}o.prototype=Object.create(n.prototype),i(n,o),o.from=function(s,a,l){if(typeof s=="number")throw new TypeError("Argument must not be a number");return n(s,a,l)},o.alloc=function(s,a,l){if(typeof s!="number")throw new TypeError("Argument must be a number");var f=n(s);return a!==void 0?typeof l=="string"?f.fill(a,l):f.fill(a):f.fill(0),f},o.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return n(s)},o.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(s)}})(Ih,Ih.exports)),Ih.exports}var _h,V1;function yB(){if(V1)return _h;V1=1;var t={}.toString;return _h=Array.isArray||function(e){return t.call(e)=="[object Array]"},_h}var xh,W1;function mB(){if(W1)return xh;W1=1;var t=Fs(),e=js(),r=e("TypedArray.prototype.buffer",!0),n=xS();return xh=r||function(i){if(!n(i))throw new t("Not a Typed Array");return i.buffer},xh}var Th,q1;function bB(){if(q1)return Th;q1=1;var t=oo().Buffer,e=yB(),r=mB(),n=ArrayBuffer.isView||function(a){try{return r(a),!0}catch{return!1}},i=typeof Uint8Array<"u",o=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s=o&&(t.prototype instanceof Uint8Array||t.TYPED_ARRAY_SUPPORT);return Th=function(a,l){if(t.isBuffer(a))return a.constructor&&!("isBuffer"in a)?t.from(a):a;if(typeof a=="string")return t.from(a,l);if(o&&n(a)){if(a.byteLength===0)return t.alloc(0);if(s){var f=t.from(a.buffer,a.byteOffset,a.byteLength);if(f.byteLength===a.byteLength)return f}var u=a instanceof Uint8Array?a:new Uint8Array(a.buffer,a.byteOffset,a.byteLength),p=t.from(u);if(p.length===a.byteLength)return p}if(i&&a instanceof Uint8Array)return t.from(a);var y=e(a);if(y)for(var w=0;w<a.length;w+=1){var A=a[w];if(typeof A!="number"||A<0||A>255||~~A!==A)throw new RangeError("Array items must be numbers in the range 0-255.")}if(y||t.isBuffer(a)&&a.constructor&&typeof a.constructor.isBuffer=="function"&&a.constructor.isBuffer(a))return t.from(a);throw new TypeError('The "data" argument must be a string, an Array, a Buffer, a Uint8Array, or a DataView.')},Th}var Bh,G1;function Vs(){if(G1)return Bh;G1=1;var t=oo().Buffer,e=bB();function r(n,i){this._block=t.alloc(n),this._finalSize=i,this._blockSize=n,this._len=0}return r.prototype.update=function(n,i){n=e(n,i||"utf8");for(var o=this._block,s=this._blockSize,a=n.length,l=this._len,f=0;f<a;){for(var u=l%s,p=Math.min(a-f,s-u),y=0;y<p;y++)o[u+y]=n[f+y];l+=p,f+=p,l%s===0&&this._update(o)}return this._len+=a,this},r.prototype.digest=function(n){var i=this._len%this._blockSize;this._block[i]=128,this._block.fill(0,i+1),i>=this._finalSize&&(this._update(this._block),this._block.fill(0));var o=this._len*8;if(o<=4294967295)this._block.writeUInt32BE(o,this._blockSize-4);else{var s=(o&4294967295)>>>0,a=(o-s)/4294967296;this._block.writeUInt32BE(a,this._blockSize-8),this._block.writeUInt32BE(s,this._blockSize-4)}this._update(this._block);var l=this._hash();return n?l.toString(n):l},r.prototype._update=function(){throw new Error("_update must be implemented by subclass")},Bh=r,Bh}var Ph,X1;function wB(){if(X1)return Ph;X1=1;var t=Fo(),e=Vs(),r=oo().Buffer,n=[1518500249,1859775393,-1894007588,-899497514],i=new Array(80);function o(){this.init(),this._w=i,e.call(this,64,56)}t(o,e),o.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function s(f){return f<<5|f>>>27}function a(f){return f<<30|f>>>2}function l(f,u,p,y){return f===0?u&p|~u&y:f===2?u&p|u&y|p&y:u^p^y}return o.prototype._update=function(f){for(var u=this._w,p=this._a|0,y=this._b|0,w=this._c|0,A=this._d|0,S=this._e|0,k=0;k<16;++k)u[k]=f.readInt32BE(k*4);for(;k<80;++k)u[k]=u[k-3]^u[k-8]^u[k-14]^u[k-16];for(var I=0;I<80;++I){var N=~~(I/20),B=s(p)+l(N,y,w,A)+S+u[I]+n[N]|0;S=A,A=w,w=a(y),y=p,p=B}this._a=p+this._a|0,this._b=y+this._b|0,this._c=w+this._c|0,this._d=A+this._d|0,this._e=S+this._e|0},o.prototype._hash=function(){var f=r.allocUnsafe(20);return f.writeInt32BE(this._a|0,0),f.writeInt32BE(this._b|0,4),f.writeInt32BE(this._c|0,8),f.writeInt32BE(this._d|0,12),f.writeInt32BE(this._e|0,16),f},Ph=o,Ph}var Oh,Y1;function vB(){if(Y1)return Oh;Y1=1;var t=Fo(),e=Vs(),r=oo().Buffer,n=[1518500249,1859775393,-1894007588,-899497514],i=new Array(80);function o(){this.init(),this._w=i,e.call(this,64,56)}t(o,e),o.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function s(u){return u<<1|u>>>31}function a(u){return u<<5|u>>>27}function l(u){return u<<30|u>>>2}function f(u,p,y,w){return u===0?p&y|~p&w:u===2?p&y|p&w|y&w:p^y^w}return o.prototype._update=function(u){for(var p=this._w,y=this._a|0,w=this._b|0,A=this._c|0,S=this._d|0,k=this._e|0,I=0;I<16;++I)p[I]=u.readInt32BE(I*4);for(;I<80;++I)p[I]=s(p[I-3]^p[I-8]^p[I-14]^p[I-16]);for(var N=0;N<80;++N){var B=~~(N/20),V=a(y)+f(B,w,A,S)+k+p[N]+n[B]|0;k=S,S=A,A=l(w),w=y,y=V}this._a=y+this._a|0,this._b=w+this._b|0,this._c=A+this._c|0,this._d=S+this._d|0,this._e=k+this._e|0},o.prototype._hash=function(){var u=r.allocUnsafe(20);return u.writeInt32BE(this._a|0,0),u.writeInt32BE(this._b|0,4),u.writeInt32BE(this._c|0,8),u.writeInt32BE(this._d|0,12),u.writeInt32BE(this._e|0,16),u},Oh=o,Oh}var Uh,Z1;function TS(){if(Z1)return Uh;Z1=1;var t=Fo(),e=Vs(),r=oo().Buffer,n=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],i=new Array(64);function o(){this.init(),this._w=i,e.call(this,64,56)}t(o,e),o.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function s(y,w,A){return A^y&(w^A)}function a(y,w,A){return y&w|A&(y|w)}function l(y){return(y>>>2|y<<30)^(y>>>13|y<<19)^(y>>>22|y<<10)}function f(y){return(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7)}function u(y){return(y>>>7|y<<25)^(y>>>18|y<<14)^y>>>3}function p(y){return(y>>>17|y<<15)^(y>>>19|y<<13)^y>>>10}return o.prototype._update=function(y){for(var w=this._w,A=this._a|0,S=this._b|0,k=this._c|0,I=this._d|0,N=this._e|0,B=this._f|0,V=this._g|0,W=this._h|0,Y=0;Y<16;++Y)w[Y]=y.readInt32BE(Y*4);for(;Y<64;++Y)w[Y]=p(w[Y-2])+w[Y-7]+u(w[Y-15])+w[Y-16]|0;for(var H=0;H<64;++H){var ie=W+f(N)+s(N,B,V)+n[H]+w[H]|0,T=l(A)+a(A,S,k)|0;W=V,V=B,B=N,N=I+ie|0,I=k,k=S,S=A,A=ie+T|0}this._a=A+this._a|0,this._b=S+this._b|0,this._c=k+this._c|0,this._d=I+this._d|0,this._e=N+this._e|0,this._f=B+this._f|0,this._g=V+this._g|0,this._h=W+this._h|0},o.prototype._hash=function(){var y=r.allocUnsafe(32);return y.writeInt32BE(this._a,0),y.writeInt32BE(this._b,4),y.writeInt32BE(this._c,8),y.writeInt32BE(this._d,12),y.writeInt32BE(this._e,16),y.writeInt32BE(this._f,20),y.writeInt32BE(this._g,24),y.writeInt32BE(this._h,28),y},Uh=o,Uh}var Lh,Q1;function EB(){if(Q1)return Lh;Q1=1;var t=Fo(),e=TS(),r=Vs(),n=oo().Buffer,i=new Array(64);function o(){this.init(),this._w=i,r.call(this,64,56)}return t(o,e),o.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},o.prototype._hash=function(){var s=n.allocUnsafe(28);return s.writeInt32BE(this._a,0),s.writeInt32BE(this._b,4),s.writeInt32BE(this._c,8),s.writeInt32BE(this._d,12),s.writeInt32BE(this._e,16),s.writeInt32BE(this._f,20),s.writeInt32BE(this._g,24),s},Lh=o,Lh}var Rh,J1;function BS(){if(J1)return Rh;J1=1;var t=Fo(),e=Vs(),r=oo().Buffer,n=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],i=new Array(160);function o(){this.init(),this._w=i,e.call(this,128,112)}t(o,e),o.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function s(S,k,I){return I^S&(k^I)}function a(S,k,I){return S&k|I&(S|k)}function l(S,k){return(S>>>28|k<<4)^(k>>>2|S<<30)^(k>>>7|S<<25)}function f(S,k){return(S>>>14|k<<18)^(S>>>18|k<<14)^(k>>>9|S<<23)}function u(S,k){return(S>>>1|k<<31)^(S>>>8|k<<24)^S>>>7}function p(S,k){return(S>>>1|k<<31)^(S>>>8|k<<24)^(S>>>7|k<<25)}function y(S,k){return(S>>>19|k<<13)^(k>>>29|S<<3)^S>>>6}function w(S,k){return(S>>>19|k<<13)^(k>>>29|S<<3)^(S>>>6|k<<26)}function A(S,k){return S>>>0<k>>>0?1:0}return o.prototype._update=function(S){for(var k=this._w,I=this._ah|0,N=this._bh|0,B=this._ch|0,V=this._dh|0,W=this._eh|0,Y=this._fh|0,H=this._gh|0,ie=this._hh|0,T=this._al|0,C=this._bl|0,G=this._cl|0,U=this._dl|0,P=this._el|0,L=this._fl|0,R=this._gl|0,z=this._hl|0,X=0;X<32;X+=2)k[X]=S.readInt32BE(X*4),k[X+1]=S.readInt32BE(X*4+4);for(;X<160;X+=2){var ee=k[X-30],_=k[X-30+1],K=u(ee,_),Z=p(_,ee);ee=k[X-4],_=k[X-4+1];var D=y(ee,_),J=w(_,ee),j=k[X-14],te=k[X-14+1],ae=k[X-32],ce=k[X-32+1],pe=Z+te|0,le=K+j+A(pe,Z)|0;pe=pe+J|0,le=le+D+A(pe,J)|0,pe=pe+ce|0,le=le+ae+A(pe,ce)|0,k[X]=le,k[X+1]=pe}for(var ye=0;ye<160;ye+=2){le=k[ye],pe=k[ye+1];var Ae=a(I,N,B),xe=a(T,C,G),Be=l(I,T),We=l(T,I),ze=f(W,P),Qe=f(P,W),qe=n[ye],lt=n[ye+1],me=s(W,Y,H),at=s(P,L,R),Ie=z+Qe|0,He=ie+ze+A(Ie,z)|0;Ie=Ie+at|0,He=He+me+A(Ie,at)|0,Ie=Ie+lt|0,He=He+qe+A(Ie,lt)|0,Ie=Ie+pe|0,He=He+le+A(Ie,pe)|0;var Ke=We+xe|0,ft=Be+Ae+A(Ke,We)|0;ie=H,z=R,H=Y,R=L,Y=W,L=P,P=U+Ie|0,W=V+He+A(P,U)|0,V=B,U=G,B=N,G=C,N=I,C=T,T=Ie+Ke|0,I=He+ft+A(T,Ie)|0}this._al=this._al+T|0,this._bl=this._bl+C|0,this._cl=this._cl+G|0,this._dl=this._dl+U|0,this._el=this._el+P|0,this._fl=this._fl+L|0,this._gl=this._gl+R|0,this._hl=this._hl+z|0,this._ah=this._ah+I+A(this._al,T)|0,this._bh=this._bh+N+A(this._bl,C)|0,this._ch=this._ch+B+A(this._cl,G)|0,this._dh=this._dh+V+A(this._dl,U)|0,this._eh=this._eh+W+A(this._el,P)|0,this._fh=this._fh+Y+A(this._fl,L)|0,this._gh=this._gh+H+A(this._gl,R)|0,this._hh=this._hh+ie+A(this._hl,z)|0},o.prototype._hash=function(){var S=r.allocUnsafe(64);function k(I,N,B){S.writeInt32BE(I,B),S.writeInt32BE(N,B+4)}return k(this._ah,this._al,0),k(this._bh,this._bl,8),k(this._ch,this._cl,16),k(this._dh,this._dl,24),k(this._eh,this._el,32),k(this._fh,this._fl,40),k(this._gh,this._gl,48),k(this._hh,this._hl,56),S},Rh=o,Rh}var $h,ev;function SB(){if(ev)return $h;ev=1;var t=Fo(),e=BS(),r=Vs(),n=oo().Buffer,i=new Array(160);function o(){this.init(),this._w=i,r.call(this,128,112)}return t(o,e),o.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},o.prototype._hash=function(){var s=n.allocUnsafe(48);function a(l,f,u){s.writeInt32BE(l,u),s.writeInt32BE(f,u+4)}return a(this._ah,this._al,0),a(this._bh,this._bl,8),a(this._ch,this._cl,16),a(this._dh,this._dl,24),a(this._eh,this._el,32),a(this._fh,this._fl,40),s},$h=o,$h}var tv;function AB(){return tv||(tv=1,(function(t){t.exports=function(e){var r=e.toLowerCase(),n=t.exports[r];if(!n)throw new Error(r+" is not supported (we accept pull requests)");return new n},t.exports.sha=wB(),t.exports.sha1=vB(),t.exports.sha224=EB(),t.exports.sha256=TS(),t.exports.sha384=SB(),t.exports.sha512=BS()})(h2)),h2.exports}var kB=AB();const IB=cE(kB),Ur={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bc",bech32Opnet:"op",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},_B={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bcrt",bech32Opnet:"opr",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239},xB={messagePrefix:`Bitcoin Signed Message:
`,bech32:"tb",bech32Opnet:"opt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239},TB={messagePrefix:`Dogecoin Signed Message:
`,bech32:"",bech32Opnet:"",bip32:{public:49990397,private:49988504},pubKeyHash:30,scriptHash:22,wif:158},BB={messagePrefix:`Dogecoin Signed Message:
`,bech32:"",bech32Opnet:"",bip32:{public:70429096,private:70427203},pubKeyHash:113,scriptHash:196,wif:241},PB={messagePrefix:`Litecoin Signed Message:
`,bech32:"ltc",bech32Opnet:"opl",bip32:{public:27108450,private:27106558},pubKeyHash:48,scriptHash:50,wif:176},OB={messagePrefix:`Litecoin Signed Message:
`,bech32:"tltc",bech32Opnet:"oplt",bip32:{public:70709117,private:70711009},pubKeyHash:111,scriptHash:58,wif:239},UB={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bitcoincash",bech32Opnet:"opbch",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},LB={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bchtest",bech32Opnet:"opbcht",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239},RB={messagePrefix:`DarkCoin Signed Message:
`,bech32:"",bech32Opnet:"",bip32:{public:50221772,private:50221816},pubKeyHash:76,scriptHash:16,wif:204},$B={messagePrefix:`DarkCoin Signed Message:
`,bech32:"",bech32Opnet:"",bip32:{public:981492128,private:981489719},pubKeyHash:140,scriptHash:19,wif:239},De=Object.freeze(Object.defineProperty({__proto__:null,bitcoin:Ur,bitcoinCash:UB,bitcoinCashTestnet:LB,dash:RB,dashTestnet:$B,dogecoin:TB,dogecoinTestnet:BB,litecoin:PB,litecoinTestnet:OB,regtest:_B,testnet:xB},Symbol.toStringTag,{value:"Module"}));var uo={},rv;function CB(){if(rv)return uo;rv=1,Object.defineProperty(uo,"__esModule",{value:!0}),uo.bech32m=uo.bech32=void 0;const t="qpzry9x8gf2tvdw0s3jn54khce6mua7l",e={};for(let f=0;f<t.length;f++){const u=t.charAt(f);e[u]=f}function r(f){const u=f>>25;return(f&33554431)<<5^-(u>>0&1)&996825010^-(u>>1&1)&642813549^-(u>>2&1)&513874426^-(u>>3&1)&1027748829^-(u>>4&1)&705979059}function n(f){let u=1;for(let p=0;p<f.length;++p){const y=f.charCodeAt(p);if(y<33||y>126)return"Invalid prefix ("+f+")";u=r(u)^y>>5}u=r(u);for(let p=0;p<f.length;++p){const y=f.charCodeAt(p);u=r(u)^y&31}return u}function i(f,u,p,y){let w=0,A=0;const S=(1<<p)-1,k=[];for(let I=0;I<f.length;++I)for(w=w<<u|f[I],A+=u;A>=p;)A-=p,k.push(w>>A&S);if(y)A>0&&k.push(w<<p-A&S);else{if(A>=u)return"Excess padding";if(w<<p-A&S)return"Non-zero padding"}return k}function o(f){return i(f,8,5,!0)}function s(f){const u=i(f,5,8,!1);if(Array.isArray(u))return u}function a(f){const u=i(f,5,8,!1);if(Array.isArray(u))return u;throw new Error(u)}function l(f){let u;f==="bech32"?u=1:u=734539939;function p(S,k,I){if(I=I||90,S.length+7+k.length>I)throw new TypeError("Exceeds length limit");S=S.toLowerCase();let N=n(S);if(typeof N=="string")throw new Error(N);let B=S+"1";for(let V=0;V<k.length;++V){const W=k[V];if(W>>5!==0)throw new Error("Non 5-bit word");N=r(N)^W,B+=t.charAt(W)}for(let V=0;V<6;++V)N=r(N);N^=u;for(let V=0;V<6;++V){const W=N>>(5-V)*5&31;B+=t.charAt(W)}return B}function y(S,k){if(k=k||90,S.length<8)return S+" too short";if(S.length>k)return"Exceeds length limit";const I=S.toLowerCase(),N=S.toUpperCase();if(S!==I&&S!==N)return"Mixed-case string "+S;S=I;const B=S.lastIndexOf("1");if(B===-1)return"No separator character for "+S;if(B===0)return"Missing prefix for "+S;const V=S.slice(0,B),W=S.slice(B+1);if(W.length<6)return"Data too short";let Y=n(V);if(typeof Y=="string")return Y;const H=[];for(let ie=0;ie<W.length;++ie){const T=W.charAt(ie),C=e[T];if(C===void 0)return"Unknown character "+T;Y=r(Y)^C,!(ie+6>=W.length)&&H.push(C)}return Y!==u?"Invalid checksum for "+S:{prefix:V,words:H}}function w(S,k){const I=y(S,k);if(typeof I=="object")return I}function A(S,k){const I=y(S,k);if(typeof I=="object")return I;throw new Error(I)}return{decodeUnsafe:w,decode:A,encode:p,toWords:o,fromWordsUnsafe:s,fromWords:a}}return uo.bech32=l("bech32"),uo.bech32m=l("bech32m"),uo}var Rt=CB();function Kl(t){let e,r;try{e=Rt.bech32.decode(t)}catch{}if(e){if(r=e.words[0],r!==0)throw new TypeError(t+" uses wrong encoding")}else if(e=Rt.bech32m.decode(t),r=e.words[0],r===0)throw new TypeError(t+" uses wrong encoding");const n=Rt.bech32.fromWords(e.words.slice(1));return{version:r,prefix:e.prefix,data:new Uint8Array(n)}}const PS="0123456789abcdefABCDEF";PS.split("").map(t=>t.codePointAt(0));Array(256).fill(!0).map((t,e)=>{const r=String.fromCodePoint(e),n=PS.indexOf(r);return n<0?void 0:n<16?n:n-6});new TextEncoder;new TextDecoder;function NB(t,e,r,n){if(e+2>t.length)throw new Error("Offset is outside the bounds of Uint8Array");if(n=n.toUpperCase(),r>65535)throw new Error(`The value of "value" is out of range. It must be >= 0 and <= 65535. Received ${r}`);n==="LE"?(t[e]=r&255,t[e+1]=r>>8&255):(t[e]=r>>8&255,t[e+1]=r&255)}function HB(t,e,r,n){if(e+4>t.length)throw new Error("Offset is outside the bounds of Uint8Array");if(n=n.toUpperCase(),r>4294967295)throw new Error(`The value of "value" is out of range. It must be >= 0 and <= ${4294967295}. Received ${r}`);n==="LE"?(t[e]=r&255,t[e+1]=r>>8&255,t[e+2]=r>>16&255,t[e+3]=r>>24&255):(t[e]=r>>24&255,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=r&255)}function DB(t,e,r,n){if(e+8>t.length)throw new Error("Offset is outside the bounds of Uint8Array");if(n=n.toUpperCase(),r>0xffffffffffffffffn)throw new Error(`The value of "value" is out of range. It must be >= 0 and <= ${0xffffffffffffffffn}. Received ${r}`);n==="LE"?(t[e]=Number(r&0xffn),t[e+1]=Number(r>>8n&0xffn),t[e+2]=Number(r>>16n&0xffn),t[e+3]=Number(r>>24n&0xffn),t[e+4]=Number(r>>32n&0xffn),t[e+5]=Number(r>>40n&0xffn),t[e+6]=Number(r>>48n&0xffn),t[e+7]=Number(r>>56n&0xffn)):(t[e]=Number(r>>56n&0xffn),t[e+1]=Number(r>>48n&0xffn),t[e+2]=Number(r>>40n&0xffn),t[e+3]=Number(r>>32n&0xffn),t[e+4]=Number(r>>24n&0xffn),t[e+5]=Number(r>>16n&0xffn),t[e+6]=Number(r>>8n&0xffn),t[e+7]=Number(r&0xffn))}function zB(t,e,r){if(e+2>t.length)throw new Error("Offset is outside the bounds of Uint8Array");if(r=r.toUpperCase(),r==="LE"){let n=0;return n=(n<<8)+t[e+1],n=(n<<8)+t[e],n}else{let n=0;return n=(n<<8)+t[e],n=(n<<8)+t[e+1],n}}function MB(t,e,r){if(e+4>t.length)throw new Error("Offset is outside the bounds of Uint8Array");if(r=r.toUpperCase(),r==="LE"){let n=0;return n=(n<<8)+t[e+3]>>>0,n=(n<<8)+t[e+2]>>>0,n=(n<<8)+t[e+1]>>>0,n=(n<<8)+t[e]>>>0,n}else{let n=0;return n=(n<<8)+t[e]>>>0,n=(n<<8)+t[e+1]>>>0,n=(n<<8)+t[e+2]>>>0,n=(n<<8)+t[e+3]>>>0,n}}function FB(t,e,r){if(e+8>t.length)throw new Error("Offset is outside the bounds of Uint8Array");if(r=r.toUpperCase(),r==="LE"){let n=0n;return n=(n<<8n)+BigInt(t[e+7]),n=(n<<8n)+BigInt(t[e+6]),n=(n<<8n)+BigInt(t[e+5]),n=(n<<8n)+BigInt(t[e+4]),n=(n<<8n)+BigInt(t[e+3]),n=(n<<8n)+BigInt(t[e+2]),n=(n<<8n)+BigInt(t[e+1]),n=(n<<8n)+BigInt(t[e]),n}else{let n=0n;return n=(n<<8n)+BigInt(t[e]),n=(n<<8n)+BigInt(t[e+1]),n=(n<<8n)+BigInt(t[e+2]),n=(n<<8n)+BigInt(t[e+3]),n=(n<<8n)+BigInt(t[e+4]),n=(n<<8n)+BigInt(t[e+5]),n=(n<<8n)+BigInt(t[e+6]),n=(n<<8n)+BigInt(t[e+7]),n}}const KB=t=>{if(t<0||t>0xffffffffffffffffn)throw new RangeError("value out of range")};function jB(t){if(t<0||t>Number.MAX_SAFE_INTEGER||t%1!==0)throw new RangeError("value out of range")}function OS(t){typeof t=="number"?jB(t):KB(t)}function ro(t,e,r){OS(t),r===void 0&&(r=0),e===void 0&&(e=new Uint8Array(on(t)));let n=0;return t<253?(e.set([Number(t)],r),n=1):t<=65535?(e.set([253],r),NB(e,r+1,Number(t),"LE"),n=3):t<=4294967295?(e.set([254],r),HB(e,r+1,Number(t),"LE"),n=5):(e.set([255],r),DB(e,r+1,BigInt(t),"LE"),n=9),{buffer:e,bytes:n}}function Ws(t,e){e===void 0&&(e=0);const r=t.at(e);if(r===void 0)throw new Error("buffer too small");if(r<253)return{numberValue:r,bigintValue:BigInt(r),bytes:1};if(r===253){const n=zB(t,e+1,"LE");return{numberValue:n,bigintValue:BigInt(n),bytes:3}}else if(r===254){const n=MB(t,e+1,"LE");return{numberValue:n,bigintValue:BigInt(n),bytes:5}}else{const n=FB(t,e+1,"LE");return{numberValue:n<=Number.MAX_SAFE_INTEGER?Number(n):null,bigintValue:n,bytes:9}}}function on(t){return OS(t),t<253?1:t<=65535?3:t<=4294967295?5:9}const $d=Object.freeze(Object.defineProperty({__proto__:null,decode:Ws,encode:ro,encodingLength:on},Symbol.toStringTag,{value:"Module"})),VB=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0")),nv=(()=>{const t=new Array(128).fill(-1);for(let e=0;e<10;e++)t[48+e]=e;for(let e=0;e<6;e++)t[65+e]=10+e,t[97+e]=10+e;return t})();function ve(t){let e="";for(let r=0;r<t.length;r++){const n=VB[t[r]];e+=n}return e}function Ee(t){t.length>=2&&t[0]==="0"&&(t[1]==="x"||t[1]==="X")&&(t=t.slice(2));const e=t.length;if(e%2!==0)throw new TypeError("Invalid hex string: odd length");const r=e/2,n=new Uint8Array(r);for(let i=0;i<r;i++){const o=i*2,s=t.charCodeAt(o),a=t.charCodeAt(o+1);if(s>=128||a>=128)throw new TypeError(`Invalid hex character at position ${o}`);const l=nv[s],f=nv[a];if(l===-1)throw new TypeError(`Invalid hex character at position ${o}`);if(f===-1)throw new TypeError(`Invalid hex character at position ${o+1}`);n[i]=l<<4|f}return n}let WB=class US{#e;#s;#t;constructor(e,r=0){this.#e=e,this.#s=new DataView(e.buffer,e.byteOffset,e.byteLength),this.#t=r}get offset(){return this.#t}set offset(e){if(e<0||e>this.#e.length)throw new RangeError(`Offset ${e} is out of bounds [0, ${this.#e.length}]`);this.#t=e}get length(){return this.#e.length}get remaining(){return this.#e.length-this.#t}get data(){return this.#e}static fromHex(e){return new US(Ee(e))}readUInt8(){if(this.#t>=this.#e.length)throw new RangeError("Read past end of buffer");return this.#e[this.#t++]}readInt8(){const e=this.readUInt8();return e>127?e-256:e}readUInt16LE(){if(this.#t+2>this.#e.length)throw new RangeError("Read past end of buffer");const e=this.#s.getUint16(this.#t,!0);return this.#t+=2,e}readInt16LE(){if(this.#t+2>this.#e.length)throw new RangeError("Read past end of buffer");const e=this.#s.getInt16(this.#t,!0);return this.#t+=2,e}readUInt32LE(){if(this.#t+4>this.#e.length)throw new RangeError("Read past end of buffer");const e=this.#s.getUint32(this.#t,!0);return this.#t+=4,e}readInt32LE(){if(this.#t+4>this.#e.length)throw new RangeError("Read past end of buffer");const e=this.#s.getInt32(this.#t,!0);return this.#t+=4,e}readUInt64LE(){if(this.#t+8>this.#e.length)throw new RangeError("Read past end of buffer");const e=this.#s.getBigUint64(this.#t,!0);return this.#t+=8,e}readInt64LE(){if(this.#t+8>this.#e.length)throw new RangeError("Read past end of buffer");const e=this.#s.getBigInt64(this.#t,!0);return this.#t+=8,e}readBytes(e){if(this.#t+e>this.#e.length)throw new RangeError("Read past end of buffer");const r=this.#e.subarray(this.#t,this.#t+e);return this.#t+=e,r}readBytesCopy(e){if(this.#t+e>this.#e.length)throw new RangeError("Read past end of buffer");const r=this.#e.slice(this.#t,this.#t+e);return this.#t+=e,r}readVarInt(){const e=this.readUInt8();if(e<253)return e;if(e===253)return this.readUInt16LE();if(e===254)return this.readUInt32LE();const r=this.readUInt64LE();if(r>BigInt(Number.MAX_SAFE_INTEGER))throw new RangeError("VarInt value exceeds MAX_SAFE_INTEGER");return Number(r)}readVarIntBig(){const e=this.readUInt8();return e<253?BigInt(e):e===253?BigInt(this.readUInt16LE()):e===254?BigInt(this.readUInt32LE()):this.readUInt64LE()}readVarBytes(){const e=this.readVarInt();return this.readBytes(e)}readVector(){const e=this.readVarInt(),r=[];for(let n=0;n<e;n++)r.push(this.readVarBytes());return r}peek(){if(!(this.#t>=this.#e.length))return this.#e[this.#t]}skip(e){if(this.#t+e>this.#e.length)throw new RangeError("Skip past end of buffer");this.#t+=e}reset(){this.#t=0}hasMore(){return this.#t<this.#e.length}},zt=class{#e;#s;#t;constructor(e,r=0){typeof e=="number"?(this.#e=new Uint8Array(e),this.#t=0):(this.#e=e,this.#t=r),this.#s=new DataView(this.#e.buffer,this.#e.byteOffset,this.#e.byteLength)}get offset(){return this.#t}set offset(e){if(e<0||e>this.#e.length)throw new RangeError(`Offset ${e} is out of bounds [0, ${this.#e.length}]`);this.#t=e}get capacity(){return this.#e.length}get remaining(){return this.#e.length-this.#t}get data(){return this.#e}static growable(e=256){return new qB(e)}writeUInt8(e){if(this.#t>=this.#e.length)throw new RangeError("Write past end of buffer");return this.#e[this.#t++]=e&255,this}writeInt8(e){return this.writeUInt8(e<0?e+256:e)}writeUInt16LE(e){if(this.#t+2>this.#e.length)throw new RangeError("Write past end of buffer");return this.#s.setUint16(this.#t,e,!0),this.#t+=2,this}writeInt16LE(e){if(this.#t+2>this.#e.length)throw new RangeError("Write past end of buffer");return this.#s.setInt16(this.#t,e,!0),this.#t+=2,this}writeUInt32LE(e){if(this.#t+4>this.#e.length)throw new RangeError("Write past end of buffer");return this.#s.setUint32(this.#t,e,!0),this.#t+=4,this}writeInt32LE(e){if(this.#t+4>this.#e.length)throw new RangeError("Write past end of buffer");return this.#s.setInt32(this.#t,e,!0),this.#t+=4,this}writeUInt64LE(e){if(this.#t+8>this.#e.length)throw new RangeError("Write past end of buffer");return this.#s.setBigUint64(this.#t,e,!0),this.#t+=8,this}writeInt64LE(e){if(this.#t+8>this.#e.length)throw new RangeError("Write past end of buffer");return this.#s.setBigInt64(this.#t,e,!0),this.#t+=8,this}writeBytes(e){if(this.#t+e.length>this.#e.length)throw new RangeError("Write past end of buffer");return this.#e.set(e,this.#t),this.#t+=e.length,this}writeVarInt(e){return e<253?this.writeUInt8(e):e<=65535?(this.writeUInt8(253),this.writeUInt16LE(e)):e<=4294967295?(this.writeUInt8(254),this.writeUInt32LE(e)):(this.writeUInt8(255),this.writeUInt64LE(BigInt(e)))}writeVarIntBig(e){return e<0xfdn?this.writeUInt8(Number(e)):e<=0xffffn?(this.writeUInt8(253),this.writeUInt16LE(Number(e))):e<=0xffffffffn?(this.writeUInt8(254),this.writeUInt32LE(Number(e))):(this.writeUInt8(255),this.writeUInt64LE(e))}writeVarBytes(e){return this.writeVarInt(e.length),this.writeBytes(e)}writeVector(e){this.writeVarInt(e.length);for(const r of e)this.writeVarBytes(r);return this}fill(e,r){if(this.#t+r>this.#e.length)throw new RangeError("Write past end of buffer");return this.#e.fill(e,this.#t,this.#t+r),this.#t+=r,this}skip(e){if(this.#t+e>this.#e.length)throw new RangeError("Skip past end of buffer");return this.#t+=e,this}reset(){return this.#t=0,this}end(){if(this.#t===this.#e.length)return this.#e;throw new Error(`buffer size ${this.#e.length}, offset ${this.#t}`)}finish(){return this.#t===this.#e.length?this.#e:this.#e.subarray(0,this.#t)}toHex(){return ve(this.finish())}},qB=class{#e;#s;#t=0;constructor(t=256){this.#e=new Uint8Array(t),this.#s=new DataView(this.#e.buffer)}get offset(){return this.#t}set offset(t){if(t<0)throw new RangeError(`Offset ${t} cannot be negative`);this.#t=t}get capacity(){return this.#e.length}writeUInt8(t){return this.#o(1),this.#e[this.#t++]=t&255,this}writeUInt16LE(t){return this.#o(2),this.#s.setUint16(this.#t,t,!0),this.#t+=2,this}writeUInt32LE(t){return this.#o(4),this.#s.setUint32(this.#t,t,!0),this.#t+=4,this}writeInt32LE(t){return this.#o(4),this.#s.setInt32(this.#t,t,!0),this.#t+=4,this}writeUInt64LE(t){return this.#o(8),this.#s.setBigUint64(this.#t,t,!0),this.#t+=8,this}writeBytes(t){return this.#o(t.length),this.#e.set(t,this.#t),this.#t+=t.length,this}writeVarInt(t){return t<253?this.writeUInt8(t):t<=65535?(this.writeUInt8(253),this.writeUInt16LE(t)):t<=4294967295?(this.writeUInt8(254),this.writeUInt32LE(t)):(this.writeUInt8(255),this.writeUInt64LE(BigInt(t)))}writeVarBytes(t){return this.writeVarInt(t.length),this.writeBytes(t)}writeVector(t){this.writeVarInt(t.length);for(const e of t)this.writeVarBytes(e);return this}finish(){return this.#e.slice(0,this.#t)}toHex(){return ve(this.finish())}#o(t){const e=this.#t+t;if(e<=this.#e.length)return;let r=this.#e.length*2;for(;r<e;)r*=2;const n=new Uint8Array(r);n.set(this.#e.subarray(0,this.#t)),this.#e=n,this.#s=new DataView(this.#e.buffer)}};function Cd(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function LS(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(r=>typeof r=="string"):e.every(r=>Number.isSafeInteger(r)):!1}function GB(t){if(typeof t!="function")throw new Error("function expected");return!0}function Nd(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function Zp(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function Hd(t){if(!Array.isArray(t))throw new Error("array expected")}function RS(t,e){if(!LS(!0,e))throw new Error(`${t}: array of strings expected`)}function XB(t,e){if(!LS(!1,e))throw new Error(`${t}: array of numbers expected`)}function $S(...t){const e=o=>o,r=(o,s)=>a=>o(s(a)),n=t.map(o=>o.encode).reduceRight(r,e),i=t.map(o=>o.decode).reduce(r,e);return{encode:n,decode:i}}function YB(t){const e=t.split(""),r=e.length;RS("alphabet",e);const n=new Map(e.map((i,o)=>[i,o]));return{encode:i=>(Hd(i),i.map(o=>{if(!Number.isSafeInteger(o)||o<0||o>=r)throw new Error(`alphabet.encode: digit index outside alphabet "${o}". Allowed: ${t}`);return e[o]})),decode:i=>(Hd(i),i.map(o=>{Nd("alphabet.decode",o);const s=n.get(o);if(s===void 0)throw new Error(`Unknown letter: "${o}". Allowed: ${t}`);return s}))}}function ZB(t=""){return Nd("join",t),{encode:e=>(RS("join.decode",e),e.join(t)),decode:e=>(Nd("join.decode",e),e.split(t))}}function iv(t,e,r){if(e<2)throw new Error(`convertRadix: invalid from=${e}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: invalid to=${r}, base cannot be less than 2`);if(Hd(t),!t.length)return[];let n=0;const i=[],o=Array.from(t,a=>{if(Zp(a),a<0||a>=e)throw new Error(`invalid integer: ${a}`);return a}),s=o.length;for(;;){let a=0,l=!0;for(let f=n;f<s;f++){const u=o[f],p=e*a,y=p+u;if(!Number.isSafeInteger(y)||p/e!==a||y-u!==p)throw new Error("convertRadix: carry overflow");const w=y/r;a=y%r;const A=Math.floor(w);if(o[f]=A,!Number.isSafeInteger(A)||A*r+a!==y)throw new Error("convertRadix: carry overflow");if(l)A?l=!1:n=f;else continue}if(i.push(a),l)break}for(let a=0;a<t.length-1&&t[a]===0;a++)i.push(0);return i.reverse()}function QB(t){Zp(t);const e=2**8;return{encode:r=>{if(!Cd(r))throw new Error("radix.encode input should be Uint8Array");return iv(Array.from(r),e,t)},decode:r=>(XB("radix.decode",r),Uint8Array.from(iv(r,t,e)))}}function JB(t,e){return Zp(t),GB(e),{encode(r){if(!Cd(r))throw new Error("checksum.encode: input should be Uint8Array");const n=e(r).slice(0,t),i=new Uint8Array(r.length+t);return i.set(r),i.set(n,r.length),i},decode(r){if(!Cd(r))throw new Error("checksum.decode: input should be Uint8Array");const n=r.slice(0,-t),i=r.slice(-t),o=e(n).slice(0,t);for(let s=0;s<t;s++)if(o[s]!==i[s])throw new Error("Invalid checksum");return n}}}const eP=t=>$S(QB(58),YB(t),ZB("")),tP=eP("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),rP=t=>$S(JB(4,e=>t(t(e))),tP);function nP(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function CS(t,e,r=""){const n=nP(t),i=t?.length;if(!n||e!==void 0){const o=r&&`"${r}" `,s="",a=n?`length=${i}`:`type=${typeof t}`;throw new Error(o+"expected Uint8Array"+s+", got "+a)}return t}function ov(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function iP(t,e){CS(t,void 0,"digestInto() output");const r=e.outputLen;if(t.length<r)throw new Error('"digestInto() output" expected to be of length >='+r)}function Co(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Ch(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function xn(t,e){return t<<32-e|t>>>e}function Io(t,e){return t<<e|t>>>32-e>>>0}function Qp(t,e={}){const r=(i,o)=>t(o).update(i).digest(),n=t(void 0);return r.outputLen=n.outputLen,r.blockLen=n.blockLen,r.create=i=>t(i),Object.assign(r,e),Object.freeze(r)}const oP=t=>({oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,t])});function NS(t,e,r){return t&e^~t&r}function HS(t,e,r){return t&e^t&r^e&r}class Jp{blockLen;outputLen;padOffset;isLE;buffer;view;finished=!1;length=0;pos=0;destroyed=!1;constructor(e,r,n,i){this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(e),this.view=Ch(this.buffer)}update(e){ov(this),CS(e);const{view:r,buffer:n,blockLen:i}=this,o=e.length;for(let s=0;s<o;){const a=Math.min(i-this.pos,o-s);if(a===i){const l=Ch(e);for(;i<=o-s;s+=i)this.process(l,s);continue}n.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ov(this),iP(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:o}=this;let{pos:s}=this;r[s++]=128,Co(this.buffer.subarray(s)),this.padOffset>i-s&&(this.process(n,0),s=0);for(let p=s;p<i;p++)r[p]=0;n.setBigUint64(i-8,BigInt(this.length*8),o),this.process(n,0);const a=Ch(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen must be aligned to 32bit");const f=l/4,u=this.get();if(f>u.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<f;p++)a.setUint32(4*p,u[p],o)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||=new this.constructor,e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return e.destroyed=s,e.finished=o,e.length=i,e.pos=a,i%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const Ti=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),sP=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Bi=new Uint32Array(64);class aP extends Jp{constructor(e){super(64,e,8,!1)}get(){const{A:e,B:r,C:n,D:i,E:o,F:s,G:a,H:l}=this;return[e,r,n,i,o,s,a,l]}set(e,r,n,i,o,s,a,l){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=l|0}process(e,r){for(let p=0;p<16;p++,r+=4)Bi[p]=e.getUint32(r,!1);for(let p=16;p<64;p++){const y=Bi[p-15],w=Bi[p-2],A=xn(y,7)^xn(y,18)^y>>>3,S=xn(w,17)^xn(w,19)^w>>>10;Bi[p]=S+Bi[p-7]+A+Bi[p-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:l,G:f,H:u}=this;for(let p=0;p<64;p++){const y=xn(a,6)^xn(a,11)^xn(a,25),w=u+y+NS(a,l,f)+sP[p]+Bi[p]|0,A=(xn(n,2)^xn(n,13)^xn(n,22))+HS(n,i,o)|0;u=f,f=l,l=a,a=s+w|0,s=o,o=i,i=n,n=w+A|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,l=l+this.F|0,f=f+this.G|0,u=u+this.H|0,this.set(n,i,o,s,a,l,f,u)}roundClean(){Co(Bi)}destroy(){this.set(0,0,0,0,0,0,0,0),Co(this.buffer)}}class uP extends aP{A=Ti[0]|0;B=Ti[1]|0;C=Ti[2]|0;D=Ti[3]|0;E=Ti[4]|0;F=Ti[5]|0;G=Ti[6]|0;H=Ti[7]|0;constructor(){super(32)}}const za=Qp(()=>new uP,oP(1)),DS=rP(za);function e0(t){return DS.encode(t)}function t0(t){return DS.decode(t)}function jt(t){let e=0;for(const i of t)e+=i.length;const r=new Uint8Array(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}function _e(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function Us(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}function Dd(t){for(let e=0;e<t.length;e++)if(t[e]!==0)return!1;return!0}function sv(t){const e=new Uint8Array(t.length);return e.set(t),e}function r0(t){return t.reverse(),t}function Ft(t,e=0){const r=new Uint8Array(t);return e!==0&&r.fill(e),r}function cP(t){return new TextEncoder().encode(t)}function lP(t){if(t.length<8||t.length>72||t[0]!==48||t[1]!==t.length-2||t[2]!==2)return!1;const e=t[3];if(e===0||5+e>=t.length||t[4+e]!==2)return!1;const r=t[5+e];return!(r===0||6+e+r!==t.length||t[4]&128||e>1&&t[4]===0&&!(t[5]&128)||t[e+6]&128||r>1&&t[e+6]===0&&!(t[e+7]&128))}function fP(t){if(t.length<8)throw new Error("DER sequence length is too short");if(t.length>72)throw new Error("DER sequence length is too long");if(t[0]!==48)throw new Error("Expected DER sequence");if(t[1]!==t.length-2)throw new Error("DER sequence length is invalid");if(t[2]!==2)throw new Error("Expected DER integer");const e=t[3];if(e===0)throw new Error("R length is zero");if(5+e>=t.length)throw new Error("R length is too long");if(t[4+e]!==2)throw new Error("Expected DER integer (2)");const r=t[5+e];if(r===0)throw new Error("S length is zero");if(6+e+r!==t.length)throw new Error("S length is invalid");if(t[4]&128)throw new Error("R value is negative");if(e>1&&t[4]===0&&!(t[5]&128))throw new Error("R value excessively padded");if(t[e+6]&128)throw new Error("S value is negative");if(r>1&&t[e+6]===0&&!(t[e+7]&128))throw new Error("S value excessively padded");return{r:t.subarray(4,4+e),s:t.subarray(6+e)}}function hP(t,e){const r=t.length,n=e.length;if(r===0)throw new Error("R length is zero");if(n===0)throw new Error("S length is zero");if(r>33)throw new Error("R length is too long");if(n>33)throw new Error("S length is too long");if(t[0]&128)throw new Error("R value is negative");if(e[0]&128)throw new Error("S value is negative");if(r>1&&t[0]===0&&!(t[1]&128))throw new Error("R value excessively padded");if(n>1&&e[0]===0&&!(e[1]&128))throw new Error("S value excessively padded");const i=Ft(6+r+n);return i[0]=48,i[1]=i.length-2,i[2]=2,i[3]=t.length,i.set(t,4),i[4+r]=2,i[5+r]=e.length,i.set(e,6+r),i}const ge={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP3:178,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_CHECKSIGADD:186,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255};let Wu;function zS(){if(!Wu){Wu={};for(const t of Object.keys(ge)){const e=ge[t];Wu[e]=t}}return Wu}zS();function MS(t){return t<ge.OP_PUSHDATA1?1:t<=255?2:t<=65535?3:5}function dP(t,e,r){const n=MS(e),i=new DataView(t.buffer,t.byteOffset,t.byteLength);return n===1?t[r]=e:n===2?(t[r]=ge.OP_PUSHDATA1,t[r+1]=e):n===3?(t[r]=ge.OP_PUSHDATA2,i.setUint16(r+1,e,!0)):(t[r]=ge.OP_PUSHDATA4,i.setUint32(r+1,e,!0)),n}function pP(t,e){const r=new DataView(t.buffer,t.byteOffset,t.byteLength),n=t[e];let i,o;if(n<ge.OP_PUSHDATA1)i=n,o=1;else if(n===ge.OP_PUSHDATA1){if(e+2>t.length)return null;i=t[e+1],o=2}else if(n===ge.OP_PUSHDATA2){if(e+3>t.length)return null;i=r.getUint16(e+1,!0),o=3}else{if(e+5>t.length)return null;if(n!==ge.OP_PUSHDATA4)throw new Error("Unexpected opcode");i=r.getUint32(e+1,!0),o=5}return{opcode:n,number:i,size:o}}var FS={},jl={};jl.byteLength=mP;jl.toByteArray=wP;jl.fromByteArray=SP;var Cn=[],Qr=[],gP=typeof Uint8Array<"u"?Uint8Array:Array,Nh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var rs=0,yP=Nh.length;rs<yP;++rs)Cn[rs]=Nh[rs],Qr[Nh.charCodeAt(rs)]=rs;Qr[45]=62;Qr[95]=63;function KS(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function mP(t){var e=KS(t),r=e[0],n=e[1];return(r+n)*3/4-n}function bP(t,e,r){return(e+r)*3/4-r}function wP(t){var e,r=KS(t),n=r[0],i=r[1],o=new gP(bP(t,n,i)),s=0,a=i>0?n-4:n,l;for(l=0;l<a;l+=4)e=Qr[t.charCodeAt(l)]<<18|Qr[t.charCodeAt(l+1)]<<12|Qr[t.charCodeAt(l+2)]<<6|Qr[t.charCodeAt(l+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=Qr[t.charCodeAt(l)]<<2|Qr[t.charCodeAt(l+1)]>>4,o[s++]=e&255),i===1&&(e=Qr[t.charCodeAt(l)]<<10|Qr[t.charCodeAt(l+1)]<<4|Qr[t.charCodeAt(l+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function vP(t){return Cn[t>>18&63]+Cn[t>>12&63]+Cn[t>>6&63]+Cn[t&63]}function EP(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(t[o+2]&255),i.push(vP(n));return i.join("")}function SP(t){for(var e,r=t.length,n=r%3,i=[],o=16383,s=0,a=r-n;s<a;s+=o)i.push(EP(t,s,s+o>a?a:s+o));return n===1?(e=t[r-1],i.push(Cn[e>>2]+Cn[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Cn[e>>10]+Cn[e>>4&63]+Cn[e<<2&63]+"=")),i.join("")}var n0={};n0.read=function(t,e,r,n,i){var o,s,a=i*8-n-1,l=(1<<a)-1,f=l>>1,u=-7,p=r?i-1:0,y=r?-1:1,w=t[e+p];for(p+=y,o=w&(1<<-u)-1,w>>=-u,u+=a;u>0;o=o*256+t[e+p],p+=y,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=n;u>0;s=s*256+t[e+p],p+=y,u-=8);if(o===0)o=1-f;else{if(o===l)return s?NaN:(w?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-f}return(w?-1:1)*s*Math.pow(2,o-n)};n0.write=function(t,e,r,n,i,o){var s,a,l,f=o*8-i-1,u=(1<<f)-1,p=u>>1,y=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=n?0:o-1,A=n?1:-1,S=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+p>=1?e+=y/l:e+=y*Math.pow(2,1-p),e*l>=2&&(s++,l/=2),s+p>=u?(a=0,s=u):s+p>=1?(a=(e*l-1)*Math.pow(2,i),s=s+p):(a=e*Math.pow(2,p-1)*Math.pow(2,i),s=0));i>=8;t[r+w]=a&255,w+=A,a/=256,i-=8);for(s=s<<i|a,f+=i;f>0;t[r+w]=s&255,w+=A,s/=256,f-=8);t[r+w-A]|=S*128};(function(t){const e=jl,r=n0,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=W,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i;const{Uint8Array:o,ArrayBuffer:s,SharedArrayBuffer:a}=globalThis;u.TYPED_ARRAY_SUPPORT=l(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const c=new o(1),d={foo:function(){return 42}};return Object.setPrototypeOf(d,o.prototype),Object.setPrototypeOf(c,d),c.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function f(c){if(c>i)throw new RangeError('The value "'+c+'" is invalid for option "size"');const d=new o(c);return Object.setPrototypeOf(d,u.prototype),d}function u(c,d,g){if(typeof c=="number"){if(typeof d=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return A(c)}return p(c,d,g)}u.poolSize=8192;function p(c,d,g){if(typeof c=="string")return S(c,d);if(s.isView(c))return I(c);if(c==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c);if(Je(c,s)||c&&Je(c.buffer,s)||typeof a<"u"&&(Je(c,a)||c&&Je(c.buffer,a)))return N(c,d,g);if(typeof c=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const O=c.valueOf&&c.valueOf();if(O!=null&&O!==c)return u.from(O,d,g);const M=B(c);if(M)return M;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof c[Symbol.toPrimitive]=="function")return u.from(c[Symbol.toPrimitive]("string"),d,g);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c)}u.from=function(c,d,g){return p(c,d,g)},Object.setPrototypeOf(u.prototype,o.prototype),Object.setPrototypeOf(u,o);function y(c){if(typeof c!="number")throw new TypeError('"size" argument must be of type number');if(c<0)throw new RangeError('The value "'+c+'" is invalid for option "size"')}function w(c,d,g){return y(c),c<=0?f(c):d!==void 0?typeof g=="string"?f(c).fill(d,g):f(c).fill(d):f(c)}u.alloc=function(c,d,g){return w(c,d,g)};function A(c){return y(c),f(c<0?0:V(c)|0)}u.allocUnsafe=function(c){return A(c)},u.allocUnsafeSlow=function(c){return A(c)};function S(c,d){if((typeof d!="string"||d==="")&&(d="utf8"),!u.isEncoding(d))throw new TypeError("Unknown encoding: "+d);const g=Y(c,d)|0;let O=f(g);const M=O.write(c,d);return M!==g&&(O=O.slice(0,M)),O}function k(c){const d=c.length<0?0:V(c.length)|0,g=f(d);for(let O=0;O<d;O+=1)g[O]=c[O]&255;return g}function I(c){if(Je(c,o)){const d=new o(c);return N(d.buffer,d.byteOffset,d.byteLength)}return k(c)}function N(c,d,g){if(d<0||c.byteLength<d)throw new RangeError('"offset" is outside of buffer bounds');if(c.byteLength<d+(g||0))throw new RangeError('"length" is outside of buffer bounds');let O;return d===void 0&&g===void 0?O=new o(c):g===void 0?O=new o(c,d):O=new o(c,d,g),Object.setPrototypeOf(O,u.prototype),O}function B(c){if(u.isBuffer(c)){const d=V(c.length)|0,g=f(d);return g.length===0||c.copy(g,0,0,d),g}if(c.length!==void 0)return typeof c.length!="number"||Vt(c.length)?f(0):k(c);if(c.type==="Buffer"&&Array.isArray(c.data))return k(c.data)}function V(c){if(c>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return c|0}function W(c){return+c!=c&&(c=0),u.alloc(+c)}u.isBuffer=function(c){return c!=null&&c._isBuffer===!0&&c!==u.prototype},u.compare=function(c,d){if(Je(c,o)&&(c=u.from(c,c.offset,c.byteLength)),Je(d,o)&&(d=u.from(d,d.offset,d.byteLength)),!u.isBuffer(c)||!u.isBuffer(d))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(c===d)return 0;let g=c.length,O=d.length;for(let M=0,re=Math.min(g,O);M<re;++M)if(c[M]!==d[M]){g=c[M],O=d[M];break}return g<O?-1:O<g?1:0},u.isEncoding=function(c){switch(String(c).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(c,d){if(!Array.isArray(c))throw new TypeError('"list" argument must be an Array of Buffers');if(c.length===0)return u.alloc(0);let g;if(d===void 0)for(d=0,g=0;g<c.length;++g)d+=c[g].length;const O=u.allocUnsafe(d);let M=0;for(g=0;g<c.length;++g){let re=c[g];if(Je(re,o))M+re.length>O.length?(u.isBuffer(re)||(re=u.from(re)),re.copy(O,M)):o.prototype.set.call(O,re,M);else if(u.isBuffer(re))re.copy(O,M);else throw new TypeError('"list" argument must be an Array of Buffers');M+=re.length}return O};function Y(c,d){if(u.isBuffer(c))return c.length;if(s.isView(c)||Je(c,s))return c.byteLength;if(typeof c!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof c);const g=c.length,O=arguments.length>2&&arguments[2]===!0;if(!O&&g===0)return 0;let M=!1;for(;;)switch(d){case"ascii":case"latin1":case"binary":return g;case"utf8":case"utf-8":return at(c).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g*2;case"hex":return g>>>1;case"base64":return Ke(c).length;default:if(M)return O?-1:at(c).length;d=(""+d).toLowerCase(),M=!0}}u.byteLength=Y;function H(c,d,g){let O=!1;if((d===void 0||d<0)&&(d=0),d>this.length||((g===void 0||g>this.length)&&(g=this.length),g<=0)||(g>>>=0,d>>>=0,g<=d))return"";for(c||(c="utf8");;)switch(c){case"hex":return D(this,d,g);case"utf8":case"utf-8":return X(this,d,g);case"ascii":return K(this,d,g);case"latin1":case"binary":return Z(this,d,g);case"base64":return z(this,d,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,d,g);default:if(O)throw new TypeError("Unknown encoding: "+c);c=(c+"").toLowerCase(),O=!0}}u.prototype._isBuffer=!0;function ie(c,d,g){const O=c[d];c[d]=c[g],c[g]=O}u.prototype.swap16=function(){const c=this.length;if(c%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let d=0;d<c;d+=2)ie(this,d,d+1);return this},u.prototype.swap32=function(){const c=this.length;if(c%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let d=0;d<c;d+=4)ie(this,d,d+3),ie(this,d+1,d+2);return this},u.prototype.swap64=function(){const c=this.length;if(c%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let d=0;d<c;d+=8)ie(this,d,d+7),ie(this,d+1,d+6),ie(this,d+2,d+5),ie(this,d+3,d+4);return this},u.prototype.toString=function(){const c=this.length;return c===0?"":arguments.length===0?X(this,0,c):H.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(c){if(!u.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:u.compare(this,c)===0},u.prototype.inspect=function(){let c="";const d=t.INSPECT_MAX_BYTES;return c=this.toString("hex",0,d).replace(/(.{2})/g,"$1 ").trim(),this.length>d&&(c+=" ... "),"<Buffer "+c+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(c,d,g,O,M){if(Je(c,o)&&(c=u.from(c,c.offset,c.byteLength)),!u.isBuffer(c))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof c);if(d===void 0&&(d=0),g===void 0&&(g=c?c.length:0),O===void 0&&(O=0),M===void 0&&(M=this.length),d<0||g>c.length||O<0||M>this.length)throw new RangeError("out of range index");if(O>=M&&d>=g)return 0;if(O>=M)return-1;if(d>=g)return 1;if(d>>>=0,g>>>=0,O>>>=0,M>>>=0,this===c)return 0;let re=M-O,fe=g-d;const Ue=Math.min(re,fe),Ge=this.slice(O,M),Ne=c.slice(d,g);for(let Oe=0;Oe<Ue;++Oe)if(Ge[Oe]!==Ne[Oe]){re=Ge[Oe],fe=Ne[Oe];break}return re<fe?-1:fe<re?1:0};function T(c,d,g,O,M){if(c.length===0)return-1;if(typeof g=="string"?(O=g,g=0):g>2147483647?g=2147483647:g<-2147483648&&(g=-2147483648),g=+g,Vt(g)&&(g=M?0:c.length-1),g<0&&(g=c.length+g),g>=c.length){if(M)return-1;g=c.length-1}else if(g<0)if(M)g=0;else return-1;if(typeof d=="string"&&(d=u.from(d,O)),u.isBuffer(d))return d.length===0?-1:C(c,d,g,O,M);if(typeof d=="number")return d=d&255,typeof o.prototype.indexOf=="function"?M?o.prototype.indexOf.call(c,d,g):o.prototype.lastIndexOf.call(c,d,g):C(c,[d],g,O,M);throw new TypeError("val must be string, number or Buffer")}function C(c,d,g,O,M){let re=1,fe=c.length,Ue=d.length;if(O!==void 0&&(O=String(O).toLowerCase(),O==="ucs2"||O==="ucs-2"||O==="utf16le"||O==="utf-16le")){if(c.length<2||d.length<2)return-1;re=2,fe/=2,Ue/=2,g/=2}function Ge(Oe,Fe){return re===1?Oe[Fe]:Oe.readUInt16BE(Fe*re)}let Ne;if(M){let Oe=-1;for(Ne=g;Ne<fe;Ne++)if(Ge(c,Ne)===Ge(d,Oe===-1?0:Ne-Oe)){if(Oe===-1&&(Oe=Ne),Ne-Oe+1===Ue)return Oe*re}else Oe!==-1&&(Ne-=Ne-Oe),Oe=-1}else for(g+Ue>fe&&(g=fe-Ue),Ne=g;Ne>=0;Ne--){let Oe=!0;for(let Fe=0;Fe<Ue;Fe++)if(Ge(c,Ne+Fe)!==Ge(d,Fe)){Oe=!1;break}if(Oe)return Ne}return-1}u.prototype.includes=function(c,d,g){return this.indexOf(c,d,g)!==-1},u.prototype.indexOf=function(c,d,g){return T(this,c,d,g,!0)},u.prototype.lastIndexOf=function(c,d,g){return T(this,c,d,g,!1)};function G(c,d,g,O){g=Number(g)||0;const M=c.length-g;O?(O=Number(O),O>M&&(O=M)):O=M;const re=d.length;O>re/2&&(O=re/2);let fe;for(fe=0;fe<O;++fe){const Ue=parseInt(d.substr(fe*2,2),16);if(Vt(Ue))return fe;c[g+fe]=Ue}return fe}function U(c,d,g,O){return ft(at(d,c.length-g),c,g,O)}function P(c,d,g,O){return ft(Ie(d),c,g,O)}function L(c,d,g,O){return ft(Ke(d),c,g,O)}function R(c,d,g,O){return ft(He(d,c.length-g),c,g,O)}u.prototype.write=function(c,d,g,O){if(d===void 0)O="utf8",g=this.length,d=0;else if(g===void 0&&typeof d=="string")O=d,g=this.length,d=0;else if(isFinite(d))d=d>>>0,isFinite(g)?(g=g>>>0,O===void 0&&(O="utf8")):(O=g,g=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const M=this.length-d;if((g===void 0||g>M)&&(g=M),c.length>0&&(g<0||d<0)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");O||(O="utf8");let re=!1;for(;;)switch(O){case"hex":return G(this,c,d,g);case"utf8":case"utf-8":return U(this,c,d,g);case"ascii":case"latin1":case"binary":return P(this,c,d,g);case"base64":return L(this,c,d,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,c,d,g);default:if(re)throw new TypeError("Unknown encoding: "+O);O=(""+O).toLowerCase(),re=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function z(c,d,g){return d===0&&g===c.length?e.fromByteArray(c):e.fromByteArray(c.slice(d,g))}function X(c,d,g){g=Math.min(c.length,g);const O=[];let M=d;for(;M<g;){const re=c[M];let fe=null,Ue=re>239?4:re>223?3:re>191?2:1;if(M+Ue<=g){let Ge,Ne,Oe,Fe;switch(Ue){case 1:re<128&&(fe=re);break;case 2:Ge=c[M+1],(Ge&192)===128&&(Fe=(re&31)<<6|Ge&63,Fe>127&&(fe=Fe));break;case 3:Ge=c[M+1],Ne=c[M+2],(Ge&192)===128&&(Ne&192)===128&&(Fe=(re&15)<<12|(Ge&63)<<6|Ne&63,Fe>2047&&(Fe<55296||Fe>57343)&&(fe=Fe));break;case 4:Ge=c[M+1],Ne=c[M+2],Oe=c[M+3],(Ge&192)===128&&(Ne&192)===128&&(Oe&192)===128&&(Fe=(re&15)<<18|(Ge&63)<<12|(Ne&63)<<6|Oe&63,Fe>65535&&Fe<1114112&&(fe=Fe))}}fe===null?(fe=65533,Ue=1):fe>65535&&(fe-=65536,O.push(fe>>>10&1023|55296),fe=56320|fe&1023),O.push(fe),M+=Ue}return _(O)}const ee=4096;function _(c){const d=c.length;if(d<=ee)return String.fromCharCode.apply(String,c);let g="",O=0;for(;O<d;)g+=String.fromCharCode.apply(String,c.slice(O,O+=ee));return g}function K(c,d,g){let O="";g=Math.min(c.length,g);for(let M=d;M<g;++M)O+=String.fromCharCode(c[M]&127);return O}function Z(c,d,g){let O="";g=Math.min(c.length,g);for(let M=d;M<g;++M)O+=String.fromCharCode(c[M]);return O}function D(c,d,g){const O=c.length;(!d||d<0)&&(d=0),(!g||g<0||g>O)&&(g=O);let M="";for(let re=d;re<g;++re)M+=kr[c[re]];return M}function J(c,d,g){const O=c.slice(d,g);let M="";for(let re=0;re<O.length-1;re+=2)M+=String.fromCharCode(O[re]+O[re+1]*256);return M}u.prototype.slice=function(c,d){const g=this.length;c=~~c,d=d===void 0?g:~~d,c<0?(c+=g,c<0&&(c=0)):c>g&&(c=g),d<0?(d+=g,d<0&&(d=0)):d>g&&(d=g),d<c&&(d=c);const O=this.subarray(c,d);return Object.setPrototypeOf(O,u.prototype),O};function j(c,d,g){if(c%1!==0||c<0)throw new RangeError("offset is not uint");if(c+d>g)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(c,d,g){c=c>>>0,d=d>>>0,g||j(c,d,this.length);let O=this[c],M=1,re=0;for(;++re<d&&(M*=256);)O+=this[c+re]*M;return O},u.prototype.readUintBE=u.prototype.readUIntBE=function(c,d,g){c=c>>>0,d=d>>>0,g||j(c,d,this.length);let O=this[c+--d],M=1;for(;d>0&&(M*=256);)O+=this[c+--d]*M;return O},u.prototype.readUint8=u.prototype.readUInt8=function(c,d){return c=c>>>0,d||j(c,1,this.length),this[c]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(c,d){return c=c>>>0,d||j(c,2,this.length),this[c]|this[c+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(c,d){return c=c>>>0,d||j(c,2,this.length),this[c]<<8|this[c+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(c,d){return c=c>>>0,d||j(c,4,this.length),(this[c]|this[c+1]<<8|this[c+2]<<16)+this[c+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(c,d){return c=c>>>0,d||j(c,4,this.length),this[c]*16777216+(this[c+1]<<16|this[c+2]<<8|this[c+3])},u.prototype.readBigUInt64LE=yt(function(c){c=c>>>0,Qe(c,"offset");const d=this[c],g=this[c+7];(d===void 0||g===void 0)&&qe(c,this.length-8);const O=d+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24,M=this[++c]+this[++c]*2**8+this[++c]*2**16+g*2**24;return BigInt(O)+(BigInt(M)<<BigInt(32))}),u.prototype.readBigUInt64BE=yt(function(c){c=c>>>0,Qe(c,"offset");const d=this[c],g=this[c+7];(d===void 0||g===void 0)&&qe(c,this.length-8);const O=d*2**24+this[++c]*2**16+this[++c]*2**8+this[++c],M=this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+g;return(BigInt(O)<<BigInt(32))+BigInt(M)}),u.prototype.readIntLE=function(c,d,g){c=c>>>0,d=d>>>0,g||j(c,d,this.length);let O=this[c],M=1,re=0;for(;++re<d&&(M*=256);)O+=this[c+re]*M;return M*=128,O>=M&&(O-=Math.pow(2,8*d)),O},u.prototype.readIntBE=function(c,d,g){c=c>>>0,d=d>>>0,g||j(c,d,this.length);let O=d,M=1,re=this[c+--O];for(;O>0&&(M*=256);)re+=this[c+--O]*M;return M*=128,re>=M&&(re-=Math.pow(2,8*d)),re},u.prototype.readInt8=function(c,d){return c=c>>>0,d||j(c,1,this.length),this[c]&128?(255-this[c]+1)*-1:this[c]},u.prototype.readInt16LE=function(c,d){c=c>>>0,d||j(c,2,this.length);const g=this[c]|this[c+1]<<8;return g&32768?g|4294901760:g},u.prototype.readInt16BE=function(c,d){c=c>>>0,d||j(c,2,this.length);const g=this[c+1]|this[c]<<8;return g&32768?g|4294901760:g},u.prototype.readInt32LE=function(c,d){return c=c>>>0,d||j(c,4,this.length),this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24},u.prototype.readInt32BE=function(c,d){return c=c>>>0,d||j(c,4,this.length),this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]},u.prototype.readBigInt64LE=yt(function(c){c=c>>>0,Qe(c,"offset");const d=this[c],g=this[c+7];(d===void 0||g===void 0)&&qe(c,this.length-8);const O=this[c+4]+this[c+5]*2**8+this[c+6]*2**16+(g<<24);return(BigInt(O)<<BigInt(32))+BigInt(d+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24)}),u.prototype.readBigInt64BE=yt(function(c){c=c>>>0,Qe(c,"offset");const d=this[c],g=this[c+7];(d===void 0||g===void 0)&&qe(c,this.length-8);const O=(d<<24)+this[++c]*2**16+this[++c]*2**8+this[++c];return(BigInt(O)<<BigInt(32))+BigInt(this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+g)}),u.prototype.readFloatLE=function(c,d){return c=c>>>0,d||j(c,4,this.length),r.read(this,c,!0,23,4)},u.prototype.readFloatBE=function(c,d){return c=c>>>0,d||j(c,4,this.length),r.read(this,c,!1,23,4)},u.prototype.readDoubleLE=function(c,d){return c=c>>>0,d||j(c,8,this.length),r.read(this,c,!0,52,8)},u.prototype.readDoubleBE=function(c,d){return c=c>>>0,d||j(c,8,this.length),r.read(this,c,!1,52,8)};function te(c,d,g,O,M,re){if(!u.isBuffer(c))throw new TypeError('"buffer" argument must be a Buffer instance');if(d>M||d<re)throw new RangeError('"value" argument is out of bounds');if(g+O>c.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(c,d,g,O){if(c=+c,d=d>>>0,g=g>>>0,!O){const fe=Math.pow(2,8*g)-1;te(this,c,d,g,fe,0)}let M=1,re=0;for(this[d]=c&255;++re<g&&(M*=256);)this[d+re]=c/M&255;return d+g},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(c,d,g,O){if(c=+c,d=d>>>0,g=g>>>0,!O){const fe=Math.pow(2,8*g)-1;te(this,c,d,g,fe,0)}let M=g-1,re=1;for(this[d+M]=c&255;--M>=0&&(re*=256);)this[d+M]=c/re&255;return d+g},u.prototype.writeUint8=u.prototype.writeUInt8=function(c,d,g){return c=+c,d=d>>>0,g||te(this,c,d,1,255,0),this[d]=c&255,d+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(c,d,g){return c=+c,d=d>>>0,g||te(this,c,d,2,65535,0),this[d]=c&255,this[d+1]=c>>>8,d+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(c,d,g){return c=+c,d=d>>>0,g||te(this,c,d,2,65535,0),this[d]=c>>>8,this[d+1]=c&255,d+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(c,d,g){return c=+c,d=d>>>0,g||te(this,c,d,4,4294967295,0),this[d+3]=c>>>24,this[d+2]=c>>>16,this[d+1]=c>>>8,this[d]=c&255,d+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(c,d,g){return c=+c,d=d>>>0,g||te(this,c,d,4,4294967295,0),this[d]=c>>>24,this[d+1]=c>>>16,this[d+2]=c>>>8,this[d+3]=c&255,d+4};function ae(c,d,g,O,M){ze(d,O,M,c,g,7);let re=Number(d&BigInt(4294967295));c[g++]=re,re=re>>8,c[g++]=re,re=re>>8,c[g++]=re,re=re>>8,c[g++]=re;let fe=Number(d>>BigInt(32)&BigInt(4294967295));return c[g++]=fe,fe=fe>>8,c[g++]=fe,fe=fe>>8,c[g++]=fe,fe=fe>>8,c[g++]=fe,g}function ce(c,d,g,O,M){ze(d,O,M,c,g,7);let re=Number(d&BigInt(4294967295));c[g+7]=re,re=re>>8,c[g+6]=re,re=re>>8,c[g+5]=re,re=re>>8,c[g+4]=re;let fe=Number(d>>BigInt(32)&BigInt(4294967295));return c[g+3]=fe,fe=fe>>8,c[g+2]=fe,fe=fe>>8,c[g+1]=fe,fe=fe>>8,c[g]=fe,g+8}u.prototype.writeBigUInt64LE=yt(function(c,d=0){return ae(this,c,d,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=yt(function(c,d=0){return ce(this,c,d,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(c,d,g,O){if(c=+c,d=d>>>0,!O){const Ue=Math.pow(2,8*g-1);te(this,c,d,g,Ue-1,-Ue)}let M=0,re=1,fe=0;for(this[d]=c&255;++M<g&&(re*=256);)c<0&&fe===0&&this[d+M-1]!==0&&(fe=1),this[d+M]=(c/re>>0)-fe&255;return d+g},u.prototype.writeIntBE=function(c,d,g,O){if(c=+c,d=d>>>0,!O){const Ue=Math.pow(2,8*g-1);te(this,c,d,g,Ue-1,-Ue)}let M=g-1,re=1,fe=0;for(this[d+M]=c&255;--M>=0&&(re*=256);)c<0&&fe===0&&this[d+M+1]!==0&&(fe=1),this[d+M]=(c/re>>0)-fe&255;return d+g},u.prototype.writeInt8=function(c,d,g){return c=+c,d=d>>>0,g||te(this,c,d,1,127,-128),c<0&&(c=255+c+1),this[d]=c&255,d+1},u.prototype.writeInt16LE=function(c,d,g){return c=+c,d=d>>>0,g||te(this,c,d,2,32767,-32768),this[d]=c&255,this[d+1]=c>>>8,d+2},u.prototype.writeInt16BE=function(c,d,g){return c=+c,d=d>>>0,g||te(this,c,d,2,32767,-32768),this[d]=c>>>8,this[d+1]=c&255,d+2},u.prototype.writeInt32LE=function(c,d,g){return c=+c,d=d>>>0,g||te(this,c,d,4,2147483647,-2147483648),this[d]=c&255,this[d+1]=c>>>8,this[d+2]=c>>>16,this[d+3]=c>>>24,d+4},u.prototype.writeInt32BE=function(c,d,g){return c=+c,d=d>>>0,g||te(this,c,d,4,2147483647,-2147483648),c<0&&(c=4294967295+c+1),this[d]=c>>>24,this[d+1]=c>>>16,this[d+2]=c>>>8,this[d+3]=c&255,d+4},u.prototype.writeBigInt64LE=yt(function(c,d=0){return ae(this,c,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=yt(function(c,d=0){return ce(this,c,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function pe(c,d,g,O,M,re){if(g+O>c.length)throw new RangeError("Index out of range");if(g<0)throw new RangeError("Index out of range")}function le(c,d,g,O,M){return d=+d,g=g>>>0,M||pe(c,d,g,4),r.write(c,d,g,O,23,4),g+4}u.prototype.writeFloatLE=function(c,d,g){return le(this,c,d,!0,g)},u.prototype.writeFloatBE=function(c,d,g){return le(this,c,d,!1,g)};function ye(c,d,g,O,M){return d=+d,g=g>>>0,M||pe(c,d,g,8),r.write(c,d,g,O,52,8),g+8}u.prototype.writeDoubleLE=function(c,d,g){return ye(this,c,d,!0,g)},u.prototype.writeDoubleBE=function(c,d,g){return ye(this,c,d,!1,g)},u.prototype.copy=function(c,d,g,O){if(!u.isBuffer(c))throw new TypeError("argument should be a Buffer");if(g||(g=0),!O&&O!==0&&(O=this.length),d>=c.length&&(d=c.length),d||(d=0),O>0&&O<g&&(O=g),O===g||c.length===0||this.length===0)return 0;if(d<0)throw new RangeError("targetStart out of bounds");if(g<0||g>=this.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("sourceEnd out of bounds");O>this.length&&(O=this.length),c.length-d<O-g&&(O=c.length-d+g);const M=O-g;return this===c&&typeof o.prototype.copyWithin=="function"?this.copyWithin(d,g,O):o.prototype.set.call(c,this.subarray(g,O),d),M},u.prototype.fill=function(c,d,g,O){if(typeof c=="string"){if(typeof d=="string"?(O=d,d=0,g=this.length):typeof g=="string"&&(O=g,g=this.length),O!==void 0&&typeof O!="string")throw new TypeError("encoding must be a string");if(typeof O=="string"&&!u.isEncoding(O))throw new TypeError("Unknown encoding: "+O);if(c.length===1){const re=c.charCodeAt(0);(O==="utf8"&&re<128||O==="latin1")&&(c=re)}}else typeof c=="number"?c=c&255:typeof c=="boolean"&&(c=Number(c));if(d<0||this.length<d||this.length<g)throw new RangeError("Out of range index");if(g<=d)return this;d=d>>>0,g=g===void 0?this.length:g>>>0,c||(c=0);let M;if(typeof c=="number")for(M=d;M<g;++M)this[M]=c;else{const re=u.isBuffer(c)?c:u.from(c,O),fe=re.length;if(fe===0)throw new TypeError('The value "'+c+'" is invalid for argument "value"');for(M=0;M<g-d;++M)this[M+d]=re[M%fe]}return this};const Ae={};function xe(c,d,g){Ae[c]=class extends g{constructor(){super(),Object.defineProperty(this,"message",{value:d.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${c}]`,this.stack,delete this.name}get code(){return c}set code(O){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:O,writable:!0})}toString(){return`${this.name} [${c}]: ${this.message}`}}}xe("ERR_BUFFER_OUT_OF_BOUNDS",function(c){return c?`${c} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),xe("ERR_INVALID_ARG_TYPE",function(c,d){return`The "${c}" argument must be of type number. Received type ${typeof d}`},TypeError),xe("ERR_OUT_OF_RANGE",function(c,d,g){let O=`The value of "${c}" is out of range.`,M=g;return Number.isInteger(g)&&Math.abs(g)>2**32?M=Be(String(g)):typeof g=="bigint"&&(M=String(g),(g>BigInt(2)**BigInt(32)||g<-(BigInt(2)**BigInt(32)))&&(M=Be(M)),M+="n"),O+=` It must be ${d}. Received ${M}`,O},RangeError);function Be(c){let d="",g=c.length;const O=c[0]==="-"?1:0;for(;g>=O+4;g-=3)d=`_${c.slice(g-3,g)}${d}`;return`${c.slice(0,g)}${d}`}function We(c,d,g){Qe(d,"offset"),(c[d]===void 0||c[d+g]===void 0)&&qe(d,c.length-(g+1))}function ze(c,d,g,O,M,re){if(c>g||c<d){const fe=typeof d=="bigint"?"n":"";let Ue;throw d===0||d===BigInt(0)?Ue=`>= 0${fe} and < 2${fe} ** ${(re+1)*8}${fe}`:Ue=`>= -(2${fe} ** ${(re+1)*8-1}${fe}) and < 2 ** ${(re+1)*8-1}${fe}`,new Ae.ERR_OUT_OF_RANGE("value",Ue,c)}We(O,M,re)}function Qe(c,d){if(typeof c!="number")throw new Ae.ERR_INVALID_ARG_TYPE(d,"number",c)}function qe(c,d,g){throw Math.floor(c)!==c?(Qe(c,g),new Ae.ERR_OUT_OF_RANGE("offset","an integer",c)):d<0?new Ae.ERR_BUFFER_OUT_OF_BOUNDS:new Ae.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${d}`,c)}const lt=/[^+/0-9A-Za-z-_]/g;function me(c){if(c=c.split("=")[0],c=c.trim().replace(lt,""),c.length<2)return"";for(;c.length%4!==0;)c=c+"=";return c}function at(c,d){d=d||1/0;let g;const O=c.length;let M=null;const re=[];for(let fe=0;fe<O;++fe){if(g=c.charCodeAt(fe),g>55295&&g<57344){if(!M){if(g>56319){(d-=3)>-1&&re.push(239,191,189);continue}else if(fe+1===O){(d-=3)>-1&&re.push(239,191,189);continue}M=g;continue}if(g<56320){(d-=3)>-1&&re.push(239,191,189),M=g;continue}g=(M-55296<<10|g-56320)+65536}else M&&(d-=3)>-1&&re.push(239,191,189);if(M=null,g<128){if((d-=1)<0)break;re.push(g)}else if(g<2048){if((d-=2)<0)break;re.push(g>>6|192,g&63|128)}else if(g<65536){if((d-=3)<0)break;re.push(g>>12|224,g>>6&63|128,g&63|128)}else if(g<1114112){if((d-=4)<0)break;re.push(g>>18|240,g>>12&63|128,g>>6&63|128,g&63|128)}else throw new Error("Invalid code point")}return re}function Ie(c){const d=[];for(let g=0;g<c.length;++g)d.push(c.charCodeAt(g)&255);return d}function He(c,d){let g,O,M;const re=[];for(let fe=0;fe<c.length&&!((d-=2)<0);++fe)g=c.charCodeAt(fe),O=g>>8,M=g%256,re.push(M),re.push(O);return re}function Ke(c){return e.toByteArray(me(c))}function ft(c,d,g,O){let M;for(M=0;M<O&&!(M+g>=d.length||M>=c.length);++M)d[M+g]=c[M];return M}function Je(c,d){return c instanceof d||c!=null&&c.constructor!=null&&c.constructor.name!=null&&c.constructor.name===d.name}function Vt(c){return c!==c}const kr=(function(){const c="0123456789abcdef",d=new Array(256);for(let g=0;g<16;++g){const O=g*16;for(let M=0;M<16;++M)d[O+M]=c[g]+c[M]}return d})();function yt(c){return typeof BigInt>"u"?rr:c}function rr(){throw new Error("BigInt not supported")}})(FS);const AP=FS.Buffer;function kP(t,e,r){e=e||4,r=r===void 0?!0:r;const n=t.length;if(n===0)return 0;if(n>e)throw new TypeError("Script number overflow");if(r&&(t[n-1]&127)===0&&(n<=1||(t[n-2]&128)===0))throw new Error("Non-minimally encoded script number");if(n===5){const o=t.readUInt32LE(0),s=t.readUInt8(4);return s&128?-((s&-129)*4294967296+o):s*4294967296+o}let i=0;for(let o=0;o<n;++o)i|=t[o]<<8*o;return t[n-1]&128?-(i&~(128<<8*(n-1))):i}function IP(t){return t>2147483647?5:t>8388607?4:t>32767?3:t>127?2:t>0?1:0}function jS(t){let e=Math.abs(t);const r=IP(e),n=AP.allocUnsafe(r),i=t<0;for(let o=0;o<r;++o)n.writeUInt8(e&255,o),e>>=8;return n[r-1]&128?n.writeUInt8(i?128:0,r-1):i&&(n[r-1]=n[r-1]|128),n}const _P=Object.freeze(Object.defineProperty({__proto__:null,decode:kP,encode:jS},Symbol.toStringTag,{value:"Module"})),zd=Ee("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f");Ee("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141");const av=21n*10n**14n,gc=254;function VS(t){return typeof t=="number"&&Number.isInteger(t)&&t>=0&&t<=255}function xP(t){return typeof t=="number"&&Number.isFinite(t)}function TP(t,e){return t instanceof Uint8Array&&t.length===e}function i0(t){return Array.isArray(t)}function BP(t){return typeof t!="string"||t.length%2!==0?!1:/^[0-9a-fA-F]*$/.test(t)}function PP(t){return t instanceof Uint8Array&&t.length===32}function WS(t){return t instanceof Uint8Array&&t.length===20}function OP(t){return!(t instanceof Uint8Array)||t.length!==32||Dd(t)?!1:Us(t,zd)<0}function No(t){if(!(t instanceof Uint8Array)||t.length<33)return!1;const e=t[0],r=t.subarray(1,33);if(Dd(r)||Us(r,zd)>=0)return!1;if((e===2||e===3)&&t.length===33)return!0;if(t.length!==65)return!1;const n=t.subarray(33);return Dd(n)||Us(n,zd)>=0?!1:e===4||e===6||e===7}function qS(t){if(!t||typeof t!="object")return!1;const e=t;return!(!("output"in e)||!(e.output instanceof Uint8Array)||e.version!==void 0&&(typeof e.version!="number"||(e.version&gc)!==e.version))}function Ls(t,e){return t.length!==e.length?!1:t.every((r,n)=>_e(r,e[n]))}function UP(t){if(!PP(t))throw new TypeError(`Expected 32-byte Uint8Array, got ${t.length} bytes`);return t}function LP(t){return t instanceof Uint8Array&&t.length===32}function yc(t){if(!LP(t))throw new TypeError(`Expected 32-byte Uint8Array, got ${t.length} bytes`);return t}function RP(t){if(!WS(t))throw new TypeError(`Expected 20-byte Uint8Array, got ${t.length} bytes`);return t}function xt(t){if(t<0n)throw new RangeError(`Satoshi cannot be negative, got ${t}`);if(t>av)throw new RangeError(`Satoshi exceeds maximum supply (${av}), got ${t}`);return t}const uv=new Uint8Array([0]);function Vl(t){const e=t&-129;return e>0&&e<4}function cv(t){let e=0;for(;t[e]===0;)++e;return e===t.length?uv:(t=t.subarray(e),t[0]&128?jt([uv,t]):t)}function lv(t){t[0]===0&&(t=t.subarray(1));const e=Ft(32),r=Math.max(0,32-t.length);return e.set(t,r),e}function $P(t){const e=t[t.length-1];if(!Vl(e))throw new Error(`Invalid hashType ${e}`);const r=fP(t.subarray(0,-1)),n=lv(r.r),i=lv(r.s);return{signature:jt([n,i]),hashType:e}}function CP(t,e){if(!TP(t,64))throw new TypeError("Expected signature to be a 64-byte Uint8Array");if(!VS(e))throw new TypeError("Expected hashType to be a UInt8");if(!Vl(e))throw new Error(`Invalid hashType ${e}`);const r=new Uint8Array([e]),n=cv(t.subarray(0,32)),i=cv(t.subarray(32,64));return jt([hP(n,i),r])}const NP=Object.freeze(Object.defineProperty({__proto__:null,decode:$P,encode:CP,isDefinedHashType:Vl},Symbol.toStringTag,{value:"Module"})),GS=ge.OP_RESERVED;function HP(t){return xP(t)&&(t===ge.OP_0||t>=ge.OP_1&&t<=ge.OP_16||t===ge.OP_1NEGATE)}function XS(t){return t instanceof Uint8Array?!0:HP(t)}function Wl(t){return i0(t)&&t.every(XS)}function o0(t){return t.length-t.filter(XS).length}function Gc(t){if(t.length===0)return ge.OP_0;if(t.length!==1)return;const e=t[0];if(e>=1&&e<=16)return GS+e;if(e===129)return ge.OP_1NEGATE}function s0(t){return t instanceof Uint8Array}function DP(t){return i0(t)}function Xc(t){return t instanceof Uint8Array}function Qt(t){if(s0(t))return t;if(!i0(t))throw new TypeError("Expected an array");const e=t.reduce((i,o)=>Xc(o)?o.length===1&&Gc(o)!==void 0?i+1:i+MS(o.length)+o.length:i+1,0),r=new Uint8Array(e);let n=0;if(t.forEach(i=>{if(Xc(i)){const o=Gc(i);if(o!==void 0){r[n]=o,n+=1;return}n+=dP(r,i.length,n),r.set(i,n),n+=i.length}else r[n]=i,n+=1}),n!==r.length)throw new Error("Could not decode chunks");return r}function It(t){if(DP(t))return t;if(!(t instanceof Uint8Array))throw new TypeError("Expected a Uint8Array");const e=[];let r=0;for(;r<t.length;){const n=t[r];if(n>ge.OP_0&&n<=ge.OP_PUSHDATA4){const i=pP(t,r);if(i===null||(r+=i.size,r+i.number>t.length))return null;const o=t.subarray(r,r+i.number);r+=i.number;const s=Gc(o);s!==void 0?e.push(s):e.push(o)}else e.push(n),r+=1}return e}function YS(t){let e;if(s0(t)){const r=It(t);if(!r)throw new Error("Could not convert invalid chunks to ASM");e=r}else e=t;return e.map(r=>{if(Xc(r)){const n=Gc(r);if(n===void 0)return ve(r);r=n}return zS()[r]}).join(" ")}function zP(t){if(typeof t!="string")throw new TypeError("Expected a string");return Qt(t.split(" ").map(e=>{if(ge[e]!==void 0)return ge[e];if(!BP(e))throw new TypeError("Expected hex string");return Ee(e)}))}function ZS(t){const e=s0(t)?It(t):t;if(!e||!Wl(e))throw new TypeError("Expected push-only script");return e.map(r=>Xc(r)?r:r===ge.OP_0?Ft(0):jS(r-GS))}function QS(t){return No(t)}function Ko(t){return!(t instanceof Uint8Array)||!Vl(t[t.length-1])?!1:lP(t.subarray(0,-1))}const MP=_P,Bo=NP,st=Object.freeze(Object.defineProperty({__proto__:null,compile:Qt,countNonPushOnlyOPs:o0,decompile:It,fromASM:zP,isCanonicalPubKey:QS,isCanonicalScriptSignature:Ko,isPushOnly:Wl,number:MP,opcodes:ge,signature:Bo,toASM:YS,toStack:ZS},Symbol.toStringTag,{value:"Module"})),Ze={P2PK:"p2pk",P2PKH:"p2pkh",P2SH:"p2sh",P2MS:"p2ms",P2WPKH:"p2wpkh",P2WSH:"p2wsh",P2TR:"p2tr",P2OP:"p2op",Embed:"embed",ScriptRedeem:"scriptRedeem"},fv=ge,hv=16,dv=2,pv=40;let JS=class ha{static NAME=Ze.P2OP;#e;#s;#t;#o;#r;#n;#i;#a;#u;#l;#c;#f;#h=!1;#d=!1;#p=!1;#y=!1;#g=!1;#m;#w=!1;constructor(e,r){this.#e=e.network??Ur,this.#s={validate:r?.validate??!0,allowIncomplete:r?.allowIncomplete??!1},this.#t=e.address,this.#o=e.program,this.#r=e.deploymentVersion,this.#n=e.hash160,this.#i=e.output,this.#s.validate&&this.#_()}get name(){return Ze.P2OP}get network(){return this.#e}get address(){return this.#h||(this.#a=this.#S(),this.#h=!0),this.#a}get program(){return this.#d||(this.#u=this.#b(),this.#d=!0),this.#u}get deploymentVersion(){return this.#p||(this.#l=this.#k(),this.#p=!0),this.#l}get hash160(){return this.#y||(this.#c=this.#A(),this.#y=!0),this.#c}get output(){return this.#g||(this.#f=this.#I(),this.#g=!0),this.#f}static fromProgram(e,r){return new ha({program:e,network:r})}static fromParts(e,r,n){return new ha({deploymentVersion:e,hash160:r,network:n})}static fromAddress(e,r){return new ha({address:e,network:r})}static fromOutput(e,r){return new ha({output:e,network:r})}toPayment(){return{name:this.name,network:this.network,address:this.address,program:this.program,deploymentVersion:this.deploymentVersion,hash160:this.hash160,output:this.output}}#v(){if(!this.#w){if(this.#t){const e=Kl(this.#t);e&&(this.#m={version:e.version,prefix:e.prefix,data:e.data})}this.#w=!0}return this.#m}#E(){if(typeof this.#r<"u"&&typeof this.#n<"u"){if(this.#n.length!==20)throw new TypeError("hash160 must be exactly 20 bytes");if(this.#r<0||this.#r>255)throw new TypeError("deploymentVersion must fit in one byte");return jt([new Uint8Array([this.#r]),this.#n])}}#S(){if(this.#t)return this.#t;const e=this.program;if(!e)return;if(!this.#e.bech32Opnet)throw new TypeError("Network does not support opnet");const r=Rt.bech32m.toWords(e);return r.unshift(hv),Rt.bech32m.encode(this.#e.bech32Opnet,r)}#b(){if(this.#o)return this.#o;const e=this.#E();if(e)return e;if(this.#i){if(this.#i[0]!==fv.OP_16)throw new TypeError("Invalid P2OP script");let r=1,n;const i=this.#i[1],o=this.#i[2];if(i!==void 0&&i<76)n=i,r=2;else if(i===76&&o!==void 0)n=o,r=3;else throw new TypeError("Unsupported push opcode in P2OP script");return this.#i.subarray(r,r+n)}if(this.#t)return this.#v()?.data}#k(){if(this.#r!==void 0)return this.#r;const e=this.program;if(e)return e[0]}#A(){if(this.#n)return this.#n;const e=this.program;if(e)return e.subarray(1)}#I(){if(this.#i)return this.#i;const e=this.program;if(e)return Qt([fv.OP_16,e])}#_(){let e=Ft(0);if(this.#t){const r=this.#v();if(!r)throw new TypeError("Invalid address");if(this.#e.bech32Opnet!==r.prefix)throw new TypeError("Invalid prefix or network mismatch");if(r.version!==hv)throw new TypeError("Invalid witness version for p2op");if(r.data.length<dv||r.data.length>pv)throw new TypeError("Invalid witness program length");e=r.data}if(this.#o){if(e.length>0&&!_e(e,this.#o))throw new TypeError("Program mismatch");e=this.#o}if(!e.length&&this.#r!==void 0&&this.#n){const r=this.#E();r&&(e=r)}if(this.#i){const r=this.program;if(!r)throw new TypeError("Output program is required");if(e.length>0&&!_e(e,r))throw new TypeError("Program mismatch (output vs other source)");e=r}if(e.length<dv||e.length>pv)throw new TypeError(`Witness program must be 240 bytes. Was ${e.length} bytes`);if(this.#r!==void 0&&this.#r!==e[0])throw new TypeError("deploymentVersion mismatch");if(this.#n&&!_e(this.#n,e.subarray(1)))throw new TypeError("hash160 mismatch")}};function e4(t,e){if(!t.address&&!t.output&&!t.program&&(typeof t.deploymentVersion>"u"||!t.hash160))throw new TypeError("At least one of address, output or program must be provided");const r=new JS({address:t.address,program:t.program,deploymentVersion:t.deploymentVersion,hash160:t.hash160,output:t.output,network:t.network},e);return Object.assign(r.toPayment(),t)}const na=Uint32Array.from([1732584193,4023233417,2562383102,271733878,3285377520]),Pi=new Uint32Array(80);class FP extends Jp{A=na[0]|0;B=na[1]|0;C=na[2]|0;D=na[3]|0;E=na[4]|0;constructor(){super(64,20,8,!1)}get(){const{A:e,B:r,C:n,D:i,E:o}=this;return[e,r,n,i,o]}set(e,r,n,i,o){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0}process(e,r){for(let l=0;l<16;l++,r+=4)Pi[l]=e.getUint32(r,!1);for(let l=16;l<80;l++)Pi[l]=Io(Pi[l-3]^Pi[l-8]^Pi[l-14]^Pi[l-16],1);let{A:n,B:i,C:o,D:s,E:a}=this;for(let l=0;l<80;l++){let f,u;l<20?(f=NS(i,o,s),u=1518500249):l<40?(f=i^o^s,u=1859775393):l<60?(f=HS(i,o,s),u=2400959708):(f=i^o^s,u=3395469782);const p=Io(n,5)+f+a+u+Pi[l]|0;a=s,s=o,o=Io(i,30),i=n,n=p}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,this.set(n,i,o,s,a)}roundClean(){Co(Pi)}destroy(){this.set(0,0,0,0,0),Co(this.buffer)}}const KP=Qp(()=>new FP),jP=Uint8Array.from([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),t4=Uint8Array.from(new Array(16).fill(0).map((t,e)=>e)),VP=t4.map(t=>(9*t+5)%16),r4=(()=>{const t=[[t4],[VP]];for(let e=0;e<4;e++)for(let r of t)r.push(r[e].map(n=>jP[n]));return t})(),n4=r4[0],i4=r4[1],o4=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>Uint8Array.from(t)),WP=n4.map((t,e)=>t.map(r=>o4[e][r])),qP=i4.map((t,e)=>t.map(r=>o4[e][r])),GP=Uint32Array.from([0,1518500249,1859775393,2400959708,2840853838]),XP=Uint32Array.from([1352829926,1548603684,1836072691,2053994217,0]);function gv(t,e,r,n){return t===0?e^r^n:t===1?e&r|~e&n:t===2?(e|~r)^n:t===3?e&n|r&~n:e^(r|~n)}const qu=new Uint32Array(16);class YP extends Jp{h0=1732584193;h1=-271733879;h2=-1732584194;h3=271733878;h4=-1009589776;constructor(){super(64,20,8,!0)}get(){const{h0:e,h1:r,h2:n,h3:i,h4:o}=this;return[e,r,n,i,o]}set(e,r,n,i,o){this.h0=e|0,this.h1=r|0,this.h2=n|0,this.h3=i|0,this.h4=o|0}process(e,r){for(let w=0;w<16;w++,r+=4)qu[w]=e.getUint32(r,!0);let n=this.h0|0,i=n,o=this.h1|0,s=o,a=this.h2|0,l=a,f=this.h3|0,u=f,p=this.h4|0,y=p;for(let w=0;w<5;w++){const A=4-w,S=GP[w],k=XP[w],I=n4[w],N=i4[w],B=WP[w],V=qP[w];for(let W=0;W<16;W++){const Y=Io(n+gv(w,o,a,f)+qu[I[W]]+S,B[W])+p|0;n=p,p=f,f=Io(a,10)|0,a=o,o=Y}for(let W=0;W<16;W++){const Y=Io(i+gv(A,s,l,u)+qu[N[W]]+k,V[W])+y|0;i=y,y=u,u=Io(l,10)|0,l=s,s=Y}}this.set(this.h1+a+u|0,this.h2+f+y|0,this.h3+p+i|0,this.h4+n+s|0,this.h0+o+l|0)}roundClean(){Co(qu)}destroy(){this.destroyed=!0,Co(this.buffer),this.set(0,0,0,0,0)}}const s4=Qp(()=>new YP);function a4(t){return s4(t)}function ZP(t){return KP(t)}function lr(t){return za(t)}function mr(t){return s4(za(t))}function Ni(t){return za(za(t))}const QP=["BIP0340/challenge","BIP0340/aux","BIP0340/nonce","TapLeaf","TapBranch","TapSighash","TapTweak","KeyAgg list","KeyAgg coefficient"],u4={"BIP0340/challenge":new Uint8Array([123,181,45,122,159,239,88,50,62,177,191,122,64,125,179,130,210,243,242,216,27,177,34,79,73,254,81,143,109,72,211,124,123,181,45,122,159,239,88,50,62,177,191,122,64,125,179,130,210,243,242,216,27,177,34,79,73,254,81,143,109,72,211,124]),"BIP0340/aux":new Uint8Array([241,239,78,94,192,99,202,218,109,148,202,250,157,152,126,160,105,38,88,57,236,193,31,151,45,119,165,46,216,193,204,144,241,239,78,94,192,99,202,218,109,148,202,250,157,152,126,160,105,38,88,57,236,193,31,151,45,119,165,46,216,193,204,144]),"BIP0340/nonce":new Uint8Array([7,73,119,52,167,155,203,53,91,155,140,125,3,79,18,28,244,52,215,62,247,45,218,25,135,0,97,251,82,191,235,47,7,73,119,52,167,155,203,53,91,155,140,125,3,79,18,28,244,52,215,62,247,45,218,25,135,0,97,251,82,191,235,47]),TapLeaf:new Uint8Array([174,234,143,220,66,8,152,49,5,115,75,88,8,29,30,38,56,211,95,28,181,64,8,212,211,87,202,3,190,120,233,238,174,234,143,220,66,8,152,49,5,115,75,88,8,29,30,38,56,211,95,28,181,64,8,212,211,87,202,3,190,120,233,238]),TapBranch:new Uint8Array([25,65,161,242,229,110,185,95,162,169,241,148,190,92,1,247,33,111,51,237,130,176,145,70,52,144,208,91,245,22,160,21,25,65,161,242,229,110,185,95,162,169,241,148,190,92,1,247,33,111,51,237,130,176,145,70,52,144,208,91,245,22,160,21]),TapSighash:new Uint8Array([244,10,72,223,75,42,112,200,180,146,75,242,101,70,97,237,61,149,253,102,163,19,235,135,35,117,151,198,40,228,160,49,244,10,72,223,75,42,112,200,180,146,75,242,101,70,97,237,61,149,253,102,163,19,235,135,35,117,151,198,40,228,160,49]),TapTweak:new Uint8Array([232,15,225,99,156,156,160,80,227,175,27,57,193,67,198,62,66,156,188,235,21,217,64,251,181,197,161,244,175,87,197,233,232,15,225,99,156,156,160,80,227,175,27,57,193,67,198,62,66,156,188,235,21,217,64,251,181,197,161,244,175,87,197,233]),"KeyAgg list":new Uint8Array([72,28,151,28,60,11,70,215,240,178,117,174,89,141,78,44,126,215,49,156,89,74,92,110,199,158,160,212,153,2,148,240,72,28,151,28,60,11,70,215,240,178,117,174,89,141,78,44,126,215,49,156,89,74,92,110,199,158,160,212,153,2,148,240]),"KeyAgg coefficient":new Uint8Array([191,201,4,3,77,28,136,232,200,14,34,229,61,36,86,109,100,130,78,214,66,114,129,192,145,0,249,77,205,82,201,129,191,201,4,3,77,28,136,232,200,14,34,229,61,36,86,109,100,130,78,214,66,114,129,192,145,0,249,77,205,82,201,129])};function fu(t,e){return lr(jt([u4[t],e]))}const Kt=Object.freeze(Object.defineProperty({__proto__:null,TAGGED_HASH_PREFIXES:u4,TAGS:QP,hash160:mr,hash256:Ni,ripemd160:a4,sha1:ZP,sha256:lr,taggedHash:fu},Symbol.toStringTag,{value:"Module"})),c4={p:0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2fn,n:0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141n,h:1n,a:0n,b:7n,Gx:0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798n,Gy:0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8n},{p:Po,n:JP,Gx:eO,Gy:tO,b:l4}=c4,Md=32,a0=64,rO={publicKey:Md+1,publicKeyUncompressed:a0+1},nO=(...t)=>{"captureStackTrace"in Error&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(...t)},Pr=(t="")=>{const e=new Error(t);throw nO(e,Pr),e},iO=t=>typeof t=="bigint",oO=t=>typeof t=="string",sO=t=>t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array",u0=(t,e,r="")=>{const n=sO(t),i=t?.length;if(!n||e!==void 0){const o=r&&`"${r}" `,s="",a=n?`length=${i}`:`type=${typeof t}`;Pr(o+"expected Uint8Array"+s+", got "+a)}return t},f4=t=>new Uint8Array(t),h4=(t,e)=>t.toString(16).padStart(e,"0"),d4=t=>Array.from(u0(t)).map(e=>h4(e,2)).join(""),ei={_0:48,_9:57,A:65,F:70,a:97,f:102},yv=t=>{if(t>=ei._0&&t<=ei._9)return t-ei._0;if(t>=ei.A&&t<=ei.F)return t-(ei.A-10);if(t>=ei.a&&t<=ei.f)return t-(ei.a-10)},p4=t=>{const e="hex invalid";if(!oO(t))return Pr(e);const r=t.length,n=r/2;if(r%2)return Pr(e);const i=f4(n);for(let o=0,s=0;o<n;o++,s+=2){const a=yv(t.charCodeAt(s)),l=yv(t.charCodeAt(s+1));if(a===void 0||l===void 0)return Pr(e);i[o]=a*16+l}return i},mv=(...t)=>{const e=f4(t.reduce((n,i)=>n+u0(i).length,0));let r=0;return t.forEach(n=>{e.set(n,r),r+=n.length}),e},Yc=BigInt,ql=(t,e,r,n="bad number: out of range")=>iO(t)&&e<=t&&t<r?t:Pr(n),Le=(t,e=Po)=>{const r=t%e;return r>=0n?r:e+r},aO=(t,e)=>{(t===0n||e<=0n)&&Pr("no inverse n="+t+" mod="+e);let r=Le(t,e),n=e,i=0n,o=1n;for(;r!==0n;){const s=n/r,a=n%r,l=i-o*s;n=r,r=a,i=o,o=l}return n===1n?Le(i,e):Pr("no inverse")},Hh=t=>t instanceof Mr?t:Pr("Point expected"),g4=t=>Le(Le(t*t)*t+l4),bv=t=>ql(t,0n,Po),mc=t=>ql(t,1n,Po),uO=t=>ql(t,1n,JP),Fd=t=>(t&1n)===0n,y4=t=>Uint8Array.of(t),cO=t=>y4(Fd(t)?2:3),lO=t=>{const e=g4(mc(t));let r=1n;for(let n=e,i=(Po+1n)/4n;i>0n;i>>=1n)i&1n&&(r=r*n%Po),n=n*n%Po;return Le(r*r)===e?r:Pr("sqrt invalid")};class Mr{static BASE;static ZERO;X;Y;Z;constructor(e,r,n){this.X=bv(e),this.Y=mc(r),this.Z=bv(n),Object.freeze(this)}static CURVE(){return c4}static fromAffine(e){const{x:r,y:n}=e;return r===0n&&n===0n?go:new Mr(r,n,1n)}static fromBytes(e){u0(e);const{publicKey:r,publicKeyUncompressed:n}=rO;let i;const o=e.length,s=e[0],a=e.subarray(1),l=wv(a,0,Md);if(o===r&&(s===2||s===3)){let f=lO(l);const u=Fd(f);Fd(Yc(s))!==u&&(f=Le(-f)),i=new Mr(l,f,1n)}return o===n&&s===4&&(i=new Mr(l,wv(a,Md,a0),1n)),i?i.assertValidity():Pr("bad point: not on curve")}static fromHex(e){return Mr.fromBytes(p4(e))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}equals(e){const{X:r,Y:n,Z:i}=this,{X:o,Y:s,Z:a}=Hh(e),l=Le(r*a),f=Le(o*i),u=Le(n*a),p=Le(s*i);return l===f&&u===p}is0(){return this.equals(go)}negate(){return new Mr(this.X,Le(-this.Y),this.Z)}double(){return this.add(this)}add(e){const{X:r,Y:n,Z:i}=this,{X:o,Y:s,Z:a}=Hh(e),l=0n,f=l4;let u=0n,p=0n,y=0n;const w=Le(f*3n);let A=Le(r*o),S=Le(n*s),k=Le(i*a),I=Le(r+n),N=Le(o+s);I=Le(I*N),N=Le(A+S),I=Le(I-N),N=Le(r+i);let B=Le(o+a);return N=Le(N*B),B=Le(A+k),N=Le(N-B),B=Le(n+i),u=Le(s+a),B=Le(B*u),u=Le(S+k),B=Le(B-u),y=Le(l*N),u=Le(w*k),y=Le(u+y),u=Le(S-y),y=Le(S+y),p=Le(u*y),S=Le(A+A),S=Le(S+A),k=Le(l*k),N=Le(w*N),S=Le(S+k),k=Le(A-k),k=Le(l*k),N=Le(N+k),A=Le(S*N),p=Le(p+A),A=Le(B*N),u=Le(I*u),u=Le(u-A),A=Le(I*S),y=Le(B*y),y=Le(y+A),new Mr(u,p,y)}subtract(e){return this.add(Hh(e).negate())}multiply(e,r=!0){if(!r&&e===0n)return go;if(uO(e),e===1n)return this;if(this.equals(Ma))return gO(e).p;let n=go,i=Ma;for(let o=this;e>0n;o=o.double(),e>>=1n)e&1n?n=n.add(o):r&&(i=i.add(o));return n}multiplyUnsafe(e){return this.multiply(e,!1)}toAffine(){const{X:e,Y:r,Z:n}=this;if(this.equals(go))return{x:0n,y:0n};if(n===1n)return{x:e,y:r};const i=aO(n,Po);return Le(n*i)!==1n&&Pr("inverse invalid"),{x:Le(e*i),y:Le(r*i)}}assertValidity(){const{x:e,y:r}=this.toAffine();return mc(e),mc(r),Le(r*r)===g4(e)?this:Pr("bad point: not on curve")}toBytes(e=!0){const{x:r,y:n}=this.assertValidity().toAffine(),i=vv(r);return e?mv(cO(n),i):mv(y4(4),i,vv(n))}toHex(e){return d4(this.toBytes(e))}}const Ma=new Mr(eO,tO,1n),go=new Mr(0n,1n,0n);Mr.BASE=Ma;Mr.ZERO=go;const fO=t=>Yc("0x"+(d4(t)||"0")),wv=(t,e,r)=>fO(t.subarray(e,r)),hO=2n**256n,vv=t=>p4(h4(ql(t,0n,hO),a0)),Zc=8,dO=256,m4=Math.ceil(dO/Zc)+1,Kd=2**(Zc-1),pO=()=>{const t=[];let e=Ma,r=e;for(let n=0;n<m4;n++){r=e,t.push(r);for(let i=1;i<Kd;i++)r=r.add(e),t.push(r);e=r.double()}return t};let Ev;const Sv=(t,e)=>{const r=e.negate();return t?r:e},gO=t=>{const e=Ev||(Ev=pO());let r=go,n=Ma;const i=2**Zc,o=i,s=Yc(i-1),a=Yc(Zc);for(let l=0;l<m4;l++){let f=Number(t&s);t>>=a,f>Kd&&(f-=o,t+=1n);const u=l*Kd,p=u,y=u+Math.abs(f)-1,w=l%2!==0,A=f<0;f===0?n=n.add(Sv(w,e[p])):r=r.add(Sv(A,e[y]))}return t!==0n&&Pr("invalid wnaf"),{p:r,f:n}},nt=t=>t.length===32?t:t.subarray(1,33);function Av(t){let e=t.toString(16);return e=e.padStart(64,"0"),e.length>64&&(e=e.slice(-64)),Ee(e)}function Qc(t){if(t.length===32)return;if(![33,65].includes(t.length)){console.warn(`Unsupported key length=${t.length}. Must be 33 (compressed) or 65 (uncompressed).`);return}let e;try{e=Mr.fromHex(ve(t))}catch{throw new Error("Invalid secp256k1 public key bytes. Cannot parse.")}const r=Av(e.x),n=Av(e.y),i=e.y%2n===0n?6:7,o=Ft(65);o[0]=i,o.set(r,1),o.set(n,33);const s=jt([new Uint8Array([4]),r,n]);return{hybrid:o,uncompressed:s}}function Gu(t,e){if(_e(t,e))return!0;if(t.length===65&&e.length===65){const r=new Uint8Array(t),n=new Uint8Array(e);return(r[0]===6||r[0]===7)&&(r[0]=4),(n[0]===6||n[0]===7)&&(n[0]=4),_e(r,n)}return!1}const Oi=ge;let b4=class da{static NAME=Ze.P2PKH;#e;#s;#t;#o;#r;#n;#i;#a;#u=!1;#l=!1;#c;#f;#h;#d;#p;#y;#g;#m=!1;#w=!1;#v=!1;#E=!1;#S=!1;#b=!1;#k=!1;#A;#I=!1;#_;#T=!1;constructor(e,r){this.#e=e.network??Ur,this.#s={validate:r?.validate??!0,allowIncomplete:r?.allowIncomplete??!1},this.#t=e.address,this.#o=e.hash,this.#r=e.pubkey,this.#n=e.signature,this.#i=e.output,this.#a=e.input,this.#u=e.useHybrid??!1,this.#l=e.useUncompressed??!1,this.#s.validate&&this.#C()}get name(){return Ze.P2PKH}get network(){return this.#e}get address(){return this.#m||(this.#c=this.#P(),this.#m=!0),this.#c}get hash(){return this.#w||(this.#f=this.#O(),this.#w=!0),this.#f}get pubkey(){return this.#v||(this.#h=this.#U(),this.#v=!0),this.#h}get signature(){return this.#E||(this.#d=this.#L(),this.#E=!0),this.#d}get output(){return this.#S||(this.#p=this.#R(),this.#S=!0),this.#p}get input(){return this.#b||(this.#y=this.#$(),this.#b=!0),this.#y}get witness(){return this.#k||(this.#g=this.#N(),this.#k=!0),this.#g}static fromPubkey(e,r){return new da({pubkey:e,network:r})}static fromAddress(e,r){return new da({address:e,network:r})}static fromHash(e,r){return new da({hash:e,network:r})}static fromOutput(e,r){return new da({output:e,network:r})}toPayment(){return{name:this.name,network:this.network,address:this.address,hash:this.hash,pubkey:this.pubkey,signature:this.signature,output:this.output,input:this.input,witness:this.witness}}#x(){if(!this.#I){if(this.#t){const e=new Uint8Array(t0(this.#t));this.#A={version:e[0],hash:e.subarray(1)}}this.#I=!0}return this.#A}#B(){return this.#T||(this.#a&&(this.#_=It(this.#a)??void 0),this.#T=!0),this.#_}#P(){if(this.#t)return this.#t;const e=this.hash;if(!e)return;const r=Ft(21);return r[0]=this.#e.pubKeyHash,r.set(e,1),e0(r)}#O(){if(this.#o)return this.#o;if(this.#i)return this.#i.subarray(3,23);if(this.#t)return this.#x()?.hash;const e=this.pubkey;if(e)return mr(e)}#U(){if(this.#r)return this.#r;if(this.#a){const e=this.#B();if(e&&e.length>=2)return e[1]}}#L(){if(this.#n)return this.#n;if(this.#a){const e=this.#B();if(e&&e.length>=1)return e[0]}}#R(){if(this.#i)return this.#i;const e=this.hash;if(e)return Qt([Oi.OP_DUP,Oi.OP_HASH160,e,Oi.OP_EQUALVERIFY,Oi.OP_CHECKSIG])}#$(){if(this.#a)return this.#a;if(!this.#r||!this.#n)return;let e=this.#r;if(this.#u||this.#l){const r=Qc(this.#r);r&&(this.#l?e=r.uncompressed:e=r.hybrid)}return Qt([this.#n,e])}#N(){if(this.input)return[]}#C(){let e=new Uint8Array(0);if(this.#t){const r=this.#x();if(!r)throw new TypeError("Invalid address");if(r.version!==this.#e.pubKeyHash)throw new TypeError("Invalid version or Network mismatch");if(r.hash.length!==20)throw new TypeError("Invalid address");e=r.hash}if(this.#o){if(e.length>0&&!_e(e,this.#o))throw new TypeError("Hash mismatch");e=this.#o}if(this.#i){if(this.#i.length!==25||this.#i[0]!==Oi.OP_DUP||this.#i[1]!==Oi.OP_HASH160||this.#i[2]!==20||this.#i[23]!==Oi.OP_EQUALVERIFY||this.#i[24]!==Oi.OP_CHECKSIG)throw new TypeError("Output is invalid");const r=this.#i.subarray(3,23);if(e.length>0&&!_e(e,r))throw new TypeError("Hash mismatch");e=r}if(this.#r){const r=mr(this.#r);let n=e.length>0&&!_e(e,r);if(n&&(this.#r.length===33&&(this.#r[0]===2||this.#r[0]===3)||this.#r.length===65&&this.#r[0]===4)){const i=Qc(this.#r);if(i){const o=mr(i.uncompressed);if(_e(e,o))n=!1,this.#l=!0;else{const s=mr(i.hybrid);n=!_e(e,s),n||(this.#u=!0)}}}if(n)throw new TypeError("Hash mismatch");e=r}if(this.#a){const r=this.#B();if(!r||r.length!==2)throw new TypeError("Input is invalid");if(!Ko(r[0]))throw new TypeError("Input has invalid signature");if(!No(r[1]))throw new TypeError("Input has invalid pubkey");if(this.#n&&!_e(this.#n,r[0]))throw new TypeError("Signature mismatch");if(this.#r&&!_e(this.#r,r[1]))throw new TypeError("Pubkey mismatch");const n=mr(r[1]);if(e.length>0&&!_e(e,n))throw new TypeError("Hash mismatch (input)")}}};function hu(t,e){if(!t.address&&!t.hash&&!t.output&&!t.pubkey&&!t.input)throw new TypeError("Not enough data");const r=new b4({address:t.address,hash:t.hash,pubkey:t.pubkey,signature:t.signature,output:t.output,input:t.input,network:t.network,useHybrid:t.useHybrid,useUncompressed:t.useUncompressed},e);return Object.assign(r.toPayment(),t)}const ia=ge;let w4=class pa{static NAME=Ze.P2SH;#e;#s;#t;#o;#r;#n;#i;#a;#u;#l;#c;#f;#h;#d;#p=!1;#y=!1;#g=!1;#m=!1;#w=!1;#v=!1;#E;#S=!1;#b;#k=!1;#A;#I=!1;constructor(e,r){let n=e.network;n||(n=e.redeem&&e.redeem.network||Ur),this.#e=n,this.#s={validate:r?.validate??!0,allowIncomplete:r?.allowIncomplete??!1},this.#t=e.address,this.#o=e.hash,this.#r=e.output,this.#n=e.input,this.#i=e.redeem,this.#a=e.witness,this.#s.validate&&this.#N()}get name(){const e=this.redeem;return e!==void 0&&e.name!==void 0?`p2sh-${e.name}`:Ze.P2SH}get network(){return this.#e}get address(){return this.#p||(this.#u=this.#B(),this.#p=!0),this.#u}get hash(){return this.#y||(this.#l=this.#P(),this.#y=!0),this.#l}get output(){return this.#g||(this.#c=this.#O(),this.#g=!0),this.#c}get input(){return this.#m||(this.#f=this.#U(),this.#m=!0),this.#f}get redeem(){return this.#w||(this.#h=this.#L(),this.#w=!0),this.#h}get witness(){return this.#v||(this.#d=this.#R(),this.#v=!0),this.#d}static fromRedeem(e,r){return new pa({redeem:e,network:r})}static fromAddress(e,r){return new pa({address:e,network:r})}static fromHash(e,r){return new pa({hash:e,network:r})}static fromOutput(e,r){return new pa({output:e,network:r})}toPayment(){return{name:this.name,network:this.network,address:this.address,hash:this.hash,output:this.output,input:this.input,redeem:this.redeem,witness:this.witness}}#_(){if(!this.#S){if(this.#t){const e=new Uint8Array(t0(this.#t));this.#E={version:e[0],hash:e.subarray(1)}}this.#S=!0}return this.#E}#T(){return this.#k||(this.#n&&(this.#b=It(this.#n)??void 0),this.#k=!0),this.#b}#x(){if(!this.#I){const e=this.#T();if(e){const r=e[e.length-1];this.#A={network:this.#e,output:r===ia.OP_FALSE?new Uint8Array(0):r,input:Qt(e.slice(0,-1)),witness:this.#a||[]}}this.#I=!0}return this.#A}#B(){if(this.#t)return this.#t;const e=this.hash;if(!e)return;const r=Ft(21);return r[0]=this.#e.scriptHash,r.set(e,1),e0(r)}#P(){if(this.#o)return this.#o;if(this.#r)return this.#r.subarray(2,22);if(this.#t)return this.#_()?.hash;const e=this.redeem;if(e&&e.output)return mr(e.output)}#O(){if(this.#r)return this.#r;const e=this.hash;if(e)return Qt([ia.OP_HASH160,e,ia.OP_EQUAL])}#U(){if(this.#n)return this.#n;const e=this.#i;if(!(!e||!e.input||!e.output))return Qt([].concat(It(e.input),e.output))}#L(){if(this.#i)return this.#i;if(this.#n)return this.#x()}#R(){if(this.#a)return this.#a;const e=this.redeem;if(e&&e.witness)return e.witness;if(this.input)return[]}#$(e){if(e.output){const r=It(e.output);if(!r||r.length<1)throw new TypeError("Redeem.output too short");if(e.output.byteLength>520)throw new TypeError("Redeem.output unspendable if larger than 520 bytes");if(o0(r)>201)throw new TypeError("Redeem.output unspendable with more than 201 non-push ops")}if(e.input){const r=e.input.length>0,n=e.witness&&e.witness.length>0;if(!r&&!n)throw new TypeError("Empty input");if(r&&n)throw new TypeError("Input and witness provided");if(r){const i=It(e.input);if(!Wl(i))throw new TypeError("Non push-only scriptSig")}}}#N(){let e=new Uint8Array(0);if(this.#t){const r=this.#_();if(!r)throw new TypeError("Invalid address");if(r.version!==this.#e.scriptHash)throw new TypeError("Invalid version or Network mismatch");if(r.hash.length!==20)throw new TypeError("Invalid address");e=r.hash}if(this.#o){if(e.length>0&&!_e(e,this.#o))throw new TypeError("Hash mismatch");e=this.#o}if(this.#r){if(this.#r.length!==23||this.#r[0]!==ia.OP_HASH160||this.#r[1]!==20||this.#r[22]!==ia.OP_EQUAL)throw new TypeError("Output is invalid");const r=this.#r.subarray(2,22);if(e.length>0&&!_e(e,r))throw new TypeError("Hash mismatch");e=r}if(this.#n){const r=this.#T();if(!r||r.length<1)throw new TypeError("Input too short");const n=this.#x();if(!n||!(n.output instanceof Uint8Array))throw new TypeError("Input is invalid");if(this.#$(n),n.output){const i=mr(n.output);if(e.length>0&&!_e(e,i))throw new TypeError("Hash mismatch");e=i}}if(this.#i){if(this.#i.network&&this.#i.network!==this.#e)throw new TypeError("Network mismatch");if(this.#n){const r=this.#x();if(r){if(this.#i.output&&r.output&&!_e(this.#i.output,r.output))throw new TypeError("Redeem.output mismatch");if(this.#i.input&&r.input&&!_e(this.#i.input,r.input))throw new TypeError("Redeem.input mismatch")}}if(this.#$(this.#i),this.#i.output){const r=mr(this.#i.output);if(e.length>0&&!_e(e,r))throw new TypeError("Hash mismatch")}}if(this.#a&&this.#i&&this.#i.witness&&!Ls(this.#i.witness,this.#a))throw new TypeError("Witness and redeem.witness mismatch")}};function du(t,e){if(!t.address&&!t.hash&&!t.output&&!t.redeem&&!t.input)throw new TypeError("Not enough data");const r=new w4({address:t.address,hash:t.hash,output:t.output,input:t.input,redeem:t.redeem,witness:t.witness,network:t.network},e);return Object.assign(r.toPayment(),t)}function yO(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let f=0;f<e.length;f++)e[f]=255;for(let f=0;f<t.length;f++){const u=t.charAt(f),p=u.charCodeAt(0);if(e[p]!==255)throw new TypeError(u+" is ambiguous");e[p]=f}const r=t.length,n=t.charAt(0),i=Math.log(r)/Math.log(256),o=Math.log(256)/Math.log(r);function s(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";let u=0,p=0,y=0;const w=f.length;for(;y!==w&&f[y]===0;)y++,u++;const A=(w-y)*o+1>>>0,S=new Uint8Array(A);for(;y!==w;){let N=f[y],B=0;for(let V=A-1;(N!==0||B<p)&&V!==-1;V--,B++)N+=256*S[V]>>>0,S[V]=N%r>>>0,N=N/r>>>0;if(N!==0)throw new Error("Non-zero carry");p=B,y++}let k=A-p;for(;k!==A&&S[k]===0;)k++;let I=n.repeat(u);for(;k<A;++k)I+=t.charAt(S[k]);return I}function a(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;let u=0,p=0,y=0;for(;f[u]===n;)p++,u++;const w=(f.length-u)*i+1>>>0,A=new Uint8Array(w);for(;u<f.length;){const N=f.charCodeAt(u);if(N>255)return;let B=e[N];if(B===255)return;let V=0;for(let W=w-1;(B!==0||V<y)&&W!==-1;W--,V++)B+=r*A[W]>>>0,A[W]=B%256>>>0,B=B/256>>>0;if(B!==0)throw new Error("Non-zero carry");y=V,u++}let S=w-y;for(;S!==w&&A[S]===0;)S++;const k=new Uint8Array(p+(w-S));let I=p;for(;S!==w;)k[I++]=A[S++];return k}function l(f){const u=a(f);if(u)return u;throw new Error("Non-base"+r+" character")}return{encode:s,decodeUnsafe:a,decode:l}}var mO="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";yO(mO);function bO(t){const e=t.length;if(e%2!==0)throw new TypeError("fromHexInternal: odd-length hex string");const r=new Uint8Array(e/2);for(let n=0;n<e;n+=2){const i=kv(t.charCodeAt(n)),o=kv(t.charCodeAt(n+1));if(i===-1||o===-1)throw new TypeError("fromHexInternal: invalid hex character");r[n>>1]=i<<4|o}return r}function kv(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:-1}function Ir(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function c0(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Ho(t,e=""){if(!Number.isSafeInteger(t)||t<0){const r=e&&`"${e}" `;throw new Error(`${r}expected integer >= 0, got ${t}`)}}function Nt(t,e,r=""){const n=c0(t),i=t?.length,o=e!==void 0;if(!n||o&&i!==e){const s=r&&`"${r}" `,a=o?` of length ${e}`:"",l=n?`length=${i}`:`type=${typeof t}`;throw new Error(s+"expected Uint8Array"+a+", got "+l)}return t}function v4(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash must wrapped by utils.createHasher");Ho(t.outputLen),Ho(t.blockLen)}function Jc(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function wO(t,e){Nt(t,void 0,"digestInto() output");const r=e.outputLen;if(t.length<r)throw new Error('"digestInto() output" expected to be of length >='+r)}function el(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Dh(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Tn(t,e){return t<<32-e|t>>>e}const E4=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",vO=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Gl(t){if(Nt(t),E4)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=vO[t[r]];return e}const ti={_0:48,_9:57,A:65,F:70,a:97,f:102};function Iv(t){if(t>=ti._0&&t<=ti._9)return t-ti._0;if(t>=ti.A&&t<=ti.F)return t-(ti.A-10);if(t>=ti.a&&t<=ti.f)return t-(ti.a-10)}function tl(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(E4)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){const s=Iv(t.charCodeAt(o)),a=Iv(t.charCodeAt(o+1));if(s===void 0||a===void 0){const l=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+o)}n[i]=s*16+a}return n}function Yi(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];Nt(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const o=t[n];r.set(o,i),i+=o.length}return r}function EO(t,e={}){const r=(i,o)=>t(o).update(i).digest(),n=t(void 0);return r.outputLen=n.outputLen,r.blockLen=n.blockLen,r.create=i=>t(i),Object.assign(r,e),Object.freeze(r)}function S4(t=32){const e=typeof globalThis=="object"?globalThis.crypto:null;if(typeof e?.getRandomValues!="function")throw new Error("crypto.getRandomValues must be defined");return e.getRandomValues(new Uint8Array(t))}const SO=t=>({oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,t])});function AO(t,e,r){return t&e^~t&r}function kO(t,e,r){return t&e^t&r^e&r}class IO{blockLen;outputLen;padOffset;isLE;buffer;view;finished=!1;length=0;pos=0;destroyed=!1;constructor(e,r,n,i){this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(e),this.view=Dh(this.buffer)}update(e){Jc(this),Nt(e);const{view:r,buffer:n,blockLen:i}=this,o=e.length;for(let s=0;s<o;){const a=Math.min(i-this.pos,o-s);if(a===i){const l=Dh(e);for(;i<=o-s;s+=i)this.process(l,s);continue}n.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Jc(this),wO(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:o}=this;let{pos:s}=this;r[s++]=128,el(this.buffer.subarray(s)),this.padOffset>i-s&&(this.process(n,0),s=0);for(let p=s;p<i;p++)r[p]=0;n.setBigUint64(i-8,BigInt(this.length*8),o),this.process(n,0);const a=Dh(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen must be aligned to 32bit");const f=l/4,u=this.get();if(f>u.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<f;p++)a.setUint32(4*p,u[p],o)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||=new this.constructor,e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return e.destroyed=s,e.finished=o,e.length=i,e.pos=a,i%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const Ui=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),_O=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Li=new Uint32Array(64);class xO extends IO{constructor(e){super(64,e,8,!1)}get(){const{A:e,B:r,C:n,D:i,E:o,F:s,G:a,H:l}=this;return[e,r,n,i,o,s,a,l]}set(e,r,n,i,o,s,a,l){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=l|0}process(e,r){for(let p=0;p<16;p++,r+=4)Li[p]=e.getUint32(r,!1);for(let p=16;p<64;p++){const y=Li[p-15],w=Li[p-2],A=Tn(y,7)^Tn(y,18)^y>>>3,S=Tn(w,17)^Tn(w,19)^w>>>10;Li[p]=S+Li[p-7]+A+Li[p-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:l,G:f,H:u}=this;for(let p=0;p<64;p++){const y=Tn(a,6)^Tn(a,11)^Tn(a,25),w=u+y+AO(a,l,f)+_O[p]+Li[p]|0,A=(Tn(n,2)^Tn(n,13)^Tn(n,22))+kO(n,i,o)|0;u=f,f=l,l=a,a=s+w|0,s=o,o=i,i=n,n=w+A|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,l=l+this.F|0,f=f+this.G|0,u=u+this.H|0,this.set(n,i,o,s,a,l,f,u)}roundClean(){el(Li)}destroy(){this.set(0,0,0,0,0,0,0,0),el(this.buffer)}}class TO extends xO{A=Ui[0]|0;B=Ui[1]|0;C=Ui[2]|0;D=Ui[3]|0;E=Ui[4]|0;F=Ui[5]|0;G=Ui[6]|0;H=Ui[7]|0;constructor(){super(32)}}const BO=EO(()=>new TO,SO(1)),l0=BigInt(0),jd=BigInt(1);function rl(t,e=""){if(typeof t!="boolean"){const r=e&&`"${e}" `;throw new Error(r+"expected boolean, got type="+typeof t)}return t}function A4(t){if(typeof t=="bigint"){if(!bc(t))throw new Error("positive bigint expected, got "+t)}else Ho(t);return t}function Xu(t){const e=A4(t).toString(16);return e.length&1?"0"+e:e}function k4(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?l0:BigInt("0x"+t)}function Xl(t){return k4(Gl(t))}function I4(t){return k4(Gl(PO(Nt(t)).reverse()))}function f0(t,e){Ho(e),t=A4(t);const r=tl(t.toString(16).padStart(e*2,"0"));if(r.length!==e)throw new Error("number too large");return r}function _4(t,e){return f0(t,e).reverse()}function PO(t){return Uint8Array.from(t)}const bc=t=>typeof t=="bigint"&&l0<=t;function OO(t,e,r){return bc(t)&&bc(e)&&bc(r)&&e<=t&&t<r}function UO(t,e,r,n){if(!OO(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function LO(t){let e;for(e=0;t>l0;t>>=jd,e+=1);return e}const h0=t=>(jd<<BigInt(t))-jd;function RO(t,e,r){if(Ho(t,"hashLen"),Ho(e,"qByteLen"),typeof r!="function")throw new Error("hmacFn must be a function");const n=S=>new Uint8Array(S),i=Uint8Array.of(),o=Uint8Array.of(0),s=Uint8Array.of(1),a=1e3;let l=n(t),f=n(t),u=0;const p=()=>{l.fill(1),f.fill(0),u=0},y=(...S)=>r(f,Yi(l,...S)),w=(S=i)=>{f=y(o,S),l=y(),S.length!==0&&(f=y(s,S),l=y())},A=()=>{if(u++>=a)throw new Error("drbg: tried max amount of iterations");let S=0;const k=[];for(;S<e;){l=y();const I=l.slice();k.push(I),S+=l.length}return Yi(...k)};return(S,k)=>{p(),w(S);let I;for(;!(I=k(A()));)w();return p(),I}}function d0(t,e={},r={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function n(o,s,a){const l=t[o];if(a&&l===void 0)return;const f=typeof l;if(f!==s||l===null)throw new Error(`param "${o}" is invalid: expected ${s}, got ${f}`)}const i=(o,s)=>Object.entries(o).forEach(([a,l])=>n(a,l,s));i(e,!1),i(r,!0)}function _v(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const o=t(r,...n);return e.set(r,o),o}}const Br=BigInt(0),Sr=BigInt(1),_o=BigInt(2),x4=BigInt(3),T4=BigInt(4),B4=BigInt(5),$O=BigInt(7),P4=BigInt(8),CO=BigInt(9),O4=BigInt(16);function dn(t,e){const r=t%e;return r>=Br?r:e+r}function Gr(t,e,r){let n=t;for(;e-- >Br;)n*=n,n%=r;return n}function xv(t,e){if(t===Br)throw new Error("invert: expected non-zero number");if(e<=Br)throw new Error("invert: expected positive modulus, got "+e);let r=dn(t,e),n=e,i=Br,o=Sr;for(;r!==Br;){const s=n/r,a=n%r,l=i-o*s;n=r,r=a,i=o,o=l}if(n!==Sr)throw new Error("invert: does not exist");return dn(i,e)}function p0(t,e,r){if(!t.eql(t.sqr(e),r))throw new Error("Cannot find square root")}function U4(t,e){const r=(t.ORDER+Sr)/T4,n=t.pow(e,r);return p0(t,n,e),n}function NO(t,e){const r=(t.ORDER-B4)/P4,n=t.mul(e,_o),i=t.pow(n,r),o=t.mul(e,i),s=t.mul(t.mul(o,_o),i),a=t.mul(o,t.sub(s,t.ONE));return p0(t,a,e),a}function HO(t){const e=Yl(t),r=L4(t),n=r(e,e.neg(e.ONE)),i=r(e,n),o=r(e,e.neg(n)),s=(t+$O)/O4;return(a,l)=>{let f=a.pow(l,s),u=a.mul(f,n);const p=a.mul(f,i),y=a.mul(f,o),w=a.eql(a.sqr(u),l),A=a.eql(a.sqr(p),l);f=a.cmov(f,u,w),u=a.cmov(y,p,A);const S=a.eql(a.sqr(u),l),k=a.cmov(f,u,S);return p0(a,k,l),k}}function L4(t){if(t<x4)throw new Error("sqrt is not defined for small field");let e=t-Sr,r=0;for(;e%_o===Br;)e/=_o,r++;let n=_o;const i=Yl(t);for(;Tv(i,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return U4;let o=i.pow(n,e);const s=(e+Sr)/_o;return function(a,l){if(a.is0(l))return l;if(Tv(a,l)!==1)throw new Error("Cannot find square root");let f=r,u=a.mul(a.ONE,o),p=a.pow(l,e),y=a.pow(l,s);for(;!a.eql(p,a.ONE);){if(a.is0(p))return a.ZERO;let w=1,A=a.sqr(p);for(;!a.eql(A,a.ONE);)if(w++,A=a.sqr(A),w===f)throw new Error("Cannot find square root");const S=Sr<<BigInt(f-w-1),k=a.pow(u,S);f=w,u=a.sqr(k),p=a.mul(p,u),y=a.mul(y,k)}return y}}function DO(t){return t%T4===x4?U4:t%P4===B4?NO:t%O4===CO?HO(t):L4(t)}const zO=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function MO(t){const e={ORDER:"bigint",BYTES:"number",BITS:"number"},r=zO.reduce((n,i)=>(n[i]="function",n),e);return d0(t,r),t}function FO(t,e,r){if(r<Br)throw new Error("invalid exponent, negatives unsupported");if(r===Br)return t.ONE;if(r===Sr)return e;let n=t.ONE,i=e;for(;r>Br;)r&Sr&&(n=t.mul(n,i)),i=t.sqr(i),r>>=Sr;return n}function R4(t,e,r=!1){const n=new Array(e.length).fill(r?t.ZERO:void 0),i=e.reduce((s,a,l)=>t.is0(a)?s:(n[l]=s,t.mul(s,a)),t.ONE),o=t.inv(i);return e.reduceRight((s,a,l)=>t.is0(a)?s:(n[l]=t.mul(s,n[l]),t.mul(s,a)),o),n}function Tv(t,e){const r=(t.ORDER-Sr)/_o,n=t.pow(e,r),i=t.eql(n,t.ONE),o=t.eql(n,t.ZERO),s=t.eql(n,t.neg(t.ONE));if(!i&&!o&&!s)throw new Error("invalid Legendre symbol result");return i?1:o?0:-1}function KO(t,e){e!==void 0&&Ho(e);const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}class jO{ORDER;BITS;BYTES;isLE;ZERO=Br;ONE=Sr;_lengths;_sqrt;_mod;constructor(e,r={}){if(e<=Br)throw new Error("invalid field: expected ORDER > 0, got "+e);let n;this.isLE=!1,r!=null&&typeof r=="object"&&(typeof r.BITS=="number"&&(n=r.BITS),typeof r.sqrt=="function"&&(this.sqrt=r.sqrt),typeof r.isLE=="boolean"&&(this.isLE=r.isLE),r.allowedLengths&&(this._lengths=r.allowedLengths?.slice()),typeof r.modFromBytes=="boolean"&&(this._mod=r.modFromBytes));const{nBitLength:i,nByteLength:o}=KO(e,n);if(o>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");this.ORDER=e,this.BITS=i,this.BYTES=o,this._sqrt=void 0,Object.preventExtensions(this)}create(e){return dn(e,this.ORDER)}isValid(e){if(typeof e!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof e);return Br<=e&&e<this.ORDER}is0(e){return e===Br}isValidNot0(e){return!this.is0(e)&&this.isValid(e)}isOdd(e){return(e&Sr)===Sr}neg(e){return dn(-e,this.ORDER)}eql(e,r){return e===r}sqr(e){return dn(e*e,this.ORDER)}add(e,r){return dn(e+r,this.ORDER)}sub(e,r){return dn(e-r,this.ORDER)}mul(e,r){return dn(e*r,this.ORDER)}pow(e,r){return FO(this,e,r)}div(e,r){return dn(e*xv(r,this.ORDER),this.ORDER)}sqrN(e){return e*e}addN(e,r){return e+r}subN(e,r){return e-r}mulN(e,r){return e*r}inv(e){return xv(e,this.ORDER)}sqrt(e){return this._sqrt||(this._sqrt=DO(this.ORDER)),this._sqrt(this,e)}toBytes(e){return this.isLE?_4(e,this.BYTES):f0(e,this.BYTES)}fromBytes(e,r=!1){Nt(e);const{_lengths:n,BYTES:i,isLE:o,ORDER:s,_mod:a}=this;if(n){if(!n.includes(e.length)||e.length>i)throw new Error("Field.fromBytes: expected "+n+" bytes, got "+e.length);const f=new Uint8Array(i);f.set(e,o?0:f.length-e.length),e=f}if(e.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+e.length);let l=o?I4(e):Xl(e);if(a&&(l=dn(l,s)),!r&&!this.isValid(l))throw new Error("invalid field element: outside of range 0..ORDER");return l}invertBatch(e){return R4(this,e)}cmov(e,r,n){return n?r:e}}function Yl(t,e={}){return new jO(t,e)}function $4(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function C4(t){const e=$4(t);return e+Math.ceil(e/2)}function VO(t,e,r=!1){Nt(t);const n=t.length,i=$4(e),o=C4(e);if(n<16||n<o||n>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+n);const s=r?I4(t):Xl(t),a=dn(s,e-Sr)+Sr;return r?_4(a,i):f0(a,i)}const Rs=BigInt(0),xo=BigInt(1);function nl(t,e){const r=e.negate();return t?r:e}function Bv(t,e){const r=R4(t.Fp,e.map(n=>n.Z));return e.map((n,i)=>t.fromAffine(n.toAffine(r[i])))}function N4(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function zh(t,e){N4(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1),i=2**t,o=h0(t),s=BigInt(t);return{windows:r,windowSize:n,mask:o,maxNumber:i,shiftBy:s}}function Pv(t,e,r){const{windowSize:n,mask:i,maxNumber:o,shiftBy:s}=r;let a=Number(t&i),l=t>>s;a>n&&(a-=o,l+=xo);const f=e*n,u=f+Math.abs(a)-1,p=a===0,y=a<0,w=e%2!==0;return{nextN:l,offset:u,isZero:p,isNeg:y,isNegF:w,offsetF:f}}const Mh=new WeakMap,H4=new WeakMap;function Fh(t){return H4.get(t)||1}function Ov(t){if(t!==Rs)throw new Error("invalid wNAF")}class WO{BASE;ZERO;Fn;bits;constructor(e,r){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=r}_unsafeLadder(e,r,n=this.ZERO){let i=e;for(;r>Rs;)r&xo&&(n=n.add(i)),i=i.double(),r>>=xo;return n}precomputeWindow(e,r){const{windows:n,windowSize:i}=zh(r,this.bits),o=[];let s=e,a=s;for(let l=0;l<n;l++){a=s,o.push(a);for(let f=1;f<i;f++)a=a.add(s),o.push(a);s=a.double()}return o}wNAF(e,r,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let i=this.ZERO,o=this.BASE;const s=zh(e,this.bits);for(let a=0;a<s.windows;a++){const{nextN:l,offset:f,isZero:u,isNeg:p,isNegF:y,offsetF:w}=Pv(n,a,s);n=l,u?o=o.add(nl(y,r[w])):i=i.add(nl(p,r[f]))}return Ov(n),{p:i,f:o}}wNAFUnsafe(e,r,n,i=this.ZERO){const o=zh(e,this.bits);for(let s=0;s<o.windows&&n!==Rs;s++){const{nextN:a,offset:l,isZero:f,isNeg:u}=Pv(n,s,o);if(n=a,!f){const p=r[l];i=i.add(u?p.negate():p)}}return Ov(n),i}getPrecomputes(e,r,n){let i=Mh.get(r);return i||(i=this.precomputeWindow(r,e),e!==1&&(typeof n=="function"&&(i=n(i)),Mh.set(r,i))),i}cached(e,r,n){const i=Fh(e);return this.wNAF(i,this.getPrecomputes(i,e,n),r)}unsafe(e,r,n,i){const o=Fh(e);return o===1?this._unsafeLadder(e,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,e,n),r,i)}createCache(e,r){N4(r,this.bits),H4.set(e,r),Mh.delete(e)}hasCache(e){return Fh(e)!==1}}function qO(t,e,r,n){let i=e,o=t.ZERO,s=t.ZERO;for(;r>Rs||n>Rs;)r&xo&&(o=o.add(i)),n&xo&&(s=s.add(i)),i=i.double(),r>>=xo,n>>=xo;return{p1:o,p2:s}}function Uv(t,e,r){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return MO(e),e}else return Yl(t,{isLE:r})}function GO(t,e,r={},n){if(n===void 0&&(n=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const l=e[a];if(!(typeof l=="bigint"&&l>Rs))throw new Error(`CURVE.${a} must be positive bigint`)}const i=Uv(e.p,r.Fp,n),o=Uv(e.n,r.Fn,n),s=["Gx","Gy","a","b"];for(const a of s)if(!i.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:i,Fn:o}}function XO(t,e){return function(r){const n=t(r);return{secretKey:n,publicKey:e(n)}}}let D4=class{oHash;iHash;blockLen;outputLen;finished=!1;destroyed=!1;constructor(t,e){if(v4(t),Nt(e,void 0,"key"),this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,n=new Uint8Array(r);n.set(e.length>r?t.create().update(e).digest():e);for(let i=0;i<n.length;i++)n[i]^=54;this.iHash.update(n),this.oHash=t.create();for(let i=0;i<n.length;i++)n[i]^=106;this.oHash.update(n),el(n)}update(t){return Jc(this),this.iHash.update(t),this}digestInto(t){Jc(this),Nt(t,this.outputLen,"output"),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||=Object.create(Object.getPrototypeOf(this),{});const{oHash:e,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return t=t,t.finished=n,t.destroyed=i,t.blockLen=o,t.outputLen=s,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const z4=(t,e,r)=>new D4(t,e).update(r).digest();z4.create=(t,e)=>new D4(t,e);const Lv=(t,e)=>(t+(t>=0?e:-e)/M4)/e;function YO(t,e,r){const[[n,i],[o,s]]=e,a=Lv(s*t,r),l=Lv(-i*t,r);let f=t-a*n-l*o,u=-a*i-l*s;const p=f<li,y=u<li;p&&(f=-f),y&&(u=-u);const w=h0(Math.ceil(LO(r)/2))+bs;if(f<li||f>=w||u<li||u>=w)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:p,k1:f,k2neg:y,k2:u}}function Vd(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function Kh(t,e){const r={};for(let n of Object.keys(e))r[n]=t[n]===void 0?e[n]:t[n];return rl(r.lowS,"lowS"),rl(r.prehash,"prehash"),r.format!==void 0&&Vd(r.format),r}class ZO extends Error{constructor(e=""){super(e)}}const Mi={Err:ZO,_tlv:{encode:(t,e)=>{const{Err:r}=Mi;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,i=Xu(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const o=n>127?Xu(i.length/2|128):"";return Xu(t)+o+i+e},decode(t,e){const{Err:r}=Mi;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const i=e[n++],o=!!(i&128);let s=0;if(!o)s=i;else{const l=i&127;if(!l)throw new r("tlv.decode(long): indefinite length not supported");if(l>4)throw new r("tlv.decode(long): byte length is too big");const f=e.subarray(n,n+l);if(f.length!==l)throw new r("tlv.decode: length bytes not complete");if(f[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const u of f)s=s<<8|u;if(n+=l,s<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+s);if(a.length!==s)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+s)}}},_int:{encode(t){const{Err:e}=Mi;if(t<li)throw new e("integer: negative integers are not allowed");let r=Xu(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=Mi;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Xl(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=Mi,i=Nt(t,void 0,"signature"),{v:o,l:s}=n.decode(48,i);if(s.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l}=n.decode(2,o),{v:f,l:u}=n.decode(2,l);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(f)}},hexFromSig(t){const{_tlv:e,_int:r}=Mi,n=e.encode(2,r.encode(t.r)),i=e.encode(2,r.encode(t.s)),o=n+i;return e.encode(48,o)}},li=BigInt(0),bs=BigInt(1),M4=BigInt(2),Yu=BigInt(3),QO=BigInt(4);function JO(t,e={}){const r=GO("weierstrass",t,e),{Fp:n,Fn:i}=r;let o=r.CURVE;const{h:s,n:a}=o;d0(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object"});const{endo:l}=e;if(l&&(!n.is0(o.a)||typeof l.beta!="bigint"||!Array.isArray(l.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const f=K4(n,i);function u(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function p(U,P,L){const{x:R,y:z}=P.toAffine(),X=n.toBytes(R);if(rl(L,"isCompressed"),L){u();const ee=!n.isOdd(z);return Yi(F4(ee),X)}else return Yi(Uint8Array.of(4),X,n.toBytes(z))}function y(U){Nt(U,void 0,"Point");const{publicKey:P,publicKeyUncompressed:L}=f,R=U.length,z=U[0],X=U.subarray(1);if(R===P&&(z===2||z===3)){const ee=n.fromBytes(X);if(!n.isValid(ee))throw new Error("bad point: is not on curve, wrong x");const _=S(ee);let K;try{K=n.sqrt(_)}catch(D){const J=D instanceof Error?": "+D.message:"";throw new Error("bad point: is not on curve, sqrt error"+J)}u();const Z=n.isOdd(K);return(z&1)===1!==Z&&(K=n.neg(K)),{x:ee,y:K}}else if(R===L&&z===4){const ee=n.BYTES,_=n.fromBytes(X.subarray(0,ee)),K=n.fromBytes(X.subarray(ee,ee*2));if(!k(_,K))throw new Error("bad point: is not on curve");return{x:_,y:K}}else throw new Error(`bad point: got length ${R}, expected compressed=${P} or uncompressed=${L}`)}const w=e.toBytes||p,A=e.fromBytes||y;function S(U){const P=n.sqr(U),L=n.mul(P,U);return n.add(n.add(L,n.mul(U,o.a)),o.b)}function k(U,P){const L=n.sqr(P),R=S(U);return n.eql(L,R)}if(!k(o.Gx,o.Gy))throw new Error("bad curve params: generator point");const I=n.mul(n.pow(o.a,Yu),QO),N=n.mul(n.sqr(o.b),BigInt(27));if(n.is0(n.add(I,N)))throw new Error("bad curve params: a or b");function B(U,P,L=!1){if(!n.isValid(P)||L&&n.is0(P))throw new Error(`bad point coordinate ${U}`);return P}function V(U){if(!(U instanceof T))throw new Error("Weierstrass Point expected")}function W(U){if(!l||!l.basises)throw new Error("no endo");return YO(U,l.basises,i.ORDER)}const Y=_v((U,P)=>{const{X:L,Y:R,Z:z}=U;if(n.eql(z,n.ONE))return{x:L,y:R};const X=U.is0();P==null&&(P=X?n.ONE:n.inv(z));const ee=n.mul(L,P),_=n.mul(R,P),K=n.mul(z,P);if(X)return{x:n.ZERO,y:n.ZERO};if(!n.eql(K,n.ONE))throw new Error("invZ was invalid");return{x:ee,y:_}}),H=_v(U=>{if(U.is0()){if(e.allowInfinityPoint&&!n.is0(U.Y))return;throw new Error("bad point: ZERO")}const{x:P,y:L}=U.toAffine();if(!n.isValid(P)||!n.isValid(L))throw new Error("bad point: x or y not field elements");if(!k(P,L))throw new Error("bad point: equation left != right");if(!U.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function ie(U,P,L,R,z){return L=new T(n.mul(L.X,U),L.Y,L.Z),P=nl(R,P),L=nl(z,L),P.add(L)}class T{static BASE=new T(o.Gx,o.Gy,n.ONE);static ZERO=new T(n.ZERO,n.ONE,n.ZERO);static Fp=n;static Fn=i;X;Y;Z;constructor(P,L,R){this.X=B("x",P),this.Y=B("y",L,!0),this.Z=B("z",R),Object.freeze(this)}static CURVE(){return o}static fromAffine(P){const{x:L,y:R}=P||{};if(!P||!n.isValid(L)||!n.isValid(R))throw new Error("invalid affine point");if(P instanceof T)throw new Error("projective point not allowed");return n.is0(L)&&n.is0(R)?T.ZERO:new T(L,R,n.ONE)}static fromBytes(P){const L=T.fromAffine(A(Nt(P,void 0,"point")));return L.assertValidity(),L}static fromHex(P){return T.fromBytes(tl(P))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(P=8,L=!0){return G.createCache(this,P),L||this.multiply(Yu),this}assertValidity(){H(this)}hasEvenY(){const{y:P}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(P)}equals(P){V(P);const{X:L,Y:R,Z:z}=this,{X,Y:ee,Z:_}=P,K=n.eql(n.mul(L,_),n.mul(X,z)),Z=n.eql(n.mul(R,_),n.mul(ee,z));return K&&Z}negate(){return new T(this.X,n.neg(this.Y),this.Z)}double(){const{a:P,b:L}=o,R=n.mul(L,Yu),{X:z,Y:X,Z:ee}=this;let _=n.ZERO,K=n.ZERO,Z=n.ZERO,D=n.mul(z,z),J=n.mul(X,X),j=n.mul(ee,ee),te=n.mul(z,X);return te=n.add(te,te),Z=n.mul(z,ee),Z=n.add(Z,Z),_=n.mul(P,Z),K=n.mul(R,j),K=n.add(_,K),_=n.sub(J,K),K=n.add(J,K),K=n.mul(_,K),_=n.mul(te,_),Z=n.mul(R,Z),j=n.mul(P,j),te=n.sub(D,j),te=n.mul(P,te),te=n.add(te,Z),Z=n.add(D,D),D=n.add(Z,D),D=n.add(D,j),D=n.mul(D,te),K=n.add(K,D),j=n.mul(X,ee),j=n.add(j,j),D=n.mul(j,te),_=n.sub(_,D),Z=n.mul(j,J),Z=n.add(Z,Z),Z=n.add(Z,Z),new T(_,K,Z)}add(P){V(P);const{X:L,Y:R,Z:z}=this,{X,Y:ee,Z:_}=P;let K=n.ZERO,Z=n.ZERO,D=n.ZERO;const J=o.a,j=n.mul(o.b,Yu);let te=n.mul(L,X),ae=n.mul(R,ee),ce=n.mul(z,_),pe=n.add(L,R),le=n.add(X,ee);pe=n.mul(pe,le),le=n.add(te,ae),pe=n.sub(pe,le),le=n.add(L,z);let ye=n.add(X,_);return le=n.mul(le,ye),ye=n.add(te,ce),le=n.sub(le,ye),ye=n.add(R,z),K=n.add(ee,_),ye=n.mul(ye,K),K=n.add(ae,ce),ye=n.sub(ye,K),D=n.mul(J,le),K=n.mul(j,ce),D=n.add(K,D),K=n.sub(ae,D),D=n.add(ae,D),Z=n.mul(K,D),ae=n.add(te,te),ae=n.add(ae,te),ce=n.mul(J,ce),le=n.mul(j,le),ae=n.add(ae,ce),ce=n.sub(te,ce),ce=n.mul(J,ce),le=n.add(le,ce),te=n.mul(ae,le),Z=n.add(Z,te),te=n.mul(ye,le),K=n.mul(pe,K),K=n.sub(K,te),te=n.mul(pe,ae),D=n.mul(ye,D),D=n.add(D,te),new T(K,Z,D)}subtract(P){return this.add(P.negate())}is0(){return this.equals(T.ZERO)}multiply(P){const{endo:L}=e;if(!i.isValidNot0(P))throw new Error("invalid scalar: out of range");let R,z;const X=ee=>G.cached(this,ee,_=>Bv(T,_));if(L){const{k1neg:ee,k1:_,k2neg:K,k2:Z}=W(P),{p:D,f:J}=X(_),{p:j,f:te}=X(Z);z=J.add(te),R=ie(L.beta,D,j,ee,K)}else{const{p:ee,f:_}=X(P);R=ee,z=_}return Bv(T,[R,z])[0]}multiplyUnsafe(P){const{endo:L}=e,R=this;if(!i.isValid(P))throw new Error("invalid scalar: out of range");if(P===li||R.is0())return T.ZERO;if(P===bs)return R;if(G.hasCache(this))return this.multiply(P);if(L){const{k1neg:z,k1:X,k2neg:ee,k2:_}=W(P),{p1:K,p2:Z}=qO(T,R,X,_);return ie(L.beta,K,Z,z,ee)}else return G.unsafe(R,P)}toAffine(P){return Y(this,P)}isTorsionFree(){const{isTorsionFree:P}=e;return s===bs?!0:P?P(T,this):G.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:P}=e;return s===bs?this:P?P(T,this):this.multiplyUnsafe(s)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}toBytes(P=!0){return rl(P,"isCompressed"),this.assertValidity(),w(T,this,P)}toHex(P=!0){return Gl(this.toBytes(P))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}const C=i.BITS,G=new WO(T,e.endo?Math.ceil(C/2):C);return T.BASE.precompute(8),T}function F4(t){return Uint8Array.of(t?2:3)}function K4(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function eU(t,e={}){const{Fn:r}=t,n=e.randomBytes||S4,i=Object.assign(K4(t.Fp,r),{seed:C4(r.ORDER)});function o(w){try{const A=r.fromBytes(w);return r.isValidNot0(A)}catch{return!1}}function s(w,A){const{publicKey:S,publicKeyUncompressed:k}=i;try{const I=w.length;return A===!0&&I!==S||A===!1&&I!==k?!1:!!t.fromBytes(w)}catch{return!1}}function a(w=n(i.seed)){return VO(Nt(w,i.seed,"seed"),r.ORDER)}function l(w,A=!0){return t.BASE.multiply(r.fromBytes(w)).toBytes(A)}function f(w){const{secretKey:A,publicKey:S,publicKeyUncompressed:k}=i;if(!c0(w)||"_lengths"in r&&r._lengths||A===S)return;const I=Nt(w,void 0,"key").length;return I===S||I===k}function u(w,A,S=!0){if(f(w)===!0)throw new Error("first arg must be private key");if(f(A)===!1)throw new Error("second arg must be public key");const k=r.fromBytes(w);return t.fromBytes(A).multiply(k).toBytes(S)}const p={isValidSecretKey:o,isValidPublicKey:s,randomSecretKey:a},y=XO(a,l);return Object.freeze({getPublicKey:l,getSharedSecret:u,keygen:y,Point:t,utils:p,lengths:i})}function tU(t,e,r={}){v4(e),d0(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"}),r=Object.assign({},r);const n=r.randomBytes||S4,i=r.hmac||((L,R)=>z4(e,L,R)),{Fp:o,Fn:s}=t,{ORDER:a,BITS:l}=s,{keygen:f,getPublicKey:u,getSharedSecret:p,utils:y,lengths:w}=eU(t,r),A={prehash:!0,lowS:typeof r.lowS=="boolean"?r.lowS:!0,format:"compact",extraEntropy:!1},S=a*M4<o.ORDER;function k(L){const R=a>>bs;return L>R}function I(L,R){if(!s.isValidNot0(R))throw new Error(`invalid signature ${L}: out of range 1..Point.Fn.ORDER`);return R}function N(){if(S)throw new Error('"recovered" sig type is not supported for cofactor >2 curves')}function B(L,R){Vd(R);const z=w.signature,X=R==="compact"?z:R==="recovered"?z+1:void 0;return Nt(L,X)}class V{r;s;recovery;constructor(R,z,X){if(this.r=I("r",R),this.s=I("s",z),X!=null){if(N(),![0,1,2,3].includes(X))throw new Error("invalid recovery id");this.recovery=X}Object.freeze(this)}static fromBytes(R,z=A.format){B(R,z);let X;if(z==="der"){const{r:Z,s:D}=Mi.toSig(Nt(R));return new V(Z,D)}z==="recovered"&&(X=R[0],z="compact",R=R.subarray(1));const ee=w.signature/2,_=R.subarray(0,ee),K=R.subarray(ee,ee*2);return new V(s.fromBytes(_),s.fromBytes(K),X)}static fromHex(R,z){return this.fromBytes(tl(R),z)}assertRecovery(){const{recovery:R}=this;if(R==null)throw new Error("invalid recovery id: must be present");return R}addRecoveryBit(R){return new V(this.r,this.s,R)}recoverPublicKey(R){const{r:z,s:X}=this,ee=this.assertRecovery(),_=ee===2||ee===3?z+a:z;if(!o.isValid(_))throw new Error("invalid recovery id: sig.r+curve.n != R.x");const K=o.toBytes(_),Z=t.fromBytes(Yi(F4((ee&1)===0),K)),D=s.inv(_),J=Y(Nt(R,void 0,"msgHash")),j=s.create(-J*D),te=s.create(X*D),ae=t.BASE.multiplyUnsafe(j).add(Z.multiplyUnsafe(te));if(ae.is0())throw new Error("invalid recovery: point at infinify");return ae.assertValidity(),ae}hasHighS(){return k(this.s)}toBytes(R=A.format){if(Vd(R),R==="der")return tl(Mi.hexFromSig(this));const{r:z,s:X}=this,ee=s.toBytes(z),_=s.toBytes(X);return R==="recovered"?(N(),Yi(Uint8Array.of(this.assertRecovery()),ee,_)):Yi(ee,_)}toHex(R){return Gl(this.toBytes(R))}}const W=r.bits2int||function(L){if(L.length>8192)throw new Error("input is too large");const R=Xl(L),z=L.length*8-l;return z>0?R>>BigInt(z):R},Y=r.bits2int_modN||function(L){return s.create(W(L))},H=h0(l);function ie(L){return UO("num < 2^"+l,L,li,H),s.toBytes(L)}function T(L,R){return Nt(L,void 0,"message"),R?Nt(e(L),void 0,"prehashed message"):L}function C(L,R,z){const{lowS:X,prehash:ee,extraEntropy:_}=Kh(z,A);L=T(L,ee);const K=Y(L),Z=s.fromBytes(R);if(!s.isValidNot0(Z))throw new Error("invalid private key");const D=[ie(Z),ie(K)];if(_!=null&&_!==!1){const ae=_===!0?n(w.secretKey):_;D.push(Nt(ae,void 0,"extraEntropy"))}const J=Yi(...D),j=K;function te(ae){const ce=W(ae);if(!s.isValidNot0(ce))return;const pe=s.inv(ce),le=t.BASE.multiply(ce).toAffine(),ye=s.create(le.x);if(ye===li)return;const Ae=s.create(pe*s.create(j+ye*Z));if(Ae===li)return;let xe=(le.x===ye?0:2)|Number(le.y&bs),Be=Ae;return X&&k(Ae)&&(Be=s.neg(Ae),xe^=1),new V(ye,Be,S?void 0:xe)}return{seed:J,k2sig:te}}function G(L,R,z={}){const{seed:X,k2sig:ee}=C(L,R,z);return RO(e.outputLen,s.BYTES,i)(X,ee).toBytes(z.format)}function U(L,R,z,X={}){const{lowS:ee,prehash:_,format:K}=Kh(X,A);if(z=Nt(z,void 0,"publicKey"),R=T(R,_),!c0(L)){const Z=L instanceof V?", use sig.toBytes()":"";throw new Error("verify expects Uint8Array signature"+Z)}B(L,K);try{const Z=V.fromBytes(L,K),D=t.fromBytes(z);if(ee&&Z.hasHighS())return!1;const{r:J,s:j}=Z,te=Y(R),ae=s.inv(j),ce=s.create(te*ae),pe=s.create(J*ae),le=t.BASE.multiplyUnsafe(ce).add(D.multiplyUnsafe(pe));return le.is0()?!1:s.create(le.x)===J}catch{return!1}}function P(L,R,z={}){const{prehash:X}=Kh(z,A);return R=T(R,X),V.fromBytes(L,"recovered").recoverPublicKey(R).toBytes()}return Object.freeze({keygen:f,getPublicKey:u,getSharedSecret:p,utils:y,lengths:w,Point:t,sign:G,verify:U,recoverPublicKey:P,Signature:V,hash:e})}const g0={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},rU={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},Rv=BigInt(2);function nU(t){const e=g0.p,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),l=BigInt(88),f=t*t*t%e,u=f*f*t%e,p=Gr(u,r,e)*u%e,y=Gr(p,r,e)*u%e,w=Gr(y,Rv,e)*f%e,A=Gr(w,i,e)*w%e,S=Gr(A,o,e)*A%e,k=Gr(S,a,e)*S%e,I=Gr(k,l,e)*k%e,N=Gr(I,a,e)*S%e,B=Gr(N,r,e)*u%e,V=Gr(B,s,e)*A%e,W=Gr(V,n,e)*f%e,Y=Gr(W,Rv,e);if(!Wd.eql(Wd.sqr(Y),t))throw new Error("Cannot find square root");return Y}const Wd=Yl(g0.p,{sqrt:nU}),iU=JO(g0,{Fp:Wd,endo:rU}),oU=tU(iU,BO),sU=oU.Point;sU.Fn.ORDER;function $e(t){return bO(t)}function pt(t,e){if(!t)throw new Error(`verifyCryptoBackend: ${e}`)}function aU(t){pt(t.isPoint($e("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798")),"isPoint should accept generator point"),pt(!t.isPoint($e("030000000000000000000000000000000000000000000000000000000000000005")),"isPoint should reject invalid point"),pt(t.isXOnlyPoint($e("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798")),"isXOnlyPoint should accept generator x-coordinate"),pt(!t.isXOnlyPoint($e("0000000000000000000000000000000000000000000000000000000000000005")),"isXOnlyPoint should reject x-coordinate not on curve"),pt(!t.isXOnlyPoint($e("0000000000000000000000000000000000000000000000000000000000000000")),"isXOnlyPoint should reject zero"),pt(!t.isXOnlyPoint($e("79be667ef9dcbbac55a06295ce870b07")),"isXOnlyPoint should reject wrong length"),pt(t.isPrivate($e("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798")),"isPrivate should accept valid scalar"),pt(t.isPrivate($e("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140")),"isPrivate should accept n-1"),pt(!t.isPrivate($e("0000000000000000000000000000000000000000000000000000000000000000")),"isPrivate should reject zero"),pt(!t.isPrivate($e("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141")),"isPrivate should reject n"),pt(!t.isPrivate($e("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364142")),"isPrivate should reject n+1");const e=t.privateAdd($e("0000000000000000000000000000000000000000000000000000000000000001"),$e("0000000000000000000000000000000000000000000000000000000000000000"));pt(e!==null&&Ir(e,$e("0000000000000000000000000000000000000000000000000000000000000001")),"privateAdd: 1 + 0 should equal 1"),pt(t.privateAdd($e("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"),$e("0000000000000000000000000000000000000000000000000000000000000003"))===null,"privateAdd: (n-3) + 3 should return null (result is zero mod n)");const r=t.privateAdd($e("e211078564db65c3ce7704f08262b1f38f1ef412ad15b5ac2d76657a63b2c500"),$e("b51fbb69051255d1becbd683de5848242a89c229348dd72896a87ada94ae8665"));pt(r!==null&&Ir(r,$e("9730c2ee69edbb958d42db7460bafa18fef9d955325aec99044c81c8282b0a24")),"privateAdd: known vector failed"),pt(Ir(t.privateNegate($e("0000000000000000000000000000000000000000000000000000000000000001")),$e("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140")),"privateNegate(1) should equal n-1"),pt(Ir(t.privateNegate($e("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e")),$e("0000000000000000000000000000000000000000000000000000000000000003")),"privateNegate(n-3) should equal 3"),pt(Ir(t.privateNegate($e("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af")),$e("4eede1bf775995d70a494f0a7bb6bc11e0b8cccd41cce8009ab1132c8b0a3792")),"privateNegate known vector failed"),pt(Ir(t.pointCompress($e("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!0),$e("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798")),"pointCompress uncompressed->compressed failed"),pt(Ir(t.pointCompress($e("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!1),$e("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")),"pointCompress uncompressed->uncompressed failed"),pt(Ir(t.pointCompress($e("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!0),$e("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798")),"pointCompress compressed->compressed failed"),pt(Ir(t.pointCompress($e("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!1),$e("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")),"pointCompress compressed->uncompressed failed");const n=t.pointFromScalar($e("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"));pt(n!==null&&Ir(n,$e("02b07ba9dca9523b7ef4bd97703d43d20399eb698e194704791a25ce77a400df99")),"pointFromScalar known vector failed"),pt(t.xOnlyPointAddTweak($e("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),$e("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))===null,"xOnlyPointAddTweak should return null for infinity result");let i=t.xOnlyPointAddTweak($e("1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b"),$e("a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac"));pt(i!==null&&Ir(i.xOnlyPubkey,$e("e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"))&&i.parity===1,"xOnlyPointAddTweak parity=1 case failed"),i=t.xOnlyPointAddTweak($e("2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991"),$e("823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47")),pt(i!==null&&Ir(i.xOnlyPubkey,$e("9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"))&&i.parity===0,"xOnlyPointAddTweak parity=0 case failed");const o=t.sign($e("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),$e("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"));if(pt(Ir(o,$e("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5")),"sign known vector failed"),pt(t.verify($e("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),$e("0379be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),o),"verify known vector failed"),t.signSchnorr){const s=t.signSchnorr($e("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),$e("c90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b14e5c9"),$e("c87aa53824b4d7ae2eb035a2b5bbbccc080e76cdc6d1692c4b0b62d798e6d906"));pt(Ir(s,$e("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7")),"signSchnorr known vector failed")}t.verifySchnorr&&pt(t.verifySchnorr($e("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),$e("dd308afec5777e13121fa72b9cc1b7cc0139715309b086c960e18fd969774eb8"),$e("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7")),"verifySchnorr known vector failed")}let qd=class fn{static#e;#s;constructor(e){this.#s=e}get lib(){return this.#s}static init(e){return fn.#e&&fn.#e.#s===e?fn.#e:(aU(e),fn.#e=new fn(e),fn.#e)}static get(){if(!fn.#e)throw new Error("ECC library not initialized. Call EccContext.init() or initEccLib() first.");return fn.#e}static clear(){fn.#e=void 0}static isInitialized(){return fn.#e!==void 0}};function uU(t){if(t===void 0){qd.clear();return}qd.init(t)}function cU(){return qd.get().lib}const il=192,j4=128,lU=t=>"left"in t&&"right"in t;function ol(t,e){if(t.length<33)throw new TypeError(`The control-block length is too small. Got ${t.length}, expected min 33.`);const r=(t.length-33)/32;let n=e;for(let i=0;i<r;i++){const o=t.subarray(33+32*i,65+32*i);Us(n,o)<0?n=Gd(n,o):n=Gd(o,n)}return n}function sl(t){if(qS(t))return{hash:Hn(t)};const e=[sl(t[0]),sl(t[1])];e.sort((i,o)=>Us(i.hash,o.hash));const r=e[0],n=e[1];return{hash:Gd(r.hash,n.hash),left:r,right:n}}function Fa(t,e){if(lU(t)){const r=Fa(t.left,e);if(r!==void 0)return[...r,t.right.hash];const n=Fa(t.right,e);if(n!==void 0)return[...n,t.left.hash]}else if(_e(t.hash,e))return[]}function Hn(t){const e=t.version||il;return fu("TapLeaf",jt([new Uint8Array([e]),fU(t.output)]))}function V4(t,e){return fu("TapTweak",e?jt([t,e]):t)}function ga(t,e){if(!(t instanceof Uint8Array)||t.length!==32||e&&e.length!==32)return null;const r=V4(t,e),n=cU().xOnlyPointAddTweak(t,r);return!n||n.xOnlyPubkey===null?null:{parity:n.parity,x:new Uint8Array(n.xOnlyPubkey)}}function Gd(t,e){return fu("TapBranch",jt([t,e]))}function fU(t){const e=on(t.length),r=Ft(e);return ro(t.length,r),jt([r,t])}const $v=ge,Cv=1,hU=80;let W4=class ya{static NAME=Ze.P2TR;#e;#s;#t;#o;#r;#n;#i;#a;#u;#l;#c;#f;#h;#d;#p;#y;#g;#m;#w;#v;#E;#S=!1;#b=!1;#k=!1;#A=!1;#I=!1;#_=!1;#T=!1;#x=!1;#B=!1;#P;#O=!1;#U;#L=!1;#R;#$=!1;constructor(e,r){this.#e=e.network??Ur,this.#s={validate:r?.validate??!0,allowIncomplete:r?.allowIncomplete??!1},this.#t=e.address,this.#o=e.pubkey,this.#r=e.internalPubkey,this.#n=e.hash,this.#i=e.scriptTree,this.#a=e.signature,this.#u=e.output,this.#l=e.witness,this.#c=e.redeem,this.#f=e.redeemVersion,this.#s.validate&&this.#G()}get name(){return Ze.P2TR}get network(){return this.#e}get address(){return this.#S||(this.#h=this.#D(),this.#S=!0),this.#h}get pubkey(){return this.#b||(this.#d=this.#z(),this.#b=!0),this.#d}get internalPubkey(){return this.#k||(this.#p=this.#M(),this.#k=!0),this.#p}get hash(){return this.#A||(this.#y=this.#F(),this.#A=!0),this.#y}get signature(){return this.#I||(this.#g=this.#K(),this.#I=!0),this.#g}get output(){return this.#_||(this.#m=this.#j(),this.#_=!0),this.#m}get redeem(){return this.#T||(this.#w=this.#V(),this.#T=!0),this.#w}get redeemVersion(){return this.#x||(this.#v=this.#W(),this.#x=!0),this.#v??il}get witness(){return this.#B||(this.#E=this.#q(),this.#B=!0),this.#E}static fromInternalPubkey(e,r,n){return new ya({internalPubkey:e,scriptTree:r,network:n})}static fromAddress(e,r){return new ya({address:e,network:r})}static fromOutput(e,r){return new ya({output:e,network:r})}static fromSignature(e,r,n){return new ya({signature:e,internalPubkey:r,network:n})}toPayment(){return{name:this.name,network:this.network,address:this.address,pubkey:this.pubkey,internalPubkey:this.internalPubkey,hash:this.hash,scriptTree:this.#i,signature:this.signature,output:this.output,redeem:this.redeem,redeemVersion:this.redeemVersion,witness:this.witness}}#N(){if(!this.#O){if(this.#t){const e=Kl(this.#t);e&&(this.#P={version:e.version,prefix:e.prefix,data:e.data})}this.#O=!0}return this.#P}#C(){if(!this.#L){if(this.#l&&this.#l.length>0){const e=this.#l[this.#l.length-1];this.#l.length>=2&&e&&e[0]===hU?this.#U=this.#l.slice(0,-1):this.#U=this.#l.slice()}this.#L=!0}return this.#U}#H(){return this.#$||(this.#i?this.#R=sl(this.#i):this.#n&&(this.#R={hash:this.#n}),this.#$=!0),this.#R}#D(){if(this.#t)return this.#t;const e=this.pubkey;if(!e)return;const r=Rt.bech32m.toWords(e);return r.unshift(Cv),Rt.bech32m.encode(this.#e.bech32,r)}#z(){if(this.#o)return this.#o;if(this.#u)return this.#u.subarray(2);if(this.#t)return this.#N()?.data;const e=this.internalPubkey;if(e){const r=ga(e,this.hash);if(r)return r.x}}#M(){if(this.#r)return this.#r;const e=this.#C();if(e&&e.length>1){const r=e[e.length-1];if(r)return r.subarray(1,33)}}#F(){const e=this.#H();if(e)return e.hash;const r=this.#C();if(r&&r.length>1){const n=r[r.length-1],i=n[0]&gc,o=r[r.length-2],s=Hn({output:o,version:i});return ol(n,s)}}#K(){if(this.#a)return this.#a;const e=this.#C();if(e&&e.length===1)return e[0]}#j(){if(this.#u)return this.#u;const e=this.pubkey;if(e)return Qt([$v.OP_1,e])}#V(){if(this.#c)return this.#c;const e=this.#C();if(!e||e.length<2)return;const r=e[e.length-1];return{output:e[e.length-2],witness:e.slice(0,-2),redeemVersion:r[0]&gc}}#W(){return this.#f!==void 0?this.#f:this.#c&&this.#c.redeemVersion!==void 0&&this.#c.redeemVersion!==null?this.#c.redeemVersion:il}#q(){if(this.#l)return this.#l;const e=this.#H();if(e&&this.#c?.output&&this.#r){const r=Hn({output:this.#c.output,version:this.redeemVersion}),n=Fa(e,r);if(!n)return;const i=ga(this.#r,e.hash);if(!i)return;const o=this.redeemVersion??192,s=jt([new Uint8Array([o|i.parity]),this.#r,...n]);return[this.#c.output,s]}if(this.#a)return[this.#a]}#G(){let e=new Uint8Array(0);if(this.#t){const i=this.#N();if(!i)throw new TypeError("Invalid address");if(this.#e&&this.#e.bech32!==i.prefix)throw new TypeError("Invalid prefix or Network mismatch");if(i.version!==Cv)throw new TypeError("Invalid address version");if(i.data.length!==32)throw new TypeError("Invalid address data");e=i.data}if(this.#o){if(e.length>0&&!_e(e,this.#o))throw new TypeError("Pubkey mismatch");e=this.#o}if(this.#u){if(this.#u.length!==34||this.#u[0]!==$v.OP_1||this.#u[1]!==32)throw new TypeError("Output is invalid");if(e.length>0&&!_e(e,this.#u.subarray(2)))throw new TypeError("Pubkey mismatch");e=this.#u.subarray(2)}if(this.#r){const i=ga(this.#r,this.hash);if(!i)throw new TypeError("Invalid internal pubkey");if(e.length>0&&!_e(e,i.x))throw new TypeError("Pubkey mismatch");e=i.x}const r=this.#H();if(this.#n&&r&&!_e(this.#n,r.hash))throw new TypeError("Hash mismatch");if(this.#c?.output&&r){const i=Hn({output:this.#c.output,version:this.redeemVersion});if(!Fa(r,i))throw new TypeError("Redeem script not in tree")}const n=this.#C();if(this.#c&&this.redeem){if(this.#c.redeemVersion&&this.#c.redeemVersion!==this.redeem.redeemVersion)throw new TypeError("Redeem.redeemVersion and witness mismatch");if(this.#c.output){const i=It(this.#c.output);if(!i||i.length===0)throw new TypeError("Redeem.output is invalid");if(this.redeem.output&&!_e(this.#c.output,this.redeem.output))throw new TypeError("Redeem.output and witness mismatch")}if(this.#c.witness&&this.redeem.witness&&!Ls(this.#c.witness,this.redeem.witness))throw new TypeError("Redeem.witness and witness mismatch")}if(n&&n.length>0)if(n.length===1){const i=n[0];if(this.#a&&!_e(this.#a,i))throw new TypeError("Signature mismatch")}else{const i=n[n.length-1];if(i.length<33)throw new TypeError(`The control-block length is too small. Got ${i.length}, expected min 33.`);if((i.length-33)%32!==0)throw new TypeError(`The control-block length of ${i.length} is incorrect!`);const o=(i.length-33)/32;if(o>128)throw new TypeError(`The script path is too long. Got ${o}, expected max 128.`);const s=i.subarray(1,33);if(this.#r&&!_e(this.#r,s))throw new TypeError("Internal pubkey mismatch");if(!OP(s))throw new TypeError("Invalid internalPubkey for p2tr witness");const a=i[0],l=a&gc,f=n[n.length-2],u=Hn({output:f,version:l}),p=ol(i,u),y=ga(s,p);if(!y)throw new TypeError("Invalid outputKey for p2tr witness");if(e.length>0&&!_e(e,y.x))throw new TypeError("Pubkey mismatch for p2tr witness");if(y.parity!==(a&1))throw new Error("Incorrect parity")}}};function pu(t,e){if(!t.address&&!t.output&&!t.pubkey&&!t.internalPubkey&&!(t.witness&&t.witness.length>1))throw new TypeError("Not enough data");const r=new W4({address:t.address,pubkey:t.pubkey,internalPubkey:t.internalPubkey,hash:t.hash,scriptTree:t.scriptTree,signature:t.signature,output:t.output,witness:t.witness,redeem:t.redeem,redeemVersion:t.redeemVersion,network:t.network},e);return Object.assign(r.toPayment(),t)}const Nv=ge,dU=new Uint8Array(0);let q4=class ma{static NAME=Ze.P2WPKH;#e;#s;#t;#o;#r;#n;#i;#a;#u;#l;#c;#f;#h;#d;#p;#y=!1;#g=!1;#m=!1;#w=!1;#v=!1;#E=!1;#S=!1;#b;#k=!1;constructor(e,r){this.#e=e.network??Ur,this.#s={validate:r?.validate??!0,allowIncomplete:r?.allowIncomplete??!1},this.#t=e.address,this.#o=e.hash,this.#r=e.pubkey,this.#n=e.signature,this.#i=e.output,this.#a=e.witness,this.#s.validate&&this.#U()}get name(){return Ze.P2WPKH}get network(){return this.#e}get address(){return this.#y||(this.#u=this.#I(),this.#y=!0),this.#u}get hash(){return this.#g||(this.#l=this.#_(),this.#g=!0),this.#l}get pubkey(){return this.#m||(this.#c=this.#T(),this.#m=!0),this.#c}get signature(){return this.#w||(this.#f=this.#x(),this.#w=!0),this.#f}get output(){return this.#v||(this.#h=this.#B(),this.#v=!0),this.#h}get input(){return this.#E||(this.#d=this.#P(),this.#E=!0),this.#d}get witness(){return this.#S||(this.#p=this.#O(),this.#S=!0),this.#p}static fromPubkey(e,r){return new ma({pubkey:e,network:r})}static fromAddress(e,r){return new ma({address:e,network:r})}static fromHash(e,r){return new ma({hash:e,network:r})}static fromOutput(e,r){return new ma({output:e,network:r})}toPayment(){return{name:this.name,network:this.network,address:this.address,hash:this.hash,pubkey:this.pubkey,signature:this.signature,output:this.output,input:this.input,witness:this.witness}}#A(){if(!this.#k){if(this.#t){const e=Rt.bech32.decode(this.#t),r=e.words.shift(),n=Rt.bech32.fromWords(e.words);this.#b={version:r??0,prefix:e.prefix,data:new Uint8Array(n)}}this.#k=!0}return this.#b}#I(){if(this.#t)return this.#t;const e=this.hash;if(!e)return;const r=Rt.bech32.toWords(e);return r.unshift(0),Rt.bech32.encode(this.#e.bech32,r)}#_(){if(this.#o)return this.#o;if(this.#i)return this.#i.subarray(2,22);if(this.#t)return this.#A()?.data;const e=this.#r??this.pubkey;if(e)return mr(e)}#T(){if(this.#r)return this.#r;if(this.#a&&this.#a.length>=2)return this.#a[1]}#x(){if(this.#n)return this.#n;if(this.#a&&this.#a.length>=1)return this.#a[0]}#B(){if(this.#i)return this.#i;const e=this.hash;if(e)return Qt([Nv.OP_0,e])}#P(){if(this.witness)return dU}#O(){if(this.#a)return this.#a;if(!(!this.#r||!this.#n))return[this.#n,this.#r]}#U(){let e=new Uint8Array(0);if(this.#t){const r=this.#A();if(!r)throw new TypeError("Invalid address");if(this.#e&&this.#e.bech32!==r.prefix)throw new TypeError("Invalid prefix or Network mismatch");if(r.version!==0)throw new TypeError("Invalid address version");if(r.data.length!==20)throw new TypeError("Invalid address data");e=r.data}if(this.#o){if(e.length>0&&!_e(e,this.#o))throw new TypeError("Hash mismatch");e=this.#o}if(this.#i){if(this.#i.length!==22||this.#i[0]!==Nv.OP_0||this.#i[1]!==20)throw new TypeError("Output is invalid");if(e.length>0&&!_e(e,this.#i.subarray(2)))throw new TypeError("Hash mismatch");e=this.#i.subarray(2)}if(this.#r){const r=mr(this.#r);if(e.length>0&&!_e(e,r))throw new TypeError("Hash mismatch");if(e=r,!No(this.#r)||this.#r.length!==33)throw new TypeError("Invalid pubkey for p2wpkh")}if(this.#a){if(this.#a.length!==2)throw new TypeError("Witness is invalid");const r=this.#a[0],n=this.#a[1];if(!Ko(r))throw new TypeError("Witness has invalid signature");if(!No(n)||n.length!==33)throw new TypeError("Witness has invalid pubkey");if(this.#n&&!_e(this.#n,r))throw new TypeError("Signature mismatch");if(this.#r&&!_e(this.#r,n))throw new TypeError("Pubkey mismatch");const i=mr(n);if(e.length>0&&!_e(e,i))throw new TypeError("Hash mismatch")}}};function Zl(t,e){if(!t.address&&!t.hash&&!t.output&&!t.pubkey&&!t.witness)throw new TypeError("Not enough data");const r=new q4({address:t.address,hash:t.hash,pubkey:t.pubkey,signature:t.signature,output:t.output,witness:t.witness,network:t.network},e);return Object.assign(r.toPayment(),t)}const Hv=ge,jh=new Uint8Array(0);function Zu(t){return!!(t instanceof Uint8Array&&t.length===65&&t[0]===4&&No(t))}let G4=class ba{static NAME=Ze.P2WSH;#e;#s;#t;#o;#r;#n;#i;#a;#u;#l;#c;#f;#h;#d=!1;#p=!1;#y=!1;#g=!1;#m=!1;#w=!1;#v;#E=!1;#S;#b=!1;constructor(e,r){let n=e.network;n||(n=e.redeem&&e.redeem.network||Ur),this.#e=n,this.#s={validate:r?.validate??!0,allowIncomplete:r?.allowIncomplete??!1},this.#t=e.address,this.#o=e.hash,this.#r=e.output,this.#n=e.redeem,this.#i=e.witness,this.#s.validate&&this.#O()}get name(){const e=this.redeem;return e!==void 0&&e.name!==void 0?`p2wsh-${e.name}`:Ze.P2WSH}get network(){return this.#e}get address(){return this.#d||(this.#a=this.#I(),this.#d=!0),this.#a}get hash(){return this.#p||(this.#u=this.#_(),this.#p=!0),this.#u}get output(){return this.#y||(this.#l=this.#T(),this.#y=!0),this.#l}get input(){return this.#g||(this.#c=this.#x(),this.#g=!0),this.#c}get redeem(){return this.#m||(this.#f=this.#B(),this.#m=!0),this.#f}get witness(){return this.#w||(this.#h=this.#P(),this.#w=!0),this.#h}static fromRedeem(e,r){return new ba({redeem:e,network:r})}static fromAddress(e,r){return new ba({address:e,network:r})}static fromHash(e,r){return new ba({hash:e,network:r})}static fromOutput(e,r){return new ba({output:e,network:r})}toPayment(){const e=this.witness,r=this.redeem;return{name:this.name,network:this.network,address:this.address,hash:this.hash,output:this.output,input:this.input,redeem:r,witness:e}}#k(){if(!this.#E){if(this.#t){const e=Rt.bech32.decode(this.#t),r=e.words.shift(),n=Rt.bech32.fromWords(e.words);this.#v={version:r??0,prefix:e.prefix,data:new Uint8Array(n)}}this.#E=!0}return this.#v}#A(){return this.#b||(this.#n?.input&&(this.#S=It(this.#n.input)??void 0),this.#b=!0),this.#S}#I(){if(this.#t)return this.#t;const e=this.hash;if(!e)return;const r=Rt.bech32.toWords(e);return r.unshift(0),Rt.bech32.encode(this.#e.bech32,r)}#_(){if(this.#o)return this.#o;if(this.#r)return this.#r.subarray(2);if(this.#t)return this.#k()?.data;const e=this.redeem;if(e&&e.output)return lr(e.output)}#T(){if(this.#r)return this.#r;const e=this.hash;if(e)return Qt([Hv.OP_0,e])}#x(){if(this.witness)return jh}#B(){if(this.#n)return this.#n;if(this.#i&&this.#i.length>0)return{output:this.#i[this.#i.length-1],input:jh,witness:this.#i.slice(0,-1)}}#P(){if(this.#i)return this.#i;const e=this.#n;if(e){if(e.input&&e.input.length>0&&e.output&&e.output.length>0){const r=this.#A();if(r){const n=ZS(r);return this.#f=Object.assign({witness:n},e,{input:jh}),this.#m=!0,[].concat(n,e.output)}}return!e.output||!e.witness?void 0:[].concat(e.witness,e.output)}}#O(){let e=new Uint8Array(0);if(this.#t){const r=this.#k();if(!r)throw new TypeError("Invalid address");if(r.prefix!==this.#e.bech32)throw new TypeError("Invalid prefix or Network mismatch");if(r.version!==0)throw new TypeError("Invalid address version");if(r.data.length!==32)throw new TypeError("Invalid address data");e=r.data}if(this.#o){if(e.length>0&&!_e(e,this.#o))throw new TypeError("Hash mismatch");e=this.#o}if(this.#r){if(this.#r.length!==34||this.#r[0]!==Hv.OP_0||this.#r[1]!==32)throw new TypeError("Output is invalid");const r=this.#r.subarray(2);if(e.length>0&&!_e(e,r))throw new TypeError("Hash mismatch");e=r}if(this.#n){if(this.#n.network&&this.#n.network!==this.#e)throw new TypeError("Network mismatch");if(this.#n.input&&this.#n.input.length>0&&this.#n.witness&&this.#n.witness.length>0)throw new TypeError("Ambiguous witness source");if(this.#n.output){const n=It(this.#n.output);if(!n||n.length<1)throw new TypeError("Redeem.output is invalid");if(this.#n.output.byteLength>3600)throw new TypeError("Redeem.output unspendable if larger than 3600 bytes");if(o0(n)>201)throw new TypeError("Redeem.output unspendable with more than 201 non-push ops");const i=lr(this.#n.output);if(e.length>0&&!_e(e,i))throw new TypeError("Hash mismatch");e=i}const r=this.#A();if(this.#n.input&&r&&!Wl(r))throw new TypeError("Non push-only scriptSig");if(this.#i&&this.#n.witness&&!Ls(this.#i,this.#n.witness))throw new TypeError("Witness and redeem.witness mismatch");if(this.#n.input&&r?.some(Zu)||this.#n.output&&(It(this.#n.output)||[]).some(Zu))throw new TypeError("redeem.input or redeem.output contains uncompressed pubkey")}if(this.#i&&this.#i.length>0){const r=this.#i[this.#i.length-1];if(this.#n&&this.#n.output&&!_e(this.#n.output,r))throw new TypeError("Witness and redeem.output mismatch");if(this.#i.some(Zu)||(It(r)||[]).some(Zu))throw new TypeError("Witness contains uncompressed pubkey")}}};function gu(t,e){if(!t.address&&!t.hash&&!t.output&&!t.redeem&&!t.witness)throw new TypeError("Not enough data");return new G4({address:t.address,hash:t.hash,output:t.output,redeem:t.redeem,witness:t.witness,network:t.network},e).toPayment()}const Dv=ge;let X4=class wc{static NAME=Ze.P2PK;#e;#s;#t;#o;#r;#n;#i;#a;#u;#l;#c;#f=!1;#h=!1;#d=!1;#p=!1;#y=!1;constructor(e,r){this.#e=e.network??Ur,this.#s={validate:r?.validate??!0,allowIncomplete:r?.allowIncomplete??!1},this.#t=e.pubkey,this.#o=e.signature,this.#r=e.output,this.#n=e.input,this.#s.validate&&this.#S()}get name(){return Ze.P2PK}get network(){return this.#e}get pubkey(){return this.#f||(this.#i=this.#g(),this.#f=!0),this.#i}get signature(){return this.#h||(this.#a=this.#m(),this.#h=!0),this.#a}get output(){return this.#d||(this.#u=this.#w(),this.#d=!0),this.#u}get input(){return this.#p||(this.#l=this.#v(),this.#p=!0),this.#l}get witness(){return this.#y||(this.#c=this.#E(),this.#y=!0),this.#c}static fromPubkey(e,r){return new wc({pubkey:e,network:r})}static fromOutput(e,r){return new wc({output:e,network:r})}static fromSignature(e,r,n){return new wc({signature:e,pubkey:r,network:n})}toPayment(){return{name:this.name,network:this.network,pubkey:this.pubkey,signature:this.signature,output:this.output,input:this.input,witness:this.witness}}#g(){if(this.#t)return this.#t;if(this.#r)return this.#r.subarray(1,-1)}#m(){if(this.#o)return this.#o;if(this.#n){const e=It(this.#n);if(e&&e.length>0)return e[0]}}#w(){if(this.#r)return this.#r;const e=this.#t;if(e)return Qt([e,Dv.OP_CHECKSIG])}#v(){if(this.#n)return this.#n;const e=this.#o;if(e)return Qt([e])}#E(){if(this.input)return[]}#S(){if(this.#r){if(this.#r[this.#r.length-1]!==Dv.OP_CHECKSIG)throw new TypeError("Output is invalid");const e=this.pubkey;if(!No(e))throw new TypeError("Output pubkey is invalid");if(this.#t&&e&&!_e(this.#t,e))throw new TypeError("Pubkey mismatch")}if(this.#o){const e=this.input;if(this.#n&&e&&!_e(this.#n,e))throw new TypeError("Signature mismatch")}if(this.#n){const e=It(this.#n);if(!e||e.length!==1)throw new TypeError("Input is invalid");const r=this.signature;if(!r||!Ko(r))throw new TypeError("Input has invalid signature")}}};function y0(t,e){if(!t.input&&!t.output&&!t.pubkey&&!t.signature)throw new TypeError("Not enough data");const r=new X4({pubkey:t.pubkey,signature:t.signature,output:t.output,input:t.input,network:t.network},e);return Object.assign(r.toPayment(),t)}const us=ge,Qu=us.OP_RESERVED;let Y4=class vc{static NAME=Ze.P2MS;#e;#s;#t;#o;#r;#n;#i;#a;#u;#l;#c;#f;#h;#d;#p;#y=!1;#g=!1;#m=!1;#w=!1;#v=!1;#E=!1;#S=!1;#b;#k=!1;constructor(e,r){this.#e=e.network??Ur,this.#s={validate:r?.validate??!0,allowIncomplete:r?.allowIncomplete??!1},this.#t=e.m,this.#o=e.n,this.#r=e.pubkeys,this.#n=e.signatures,this.#i=e.output,this.#a=e.input,this.#s.validate&&this.#L()}get name(){const e=this.m,r=this.n;return e!==void 0&&r!==void 0?`p2ms(${e} of ${r})`:Ze.P2MS}get network(){return this.#e}get m(){return this.#y||(this.#u=this.#I(),this.#y=!0),this.#u}get n(){return this.#g||(this.#l=this.#_(),this.#g=!0),this.#l}get pubkeys(){return this.#m||(this.#c=this.#T(),this.#m=!0),this.#c}get signatures(){return this.#w||(this.#f=this.#x(),this.#w=!0),this.#f}get output(){return this.#v||(this.#h=this.#B(),this.#v=!0),this.#h}get input(){return this.#E||(this.#d=this.#P(),this.#E=!0),this.#d}get witness(){return this.#S||(this.#p=this.#O(),this.#S=!0),this.#p}static fromPubkeys(e,r,n){return new vc({m:e,pubkeys:r,network:n})}static fromOutput(e,r){return new vc({output:e,network:r})}static fromSignatures(e,r,n,i){return new vc({signatures:e,m:r,pubkeys:n,network:i})}toPayment(){return{name:this.name,network:this.network,m:this.m,n:this.n,pubkeys:this.pubkeys,signatures:this.signatures,output:this.output,input:this.input,witness:this.witness}}#A(e){this.#k||(this.#k=!0,this.#b=It(e)??[],this.#u=this.#b[0]-Qu,this.#l=this.#b[this.#b.length-2]-Qu,this.#c=this.#b.slice(1,-2),this.#y=!0,this.#g=!0,this.#m=!0)}#I(){if(this.#t!==void 0)return this.#t;const e=this.#i??this.output;if(e)return this.#A(e),this.#u}#_(){if(this.#o!==void 0)return this.#o;if(this.#r)return this.#r.length;if(this.#i)return this.#A(this.#i),this.#l}#T(){if(this.#r)return this.#r;if(this.#i)return this.#A(this.#i),this.#c}#x(){if(this.#n)return this.#n;if(this.#a)return It(this.#a)?.slice(1)}#B(){if(this.#i)return this.#i;const e=this.#t,r=this.n,n=this.#r;if(!(e===void 0||r===void 0||!n))return Qt([].concat(Qu+e,n,Qu+r,us.OP_CHECKMULTISIG))}#P(){if(this.#a)return this.#a;if(this.#n)return Qt([us.OP_0].concat(this.#n))}#O(){if(this.input)return[]}#U(e){return Ko(e)||this.#s.allowIncomplete&&e===us.OP_0}#L(){if(this.#i){this.#A(this.#i);const e=this.#b;if(!e)throw new TypeError("Output is invalid");if(typeof e[0]!="number")throw new TypeError("Output is invalid");if(typeof e[e.length-2]!="number")throw new TypeError("Output is invalid");if(e[e.length-1]!==us.OP_CHECKMULTISIG)throw new TypeError("Output is invalid");const r=this.#u,n=this.#l,i=this.#c;if(r===void 0||n===void 0||!i)throw new TypeError("Output is invalid");if(r<=0||n>16||r>n||n!==e.length-3)throw new TypeError("Output is invalid");if(!i.every(o=>No(o)))throw new TypeError("Output is invalid");if(this.#t!==void 0&&this.#t!==r)throw new TypeError("m mismatch");if(this.#o!==void 0&&this.#o!==n)throw new TypeError("n mismatch");if(this.#r&&!Ls(this.#r,i))throw new TypeError("Pubkeys mismatch")}if(this.#r){if(this.#o!==void 0&&this.#o!==this.#r.length)throw new TypeError("Pubkey count mismatch");if(this.#l=this.#r.length,this.#g=!0,this.#u!==void 0&&this.#l<this.#u)throw new TypeError("Pubkey count cannot be less than m")}if(this.#n){if(this.#u!==void 0&&this.#n.length<this.#u)throw new TypeError("Not enough signatures provided");if(this.#u!==void 0&&this.#n.length>this.#u)throw new TypeError("Too many signatures provided")}if(this.#a){if(this.#a[0]!==us.OP_0)throw new TypeError("Input is invalid");const e=this.signatures;if(!e||e.length===0||!e.every(r=>this.#U(r)))throw new TypeError("Input has invalid signature(s)");if(this.#n&&!Ls(this.#n,e))throw new TypeError("Signature mismatch");if(this.#t!==void 0&&this.#n&&this.#t!==this.#n.length)throw new TypeError("Signature count mismatch")}}};function yu(t,e){if(!t.input&&!t.output&&!(t.pubkeys&&t.m!==void 0)&&!t.signatures)throw new TypeError("Not enough data");const r=new Y4({m:t.m,n:t.n,pubkeys:t.pubkeys,signatures:t.signatures,output:t.output,input:t.input,network:t.network},e);return Object.assign(r.toPayment(),t)}function Yr(t){const e=t.length;return on(e)+e}function pU(t){const e=t.length;return on(e)+t.reduce((r,n)=>r+Yr(n),0)}const Ri=new Uint8Array(0),zv=[],Ju=Ee("0000000000000000000000000000000000000000000000000000000000000000"),Mv=yc(Ee("0000000000000000000000000000000000000000000000000000000000000001")),gU=0xffffffffffffffffn;let gt=class St{static DEFAULT_SEQUENCE=4294967295;static SIGHASH_DEFAULT=0;static SIGHASH_ALL=1;static SIGHASH_NONE=2;static SIGHASH_SINGLE=3;static SIGHASH_ANYONECANPAY=128;static SIGHASH_OUTPUT_MASK=3;static SIGHASH_INPUT_MASK=128;static ADVANCED_TRANSACTION_MARKER=0;static ADVANCED_TRANSACTION_FLAG=1;static TRUC_VERSION=3;static TRUC_MAX_VSIZE=1e4;static TRUC_CHILD_MAX_VSIZE=1e3;version=1;locktime=0;ins=[];outs=[];static fromBuffer(e,r){const n=new WB(e),i=new St;i.version=n.readInt32LE();const o=n.readUInt8(),s=n.readUInt8();let a=!1;o===St.ADVANCED_TRANSACTION_MARKER&&s===St.ADVANCED_TRANSACTION_FLAG?a=!0:n.offset-=2;const l=n.readVarInt();for(let u=0;u<l;++u){const p=n.readBytes(32),y=n.readUInt32LE(),w=n.readVarBytes(),A=n.readUInt32LE();i.ins.push({hash:p,index:y,script:w,sequence:A,witness:zv})}const f=n.readVarInt();for(let u=0;u<f;++u)i.outs.push({value:n.readUInt64LE(),script:n.readVarBytes()});if(a){for(let u=0;u<l;++u)i.ins[u].witness=n.readVector();if(!i.hasWitnesses())throw new Error("Transaction has superfluous witness data")}if(i.locktime=n.readUInt32LE(),r)return i;if(n.offset!==e.length)throw new Error("Transaction has unexpected data");return i}static fromHex(e){return St.fromBuffer(Ee(e),!1)}static isCoinbaseHash(e){if(e.length!==32)throw new TypeError("Expected 32-byte hash");for(let r=0;r<32;++r)if(e[r]!==0)return!1;return!0}isCoinbase(){const e=this.ins[0];return this.ins.length===1&&e!==void 0&&St.isCoinbaseHash(e.hash)}addInput(e,r,n,i){if(e.length!==32)throw new TypeError("Expected 32-byte hash");if(!Number.isInteger(r)||r<0||r>4294967295)throw new TypeError("Expected unsigned 32-bit integer for index");if(n!=null&&(!Number.isInteger(n)||n<0||n>4294967295))throw new TypeError("Expected unsigned 32-bit integer for sequence");return n==null&&(n=St.DEFAULT_SEQUENCE),this.ins.push({hash:e,index:r,script:i||Ri,sequence:n,witness:zv})-1}addOutput(e,r){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array for scriptPubKey");if(typeof r!="bigint"||r<0n||r>0x7fffffffffffffffn)throw new TypeError("Expected bigint satoshi value (0 to 2^63-1)");return this.outs.push({script:e,value:r})-1}hasWitnesses(){return this.ins.some(e=>e.witness.length!==0)}weight(){const e=this.byteLength(!1),r=this.byteLength(!0);return e*3+r}virtualSize(){return Math.ceil(this.weight()/4)}byteLength(e=!0){const r=e&&this.hasWitnesses();return(r?10:8)+on(this.ins.length)+on(this.outs.length)+this.ins.reduce((n,i)=>n+40+Yr(i.script),0)+this.outs.reduce((n,i)=>n+8+Yr(i.script),0)+(r?this.ins.reduce((n,i)=>n+pU(i.witness),0):0)}clone(){const e=new St;return e.version=this.version,e.locktime=this.locktime,e.ins=this.ins.map(r=>({hash:r.hash,index:r.index,script:r.script,sequence:r.sequence,witness:r.witness})),e.outs=this.outs.map(r=>({script:r.script,value:r.value})),e}hashForSignature(e,r,n){if(!Number.isInteger(e)||e<0)throw new TypeError("Expected non-negative integer for inIndex");if(!(r instanceof Uint8Array))throw new TypeError("Expected Uint8Array for prevOutScript");if(!Number.isInteger(n))throw new TypeError("Expected integer for hashType");if(e>=this.ins.length)return Mv;const i=It(r);if(!i)throw new Error("Could not decompile prevOutScript");const o=Qt(i.filter(l=>l!==ge.OP_CODESEPARATOR)),s=this.clone();if((n&31)===St.SIGHASH_NONE)s.outs=[],s.ins.forEach((l,f)=>{f!==e&&(l.sequence=0)});else if((n&31)===St.SIGHASH_SINGLE){if(e>=this.outs.length)return Mv;s.outs.length=e+1;for(let l=0;l<e;l++)s.outs[l]={script:Ri,value:gU};s.ins.forEach((l,f)=>{f!==e&&(l.sequence=0)})}n&St.SIGHASH_ANYONECANPAY?(s.ins=[s.ins[e]],s.ins[0].script=o):(s.ins.forEach(l=>{l.script=Ri}),s.ins[e].script=o);const a=Ft(s.byteLength(!1)+4);return new zt(a,s.byteLength(!1)).writeInt32LE(n),s.#e(a,0,!1),yc(Ni(a))}hashForWitnessV1(e,r,n,i,o,s,a){if(!Number.isInteger(e)||e<0||e>4294967295)throw new TypeError("Expected unsigned 32-bit integer for inIndex");if(!Array.isArray(r)||!r.every(H=>H instanceof Uint8Array))throw new TypeError("Expected array of Uint8Array for prevOutScripts");if(!Array.isArray(n)||!n.every(H=>typeof H=="bigint"))throw new TypeError("Expected array of bigint for values");if(!Number.isInteger(i)||i<0||i>4294967295)throw new TypeError("Expected unsigned 32-bit integer for hashType");if(n.length!==this.ins.length||r.length!==this.ins.length)throw new Error("Must supply prevout script and value for all inputs");const l=i===St.SIGHASH_DEFAULT?St.SIGHASH_ALL:i&St.SIGHASH_OUTPUT_MASK,f=(i&St.SIGHASH_INPUT_MASK)===St.SIGHASH_ANYONECANPAY,u=l===St.SIGHASH_NONE,p=l===St.SIGHASH_SINGLE;let y=Ri,w=Ri,A=Ri,S=Ri,k=Ri;if(!f)if(a)y=a.hashPrevouts,w=a.hashAmounts,A=a.hashScriptPubKeys,S=a.hashSequences;else{let H=new zt(36*this.ins.length);this.ins.forEach(ie=>{H.writeBytes(ie.hash),H.writeUInt32LE(ie.index)}),y=lr(H.finish()),H=new zt(8*this.ins.length),n.forEach(ie=>H.writeUInt64LE(ie)),w=lr(H.finish()),H=new zt(r.map(Yr).reduce((ie,T)=>ie+T)),r.forEach(ie=>H.writeVarBytes(ie)),A=lr(H.finish()),H=new zt(4*this.ins.length),this.ins.forEach(ie=>H.writeUInt32LE(ie.sequence)),S=lr(H.finish())}if(u||p){if(p&&e<this.outs.length){const H=this.outs[e],ie=new zt(8+Yr(H.script));ie.writeUInt64LE(H.value),ie.writeVarBytes(H.script),k=lr(ie.finish())}}else if(a)k=a.hashOutputs;else{if(!this.outs.length)throw new Error("Add outputs to the transaction before signing.");const H=this.outs.map(T=>8+Yr(T.script)).reduce((T,C)=>T+C),ie=new zt(H);this.outs.forEach(T=>{ie.writeUInt64LE(T.value),ie.writeVarBytes(T.script)}),k=lr(ie.finish())}const I=(o?2:0)+(s?1:0),N=174-(f?49:0)-(u?32:0)+(s?32:0)+(o?37:0),B=new zt(N);if(B.writeUInt8(i),B.writeInt32LE(this.version),B.writeUInt32LE(this.locktime),B.writeBytes(y),B.writeBytes(w),B.writeBytes(A),B.writeBytes(S),u||p||B.writeBytes(k),B.writeUInt8(I),f){const H=this.ins[e];B.writeBytes(H.hash),B.writeUInt32LE(H.index),B.writeUInt64LE(n[e]),B.writeVarBytes(r[e]),B.writeUInt32LE(H.sequence)}else B.writeUInt32LE(e);if(s){const H=new zt(Yr(s));H.writeVarBytes(s),B.writeBytes(lr(H.finish()))}p&&B.writeBytes(k),o&&(B.writeBytes(o),B.writeUInt8(0),B.writeUInt32LE(4294967295));const V=new Uint8Array([0]),W=B.finish(),Y=new Uint8Array(1+W.length);return Y.set(V),Y.set(W,1),yc(fu("TapSighash",Y))}getTaprootHashCache(e,r){let n=new zt(36*this.ins.length);for(const p of this.ins)n.writeBytes(p.hash),n.writeUInt32LE(p.index);const i=lr(n.finish());n=new zt(8*r.length);for(const p of r)n.writeUInt64LE(p);const o=lr(n.finish());let s=0;for(const p of e)s+=Yr(p);n=new zt(s);for(const p of e)n.writeVarBytes(p);const a=lr(n.finish());n=new zt(4*this.ins.length);for(const p of this.ins)n.writeUInt32LE(p.sequence);const l=lr(n.finish());let f=0;for(const p of this.outs)f+=8+Yr(p.script);n=new zt(f);for(const p of this.outs)n.writeUInt64LE(p.value),n.writeVarBytes(p.script);const u=this.outs.length?lr(n.finish()):Ju;return{hashPrevouts:i,hashAmounts:o,hashScriptPubKeys:a,hashSequences:l,hashOutputs:u}}hashForWitnessV0(e,r,n,i){if(!Number.isInteger(e)||e<0||e>4294967295)throw new TypeError("Expected unsigned 32-bit integer for inIndex");if(!(r instanceof Uint8Array))throw new TypeError("Expected Uint8Array for prevOutScript");if(typeof n!="bigint")throw new TypeError("Expected bigint for value");if(!Number.isInteger(i)||i<0||i>4294967295)throw new TypeError("Expected unsigned 32-bit integer for hashType");let o,s,a=Ju,l=Ju,f=Ju;if(i&St.SIGHASH_ANYONECANPAY||(o=Ft(36*this.ins.length),s=new zt(o,0),this.ins.forEach(p=>{s.writeBytes(p.hash),s.writeUInt32LE(p.index)}),l=Ni(o)),!(i&St.SIGHASH_ANYONECANPAY)&&(i&31)!==St.SIGHASH_SINGLE&&(i&31)!==St.SIGHASH_NONE&&(o=Ft(4*this.ins.length),s=new zt(o,0),this.ins.forEach(p=>{s.writeUInt32LE(p.sequence)}),f=Ni(o)),(i&31)!==St.SIGHASH_SINGLE&&(i&31)!==St.SIGHASH_NONE){const p=this.outs.reduce((y,w)=>y+8+Yr(w.script),0);o=Ft(p),s=new zt(o,0),this.outs.forEach(y=>{s.writeUInt64LE(y.value),s.writeVarBytes(y.script)}),a=Ni(o)}else if((i&31)===St.SIGHASH_SINGLE&&e<this.outs.length){const p=this.outs[e];o=Ft(8+Yr(p.script)),s=new zt(o,0),s.writeUInt64LE(p.value),s.writeVarBytes(p.script),a=Ni(o)}o=Ft(156+Yr(r)),s=new zt(o,0);const u=this.ins[e];return s.writeInt32LE(this.version),s.writeBytes(l),s.writeBytes(f),s.writeBytes(u.hash),s.writeUInt32LE(u.index),s.writeVarBytes(r),s.writeUInt64LE(n),s.writeUInt32LE(u.sequence),s.writeBytes(a),s.writeUInt32LE(this.locktime),s.writeUInt32LE(i),yc(Ni(o))}getHash(e){return e&&this.isCoinbase()?new Uint8Array(32):Ni(this.#e(void 0,void 0,e))}getId(){return ve(r0(this.getHash(!1)))}toBuffer(e,r){return this.#e(e,r,!0)}toHex(){return ve(this.toBuffer(void 0,void 0))}setInputScript(e,r){if(!Number.isInteger(e)||e<0)throw new TypeError("Expected non-negative integer for index");if(!(r instanceof Uint8Array))throw new TypeError("Expected Uint8Array for scriptSig");this.ins[e].script=r}setWitness(e,r){if(!Number.isInteger(e)||e<0)throw new TypeError("Expected non-negative integer for index");if(!Array.isArray(r)||!r.every(n=>n instanceof Uint8Array))throw new TypeError("Expected array of Uint8Array for witness");this.ins[e].witness=r}#e(e,r,n=!1){e||(e=Ft(this.byteLength(n)));const i=new zt(e,r||0);i.writeInt32LE(this.version);const o=n&&this.hasWitnesses();return o&&(i.writeUInt8(St.ADVANCED_TRANSACTION_MARKER),i.writeUInt8(St.ADVANCED_TRANSACTION_FLAG)),i.writeVarInt(this.ins.length),this.ins.forEach(s=>{i.writeBytes(s.hash),i.writeUInt32LE(s.index),i.writeVarBytes(s.script),i.writeUInt32LE(s.sequence)}),i.writeVarInt(this.outs.length),this.outs.forEach(s=>{i.writeUInt64LE(s.value),i.writeVarBytes(s.script)}),o&&this.ins.forEach(s=>{i.writeVector(s.witness)}),i.writeUInt32LE(this.locktime),r!==void 0?e.subarray(r,i.offset):e}};function jo(t){return e=>{try{return t({output:e}),!0}catch{return!1}}}const Z4=jo(yu),Q4=jo(y0),J4=jo(hu),$s=jo(Zl),al=jo(gu),m0=jo(du),Ql=jo(pu),yU=t=>t.length===4&&t[0]===81&&t[1]===2&&t[2]===78&&t[3]===115;function ka(t){const e=[];function r(s){e.push(s)}function n(s){const a=on(s),l=Ft(a);ro(s,l,0),e.push(l)}function i(s){n(s.length),r(s)}function o(s){n(s.length),s.forEach(i)}return o(t),jt(e)}function b0(t,e){const r=It(e);if(r===null)throw new Error("Unknown script error");const n=mr(t),i=nt(t),o=Qc(t),s=o?.hybrid?mr(o.hybrid):void 0,a=o?.uncompressed?mr(o.uncompressed):void 0;return r.findIndex(l=>typeof l=="number"?!1:!!(Gu(l,t)||Gu(l,i)||_e(l,n)||o&&(Gu(l,o.uncompressed)||Gu(l,o.hybrid)||s&&_e(l,s)||a&&_e(l,a))))}function ul(t,e){return b0(t,e)!==-1}function mU(t,e){return bU(t).some(r=>e5(r,Bo.decode,e))}function e5(t,e,r){const{hashType:n}=e(t),i=[];switch(n&gt.SIGHASH_ANYONECANPAY&&i.push("addInput"),n&31){case gt.SIGHASH_ALL:break;case gt.SIGHASH_SINGLE:case gt.SIGHASH_NONE:i.push("addOutput"),i.push("setInputSequence");break}return i.indexOf(r)===-1}function bU(t){const{partialSig:e}=t;let r;if(!e||e.length===0){if(!t.finalScriptSig&&!t.finalScriptWitness)return[];r=wU(t)}else r=e;return r.map(n=>new Uint8Array(n.signature))}function wU(t){const e=t.finalScriptSig?It(new Uint8Array(t.finalScriptSig))||[]:[],r=t.finalScriptWitness?It(new Uint8Array(t.finalScriptWitness))||[]:[];return e.concat(r).filter(n=>n instanceof Uint8Array&&Ko(n)).map(n=>({signature:n}))}function Fv(t,e,r){const n=LU(e,t,r);try{const i=OU(e,n).concat(new Uint8Array(n.script)).concat(new Uint8Array(n.controlBlock));return{finalScriptWitness:ka(i)}}catch(i){throw new Error(`Can not finalize taproot input #${t}: ${i}`)}}function hs(t,e){const r=e?new Uint8Array([e]):new Uint8Array(0);return jt([t,r])}function en(t){return t&&!!(t.tapInternalKey||t.tapMerkleRoot||t.tapLeafScript&&t.tapLeafScript.length||t.tapBip32Derivation&&t.tapBip32Derivation.length||t.witnessUtxo&&Ql(new Uint8Array(t.witnessUtxo.script)))}function Vh(t,e){return t&&!!(t.tapInternalKey||t.tapTree||t.tapBip32Derivation&&t.tapBip32Derivation.length||e)}function Kv(t,e,r){TU(t,e,r),PU(t,e,r)}function jv(t,e,r){BU(t,e,r),vU(t,e)}function vU(t,e){if(!e.tapTree&&!e.tapInternalKey)return;const r=e.tapInternalKey||t.tapInternalKey,n=e.tapTree||t.tapTree;if(r){const i=t.script,o=EU(r,n);if(i&&!_e(i,o))throw new Error("Error adding output. Script or address missmatch.")}}function EU(t,e){const r=e&&SU(e.leaves),{output:n}=pu({internalPubkey:new Uint8Array(t),scriptTree:r});if(!n)throw new Error("Failed to generate taproot script pubkey");return n}function SU(t=[]){const e=t[0];return t.length===1&&e&&e.depth===0?{output:new Uint8Array(e.script),version:e.leafVersion}:xU(t)}function AU(t,e){return IU(t).some(r=>e5(r,kU,e))}function kU(t){return{signature:t.subarray(0,64),hashType:t.subarray(64)[0]||gt.SIGHASH_DEFAULT}}function IU(t){const e=[];if(t.tapKeySig&&e.push(new Uint8Array(t.tapKeySig)),t.tapScriptSig&&e.push(...t.tapScriptSig.map(r=>new Uint8Array(r.signature))),!e.length){const r=_U(t.finalScriptWitness?new Uint8Array(t.finalScriptWitness):void 0);r&&e.push(r)}return e}function _U(t){if(!t)return;const e=t.subarray(2);if(e.length===64||e.length===65)return e}function xU(t){let e;for(const r of t)if(e=Xd(r,e),!e)throw new Error("No room left to insert tapleaf in tree");return e}function Xd(t,e,r=0){if(r>j4)throw new Error("Max taptree depth exceeded.");if(t.depth===r)return e?void 0:{output:new Uint8Array(t.script),version:t.leafVersion};if(qS(e))return;const n=Xd(t,e&&e[0],r+1);if(n)return[n,e&&e[1]];const i=Xd(t,e&&e[1],r+1);if(i)return[e&&e[0],i]}function TU(t,e,r){const n=en(t)&&ws(e),i=ws(t)&&en(e),o=t===e&&en(e)&&ws(e);if(n||i||o)throw new Error(`Invalid arguments for Psbt.${r}. Cannot use both taproot and non-taproot fields.`)}function BU(t,e,r){const n=Vh(t)&&ws(e),i=ws(t)&&Vh(e),o=t===e&&Vh(e)&&ws(e);if(n||i||o)throw new Error(`Invalid arguments for Psbt.${r}. Cannot use both taproot and non-taproot fields.`)}function PU(t,e,r){if(e.tapMerkleRoot){const n=new Uint8Array(e.tapMerkleRoot),i=(e.tapLeafScript||[]).every(s=>Wh(s,n)),o=(t.tapLeafScript||[]).every(s=>Wh(s,n));if(!i||!o)throw new Error(`Invalid arguments for Psbt.${r}. Tapleaf not part of taptree.`)}else if(t.tapMerkleRoot){const n=new Uint8Array(t.tapMerkleRoot);if(!(e.tapLeafScript||[]).every(i=>Wh(i,n)))throw new Error(`Invalid arguments for Psbt.${r}. Tapleaf not part of taptree.`)}}function Wh(t,e){if(!e)return!0;const r=Hn({output:new Uint8Array(t.script),version:t.leafVersion}),n=ol(new Uint8Array(t.controlBlock),r);return _e(n,e)}function OU(t,e){const r=new Uint8Array(e.script),n=Hn({output:r,version:e.leafVersion});return(t.tapScriptSig||[]).filter(i=>_e(new Uint8Array(i.leafHash),n)).map(i=>UU(r,i)).sort((i,o)=>o.positionInScript-i.positionInScript).map(i=>new Uint8Array(i.signature))}function UU(t,e){return Object.assign({positionInScript:b0(new Uint8Array(e.pubkey),t)},e)}function LU(t,e,r){const{tapScriptSig:n}=t;if(!n||!n.length)throw new Error(`Can not finalize taproot input #${e}. No tapleaf script signature provided.`);const i=(t.tapLeafScript||[]).sort((o,s)=>o.controlBlock.length-s.controlBlock.length).find(o=>RU(o,n,r));if(!i)throw new Error(`Can not finalize taproot input #${e}. Signature for tapleaf script not found.`);return i}function RU(t,e,r){const n=Hn({output:new Uint8Array(t.script),version:t.leafVersion});return(!r||_e(r,n))&&e.find(i=>_e(new Uint8Array(i.leafHash),n))!==void 0}function ws(t){return t&&!!(t.redeemScript||t.witnessScript||t.bip32Derivation&&t.bip32Derivation.length)}const t5={ECDSA:0,Schnorr:1};function $U(t){return t.type==="batchResult"}function CU(t){return t.type==="ready"}const pr={Initializing:0,Idle:1,Busy:2,ShuttingDown:3,Terminated:4},NU='"use strict";var nobleBundle=(()=>{var rt=Object.defineProperty;var _e=Object.getOwnPropertyDescriptor;var Ce=Object.getOwnPropertyNames;var ke=Object.prototype.hasOwnProperty;var Ve=(e,t,n)=>t in e?rt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ct=(e,t)=>{for(var n in t)rt(e,n,{get:t[n],enumerable:!0})},Te=(e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Ce(t))!ke.call(e,r)&&r!==n&&rt(e,r,{get:()=>t[r],enumerable:!(s=_e(t,r))||s.enumerable});return e};var Ge=e=>Te(rt({},"__esModule",{value:!0}),e);var l=(e,t,n)=>Ve(e,typeof t!="symbol"?t+"":t,n);var yn={};Ct(yn,{hmac:()=>lt,secp:()=>Lt,sha256:()=>ht});var Lt={};Ct(Lt,{Point:()=>U,Signature:()=>R,etc:()=>sn,getPublicKey:()=>Pt,getSharedSecret:()=>en,hash:()=>je,hashes:()=>K,keygen:()=>nn,recoverPublicKey:()=>Qe,recoverPublicKeyAsync:()=>tn,schnorr:()=>un,sign:()=>We,signAsync:()=>ze,utils:()=>rn,verify:()=>qe,verifyAsync:()=>Je});var Nt={p:0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2fn,n:0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141n,h:1n,a:0n,b:7n,Gx:0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798n,Gy:0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8n},{p:D,n:v,Gx:Fe,Gy:De,b:Zt}=Nt,w=32,Z=64,et={publicKey:w+1,publicKeyUncompressed:Z+1,signature:Z,seed:w+w/2},Ke=(...e)=>{"captureStackTrace"in Error&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(...e)},b=(e="")=>{let t=new Error(e);throw Ke(t,b),t},Oe=e=>typeof e=="bigint",Ne=e=>typeof e=="string",Ze=e=>e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array",A=(e,t,n="")=>{let s=Ze(e),r=e?.length,o=t!==void 0;if(!s||o&&r!==t){let c=n&&`"${n}" `,i=o?` of length ${t}`:"",u=s?`length=${r}`:`type=${typeof e}`;b(c+"expected Uint8Array"+i+", got "+u)}return e},k=e=>new Uint8Array(e),jt=(e,t)=>e.toString(16).padStart(t,"0"),wt=e=>Array.from(A(e)).map(t=>jt(t,2)).join(""),V={_0:48,_9:57,A:65,F:70,a:97,f:102},kt=e=>{if(e>=V._0&&e<=V._9)return e-V._0;if(e>=V.A&&e<=V.F)return e-(V.A-10);if(e>=V.a&&e<=V.f)return e-(V.a-10)},mt=e=>{let t="hex invalid";if(!Ne(e))return b(t);let n=e.length,s=n/2;if(n%2)return b(t);let r=k(s);for(let o=0,c=0;o<s;o++,c+=2){let i=kt(e.charCodeAt(c)),u=kt(e.charCodeAt(c+1));if(i===void 0||u===void 0)return b(t);r[o]=i*16+u}return r},Rt=()=>globalThis?.crypto,Vt=()=>Rt()?.subtle??b("crypto.subtle must be defined, consider polyfill"),L=(...e)=>{let t=k(e.reduce((s,r)=>s+A(r).length,0)),n=0;return e.forEach(s=>{t.set(s,n),n+=s.length}),t},nt=(e=w)=>Rt().getRandomValues(k(e)),Y=BigInt,j=(e,t,n,s="bad number: out of range")=>Oe(e)&&t<=e&&e<n?e:b(s),a=(e,t=D)=>{let n=e%t;return n>=0n?n:t+n},E=e=>a(e,v),st=(e,t)=>{(e===0n||t<=0n)&&b("no inverse n="+e+" mod="+t);let n=a(e,t),s=t,r=0n,o=1n,c=1n,i=0n;for(;n!==0n;){let u=s/n,d=s%n,f=r-c*u,h=o-i*u;s=n,n=d,r=c,o=i,c=f,i=h}return s===1n?a(r,t):b("no inverse")},it=e=>{let t=K[e];return typeof t!="function"&&b("hashes."+e+" not set"),t},je=e=>it("sha256")(e),xt=e=>e instanceof U?e:b("Point expected"),Xt=e=>a(a(e*e)*e+Zt),Tt=e=>j(e,0n,D),tt=e=>j(e,1n,D),bt=e=>j(e,1n,v),M=e=>(e&1n)===0n,ft=e=>Uint8Array.of(e),Yt=e=>ft(M(e)?2:3),Mt=e=>{let t=Xt(tt(e)),n=1n;for(let s=t,r=(D+1n)/4n;r>0n;r>>=1n)r&1n&&(n=n*s%D),s=s*s%D;return a(n*n)===t?n:b("sqrt invalid")},C=class C{constructor(t,n,s){l(this,"X");l(this,"Y");l(this,"Z");this.X=Tt(t),this.Y=tt(n),this.Z=Tt(s),Object.freeze(this)}static CURVE(){return Nt}static fromAffine(t){let{x:n,y:s}=t;return n===0n&&s===0n?N:new C(n,s,1n)}static fromBytes(t){A(t);let{publicKey:n,publicKeyUncompressed:s}=et,r,o=t.length,c=t[0],i=t.subarray(1),u=P(i,0,w);if(o===n&&(c===2||c===3)){let d=Mt(u),f=M(d);M(Y(c))!==f&&(d=a(-d)),r=new C(u,d,1n)}return o===s&&c===4&&(r=new C(u,P(i,w,Z),1n)),r?r.assertValidity():b("bad point: not on curve")}static fromHex(t){return C.fromBytes(mt(t))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}equals(t){let{X:n,Y:s,Z:r}=this,{X:o,Y:c,Z:i}=xt(t),u=a(n*i),d=a(o*r),f=a(s*i),h=a(c*r);return u===d&&f===h}is0(){return this.equals(N)}negate(){return new C(this.X,a(-this.Y),this.Z)}double(){return this.add(this)}add(t){let{X:n,Y:s,Z:r}=this,{X:o,Y:c,Z:i}=xt(t),u=0n,d=Zt,f=0n,h=0n,x=0n,y=a(d*3n),p=a(n*o),g=a(s*c),H=a(r*i),I=a(n+s),m=a(o+c);I=a(I*m),m=a(p+g),I=a(I-m),m=a(n+r);let S=a(o+i);return m=a(m*S),S=a(p+H),m=a(m-S),S=a(s+r),f=a(c+i),S=a(S*f),f=a(g+H),S=a(S-f),x=a(u*m),f=a(y*H),x=a(f+x),f=a(g-x),x=a(g+x),h=a(f*x),g=a(p+p),g=a(g+p),H=a(u*H),m=a(y*m),g=a(g+H),H=a(p-H),H=a(u*H),m=a(m+H),p=a(g*m),h=a(h+p),p=a(S*m),f=a(I*f),f=a(f-p),p=a(I*g),x=a(S*x),x=a(x+p),new C(f,h,x)}subtract(t){return this.add(xt(t).negate())}multiply(t,n=!0){if(!n&&t===0n)return N;if(bt(t),t===1n)return this;if(this.equals(T))return ln(t).p;let s=N,r=T;for(let o=this;t>0n;o=o.double(),t>>=1n)t&1n?s=s.add(o):n&&(r=r.add(o));return s}multiplyUnsafe(t){return this.multiply(t,!1)}toAffine(){let{X:t,Y:n,Z:s}=this;if(this.equals(N))return{x:0n,y:0n};if(s===1n)return{x:t,y:n};let r=st(s,D);return a(s*r)!==1n&&b("inverse invalid"),{x:a(t*r),y:a(n*r)}}assertValidity(){let{x:t,y:n}=this.toAffine();return tt(t),tt(n),a(n*n)===Xt(t)?this:b("bad point: not on curve")}toBytes(t=!0){let{x:n,y:s}=this.assertValidity().toAffine(),r=B(n);return t?L(Yt(s),r):L(ft(4),r,B(s))}toHex(t){return wt(this.toBytes(t))}};l(C,"BASE"),l(C,"ZERO");var U=C,T=new U(Fe,De,1n),N=new U(0n,1n,0n);U.BASE=T;U.ZERO=N;var At=(e,t,n)=>T.multiply(t,!1).add(e.multiply(n,!1)).assertValidity(),G=e=>Y("0x"+(wt(e)||"0")),P=(e,t,n)=>G(e.subarray(t,n)),Re=2n**256n,B=e=>mt(jt(j(e,0n,Re),Z)),W=e=>{let t=G(A(e,w,"secret key"));return j(t,1n,v,"invalid secret key: outside of range")},Ht=e=>e>v>>1n,Pt=(e,t=!0)=>T.multiply(W(e)).toBytes(t),Xe=e=>{try{return!!W(e)}catch{return!1}},Ye=(e,t)=>{let{publicKey:n,publicKeyUncompressed:s}=et;try{let r=e.length;return t===!0&&r!==n||t===!1&&r!==s?!1:!!U.fromBytes(e)}catch{return!1}},$t=e=>{[0,1,2,3].includes(e)||b("recovery id must be valid and present")},Me=e=>{e!=null&&!Gt.includes(e)&&b(`Signature format must be one of: ${Gt.join(", ")}`),e===qt&&b(\'Signature format "der" is not supported: switch to noble-curves\')},Wt=(e,t=$)=>{Me(t);let n=et.signature,s=n+1,r=`Signature format "${t}" expects Uint8Array with length `;t===$&&e.length!==n&&b(r+n),t===ot&&e.length!==s&&b(r+s)},R=class e{constructor(t,n,s){l(this,"r");l(this,"s");l(this,"recovery");this.r=bt(t),this.s=bt(n),s!=null&&(this.recovery=s),Object.freeze(this)}static fromBytes(t,n=$){Wt(t,n);let s;n===ot&&(s=t[0],t=t.subarray(1));let r=P(t,0,w),o=P(t,w,Z);return new e(r,o,s)}addRecoveryBit(t){return new e(this.r,this.s,t)}hasHighS(){return Ht(this.s)}toBytes(t=$){let{r:n,s,recovery:r}=this,o=L(B(n),B(s));return t===ot?($t(r),L(Uint8Array.of(r),o)):o}},zt=e=>{let t=e.length*8-256;t>1024&&b("msg invalid");let n=G(e);return t>0?n>>Y(t):n},St=e=>E(zt(A(e))),$="compact",ot="recovered",qt="der",Gt=[$,ot,qt],Ft={lowS:!0,prehash:!0,format:$,extraEntropy:!1},Dt="SHA-256",K={hmacSha256Async:async(e,t)=>{let n=Vt(),s="HMAC",r=await n.importKey("raw",e,{name:s,hash:{name:Dt}},!1,["sign"]);return k(await n.sign(s,r,t))},hmacSha256:void 0,sha256Async:async e=>k(await Vt().digest(Dt,e)),sha256:void 0},z=(e,t,n)=>(A(e,void 0,"message"),t.prehash?n?K.sha256Async(e):it("sha256")(e):e),Jt=k(0),Qt=ft(0),te=ft(1),ee=1e3,ne="drbg: tried max amount of iterations",Pe=(e,t)=>{let n=k(w),s=k(w),r=0,o=()=>{n.fill(1),s.fill(0)},c=(...f)=>it("hmacSha256")(s,L(n,...f)),i=(f=Jt)=>{s=c(Qt,f),n=c(),f.length!==0&&(s=c(te,f),n=c())},u=()=>(r++>=ee&&b(ne),n=c(),n);o(),i(e);let d;for(;!(d=t(u()));)i();return o(),d},$e=async(e,t)=>{let n=k(w),s=k(w),r=0,o=()=>{n.fill(1),s.fill(0)},c=(...f)=>K.hmacSha256Async(s,L(n,...f)),i=async(f=Jt)=>{s=await c(Qt,f),n=await c(),f.length!==0&&(s=await c(te,f),n=await c())},u=async()=>(r++>=ee&&b(ne),n=await c(),n);o(),await i(e);let d;for(;!(d=t(await u()));)await i();return o(),d},se=(e,t,n,s)=>{let{lowS:r,extraEntropy:o}=n,c=B,i=St(e),u=c(i),d=W(t),f=[c(d),u];if(o!=null&&o!==!1){let p=o===!0?nt(w):o;f.push(A(p,void 0,"extraEntropy"))}let h=L(...f),x=i;return s(h,p=>{let g=zt(p);if(!(1n<=g&&g<v))return;let H=st(g,v),I=T.multiply(g).toAffine(),m=E(I.x);if(m===0n)return;let S=E(H*E(x+m*d));if(S===0n)return;let vt=(I.x===m?0:2)|Number(I.y&1n),_t=S;return r&&Ht(S)&&(_t=E(-S),vt^=1),new R(m,_t,vt).toBytes(n.format)})},re=(e,t,n,s={})=>{let{lowS:r,format:o}=s;e instanceof R&&b("Signature must be in Uint8Array, use .toBytes()"),Wt(e,o),A(n,void 0,"publicKey");try{let{r:c,s:i}=R.fromBytes(e,o),u=St(t),d=U.fromBytes(n);if(r&&Ht(i))return!1;let f=st(i,v),h=E(u*f),x=E(c*f),y=At(d,h,x).toAffine();return E(y.x)===c}catch{return!1}},q=e=>{let t={};return Object.keys(Ft).forEach(n=>{t[n]=e[n]??Ft[n]}),t},We=(e,t,n={})=>(n=q(n),e=z(e,n,!1),se(e,t,n,Pe)),ze=async(e,t,n={})=>(n=q(n),e=await z(e,n,!0),se(e,t,n,$e)),qe=(e,t,n,s={})=>(s=q(s),t=z(t,s,!1),re(e,t,n,s)),Je=async(e,t,n,s={})=>(s=q(s),t=await z(t,s,!0),re(e,t,n,s)),oe=(e,t)=>{let n=R.fromBytes(e,"recovered"),{r:s,s:r,recovery:o}=n;$t(o);let c=St(A(t,w)),i=o===2||o===3?s+v:s;tt(i);let u=Yt(Y(o)),d=L(u,B(i)),f=U.fromBytes(d),h=st(i,v),x=E(-c*h),y=E(r*h);return At(f,x,y).toBytes()},Qe=(e,t,n={})=>(t=z(t,q(n),!1),oe(e,t)),tn=async(e,t,n={})=>(t=await z(t,q(n),!0),oe(e,t)),en=(e,t,n=!0)=>U.fromBytes(t).multiply(W(e)).toBytes(n),ce=(e=nt(et.seed))=>{A(e),(e.length<et.seed||e.length>1024)&&b("expected 40-1024b");let t=a(G(e),v-1n);return B(t+1n)},ie=e=>t=>{let n=ce(t);return{secretKey:n,publicKey:e(n)}},nn=ie(Pt),sn={hexToBytes:mt,bytesToHex:wt,concatBytes:L,bytesToNumberBE:G,numberToBytesBE:B,mod:a,invert:st,randomBytes:nt,secretKeyToScalar:W,abytes:A},rn={isValidSecretKey:Xe,isValidPublicKey:Ye,randomSecretKey:ce},fe=e=>Uint8Array.from("BIP0340/"+e,t=>t.charCodeAt(0)),ae="aux",ue="nonce",he="challenge",yt=(e,...t)=>{let n=it("sha256"),s=n(fe(e));return n(L(s,s,...t))},pt=async(e,...t)=>{let n=K.sha256Async,s=await n(fe(e));return await n(L(s,s,...t))},Bt=e=>{let t=W(e),n=T.multiply(t),{x:s,y:r}=n.assertValidity().toAffine(),o=M(r)?t:E(-t),c=B(s);return{d:o,px:c}},Et=e=>E(G(e)),de=(...e)=>Et(yt(he,...e)),le=async(...e)=>Et(await pt(he,...e)),xe=e=>Bt(e).px,on=ie(xe),be=(e,t,n)=>{let{px:s,d:r}=Bt(t);return{m:A(e),px:s,d:r,a:A(n,w)}},ye=e=>{let t=Et(e);t===0n&&b("sign failed: k is zero");let{px:n,d:s}=Bt(B(t));return{rx:n,k:s}},pe=(e,t,n,s)=>L(t,B(E(e+n*s))),ge="invalid signature produced",cn=(e,t,n=nt(w))=>{let{m:s,px:r,d:o,a:c}=be(e,t,n),i=yt(ae,c),u=B(o^G(i)),d=yt(ue,u,r,s),{rx:f,k:h}=ye(d),x=de(f,r,s),y=pe(h,f,x,o);return me(y,s,r)||b(ge),y},fn=async(e,t,n=nt(w))=>{let{m:s,px:r,d:o,a:c}=be(e,t,n),i=await pt(ae,c),u=B(o^G(i)),d=await pt(ue,u,r,s),{rx:f,k:h}=ye(d),x=await le(f,r,s),y=pe(h,f,x,o);return await Ae(y,s,r)||b(ge),y},an=(e,t)=>e instanceof Promise?e.then(t):t(e),we=(e,t,n,s)=>{let r=A(e,Z,"signature"),o=A(t,void 0,"message"),c=A(n,w,"publicKey");try{let i=G(c),u=Mt(i),d=M(u)?u:a(-u),f=new U(i,d,1n).assertValidity(),h=B(f.toAffine().x),x=P(r,0,w);j(x,1n,D);let y=P(r,w,Z);j(y,1n,v);let p=L(B(x),h,o);return an(s(p),g=>{let{x:H,y:I}=At(f,y,E(-g)).toAffine();return!(!M(I)||H!==x)})}catch{return!1}},me=(e,t,n)=>we(e,t,n,de),Ae=async(e,t,n)=>we(e,t,n,le),un={keygen:on,getPublicKey:xe,sign:cn,verify:me,signAsync:fn,verifyAsync:Ae},ct=8,hn=256,He=Math.ceil(hn/ct)+1,gt=2**(ct-1),dn=()=>{let e=[],t=T,n=t;for(let s=0;s<He;s++){n=t,e.push(n);for(let r=1;r<gt;r++)n=n.add(t),e.push(n);t=n.double()}return e},Kt,Ot=(e,t)=>{let n=t.negate();return e?n:t},ln=e=>{let t=Kt||(Kt=dn()),n=N,s=T,r=2**ct,o=r,c=Y(r-1),i=Y(ct);for(let u=0;u<He;u++){let d=Number(e&c);e>>=i,d>gt&&(d-=o,e+=1n);let f=u*gt,h=f,x=f+Math.abs(d)-1,y=u%2!==0,p=d<0;d===0?s=s.add(Ot(y,t[h])):n=n.add(Ot(p,t[x]))}return e!==0n&&b("invalid wnaf"),{p:n,f:s}};function xn(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Se(e,t=""){if(!Number.isSafeInteger(e)||e<0){let n=t&&`"${t}" `;throw new Error(`${n}expected integer >= 0, got ${e}`)}}function J(e,t,n=""){let s=xn(e),r=e?.length,o=t!==void 0;if(!s||o&&r!==t){let c=n&&`"${n}" `,i=o?` of length ${t}`:"",u=s?`length=${r}`:`type=${typeof e}`;throw new Error(c+"expected Uint8Array"+i+", got "+u)}return e}function Be(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash must wrapped by utils.createHasher");Se(e.outputLen),Se(e.blockLen)}function Q(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Ee(e,t){J(e,void 0,"digestInto() output");let n=t.outputLen;if(e.length<n)throw new Error(\'"digestInto() output" expected to be of length >=\'+n)}function X(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function at(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function _(e,t){return e<<32-t|e>>>t}function Le(e,t={}){let n=(r,o)=>e(o).update(r).digest(),s=e(void 0);return n.outputLen=s.outputLen,n.blockLen=s.blockLen,n.create=r=>e(r),Object.assign(n,t),Object.freeze(n)}var Ue=e=>({oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,e])});function Ie(e,t,n){return e&t^~e&n}function ve(e,t,n){return e&t^e&n^t&n}var ut=class{constructor(t,n,s,r){l(this,"blockLen");l(this,"outputLen");l(this,"padOffset");l(this,"isLE");l(this,"buffer");l(this,"view");l(this,"finished",!1);l(this,"length",0);l(this,"pos",0);l(this,"destroyed",!1);this.blockLen=t,this.outputLen=n,this.padOffset=s,this.isLE=r,this.buffer=new Uint8Array(t),this.view=at(this.buffer)}update(t){Q(this),J(t);let{view:n,buffer:s,blockLen:r}=this,o=t.length;for(let c=0;c<o;){let i=Math.min(r-this.pos,o-c);if(i===r){let u=at(t);for(;r<=o-c;c+=r)this.process(u,c);continue}s.set(t.subarray(c,c+i),this.pos),this.pos+=i,c+=i,this.pos===r&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Q(this),Ee(t,this),this.finished=!0;let{buffer:n,view:s,blockLen:r,isLE:o}=this,{pos:c}=this;n[c++]=128,X(this.buffer.subarray(c)),this.padOffset>r-c&&(this.process(s,0),c=0);for(let h=c;h<r;h++)n[h]=0;s.setBigUint64(r-8,BigInt(this.length*8),o),this.process(s,0);let i=at(t),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen must be aligned to 32bit");let d=u/4,f=this.get();if(d>f.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<d;h++)i.setUint32(4*h,f[h],o)}digest(){let{buffer:t,outputLen:n}=this;this.digestInto(t);let s=t.slice(0,n);return this.destroy(),s}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:n,buffer:s,length:r,finished:o,destroyed:c,pos:i}=this;return t.destroyed=c,t.finished=o,t.length=r,t.pos=i,r%n&&t.buffer.set(s),t}clone(){return this._cloneInto()}},F=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);var bn=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),O=new Uint32Array(64),Ut=class extends ut{constructor(t){super(64,t,8,!1)}get(){let{A:t,B:n,C:s,D:r,E:o,F:c,G:i,H:u}=this;return[t,n,s,r,o,c,i,u]}set(t,n,s,r,o,c,i,u){this.A=t|0,this.B=n|0,this.C=s|0,this.D=r|0,this.E=o|0,this.F=c|0,this.G=i|0,this.H=u|0}process(t,n){for(let h=0;h<16;h++,n+=4)O[h]=t.getUint32(n,!1);for(let h=16;h<64;h++){let x=O[h-15],y=O[h-2],p=_(x,7)^_(x,18)^x>>>3,g=_(y,17)^_(y,19)^y>>>10;O[h]=g+O[h-7]+p+O[h-16]|0}let{A:s,B:r,C:o,D:c,E:i,F:u,G:d,H:f}=this;for(let h=0;h<64;h++){let x=_(i,6)^_(i,11)^_(i,25),y=f+x+Ie(i,u,d)+bn[h]+O[h]|0,g=(_(s,2)^_(s,13)^_(s,22))+ve(s,r,o)|0;f=d,d=u,u=i,i=c+y|0,c=o,o=r,r=s,s=y+g|0}s=s+this.A|0,r=r+this.B|0,o=o+this.C|0,c=c+this.D|0,i=i+this.E|0,u=u+this.F|0,d=d+this.G|0,f=f+this.H|0,this.set(s,r,o,c,i,u,d,f)}roundClean(){X(O)}destroy(){this.set(0,0,0,0,0,0,0,0),X(this.buffer)}},It=class extends Ut{constructor(){super(32);l(this,"A",F[0]|0);l(this,"B",F[1]|0);l(this,"C",F[2]|0);l(this,"D",F[3]|0);l(this,"E",F[4]|0);l(this,"F",F[5]|0);l(this,"G",F[6]|0);l(this,"H",F[7]|0)}};var ht=Le(()=>new It,Ue(1));var dt=class{constructor(t,n){l(this,"oHash");l(this,"iHash");l(this,"blockLen");l(this,"outputLen");l(this,"finished",!1);l(this,"destroyed",!1);if(Be(t),J(n,void 0,"key"),this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let s=this.blockLen,r=new Uint8Array(s);r.set(n.length>s?t.create().update(n).digest():n);for(let o=0;o<r.length;o++)r[o]^=54;this.iHash.update(r),this.oHash=t.create();for(let o=0;o<r.length;o++)r[o]^=106;this.oHash.update(r),X(r)}update(t){return Q(this),this.iHash.update(t),this}digestInto(t){Q(this),J(t,this.outputLen,"output"),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:n,iHash:s,finished:r,destroyed:o,blockLen:c,outputLen:i}=this;return t=t,t.finished=r,t.destroyed=o,t.blockLen=c,t.outputLen=i,t.oHash=n._cloneInto(t.oHash),t.iHash=s._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},lt=(e,t,n)=>new dt(e,t).update(n).digest();lt.create=(e,t)=>new dt(e,t);K.sha256=ht;K.hmacSha256=(e,...t)=>{let n=new Uint8Array(t.reduce((r,o)=>r+o.length,0)),s=0;for(let r of t)n.set(r,s),s+=r.length;return lt(ht,e,n)};return Ge(yn);})();\n/*! Bundled license information:\n\n@noble/secp256k1/index.js:\n  (*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)\n\n@noble/hashes/utils.js:\n  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)\n*/\n';function HU(){return`
'use strict';

/**
 * Zero out a Uint8Array to clear sensitive data.
 * @param {Uint8Array} arr - Array to zero
 */
function secureZero(arr) {
    if (arr && arr.fill) {
        arr.fill(0);
        // Double-write to prevent optimization
        for (let i = 0; i < arr.length; i++) {
            arr[i] = 0;
        }
    }
}

/**
 * Bundled @noble/secp256k1 + hashes library (embedded at compile time).
 */
const eccBundle = ${JSON.stringify(NU)};

/**
 * Initialize the ECC library from the bundle.
 * The bundle exports nobleBundle with { secp, sha256, hmac }.
 */
const eccModule = (function() {
    // Execute the IIFE and return the nobleBundle object
    const fn = new Function(eccBundle + '; return nobleBundle;');
    return fn();
})();

/**
 * ECC library wrapper with the interface we need.
 * Uses eccModule.secp which has hashes pre-configured.
 */
const eccLib = {
    sign: (hash, privateKey) => {
        // noble's sign returns Signature object, we need compact 64-byte format
        const sig = eccModule.secp.sign(hash, privateKey, { lowS: true });
        return sig.toCompactRawBytes();
    },
    signSchnorr: (hash, privateKey) => {
        return eccModule.secp.schnorr.sign(hash, privateKey);
    }
};

/**
 * Whether initialization is complete.
 */
let initialized = false;

/**
 * Pending messages received before init completes.
 */
const pendingMessages = [];

/**
 * Handle incoming messages from main thread.
 */
self.onmessage = async function(event) {
    const msg = event.data;

    // Queue messages until initialized (except init)
    if (!initialized && msg.type !== 'init') {
        pendingMessages.push(msg);
        return;
    }

    await handleMessage(msg);
};

/**
 * Process a message.
 */
async function handleMessage(msg) {
    switch (msg.type) {
        case 'init':
            handleInit(msg);
            break;
        case 'sign':
            handleSign(msg);
            break;
        case 'signBatch':
            handleSignBatch(msg);
            break;
        case 'shutdown':
            handleShutdown();
            break;
        default:
            self.postMessage({
                type: 'error',
                taskId: msg.taskId || 'unknown',
                error: 'Unknown message type: ' + msg.type,
                inputIndex: msg.inputIndex || -1
            });
    }
}

/**
 * Initialize the worker.
 * ECC library is already bundled, so this just marks as ready.
 */
function handleInit(msg) {
    initialized = true;

    // Signal ready
    self.postMessage({ type: 'ready' });

    // Process pending messages
    while (pendingMessages.length > 0) {
        handleMessage(pendingMessages.shift());
    }
}

/**
 * Handle a signing request.
 *
 * SECURITY: Private key is zeroed immediately after use.
 *
 * @param {Object} msg - Signing task message
 */
function handleSign(msg) {
    const {
        taskId,
        hash,
        privateKey,
        publicKey,
        signatureType,
        lowR,
        inputIndex,
        sighashType,
        leafHash
    } = msg;

    // Validate inputs
    if (!hash || hash.length !== 32) {
        secureZero(privateKey);
        self.postMessage({
            type: 'error',
            taskId: taskId,
            error: 'Invalid hash: must be 32 bytes',
            inputIndex: inputIndex
        });
        return;
    }

    if (!privateKey || privateKey.length !== 32) {
        secureZero(privateKey);
        self.postMessage({
            type: 'error',
            taskId: taskId,
            error: 'Invalid private key: must be 32 bytes',
            inputIndex: inputIndex
        });
        return;
    }

    let signature;

    try {
        if (signatureType === 1) {
            // Schnorr signature (BIP340)
            if (typeof eccLib.signSchnorr !== 'function') {
                throw new Error('ECC library does not support Schnorr signatures');
            }
            signature = eccLib.signSchnorr(hash, privateKey);
        } else {
            // ECDSA signature
            if (typeof eccLib.sign !== 'function') {
                throw new Error('ECC library does not support ECDSA signatures');
            }
            signature = eccLib.sign(hash, privateKey, { lowR: lowR || false });
        }

        if (!signature) {
            throw new Error('Signing returned null or undefined');
        }

    } catch (error) {
        // ALWAYS zero the key, even on error
        secureZero(privateKey);

        self.postMessage({
            type: 'error',
            taskId: taskId,
            error: error.message || 'Signing failed',
            inputIndex: inputIndex
        });
        return;
    }

    // CRITICAL: Zero the private key immediately after signing
    secureZero(privateKey);

    // Send result back
    const result = {
        type: 'result',
        taskId: taskId,
        signature: signature,
        inputIndex: inputIndex,
        publicKey: publicKey,
        signatureType: signatureType
    };

    if (leafHash) {
        result.leafHash = leafHash;
    }

    self.postMessage(result);
}

/**
 * Handle a batch signing request.
 * Signs multiple tasks and returns all results in a single message.
 *
 * SECURITY: Private key is zeroed immediately after all signatures.
 *
 * @param {Object} msg - Batch signing message with tasks array
 */
function handleSignBatch(msg) {
    const { batchId, tasks, privateKey } = msg;
    const results = [];
    const errors = [];

    // Validate private key once
    if (!privateKey || privateKey.length !== 32) {
        secureZero(privateKey);
        self.postMessage({
            type: 'batchResult',
            batchId: batchId,
            results: [],
            errors: [{ inputIndex: -1, error: 'Invalid private key: must be 32 bytes' }]
        });
        return;
    }

    // Process all tasks
    for (const task of tasks) {
        const { taskId, hash, publicKey, signatureType, lowR, inputIndex, sighashType, leafHash } = task;

        // Validate hash
        if (!hash || hash.length !== 32) {
            errors.push({ taskId, inputIndex, error: 'Invalid hash: must be 32 bytes' });
            continue;
        }

        try {
            let signature;
            if (signatureType === 1) {
                // Schnorr signature (BIP340)
                signature = eccLib.signSchnorr(hash, privateKey);
            } else {
                // ECDSA signature
                signature = eccLib.sign(hash, privateKey, { lowR: lowR || false });
            }

            if (!signature) {
                throw new Error('Signing returned null or undefined');
            }

            const result = {
                taskId: taskId,
                signature: signature,
                inputIndex: inputIndex,
                publicKey: publicKey,
                signatureType: signatureType
            };

            if (leafHash) {
                result.leafHash = leafHash;
            }

            results.push(result);
        } catch (error) {
            errors.push({ taskId, inputIndex, error: error.message || 'Signing failed' });
        }
    }

    // CRITICAL: Zero the private key after processing all tasks
    secureZero(privateKey);

    // Send batch result back
    self.postMessage({
        type: 'batchResult',
        batchId: batchId,
        results: results,
        errors: errors
    });
}

/**
 * Handle shutdown request.
 */
function handleShutdown() {
    initialized = false;
    pendingMessages.length = 0;

    self.postMessage({ type: 'shutdown-ack' });

    // Close the worker
    self.close();
}
`}function DU(){const t=HU(),e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function zU(t){URL.revokeObjectURL(t)}const MU={workerCount:typeof navigator<"u"&&navigator.hardwareConcurrency||4,taskTimeoutMs:3e4,maxKeyHoldTimeMs:5e3,verifySignatures:!0,preserveWorkers:!1};let FU=class Hi{static#e=null;#s;#t=[];#o=new Map;#r=null;#n=!1;#i=0;#a=0;#u=!1;#l=!1;constructor(e={}){this.#s={...MU,...e},this.#n=this.#s.preserveWorkers}get workerCount(){return this.#t.length}get idleWorkerCount(){return this.#t.filter(e=>e.state===pr.Idle).length}get busyWorkerCount(){return this.#t.filter(e=>e.state===pr.Busy).length}get isPreservingWorkers(){return this.#n}static getInstance(e){return Hi.#e||(Hi.#e=new Hi(e)),Hi.#e}static resetInstance(){Hi.#e&&(Hi.#e.shutdown().catch(()=>{}),Hi.#e=null)}preserveWorkers(){this.#n=!0}releaseWorkers(){this.#n=!1}async initialize(){if(this.#u)return;if(this.#l)throw new Error("Cannot initialize pool while shutting down");this.#r=DU();const e=[];for(let r=0;r<this.#s.workerCount;r++)e.push(this.#c());await Promise.all(e),this.#u=!0}async signBatch(e,r){const n=performance.now();if(this.#u||await this.initialize(),e.length===0)return{success:!0,signatures:new Map,errors:new Map,durationMs:performance.now()-n};const i=Math.min(this.#t.length,e.length),o=Array.from({length:i},()=>[]);for(let a=0;a<e.length;a++)o[a%i].push(e[a]);const s=r.getPrivateKey();try{const a=await Promise.allSettled(o.map((u,p)=>this.#f(u,s,r.publicKey,p))),l=new Map,f=new Map;for(let u=0;u<a.length;u++){const p=a[u];if(p.status==="fulfilled"){const y=p.value;for(const w of y.results)l.set(w.inputIndex,{type:"result",taskId:w.taskId,signature:w.signature,inputIndex:w.inputIndex,publicKey:w.publicKey,signatureType:w.signatureType,leafHash:w.leafHash});for(const w of y.errors)f.set(w.inputIndex,w.error)}else{const y=p.reason?.message??"Batch signing failed",w=o[u];for(const A of w)f.set(A.inputIndex,y)}}return this.#n||await this.#y(),{success:f.size===0,signatures:l,errors:f,durationMs:performance.now()-n}}finally{s.fill(0)}}async[Symbol.asyncDispose](){await this.shutdown()}async shutdown(){if(this.#l)return;this.#l=!0;const e=this.#t.map(r=>this.#p(r));await Promise.all(e),this.#t.length=0,this.#o.clear(),this.#r&&(zU(this.#r),this.#r=null),this.#u=!1,this.#l=!1}[Symbol.dispose](){this.shutdown()}async#c(){if(!this.#r)throw new Error("Worker blob URL not created");const e=this.#i++,r=new Worker(this.#r,{name:`signing-worker-${e}`}),n={id:e,state:pr.Initializing,worker:r,currentTaskId:null,taskStartTime:null};this.#t.push(n),await new Promise((i,o)=>{const s=setTimeout(()=>{o(new Error(`Worker ${e} initialization timeout`))},1e4),a=l=>{CU(l.data)&&(clearTimeout(s),r.removeEventListener("message",a),n.state=pr.Idle,i())};r.addEventListener("message",a),r.addEventListener("error",l=>{clearTimeout(s),o(new Error(`Worker ${e} error: ${l.message}`))}),r.postMessage({type:"init"})}),r.addEventListener("message",i=>{this.#d(n,i.data)})}async#f(e,r,n,i){if(e.length===0)return{type:"batchResult",batchId:"",results:[],errors:[]};const o=this.#t[i]??await this.#h(),s=`batch-${this.#a++}`;return new Promise((a,l)=>{const f=setTimeout(()=>{this.#o.delete(s),o.state=pr.Idle,o.currentTaskId=null,o.taskStartTime=null,this.#p(o).catch(()=>{}),this.#c().catch(()=>{}),l(new Error(`Batch signing timeout for ${e.length} tasks`))},this.#s.maxKeyHoldTimeMs),u={batchId:s,resolve:a,reject:l,timeoutId:f};this.#o.set(s,u),o.state=pr.Busy,o.currentTaskId=s,o.taskStartTime=Date.now();const p=e.map(w=>({taskId:w.taskId,hash:w.hash,publicKey:n,signatureType:w.signatureType,lowR:w.lowR,inputIndex:w.inputIndex,sighashType:w.sighashType,leafHash:w.leafHash})),y={type:"signBatch",batchId:s,tasks:p,privateKey:r};o.worker.postMessage(y)})}async#h(){let e=this.#t.find(r=>r.state===pr.Idle);return e||this.#t.length<this.#s.workerCount&&(await this.#c(),e=this.#t.find(r=>r.state===pr.Idle),e)?e:new Promise(r=>{const n=setInterval(()=>{const i=this.#t.find(o=>o.state===pr.Idle);i&&(clearInterval(n),r(i))},10)})}#d(e,r){if($U(r)){const n=this.#o.get(r.batchId);n&&(clearTimeout(n.timeoutId),this.#o.delete(r.batchId),e.state=pr.Idle,e.currentTaskId=null,e.taskStartTime=null,n.resolve(r))}}async#p(e){if(e.state===pr.Terminated)return;e.state=pr.ShuttingDown,e.worker.postMessage({type:"shutdown"}),await new Promise(n=>{const i=setTimeout(()=>{e.worker.terminate(),e.state=pr.Terminated,n()},1e3),o=s=>{s.data.type==="shutdown-ack"&&(clearTimeout(i),e.worker.removeEventListener("message",o),e.worker.terminate(),e.state=pr.Terminated,n())};e.worker.addEventListener("message",o)});const r=this.#t.indexOf(e);r>=0&&this.#t.splice(r,1)}async#y(){const e=this.#t.filter(r=>r.state===pr.Idle);await Promise.all(e.map(r=>this.#p(r)))}};function KU(t,e,r={}){const n=[],i=t.data.inputs,o=e.publicKey;for(let s=0;s<i.length;s++){const a=i[s];if(t.inputHasPubkey(s,o))if(en(a)){const l=jU(t,s,a,e,r);n.push(...l)}else{const l=VU(t,s,a,e,r);l&&n.push(l)}}return n}function jU(t,e,r,n,i){const o=[];try{const s=t.checkTaprootHashesForSig(e,r,n,i.tapLeafHash,i.sighashTypes);for(const{hash:a,leafHash:l}of s)o.push({taskId:`taproot-${e}-${l?"script":"key"}`,inputIndex:e,hash:a,signatureType:t5.Schnorr,sighashType:r.sighashType??gt.SIGHASH_DEFAULT,leafHash:l})}catch{}return o}function VU(t,e,r,n,i){try{const o=r.sighashType??gt.SIGHASH_ALL;return(i.sighashTypes??[gt.SIGHASH_ALL]).includes(o),null}catch{return null}}function WU(t,e,r){const n=r.publicKey;for(const[i,o]of e.signatures){const s=t.data.inputs[i];if(o.signatureType===t5.Schnorr)if(o.leafHash){const a=[{pubkey:nt(n),signature:hs(o.signature,s.sighashType),leafHash:o.leafHash}];t.data.updateInput(i,{tapScriptSig:a})}else{const a=hs(o.signature,s.sighashType);t.data.updateInput(i,{tapKeySig:a})}else{const a=Bo.encode(o.signature,s.sighashType??gt.SIGHASH_ALL),l=[{pubkey:Uint8Array.from(n),signature:a}];t.data.updateInput(i,{partialSig:l})}}}function qU(t){const e=atob(t),r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r}const mu=40,bu=2,wu=15,r5=16,cl=16,Jl=2,ef=80,GU="WARNING: Sending to a future segwit version address can lead to loss of funds. End users MUST be warned carefully in the GUI and asked if they wish to proceed with caution. Wallets should verify the segwit version from the output of fromBech32, then decide when it is safe to use which version of segwit.",w0=t=>{try{const e=t.subarray(2);if(e.length<bu||e.length>mu)throw new TypeError("Invalid program length for segwit address");const r=t[0];if(r===void 0)throw new TypeError("Empty output");const n=r-ef;if(n<Jl||n>wu+1)throw new TypeError("Invalid version for segwit address");if(n===1)throw new TypeError("taproot");return!0}catch{}return!1};function n5(t,e){if(!(t instanceof Uint8Array))throw new TypeError("output must be a Uint8Array");if(!e.bech32Opnet)throw new Error("Network does not support opnet");const r=t[0];let n=1,i;const o=t[1],s=t[2];if(o!==void 0&&o<76)i=o,n=2;else if(o===76&&s!==void 0)i=s,n=3;else throw new TypeError("Unsupported push opcode in script");const a=t.subarray(n,n+i);if(a.length<bu||a.length>mu)throw new TypeError("Invalid program length for segwit address");const l=r===ge.OP_0?0:r!==void 0&&r>=ge.OP_1&&r<=ge.OP_16?r-(ge.OP_1-1):-1;if(l<wu||l>r5)throw new TypeError(`Invalid segwit version ${l}`);const f=[l,...Rt.bech32m.toWords(a)];return Rt.bech32m.encode(e.bech32Opnet,f)}function i5(t,e){const r=t.subarray(2);if(r.length<bu||r.length>mu)throw new TypeError("Invalid program length for segwit address");const n=t[0];if(n===void 0)throw new TypeError("Empty output");const i=n-ef;if(i<Jl||i>wu)throw new TypeError("Invalid version for segwit address");if(t[1]!==r.length)throw new TypeError(`Invalid script for segwit address ${t[1]} !== ${r.length}`);return ll(r,i,e.bech32,e.bech32Opnet)}function o5(t){const e=new Uint8Array(t0(t));if(e.length<21)throw new TypeError(t+" is too short");if(e.length>21)throw new TypeError(t+" is too long");const r=e[0],n=e.subarray(1);return{version:r,hash:n}}function Yd(t,e){if(!WS(t))throw new TypeError("Expected 20 bytes hash");if(!VS(e))throw new TypeError("Expected UInt8 version");const r=Ft(21);return r[0]=e,r.set(t,1),e0(r)}function ll(t,e,r,n){const i=Rt.bech32.toWords(t);return i.unshift(e),e===cl&&n?Rt.bech32m.encode(n,i):e===0?Rt.bech32.encode(r,i):Rt.bech32m.encode(r,i)}function v0(t,e){e=e||Ur;const r=t.length;if(r===25&&t[0]===118&&t[1]===169&&t[2]===20&&t[23]===136&&t[24]===172)return Yd(t.subarray(3,23),e.pubKeyHash);if(r===23&&t[0]===169&&t[1]===20&&t[22]===135)return Yd(t.subarray(2,22),e.scriptHash);if(r===22&&t[0]===0&&t[1]===20)return ll(t.subarray(2,22),0,e.bech32);if(r===34&&t[0]===0&&t[1]===32)return ll(t.subarray(2,34),0,e.bech32);if(r===34&&t[0]===81&&t[1]===32){const n=Rt.bech32m.toWords(t.subarray(2,34));return n.unshift(1),Rt.bech32m.encode(e.bech32,n)}try{return n5(t,e)}catch{}try{return i5(t,e)}catch{}throw new Error(YS(t)+" has no matching Address")}function s5(t,e){let r,n;e&&"bech32"in e?r=e:e&&typeof e=="object"?(r=e.network||Ur,n=e.onFutureSegwitWarning):r=Ur;let i,o;try{i=o5(t)}catch{}if(i){if(i.version===r.pubKeyHash)return hu({hash:i.hash}).output;if(i.version===r.scriptHash)return du({hash:i.hash}).output}else{try{o=Kl(t)}catch{}if(o){if(o.prefix!==r.bech32&&r.bech32Opnet&&o.prefix!==r.bech32Opnet)throw new Error(t+" has an invalid prefix");if(o.version===0){if(o.data.length===20)return Zl({hash:RP(o.data)}).output;if(o.data.length===32)return gu({hash:UP(o.data)}).output}else if(o.version===1){if(o.data.length===32)return pu({pubkey:o.data}).output}else if(o.version===cl){if(!r.bech32Opnet)throw new Error(t+" has an invalid prefix");return e4({program:o.data,network:r}).output}else if(o.version>=Jl&&o.version<=wu&&o.data.length>=bu&&o.data.length<=mu)return o.version!==cl&&n&&n(GU),Qt([o.version+ef,o.data])}}throw new TypeError(t+" has no matching Script")}const hn=Object.freeze(Object.defineProperty({__proto__:null,FUTURE_MAX_VERSION:r5,FUTURE_OPNET_VERSION:cl,FUTURE_SEGWIT_MAX_SIZE:mu,FUTURE_SEGWIT_MAX_VERSION:wu,FUTURE_SEGWIT_MIN_SIZE:bu,FUTURE_SEGWIT_MIN_VERSION:Jl,FUTURE_SEGWIT_VERSION_DIFF:ef,_toFutureSegwitAddress:i5,fromBase58Check:o5,fromBech32:Kl,fromOutputScript:v0,isUnknownSegwitVersion:w0,toBase58Check:Yd,toBech32:ll,toFutureOPNetAddress:n5,toOutputScript:s5},Symbol.toStringTag,{value:"Module"})),Vv=ge;let a5=class Zd{static NAME=Ze.Embed;#e;#s;#t;#o;#r;#n;#i=!1;#a=!1;constructor(e,r){this.#e=e.network??Ur,this.#s={validate:r?.validate??!0,allowIncomplete:r?.allowIncomplete??!1},this.#t=e.data,this.#o=e.output,this.#s.validate&&this.#c()}get name(){return Ze.Embed}get network(){return this.#e}get data(){return this.#i||(this.#r=this.#u(),this.#i=!0),this.#r??[]}get output(){return this.#a||(this.#n=this.#l(),this.#a=!0),this.#n}static fromData(e,r){return new Zd({data:e,network:r})}static fromOutput(e,r){return new Zd({output:e,network:r})}toPayment(){return{name:this.name,network:this.network,data:this.data,output:this.output}}#u(){if(this.#t)return this.#t;if(this.#o)return It(this.#o)?.slice(1)}#l(){if(this.#o)return this.#o;if(this.#t)return Qt([Vv.OP_RETURN].concat(this.#t))}#c(){if(this.#o){const e=It(this.#o);if(!e)throw new TypeError("Output is invalid");if(e[0]!==Vv.OP_RETURN)throw new TypeError("Output is invalid");if(!e.slice(1).every(r=>r instanceof Uint8Array))throw new TypeError("Output is invalid");if(this.#t&&!Ls(this.#t,this.data))throw new TypeError("Data mismatch")}}};function XU(t,e){if(!t.data&&!t.output)throw new TypeError("Not enough data");const r=new a5({data:t.data,output:t.output,network:t.network},e);return Object.assign(r.toPayment(),t)}const At=Object.freeze(Object.defineProperty({__proto__:null,Embed:a5,LEAF_VERSION_TAPSCRIPT:il,MAX_TAPTREE_DEPTH:j4,P2MS:Y4,P2OP:JS,P2PK:X4,P2PKH:b4,P2SH:w4,P2TR:W4,P2WPKH:q4,P2WSH:G4,PaymentType:Ze,findScriptPath:Fa,p2data:XU,p2ms:yu,p2op:e4,p2pk:y0,p2pkh:hu,p2sh:du,p2tr:pu,p2wpkh:Zl,p2wsh:gu,rootHashFromPath:ol,tapleafHash:Hn,toHashTree:sl,tweakKey:ga},Symbol.toStringTag,{value:"Module"}));Ee("6a24aa21a9ed");var Mn;(function(t){t[t.UNSIGNED_TX=0]="UNSIGNED_TX",t[t.GLOBAL_XPUB=1]="GLOBAL_XPUB"})(Mn||(Mn={}));var Pe;(function(t){t[t.NON_WITNESS_UTXO=0]="NON_WITNESS_UTXO",t[t.WITNESS_UTXO=1]="WITNESS_UTXO",t[t.PARTIAL_SIG=2]="PARTIAL_SIG",t[t.SIGHASH_TYPE=3]="SIGHASH_TYPE",t[t.REDEEM_SCRIPT=4]="REDEEM_SCRIPT",t[t.WITNESS_SCRIPT=5]="WITNESS_SCRIPT",t[t.BIP32_DERIVATION=6]="BIP32_DERIVATION",t[t.FINAL_SCRIPTSIG=7]="FINAL_SCRIPTSIG",t[t.FINAL_SCRIPTWITNESS=8]="FINAL_SCRIPTWITNESS",t[t.POR_COMMITMENT=9]="POR_COMMITMENT",t[t.TAP_KEY_SIG=19]="TAP_KEY_SIG",t[t.TAP_SCRIPT_SIG=20]="TAP_SCRIPT_SIG",t[t.TAP_LEAF_SCRIPT=21]="TAP_LEAF_SCRIPT",t[t.TAP_BIP32_DERIVATION=22]="TAP_BIP32_DERIVATION",t[t.TAP_INTERNAL_KEY=23]="TAP_INTERNAL_KEY",t[t.TAP_MERKLE_ROOT=24]="TAP_MERKLE_ROOT"})(Pe||(Pe={}));var Ct;(function(t){t[t.REDEEM_SCRIPT=0]="REDEEM_SCRIPT",t[t.WITNESS_SCRIPT=1]="WITNESS_SCRIPT",t[t.BIP32_DERIVATION=2]="BIP32_DERIVATION",t[t.TAP_INTERNAL_KEY=5]="TAP_INTERNAL_KEY",t[t.TAP_TREE=6]="TAP_TREE",t[t.TAP_BIP32_DERIVATION=7]="TAP_BIP32_DERIVATION"})(Ct||(Ct={}));const fl="0123456789abcdefABCDEF",hl=fl.split("").map(t=>t.codePointAt(0)),dl=Array(256).fill(!0).map((t,e)=>{const r=String.fromCodePoint(e),n=fl.indexOf(r);return n<0?void 0:n<16?n:n-6}),u5=new TextEncoder,c5=new TextDecoder;function YU(t){return c5.decode(t)}function ZU(t){return u5.encode(t)}function Fn(t){const e=t.reduce((i,o)=>i+o.length,0),r=new Uint8Array(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}function Ye(t){const e=t||new Uint8Array;return e.length>512?JU(e):QU(e)}function QU(t){let e="";for(let r=0;r<t.length;++r)e+=fl[dl[hl[t[r]>>4]]],e+=fl[dl[hl[t[r]&15]]];return e}function JU(t){const e=new Uint8Array(t.length*2);for(let r=0;r<t.length;++r)e[r*2]=hl[t[r]>>4],e[r*2+1]=hl[t[r]&15];return c5.decode(e)}function eL(t){const e=u5.encode(t||""),r=new Uint8Array(Math.floor(e.length/2));let n;for(n=0;n<r.length;n++){const i=dl[e[n*2]],o=dl[e[n*2+1]];if(i===void 0||o===void 0)break;r[n]=i<<4|o}return n===r.length?r:r.slice(0,n)}function tL(t){return btoa(String.fromCharCode(...t))}function rL(t){const e=atob(t),r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r}function Kn(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;++n)if(t[n]!==e[n])return t[n]<e[n]?-1:1;return t.length===e.length?0:t.length>e.length?1:-1}function E0(t,e,r,n){if(e+4>t.length)throw new Error("Offset is outside the bounds of Uint8Array");if(n=n.toUpperCase(),r>4294967295)throw new Error(`The value of "value" is out of range. It must be >= 0 and <= ${4294967295}. Received ${r}`);return n==="LE"?(t[e]=r&255,t[e+1]=r>>8&255,t[e+2]=r>>16&255,t[e+3]=r>>24&255):(t[e]=r>>24&255,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=r&255),e+4}function Wv(t,e){if(e+1>t.length)throw new Error("Offset is outside the bounds of Uint8Array");return t[e]}function tf(t,e,r){if(e+4>t.length)throw new Error("Offset is outside the bounds of Uint8Array");if(r=r.toUpperCase(),r==="LE"){let n=0;return n=(n<<8)+t[e+3]>>>0,n=(n<<8)+t[e+2]>>>0,n=(n<<8)+t[e+1]>>>0,n=(n<<8)+t[e]>>>0,n}else{let n=0;return n=(n<<8)+t[e]>>>0,n=(n<<8)+t[e+1]>>>0,n=(n<<8)+t[e+2]>>>0,n=(n<<8)+t[e+3]>>>0,n}}function nL(t,e,r,n){if(e+8>t.length)throw new Error("Offset is outside the bounds of Uint8Array");if(r>0x7fffffffffffffffn||r<-0x8000000000000000n)throw new Error(`The value of "value" is out of range. It must be >= ${-0x8000000000000000n} and <= ${0x7fffffffffffffffn}. Received ${r}`);return n=n.toUpperCase(),n==="LE"?(t[e]=Number(r&0xffn),t[e+1]=Number(r>>8n&0xffn),t[e+2]=Number(r>>16n&0xffn),t[e+3]=Number(r>>24n&0xffn),t[e+4]=Number(r>>32n&0xffn),t[e+5]=Number(r>>40n&0xffn),t[e+6]=Number(r>>48n&0xffn),t[e+7]=Number(r>>56n&0xffn)):(t[e]=Number(r>>56n&0xffn),t[e+1]=Number(r>>48n&0xffn),t[e+2]=Number(r>>40n&0xffn),t[e+3]=Number(r>>32n&0xffn),t[e+4]=Number(r>>24n&0xffn),t[e+5]=Number(r>>16n&0xffn),t[e+6]=Number(r>>8n&0xffn),t[e+7]=Number(r&0xffn)),e+8}function iL(t,e,r){if(e+8>t.length)throw new Error("Offset is outside the bounds of Uint8Array");r=r.toUpperCase();let n=0n;if(r==="LE")return n=(n<<8n)+BigInt(t[e+7]),n=(n<<8n)+BigInt(t[e+6]),n=(n<<8n)+BigInt(t[e+5]),n=(n<<8n)+BigInt(t[e+4]),n=(n<<8n)+BigInt(t[e+3]),n=(n<<8n)+BigInt(t[e+2]),n=(n<<8n)+BigInt(t[e+1]),n=(n<<8n)+BigInt(t[e]),t[e+7]<=127?n:n-0x10000000000000000n;{let i=0n;return i=(i<<8n)+BigInt(t[e]),i=(i<<8n)+BigInt(t[e+1]),i=(i<<8n)+BigInt(t[e+2]),i=(i<<8n)+BigInt(t[e+3]),i=(i<<8n)+BigInt(t[e+4]),i=(i<<8n)+BigInt(t[e+5]),i=(i<<8n)+BigInt(t[e+6]),i=(i<<8n)+BigInt(t[e+7]),t[e]<=127?i:i-0x10000000000000000n}}const oL=t=>[...Array(t).keys()];function sL(t){if(t.key[0]!==Mn.GLOBAL_XPUB)throw new Error("Decode Error: could not decode globalXpub with key 0x"+Ye(t.key));if(t.key.length!==79||![2,3].includes(t.key[46]))throw new Error("Decode Error: globalXpub has invalid extended pubkey in key 0x"+Ye(t.key));if(t.value.length/4%1!==0)throw new Error("Decode Error: Global GLOBAL_XPUB value length should be multiple of 4");const e=t.key.slice(1),r={masterFingerprint:t.value.slice(0,4),extendedPubkey:e,path:"m"};for(const n of oL(t.value.length/4-1)){const i=tf(t.value,n*4+4,"LE"),o=!!(i&2147483648),s=i&2147483647;r.path+="/"+s.toString(10)+(o?"'":"")}return r}function aL(t){const e=new Uint8Array([Mn.GLOBAL_XPUB]),r=Fn([e,t.extendedPubkey]),n=t.path.split("/"),i=new Uint8Array(n.length*4);i.set(t.masterFingerprint,0);let o=4;return n.slice(1).forEach(s=>{const a=s.slice(-1)==="'";let l=2147483647&parseInt(a?s.slice(0,-1):s,10);a&&(l+=2147483648),E0(i,o,l,"LE"),o+=4}),{key:r,value:i}}const uL="{ masterFingerprint: Uint8Array; extendedPubkey: Uint8Array; path: string; }";function cL(t){const e=t.extendedPubkey,r=t.masterFingerprint,n=t.path;return e instanceof Uint8Array&&e.length===78&&[2,3].indexOf(e[45])>-1&&r instanceof Uint8Array&&r.length===4&&typeof n=="string"&&!!n.match(/^m(\/\d+'?)*$/)}function lL(t,e,r){const n=Ye(e.extendedPubkey);return r.has(n)?!1:(r.add(n),t.filter(i=>Kn(i.extendedPubkey,e.extendedPubkey)).length===0)}const fL=Object.freeze(Object.defineProperty({__proto__:null,canAddToArray:lL,check:cL,decode:sL,encode:aL,expected:uL},Symbol.toStringTag,{value:"Module"}));function hL(t){return{key:new Uint8Array([Mn.UNSIGNED_TX]),value:t.toBuffer()}}const dL=Object.freeze(Object.defineProperty({__proto__:null,encode:hL},Symbol.toStringTag,{value:"Module"}));function pL(t){if(t.key[0]!==Pe.FINAL_SCRIPTSIG)throw new Error("Decode Error: could not decode finalScriptSig with key 0x"+Ye(t.key));return t.value}function gL(t){return{key:new Uint8Array([Pe.FINAL_SCRIPTSIG]),value:t}}const yL="Uint8Array";function mL(t){return t instanceof Uint8Array}function bL(t,e){return!!t&&!!e&&t.finalScriptSig===void 0}const wL=Object.freeze(Object.defineProperty({__proto__:null,canAdd:bL,check:mL,decode:pL,encode:gL,expected:yL},Symbol.toStringTag,{value:"Module"}));function vL(t){if(t.key[0]!==Pe.FINAL_SCRIPTWITNESS)throw new Error("Decode Error: could not decode finalScriptWitness with key 0x"+Ye(t.key));return t.value}function EL(t){return{key:new Uint8Array([Pe.FINAL_SCRIPTWITNESS]),value:t}}const SL="Uint8Array";function AL(t){return t instanceof Uint8Array}function kL(t,e){return!!t&&!!e&&t.finalScriptWitness===void 0}const IL=Object.freeze(Object.defineProperty({__proto__:null,canAdd:kL,check:AL,decode:vL,encode:EL,expected:SL},Symbol.toStringTag,{value:"Module"}));function _L(t){if(t.key[0]!==Pe.NON_WITNESS_UTXO)throw new Error("Decode Error: could not decode nonWitnessUtxo with key 0x"+Ye(t.key));return t.value}function xL(t){return{key:new Uint8Array([Pe.NON_WITNESS_UTXO]),value:t}}const TL="Uint8Array";function BL(t){return t instanceof Uint8Array}function PL(t,e){return!!t&&!!e&&t.nonWitnessUtxo===void 0}const OL=Object.freeze(Object.defineProperty({__proto__:null,canAdd:PL,check:BL,decode:_L,encode:xL,expected:TL},Symbol.toStringTag,{value:"Module"}));function UL(t){if(t.key[0]!==Pe.PARTIAL_SIG)throw new Error("Decode Error: could not decode partialSig with key 0x"+Ye(t.key));if(!(t.key.length===34||t.key.length===66)||![2,3,4].includes(t.key[1]))throw new Error("Decode Error: partialSig has invalid pubkey in key 0x"+Ye(t.key));return{pubkey:t.key.slice(1),signature:t.value}}function LL(t){const e=new Uint8Array([Pe.PARTIAL_SIG]);return{key:Fn([e,t.pubkey]),value:t.signature}}const RL="{ pubkey: Uint8Array; signature: Uint8Array; }";function $L(t){return t.pubkey instanceof Uint8Array&&t.signature instanceof Uint8Array&&[33,65].includes(t.pubkey.length)&&[2,3,4].includes(t.pubkey[0])&&CL(t.signature)}function CL(t){if(!(t instanceof Uint8Array)||t.length<9||t[0]!==48||t.length!==t[1]+3||t[2]!==2)return!1;const e=t[3];if(e>33||e<1||t[3+e+1]!==2)return!1;const r=t[3+e+2];return!(r>33||r<1||t.length!==3+e+2+r+2)}function NL(t,e,r){const n=Ye(e.pubkey);return r.has(n)?!1:(r.add(n),t.filter(i=>Kn(i.pubkey,e.pubkey)===0).length===0)}const HL=Object.freeze(Object.defineProperty({__proto__:null,canAddToArray:NL,check:$L,decode:UL,encode:LL,expected:RL},Symbol.toStringTag,{value:"Module"}));function DL(t){if(t.key[0]!==Pe.POR_COMMITMENT)throw new Error("Decode Error: could not decode porCommitment with key 0x"+Ye(t.key));return YU(t.value)}function zL(t){return{key:new Uint8Array([Pe.POR_COMMITMENT]),value:ZU(t)}}const ML="string";function FL(t){return typeof t=="string"}function KL(t,e){return!!t&&!!e&&t.porCommitment===void 0}const jL=Object.freeze(Object.defineProperty({__proto__:null,canAdd:KL,check:FL,decode:DL,encode:zL,expected:ML},Symbol.toStringTag,{value:"Module"}));function VL(t){if(t.key[0]!==Pe.SIGHASH_TYPE)throw new Error("Decode Error: could not decode sighashType with key 0x"+Ye(t.key));return Number(tf(t.value,0,"LE"))}function WL(t){const e=Uint8Array.from([Pe.SIGHASH_TYPE]),r=new Uint8Array(4);return E0(r,0,t,"LE"),{key:e,value:r}}const qL="number";function GL(t){return typeof t=="number"}function XL(t,e){return!!t&&!!e&&t.sighashType===void 0}const YL=Object.freeze(Object.defineProperty({__proto__:null,canAdd:XL,check:GL,decode:VL,encode:WL,expected:qL},Symbol.toStringTag,{value:"Module"}));function ZL(t){if(t.key[0]!==Pe.TAP_KEY_SIG||t.key.length!==1)throw new Error("Decode Error: could not decode tapKeySig with key 0x"+Ye(t.key));if(!l5(t.value))throw new Error("Decode Error: tapKeySig not a valid 64-65-byte BIP340 signature");return t.value}function QL(t){return{key:Uint8Array.from([Pe.TAP_KEY_SIG]),value:t}}const JL="Uint8Array";function l5(t){return t instanceof Uint8Array&&(t.length===64||t.length===65)}function eR(t,e){return!!t&&!!e&&t.tapKeySig===void 0}const tR=Object.freeze(Object.defineProperty({__proto__:null,canAdd:eR,check:l5,decode:ZL,encode:QL,expected:JL},Symbol.toStringTag,{value:"Module"}));function rR(t){if(t.key[0]!==Pe.TAP_LEAF_SCRIPT)throw new Error("Decode Error: could not decode tapLeafScript with key 0x"+Ye(t.key));if((t.key.length-2)%32!==0)throw new Error("Decode Error: tapLeafScript has invalid control block in key 0x"+Ye(t.key));const e=t.value[t.value.length-1];if((t.key[1]&254)!==e)throw new Error("Decode Error: tapLeafScript bad leaf version in key 0x"+Ye(t.key));const r=t.value.slice(0,-1);return{controlBlock:t.key.slice(1),script:r,leafVersion:e}}function nR(t){const e=Uint8Array.from([Pe.TAP_LEAF_SCRIPT]),r=Uint8Array.from([t.leafVersion]);return{key:Fn([e,t.controlBlock]),value:Fn([t.script,r])}}const iR="{ controlBlock: Uint8Array; leafVersion: number, script: Uint8Array; }";function oR(t){return t.controlBlock instanceof Uint8Array&&(t.controlBlock.length-1)%32===0&&(t.controlBlock[0]&254)===t.leafVersion&&t.script instanceof Uint8Array}function sR(t,e,r){const n=Ye(e.controlBlock);return r.has(n)?!1:(r.add(n),t.filter(i=>Kn(i.controlBlock,e.controlBlock)===0).length===0)}const aR=Object.freeze(Object.defineProperty({__proto__:null,canAddToArray:sR,check:oR,decode:rR,encode:nR,expected:iR},Symbol.toStringTag,{value:"Module"}));function uR(t){if(t.key[0]!==Pe.TAP_MERKLE_ROOT||t.key.length!==1)throw new Error("Decode Error: could not decode tapMerkleRoot with key 0x"+Ye(t.key));if(!f5(t.value))throw new Error("Decode Error: tapMerkleRoot not a 32-byte hash");return t.value}function cR(t){return{key:Uint8Array.from([Pe.TAP_MERKLE_ROOT]),value:t}}const lR="Uint8Array";function f5(t){return t instanceof Uint8Array&&t.length===32}function fR(t,e){return!!t&&!!e&&t.tapMerkleRoot===void 0}const hR=Object.freeze(Object.defineProperty({__proto__:null,canAdd:fR,check:f5,decode:uR,encode:cR,expected:lR},Symbol.toStringTag,{value:"Module"}));function dR(t){if(t.key[0]!==Pe.TAP_SCRIPT_SIG)throw new Error("Decode Error: could not decode tapScriptSig with key 0x"+Ye(t.key));if(t.key.length!==65)throw new Error("Decode Error: tapScriptSig has invalid key 0x"+Ye(t.key));if(t.value.length!==64&&t.value.length!==65)throw new Error("Decode Error: tapScriptSig has invalid signature in key 0x"+Ye(t.key));const e=t.key.slice(1,33),r=t.key.slice(33);return{pubkey:e,leafHash:r,signature:t.value}}function pR(t){const e=Uint8Array.from([Pe.TAP_SCRIPT_SIG]);return{key:Fn([e,t.pubkey,t.leafHash]),value:t.signature}}const gR="{ pubkey: Uint8Array; leafHash: Uint8Array; signature: Uint8Array; }";function yR(t){return t.pubkey instanceof Uint8Array&&t.leafHash instanceof Uint8Array&&t.signature instanceof Uint8Array&&t.pubkey.length===32&&t.leafHash.length===32&&(t.signature.length===64||t.signature.length===65)}function mR(t,e,r){const n=Ye(e.pubkey)+Ye(e.leafHash);return r.has(n)?!1:(r.add(n),t.filter(i=>Kn(i.pubkey,e.pubkey)===0&&Kn(i.leafHash,e.leafHash)===0).length===0)}const bR=Object.freeze(Object.defineProperty({__proto__:null,canAddToArray:mR,check:yR,decode:dR,encode:pR,expected:gR},Symbol.toStringTag,{value:"Module"}));function wR(t){if(t.key[0]!==Pe.WITNESS_UTXO)throw new Error("Decode Error: could not decode witnessUtxo with key 0x"+Ye(t.key));const e=iL(t.value,0,"LE");let r=8;const{numberValue:n,bytes:i}=Ws(t.value,r);r+=i;const o=t.value.slice(r);if(o.length!==n)throw new Error("Decode Error: WITNESS_UTXO script is not proper length");return{script:o,value:e}}function vR(t){const{script:e,value:r}=t,n=on(e.length),i=new Uint8Array(8+n+e.length);return nL(i,0,BigInt(r),"LE"),ro(e.length,i,8),i.set(e,8+n),{key:Uint8Array.from([Pe.WITNESS_UTXO]),value:i}}const ER="{ script: Uint8Array; value: bigint; }";function SR(t){return t.script instanceof Uint8Array&&typeof t.value=="bigint"}function AR(t,e){return!!t&&!!e&&t.witnessUtxo===void 0}const kR=Object.freeze(Object.defineProperty({__proto__:null,canAdd:AR,check:SR,decode:wR,encode:vR,expected:ER},Symbol.toStringTag,{value:"Module"}));function IR(t){if(t.key[0]!==Ct.TAP_TREE||t.key.length!==1)throw new Error("Decode Error: could not decode tapTree with key 0x"+Ye(t.key));let e=0;const r=[];for(;e<t.value.length;){const n=t.value[e++],i=t.value[e++],{numberValue:o,bytes:s}=Ws(t.value,e);e+=s,r.push({depth:n,leafVersion:i,script:t.value.slice(e,e+o)}),e+=o}return{leaves:r}}function _R(t){const e=Uint8Array.from([Ct.TAP_TREE]),r=[].concat(...t.leaves.map(n=>[Uint8Array.of(n.depth,n.leafVersion),ro(BigInt(n.script.length)).buffer,n.script]));return{key:e,value:Fn(r)}}const xR="{ leaves: [{ depth: number; leafVersion: number, script: Uint8Array; }] }";function TR(t){return Array.isArray(t.leaves)&&t.leaves.every(e=>e.depth>=0&&e.depth<=128&&(e.leafVersion&254)===e.leafVersion&&e.script instanceof Uint8Array)}function BR(t,e){return!!t&&!!e&&t.tapTree===void 0}const PR=Object.freeze(Object.defineProperty({__proto__:null,canAdd:BR,check:TR,decode:IR,encode:_R,expected:xR},Symbol.toStringTag,{value:"Module"})),OR=t=>[...Array(t).keys()],UR=t=>t.length===33&&[2,3].includes(t[0])||t.length===65&&t[0]===4;function S0(t,e=UR){function r(a){if(a.key[0]!==t)throw new Error("Decode Error: could not decode bip32Derivation with key 0x"+Ye(a.key));const l=a.key.slice(1);if(!e(l))throw new Error("Decode Error: bip32Derivation has invalid pubkey in key 0x"+Ye(a.key));if(a.value.length/4%1!==0)throw new Error("Decode Error: Input BIP32_DERIVATION value length should be multiple of 4");const f={masterFingerprint:a.value.slice(0,4),pubkey:l,path:"m"};for(const u of OR(a.value.length/4-1)){const p=tf(a.value,u*4+4,"LE"),y=!!(p&2147483648),w=p&2147483647;f.path+="/"+w.toString(10)+(y?"'":"")}return f}function n(a){const l=Uint8Array.from([t]),f=Fn([l,a.pubkey]),u=a.path.split("/"),p=new Uint8Array(u.length*4);p.set(a.masterFingerprint,0);let y=4;return u.slice(1).forEach(w=>{const A=w.slice(-1)==="'";let S=2147483647&parseInt(A?w.slice(0,-1):w,10);A&&(S+=2147483648),E0(p,y,S,"LE"),y+=4}),{key:f,value:p}}const i="{ masterFingerprint: Uint8Array; pubkey: Uint8Array; path: string; }";function o(a){return a.pubkey instanceof Uint8Array&&a.masterFingerprint instanceof Uint8Array&&typeof a.path=="string"&&e(a.pubkey)&&a.masterFingerprint.length===4}function s(a,l,f){const u=Ye(l.pubkey);return f.has(u)?!1:(f.add(u),a.filter(p=>Kn(p.pubkey,l.pubkey)===0).length===0)}return{decode:r,encode:n,check:o,expected:i,canAddToArray:s}}function A0(t){return e;function e(r){let n;if(t.includes(r.key[0])&&(n=r.key.slice(1),!(n.length===33||n.length===65)||![2,3,4].includes(n[0])))throw new Error("Format Error: invalid pubkey in key 0x"+Ye(r.key));return n}}function h5(t){function e(s){if(s.key[0]!==t)throw new Error("Decode Error: could not decode redeemScript with key 0x"+Ye(s.key));return s.value}function r(s){return{key:Uint8Array.from([t]),value:s}}const n="Uint8Array";function i(s){return s instanceof Uint8Array}function o(s,a){return!!s&&!!a&&s.redeemScript===void 0}return{decode:e,encode:r,check:i,expected:n,canAdd:o}}const LR=t=>t.length===32;function d5(t){const e=S0(t,LR);function r(s){const{numberValue:a,bytes:l}=Ws(s.value),f=e.decode({key:s.key,value:s.value.slice(l+Number(a)*32)}),u=new Array(Number(a));for(let p=0,y=l;p<a;p++,y+=32)u[p]=s.value.slice(y,y+32);return{...f,leafHashes:u}}function n(s){const a=e.encode(s),l=on(s.leafHashes.length),f=new Uint8Array(l);ro(s.leafHashes.length,f);const u=Fn([f,...s.leafHashes,a.value]);return{...a,value:u}}const i="{ masterFingerprint: Uint8Array; pubkey: Uint8Array; path: string; leafHashes: Uint8Array[]; }";function o(s){return Array.isArray(s.leafHashes)&&s.leafHashes.every(a=>a instanceof Uint8Array&&a.length===32)&&e.check(s)}return{decode:r,encode:n,check:o,expected:i,canAddToArray:e.canAddToArray}}function p5(t){function e(s){if(s.key[0]!==t||s.key.length!==1)throw new Error("Decode Error: could not decode tapInternalKey with key 0x"+Ye(s.key));if(s.value.length!==32)throw new Error("Decode Error: tapInternalKey not a 32-byte x-only pubkey");return s.value}function r(s){return{key:Uint8Array.from([t]),value:s}}const n="Uint8Array";function i(s){return s instanceof Uint8Array&&s.length===32}function o(s,a){return!!s&&!!a&&s.tapInternalKey===void 0}return{decode:e,encode:r,check:i,expected:n,canAdd:o}}function g5(t){function e(s){if(s.key[0]!==t)throw new Error("Decode Error: could not decode witnessScript with key 0x"+Ye(s.key));return s.value}function r(s){return{key:Uint8Array.from([t]),value:s}}const n="Uint8Array";function i(s){return s instanceof Uint8Array}function o(s,a){return!!s&&!!a&&s.witnessScript===void 0}return{decode:e,encode:r,check:i,expected:n,canAdd:o}}const k0={unsignedTx:dL,globalXpub:fL,checkPubkey:A0([])},Gt={nonWitnessUtxo:OL,partialSig:HL,sighashType:YL,finalScriptSig:wL,finalScriptWitness:IL,porCommitment:jL,witnessUtxo:kR,bip32Derivation:S0(Pe.BIP32_DERIVATION),redeemScript:h5(Pe.REDEEM_SCRIPT),witnessScript:g5(Pe.WITNESS_SCRIPT),checkPubkey:A0([Pe.PARTIAL_SIG,Pe.BIP32_DERIVATION]),tapKeySig:tR,tapScriptSig:bR,tapLeafScript:aR,tapBip32Derivation:d5(Pe.TAP_BIP32_DERIVATION),tapInternalKey:p5(Pe.TAP_INTERNAL_KEY),tapMerkleRoot:hR},ni={bip32Derivation:S0(Ct.BIP32_DERIVATION),redeemScript:h5(Ct.REDEEM_SCRIPT),witnessScript:g5(Ct.WITNESS_SCRIPT),checkPubkey:A0([Ct.BIP32_DERIVATION]),tapBip32Derivation:d5(Ct.TAP_BIP32_DERIVATION),tapTree:PR,tapInternalKey:p5(Ct.TAP_INTERNAL_KEY)},RR=Object.freeze(Object.defineProperty({__proto__:null,globals:k0,inputs:Gt,outputs:ni},Symbol.toStringTag,{value:"Module"})),pl=t=>[...Array(t).keys()];function qv(t){const e=t.map($R);return e.push(Uint8Array.from([0])),Fn(e)}function $R(t){const e=t.key.length,r=t.value.length,n=on(e),i=on(r),o=new Uint8Array(n+e+i+r);return ro(e,o,0),o.set(t.key,n),ro(r,o,n+e),o.set(t.value,n+e+i),o}function CR(t,e){let r=0;function n(){const{numberValue:k,bytes:I}=Ws(t,r);r+=I;const N=t.slice(r,r+Number(k));return r+=Number(k),N}function i(){const k=tf(t,r,"BE");return r+=4,k}function o(){const k=Wv(t,r);return r+=1,k}function s(){const k=n(),I=n();return{key:k,value:I}}function a(){if(r>=t.length)throw new Error("Format Error: Unexpected End of PSBT");const k=Wv(t,r)===0;return k&&r++,k}if(i()!==1886610036)throw new Error("Format Error: Invalid Magic Number");if(o()!==255)throw new Error("Format Error: Magic Number must be followed by 0xff separator");const l=[],f={};for(;!a();){const k=s(),I=Ye(k.key);if(f[I])throw new Error("Format Error: Keys must be unique for global keymap: key "+I);f[I]=1,l.push(k)}const u=l.filter(k=>k.key[0]===Mn.UNSIGNED_TX);if(u.length!==1)throw new Error("Format Error: Only one UNSIGNED_TX allowed");const p=e(u[0].value),{inputCount:y,outputCount:w}=p.getInputOutputCounts(),A=[],S=[];for(const k of pl(y)){const I={},N=[];for(;!a();){const B=s(),V=Ye(B.key);if(I[V])throw new Error("Format Error: Keys must be unique for each input: input index "+k+" key "+V);I[V]=1,N.push(B)}A.push(N)}for(const k of pl(w)){const I={},N=[];for(;!a();){const B=s(),V=Ye(B.key);if(I[V])throw new Error("Format Error: Keys must be unique for each output: output index "+k+" key "+V);I[V]=1,N.push(B)}S.push(N)}return y5(p,{globalMapKeyVals:l,inputKeyVals:A,outputKeyVals:S})}function cr(t,e,r){if(Kn(e,Uint8Array.from([r])))throw new Error(`Format Error: Invalid ${t} key: ${Ye(e)}`)}function y5(t,{globalMapKeyVals:e,inputKeyVals:r,outputKeyVals:n}){const i={unsignedTx:t};let o=0;for(const u of e)switch(u.key[0]){case Mn.UNSIGNED_TX:if(cr("global",u.key,Mn.UNSIGNED_TX),o>0)throw new Error("Format Error: GlobalMap has multiple UNSIGNED_TX");o++;break;case Mn.GLOBAL_XPUB:i.globalXpub===void 0&&(i.globalXpub=[]),i.globalXpub.push(k0.globalXpub.decode(u));break;default:i.unknownKeyVals||(i.unknownKeyVals=[]),i.unknownKeyVals.push(u)}const s=r.length,a=n.length,l=[],f=[];for(const u of pl(s)){const p={};for(const y of r[u])switch(Gt.checkPubkey(y),y.key[0]){case Pe.NON_WITNESS_UTXO:if(cr("input",y.key,Pe.NON_WITNESS_UTXO),p.nonWitnessUtxo!==void 0)throw new Error("Format Error: Input has multiple NON_WITNESS_UTXO");p.nonWitnessUtxo=Gt.nonWitnessUtxo.decode(y);break;case Pe.WITNESS_UTXO:if(cr("input",y.key,Pe.WITNESS_UTXO),p.witnessUtxo!==void 0)throw new Error("Format Error: Input has multiple WITNESS_UTXO");p.witnessUtxo=Gt.witnessUtxo.decode(y);break;case Pe.PARTIAL_SIG:p.partialSig===void 0&&(p.partialSig=[]),p.partialSig.push(Gt.partialSig.decode(y));break;case Pe.SIGHASH_TYPE:if(cr("input",y.key,Pe.SIGHASH_TYPE),p.sighashType!==void 0)throw new Error("Format Error: Input has multiple SIGHASH_TYPE");p.sighashType=Gt.sighashType.decode(y);break;case Pe.REDEEM_SCRIPT:if(cr("input",y.key,Pe.REDEEM_SCRIPT),p.redeemScript!==void 0)throw new Error("Format Error: Input has multiple REDEEM_SCRIPT");p.redeemScript=Gt.redeemScript.decode(y);break;case Pe.WITNESS_SCRIPT:if(cr("input",y.key,Pe.WITNESS_SCRIPT),p.witnessScript!==void 0)throw new Error("Format Error: Input has multiple WITNESS_SCRIPT");p.witnessScript=Gt.witnessScript.decode(y);break;case Pe.BIP32_DERIVATION:p.bip32Derivation===void 0&&(p.bip32Derivation=[]),p.bip32Derivation.push(Gt.bip32Derivation.decode(y));break;case Pe.FINAL_SCRIPTSIG:cr("input",y.key,Pe.FINAL_SCRIPTSIG),p.finalScriptSig=Gt.finalScriptSig.decode(y);break;case Pe.FINAL_SCRIPTWITNESS:cr("input",y.key,Pe.FINAL_SCRIPTWITNESS),p.finalScriptWitness=Gt.finalScriptWitness.decode(y);break;case Pe.POR_COMMITMENT:cr("input",y.key,Pe.POR_COMMITMENT),p.porCommitment=Gt.porCommitment.decode(y);break;case Pe.TAP_KEY_SIG:cr("input",y.key,Pe.TAP_KEY_SIG),p.tapKeySig=Gt.tapKeySig.decode(y);break;case Pe.TAP_SCRIPT_SIG:p.tapScriptSig===void 0&&(p.tapScriptSig=[]),p.tapScriptSig.push(Gt.tapScriptSig.decode(y));break;case Pe.TAP_LEAF_SCRIPT:p.tapLeafScript===void 0&&(p.tapLeafScript=[]),p.tapLeafScript.push(Gt.tapLeafScript.decode(y));break;case Pe.TAP_BIP32_DERIVATION:p.tapBip32Derivation===void 0&&(p.tapBip32Derivation=[]),p.tapBip32Derivation.push(Gt.tapBip32Derivation.decode(y));break;case Pe.TAP_INTERNAL_KEY:cr("input",y.key,Pe.TAP_INTERNAL_KEY),p.tapInternalKey=Gt.tapInternalKey.decode(y);break;case Pe.TAP_MERKLE_ROOT:cr("input",y.key,Pe.TAP_MERKLE_ROOT),p.tapMerkleRoot=Gt.tapMerkleRoot.decode(y);break;default:p.unknownKeyVals||(p.unknownKeyVals=[]),p.unknownKeyVals.push(y)}l.push(p)}for(const u of pl(a)){const p={};for(const y of n[u])switch(ni.checkPubkey(y),y.key[0]){case Ct.REDEEM_SCRIPT:if(cr("output",y.key,Ct.REDEEM_SCRIPT),p.redeemScript!==void 0)throw new Error("Format Error: Output has multiple REDEEM_SCRIPT");p.redeemScript=ni.redeemScript.decode(y);break;case Ct.WITNESS_SCRIPT:if(cr("output",y.key,Ct.WITNESS_SCRIPT),p.witnessScript!==void 0)throw new Error("Format Error: Output has multiple WITNESS_SCRIPT");p.witnessScript=ni.witnessScript.decode(y);break;case Ct.BIP32_DERIVATION:p.bip32Derivation===void 0&&(p.bip32Derivation=[]),p.bip32Derivation.push(ni.bip32Derivation.decode(y));break;case Ct.TAP_INTERNAL_KEY:cr("output",y.key,Ct.TAP_INTERNAL_KEY),p.tapInternalKey=ni.tapInternalKey.decode(y);break;case Ct.TAP_TREE:cr("output",y.key,Ct.TAP_TREE),p.tapTree=ni.tapTree.decode(y);break;case Ct.TAP_BIP32_DERIVATION:p.tapBip32Derivation===void 0&&(p.tapBip32Derivation=[]),p.tapBip32Derivation.push(ni.tapBip32Derivation.decode(y));break;default:p.unknownKeyVals||(p.unknownKeyVals=[]),p.unknownKeyVals.push(y)}f.push(p)}return{globalMap:i,inputs:l,outputs:f}}function NR({globalMap:t,inputs:e,outputs:r}){const{globalKeyVals:n,inputKeyVals:i,outputKeyVals:o}=Qd({globalMap:t,inputs:e,outputs:r}),s=qv(n),a=p=>p.length===0?[Uint8Array.from([0])]:p.map(qv),l=a(i),f=a(o),u=new Uint8Array(5);return u.set([112,115,98,116,255],0),Fn([u,s].concat(l,f))}const HR=(t,e)=>Kn(t.key,e.key);function qh(t,e){const r=new Set,n=Object.entries(t).reduce((o,[s,a])=>{if(s==="unknownKeyVals")return o;const l=e[s];if(l===void 0)return o;const f=(Array.isArray(a)?a:[a]).map(l.encode);return f.map(u=>Ye(u.key)).forEach(u=>{if(r.has(u))throw new Error("Serialize Error: Duplicate key: "+u);r.add(u)}),o.concat(f)},[]),i=t.unknownKeyVals?t.unknownKeyVals.filter(o=>!r.has(Ye(o.key))):[];return n.concat(i).sort(HR)}function Qd({globalMap:t,inputs:e,outputs:r}){return{globalKeyVals:qh(t,k0),inputKeyVals:e.map(n=>qh(n,Gt)),outputKeyVals:r.map(n=>qh(n,ni))}}function DR(t){const e=t[0],r=Qd(e),n=t.slice(1);if(n.length===0)throw new Error("Combine: Nothing to combine");const i=Gv(e);if(i===void 0)throw new Error("Combine: Self missing transaction");const o=ns(r.globalKeyVals),s=r.inputKeyVals.map(ns),a=r.outputKeyVals.map(ns);for(const l of n){const f=Gv(l);if(f===void 0||Kn(f.toBuffer(),i.toBuffer())!==0)throw new Error("Combine: One of the Psbts does not have the same transaction.");const u=Qd(l);ns(u.globalKeyVals).forEach(Gh(o,r.globalKeyVals,u.globalKeyVals)),u.inputKeyVals.map(ns).forEach((p,y)=>p.forEach(Gh(s[y],r.inputKeyVals[y],u.inputKeyVals[y]))),u.outputKeyVals.map(ns).forEach((p,y)=>p.forEach(Gh(a[y],r.outputKeyVals[y],u.outputKeyVals[y])))}return y5(i,{globalMapKeyVals:r.globalKeyVals,inputKeyVals:r.inputKeyVals,outputKeyVals:r.outputKeyVals})}function Gh(t,e,r){return n=>{if(t.has(n))return;const i=r.filter(o=>Ye(o.key)===n)[0];e.push(i),t.add(n)}}function Gv(t){return t.globalMap.unsignedTx}function ns(t){const e=new Set;return t.forEach(r=>{const n=Ye(r.key);if(e.has(n))throw new Error("Combine: KeyValue Map keys should be unique");e.add(n)}),e}function tr(t,e){const r=t[e];if(r===void 0)throw new Error(`No input #${e}`);return r}function Ka(t,e){const r=t[e];if(r===void 0)throw new Error(`No output #${e}`);return r}function Xh(t,e,r){if(t.key[0]<r)throw new Error("Use the method for your specific key instead of addUnknownKeyVal*");if(e&&e.filter(n=>Kn(n.key,t.key)===0).length!==0)throw new Error(`Duplicate Key: ${Ye(t.key)}`)}function Yh(t){let e=0;return Object.keys(t).forEach(r=>{Number(isNaN(Number(r)))&&e++}),e}function zR(t,e){let r=!1;if(e.nonWitnessUtxo||e.witnessUtxo){const n=!!e.redeemScript,i=!!e.witnessScript,o=!n||!!e.finalScriptSig,s=!i||!!e.finalScriptWitness,a=!!e.finalScriptSig||!!e.finalScriptWitness;r=o&&s&&a}if(r===!1)throw new Error(`Input #${t} has too much or too little data to clean`)}function Xv(t,e,r,n){throw new Error(`Data for ${t} key ${e} is incorrect: Expected ${r} and got ${JSON.stringify(n)}`)}function I0(t){return(e,r)=>{for(const n of Object.keys(e)){const i=e[n],{canAdd:o,canAddToArray:s,check:a,expected:l}=RR[t+"s"][n]||{},f=!!s;if(a)if(f){if(!Array.isArray(i)||r[n]&&!Array.isArray(r[n]))throw new Error(`Key type ${n} must be an array`);i.every(a)||Xv(t,n,l,i);const u=r[n]||[],p=new Set;if(!i.every(y=>s(u,y,p)))throw new Error("Can not add duplicate data to array");r[n]=u.concat(i)}else{if(a(i)||Xv(t,n,l,i),!o(r,i))throw new Error(`Can not add duplicate data to ${t}`);r[n]=i}}}}const MR=I0("global"),m5=I0("input"),b5=I0("output");function FR(t,e){const r=t.length-1,n=tr(t,r);m5(e,n)}function KR(t,e){const r=t.length-1,n=Ka(t,r);b5(e,n)}let Yv=class{constructor(t){this.inputs=[],this.outputs=[],this.globalMap={unsignedTx:t}}static fromBase64(t,e){const r=rL(t);return this.fromBuffer(r,e)}static fromHex(t,e){const r=eL(t);return this.fromBuffer(r,e)}static fromBuffer(t,e){const r=CR(t,e),n=new this(r.globalMap.unsignedTx);return Object.assign(n,r),n}toBase64(){const t=this.toBuffer();return tL(t)}toHex(){const t=this.toBuffer();return Ye(t)}toBuffer(){return NR(this)}updateGlobal(t){return MR(t,this.globalMap),this}updateInput(t,e){const r=tr(this.inputs,t);return m5(e,r),this}updateOutput(t,e){const r=Ka(this.outputs,t);return b5(e,r),this}addUnknownKeyValToGlobal(t){return Xh(t,this.globalMap.unknownKeyVals,Yh(Mn)),this.globalMap.unknownKeyVals||(this.globalMap.unknownKeyVals=[]),this.globalMap.unknownKeyVals.push(t),this}addUnknownKeyValToInput(t,e){const r=tr(this.inputs,t);return Xh(e,r.unknownKeyVals,Yh(Pe)),r.unknownKeyVals||(r.unknownKeyVals=[]),r.unknownKeyVals.push(e),this}addUnknownKeyValToOutput(t,e){const r=Ka(this.outputs,t);return Xh(e,r.unknownKeyVals,Yh(Ct)),r.unknownKeyVals||(r.unknownKeyVals=[]),r.unknownKeyVals.push(e),this}addInput(t){this.globalMap.unsignedTx.addInput(t),this.inputs.push({unknownKeyVals:[]});const e=t.unknownKeyVals||[],r=this.inputs.length-1;if(!Array.isArray(e))throw new Error("unknownKeyVals must be an Array");return e.forEach(n=>this.addUnknownKeyValToInput(r,n)),FR(this.inputs,t),this}addOutput(t){this.globalMap.unsignedTx.addOutput(t),this.outputs.push({unknownKeyVals:[]});const e=t.unknownKeyVals||[],r=this.outputs.length-1;if(!Array.isArray(e))throw new Error("unknownKeyVals must be an Array");return e.forEach(n=>this.addUnknownKeyValToOutput(r,n)),KR(this.outputs,t),this}clearFinalizedInput(t){const e=tr(this.inputs,t);zR(t,e);for(const r of Object.keys(e))["witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknownKeyVals"].includes(r)||delete e[r];return this}combine(...t){const e=DR([this].concat(t));return Object.assign(this,e),this}getTransaction(){return this.globalMap.unsignedTx.toBuffer()}};function ec(t){if(typeof t!="number"||t!==Math.floor(t)||t>4294967295||t<0)throw new Error("Invalid 32 bit integer")}function Zh(t){if(t.unsafeSignNonSegwit)throw new Error("Not BIP174 compliant, can not export")}function Jd(t){return!!t.finalScriptSig||!!t.finalScriptWitness}function jR(t){if(!t.ins.every(e=>e.script&&e.script.length===0&&e.witness&&e.witness.length===0))throw new Error("Format Error: Transaction ScriptSigs are not empty")}function w5(t,e){const r=r0(new Uint8Array(e.hash)),n=`${ve(r)}:${e.index}`;if(t.txInCache[n])throw new Error("Duplicate input detected.");t.txInCache[n]=1}function VR(t,e){t.ins.forEach(r=>{w5(e,r)})}function oa(t,e,r){r!==!1&&t.forEach(n=>{if(en(n)?AU(n,e):mU(n,e))throw new Error("Can not modify transaction, signatures exist.")})}function WR(t){if(!t.sighashType||!t.partialSig)return;const{partialSig:e,sighashType:r}=t;e.forEach(n=>{const{hashType:i}=Bo.decode(n.signature);if(r!==i)throw new Error("Signature sighash does not match input sighash type")})}function v5(t,e,r){if(!ul(t,e))throw new Error(`Can not ${r} for this input with the key ${ve(t)}`)}function E5(t,e){return(r,n,i,o)=>{const s=t({redeem:{output:i}}).output;if(!_e(n,s))throw new Error(`${e} for ${o} #${r} doesn't match the scriptPubKey in the prevout`)}}const Zv=E5(du,"Redeem script"),Qv=E5(gu,"Witness script");function Jv(t){let e=0;function r(s){return e+=s,t.subarray(e-s,e)}function n(){const s=Ws(t,e);return e+=s.bytes,s.numberValue||0}function i(){return r(n())}function o(){const s=n(),a=[];for(let l=0;l<s;l++)a.push(i());return a}return o()}function qR(t){let e=t&gt.SIGHASH_ANYONECANPAY?"SIGHASH_ANYONECANPAY | ":"";switch(t&31){case gt.SIGHASH_ALL:e+="SIGHASH_ALL";break;case gt.SIGHASH_SINGLE:e+="SIGHASH_SINGLE";break;case gt.SIGHASH_NONE:e+="SIGHASH_NONE";break}return e}function GR(t){if(t.length===65){const e=t[64]&1,r=new Uint8Array(t.subarray(0,33));return r[0]=2|e,r}return new Uint8Array(t)}function eE(t){return t.length===33&&QS(t)}function XR(t){return Ko(t)}function _0(t){return $s(t)?"witnesspubkeyhash":J4(t)?"pubkeyhash":Z4(t)?"multisig":Q4(t)?"pubkey":"nonstandard"}function sa(t){return[...Array(t).keys()]}function gl(t){if($s(t)||m0(t))throw new Error("P2WPKH or P2SH can not be contained within P2WSH")}function yl(t,e,r,n,i){const o=m0(t),s=o&&n&&al(n),a=al(t);if(o&&n===void 0)throw new Error("scriptPubkey is P2SH but redeemScript missing");let l;if(s){if(!i)throw new Error("scriptPubkey or redeemScript is P2WSH but witnessScript missing");if(!n)throw new Error("P2SH-P2WSH requires redeemScript");l=i,Zv(e,t,n,r),Qv(e,n,i,r),gl(l)}else if(a){if(!i)throw new Error("scriptPubkey or redeemScript is P2WSH but witnessScript missing");l=i,Qv(e,t,i,r),gl(l)}else if(o){if(!n)throw new Error("P2SH requires redeemScript");l=n,Zv(e,t,n,r)}else l=t;return{meaningfulScript:l,type:s?"p2sh-p2wsh":o?"p2sh":a?"p2wsh":"raw"}}class YR{nonWitnessUtxoTxCache;nonWitnessUtxoBufCache;txInCache;tx;unsafeSignNonSegwit;hasSignatures;fee;feeRate;extractedTx;prevOuts;signingScripts;values;taprootHashCache;constructor(e){this.nonWitnessUtxoTxCache=[],this.nonWitnessUtxoBufCache=[],this.txInCache={},this.tx=e,this.unsafeSignNonSegwit=!1,this.hasSignatures=!1}invalidate(e){this.fee=void 0,this.feeRate=void 0,this.extractedTx=void 0,this.taprootHashCache=void 0,e==="full"&&(this.prevOuts=void 0,this.signingScripts=void 0,this.values=void 0)}addNonWitnessTxCache(e,r,n){if(!e.nonWitnessUtxo)throw new Error("nonWitnessUtxo is required");if(e===null||e===Object.prototype)throw new Error("Invalid input object");const i=e.nonWitnessUtxo;this.nonWitnessUtxoBufCache[r]=i,this.nonWitnessUtxoTxCache[r]=n(i)}getNonWitnessUtxoTx(e,r,n){return this.nonWitnessUtxoTxCache[r]||this.addNonWitnessTxCache(e,r,n),this.nonWitnessUtxoTxCache[r]}getScriptFromUtxo(e,r,n){const{script:i}=this.getScriptAndAmountFromUtxo(e,r,n);return i}getScriptAndAmountFromUtxo(e,r,n){if(r.witnessUtxo!==void 0)return{script:r.witnessUtxo.script,value:r.witnessUtxo.value};if(r.nonWitnessUtxo!==void 0){const i=this.getNonWitnessUtxoTx(r,e,n),o=this.tx.ins[e],s=i.outs[o.index];return{script:s.script,value:s.value}}else throw new Error("Can't find pubkey in input without Utxo data")}computeFee(e,r=!1,n){if(!e.every(Jd))throw new Error("PSBT must be finalized to calculate fee");if(this.fee!==void 0)return this.fee;let i,o=!0;this.extractedTx?(i=this.extractedTx,o=!1):i=this.tx.clone();const{fee:s}=this.finalizeAndComputeAmounts(e,i,o,r,n);return s}computeFeeRate(e,r=!1,n){if(!e.every(Jd))throw new Error("PSBT must be finalized to calculate fee rate");if(this.feeRate!==void 0)return this.feeRate;let i,o=!0;this.extractedTx?(i=this.extractedTx,o=!1):i=this.tx.clone();const{feeRate:s}=this.finalizeAndComputeAmounts(e,i,o,r,n);return s}checkFees(e){const r=this.feeRate;if(!this.extractedTx)throw new Error("Transaction not extracted");if(r===void 0)throw new Error("Fee rate not computed");const n=this.extractedTx.virtualSize(),i=r*n;if(r>=e.maximumFeeRate)throw new Error(`Warning: You are paying around ${(i/1e8).toFixed(8)} in fees, which is ${r} satoshi per byte for a transaction with a VSize of ${n} bytes (segwit counted as 0.25 byte per byte). Use setMaximumFeeRate method to raise your threshold, or pass true to the first arg of extractTransaction.`)}pubkeyInInput(e,r,n,i){const o=this.getScriptFromUtxo(n,r,i),{meaningfulScript:s}=yl(o,n,"input",r.redeemScript,r.witnessScript);return ul(e,s)}pubkeyInOutput(e,r,n){const i=this.tx.outs[n].script,{meaningfulScript:o}=yl(i,n,"output",r.redeemScript,r.witnessScript);return ul(e,o)}redeemFromFinalScriptSig(e){if(!e)return;const r=It(e);if(!r)return;const n=r[r.length-1];if(!(!(n instanceof Uint8Array)||eE(n)||XR(n)||!It(n)))return n}redeemFromFinalWitnessScript(e){if(!e)return;const r=Jv(e),n=r[r.length-1];if(!(!n||eE(n)||!It(n)))return n}finalizeAndComputeAmounts(e,r,n,i,o){let s=0n;e.forEach((y,w)=>{const A=r.ins[w];if(n&&y.finalScriptSig&&(A.script=y.finalScriptSig),n&&y.finalScriptWitness&&(A.witness=Jv(y.finalScriptWitness)),y.witnessUtxo)s+=y.witnessUtxo.value;else if(y.nonWitnessUtxo){if(!o)throw new Error("txFromBuffer is required for nonWitnessUtxo inputs");const S=this.getNonWitnessUtxoTx(y,w,o),k=A.index,I=S.outs[k];s+=I.value}});const a=r.outs.reduce((y,w)=>y+w.value,0n),l=s-a;if(!i&&l<0n)throw new Error(`Outputs are spending more than Inputs ${s} < ${a}`);const f=r.virtualSize(),u=Number(l),p=Math.floor(u/f);return this.fee=u,this.extractedTx=r,this.feeRate=p,{fee:u,feeRate:p}}getScriptFromInput(e,r,n){const i={script:null,isSegwit:!1,isP2SH:!1,isP2WSH:!1};if(i.isP2SH=!!r.redeemScript,i.isP2WSH=!!r.witnessScript,r.witnessScript)i.script=r.witnessScript;else if(r.redeemScript)i.script=r.redeemScript;else if(r.nonWitnessUtxo){const o=this.getNonWitnessUtxoTx(r,e,n),s=this.tx.ins[e].index;i.script=o.outs[s].script}else r.witnessUtxo&&(i.script=r.witnessUtxo.script);return(r.witnessScript||i.script&&$s(i.script)||i.script&&w0(i.script))&&(i.isSegwit=!0),i}getPrevoutTaprootKey(e,r,n){const{script:i}=this.getScriptAndAmountFromUtxo(e,r,n);return Ql(i)?i.subarray(2,34):null}}class ZR{#e;#s;constructor(e,r){this.#e=e,this.#s=r}getHashAndSighashType(e,r,n,i){const o=tr(e,r),{hash:s,sighashType:a,script:l}=this.getHashForSig(r,o,!1,i);return v5(n,l,"sign"),{hash:s,sighashType:a}}getHashForSig(e,r,n,i){const o=this.#e.tx,s=r.sighashType||gt.SIGHASH_ALL;tE(s,i);let a,l;if(r.nonWitnessUtxo){const y=this.#e.getNonWitnessUtxoTx(r,e,this.#s),w=o.ins[e],A=w.hash,S=y.getHash();if(!_e(A,S))throw new Error(`Non-witness UTXO hash for input #${e} doesn't match the hash specified in the prevout`);const k=w.index;l=y.outs[k]}else if(r.witnessUtxo)l={script:r.witnessUtxo.script,value:r.witnessUtxo.value};else throw new Error("Need a Utxo input item for signing");const{meaningfulScript:f,type:u}=yl(l.script,e,"input",r.redeemScript,r.witnessScript),p=f;if(["p2sh-p2wsh","p2wsh"].includes(u))a=o.hashForWitnessV0(e,p,l.value,s);else if($s(f)){const y=hu({hash:f.subarray(2)});if(!y.output)throw new Error("Unable to create signing script");a=o.hashForWitnessV0(e,y.output,l.value,s)}else{if(r.nonWitnessUtxo===void 0&&!this.#e.unsafeSignNonSegwit)throw new Error(`Input #${e} has witnessUtxo but non-segwit script: `+ve(f));!n&&this.#e.unsafeSignNonSegwit&&console.warn(`Warning: Signing non-segwit inputs without the full parent transaction means there is a chance that a miner could feed you incorrect information to trick you into paying large fees. This behavior is the same as Psbt's predecessor (TransactionBuilder - now removed) when signing non-segwit scripts. You are not able to export this Psbt with toBuffer|toBase64|toHex since it is not BIP174 compliant.
*********************
PROCEED WITH CAUTION!
*********************`),a=o.hashForSignature(e,p,s)}return{script:p,sighashType:s,hash:a}}getTaprootHashesForSig(e,r,n,i,o,s){const a=this.#e.tx,l=r.sighashType||gt.SIGHASH_DEFAULT;if(tE(l,s),!this.#e.prevOuts){const A=n.map((S,k)=>this.#e.getScriptAndAmountFromUtxo(k,S,this.#s));this.#e.prevOuts=A,this.#e.signingScripts=A.map(S=>S.script),this.#e.values=A.map(S=>S.value)}const f=this.#e.signingScripts,u=this.#e.values;this.#e.taprootHashCache||(this.#e.taprootHashCache=a.getTaprootHashCache(f,u));const p=this.#e.taprootHashCache,y=[];if(r.tapInternalKey&&!o){const A=this.#e.getPrevoutTaprootKey(e,r,this.#s)||new Uint8Array(0);if(_e(nt(i),A)){const S=a.hashForWitnessV1(e,f,u,l,void 0,void 0,p);y.push({pubkey:i,hash:S})}}const w=(r.tapLeafScript||[]).filter(A=>ul(i,A.script)).map(A=>{const S=Hn({output:A.script,version:A.leafVersion});return Object.assign({hash:S},A)}).filter(A=>!o||_e(o,A.hash)).map(A=>{const S=a.hashForWitnessV1(e,f,u,l,A.hash,void 0,p);return{pubkey:i,hash:S,leafHash:A.hash}});return y.concat(w)}getAllTaprootHashesForSig(e,r,n){const i=[];if(r.tapInternalKey){const o=this.#e.getPrevoutTaprootKey(e,r,this.#s);o&&i.push(o)}if(r.tapScriptSig){const o=r.tapScriptSig.map(s=>s.pubkey);i.push(...o)}return i.map(o=>this.getTaprootHashesForSig(e,r,n,o)).flat()}trimTaprootSig(e){return e.length===64?e:e.subarray(0,64)}getSignersFromHD(e,r,n){const i=tr(r,e);if(!i.bip32Derivation||i.bip32Derivation.length===0)throw new Error("Need bip32Derivation to sign with HD");const o=i.bip32Derivation.map(s=>{if(_e(s.masterFingerprint,n.fingerprint))return s}).filter(s=>!!s);if(o.length===0)throw new Error("Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint");return o.map(s=>{const a=n.derivePath(s.path);if(!_e(s.pubkey,a.publicKey))throw new Error("pubkey did not match bip32Derivation");return a})}bip32DerivationIsMine(e){return r=>{const n=e.fingerprint instanceof Uint8Array?e.fingerprint:new Uint8Array(e.fingerprint);if(!_e(r.masterFingerprint,n))return!1;const i=e.derivePath(r.path).publicKey,o=i instanceof Uint8Array?i:new Uint8Array(i);return!!_e(o,r.pubkey)}}}function tE(t,e){if(e&&!e.includes(t)){const r=qR(t);throw new Error(`Sighash type is not allowed. Retry the sign method passing the sighashTypes array of whitelisted types. Sighash type: ${r}`)}}class QR{#e;#s;constructor(e,r){this.#e=e,this.#s=r}getFinalScripts(e,r,n,i,o,s,a=!0,l){const f=_0(n);if(!A5(r,n,f)&&a)throw new Error(`Can not finalize input #${e}`);if(!r.partialSig)throw new Error("Input missing partial signatures");return S5(n,f,r.partialSig,i,o,s,l)}getScriptFromInput(e,r){return this.#e.getScriptFromInput(e,r,this.#s)}}function JR(t,e,r,n,i,o,s=!0,a){const l=_0(r);if(!A5(e,r,l)&&s)throw new Error(`Can not finalize input #${t}`);if(!e.partialSig)throw new Error("Input missing partial signatures");return S5(r,l,e.partialSig,n,i,o,a)}function S5(t,e,r,n,i,o,s){let a,l;const f=e$(t,e,r),u=o?gu({redeem:f}):null,p=i?du({redeem:u||f}):null;return n?(u&&u.witness?l=ka(u.witness):f&&f.witness?l=ka(f.witness):l=ka(s??[new Uint8Array([0])]),p&&(a=p?.input)):p?a=p?.input:f?a=f.input:a=Array.isArray(s)&&s[0]?s[0]:new Uint8Array([1]),{finalScriptSig:a,finalScriptWitness:l}}function A5(t,e,r){switch(r){case"pubkey":case"pubkeyhash":case"witnesspubkeyhash":return rE(1,t.partialSig);case"multisig":{const n=yu({output:e});if(n.m===void 0)throw new Error("Cannot determine m for multisig");return rE(n.m,t.partialSig,n.pubkeys)}case"nonstandard":return!0;default:return!1}}function rE(t,e,r){if(!e)return!1;let n;if(r?n=r.map(i=>{const o=GR(i);return e.find(s=>_e(s.pubkey,o))}).filter(i=>!!i):n=e,n.length>t)throw new Error("Too many signatures");return n.length===t}function e$(t,e,r){const n=t;switch(e){case"multisig":{const i=t$(t,r);return yu({output:n,signatures:i})}case"pubkey":{const i=r[0];return y0({output:n,signature:i.signature})}case"pubkeyhash":{const i=r[0];return hu({output:n,pubkey:i.pubkey,signature:i.signature})}case"witnesspubkeyhash":{const i=r[0];return Zl({output:n,pubkey:i.pubkey,signature:i.signature})}default:throw new Error(`Unknown script type: ${e}`)}}function t$(t,e){const r=yu({output:t});if(!r.pubkeys)throw new Error("Cannot extract pubkeys from multisig script");const n=[];for(const i of r.pubkeys){const o=e.filter(s=>_e(s.pubkey,i))[0];o&&n.push(new Uint8Array(o.signature))}return n}const r$=new Uint8Array([2,0,0,0,0,0,0,0,0,0]);class k5{tx;constructor(e=r$){this.tx=gt.fromBuffer(e),jR(this.tx),Object.defineProperty(this,"tx",{enumerable:!1,writable:!0})}getInputOutputCounts(){return{inputCount:this.tx.ins.length,outputCount:this.tx.outs.length}}addInput(e){if(e.hash===void 0||e.index===void 0||!(e.hash instanceof Uint8Array)&&typeof e.hash!="string"||typeof e.index!="number")throw new Error("Error adding input.");const r=typeof e.hash=="string"?r0(Ee(e.hash)):e.hash;this.tx.addInput(r,e.index,e.sequence)}addOutput(e){if(e.script===void 0||e.value===void 0||!(e.script instanceof Uint8Array)||typeof e.value!="bigint")throw new Error("Error adding output.");this.tx.addOutput(e.script,e.value)}toBuffer(){return this.tx.toBuffer()}}const n$=t=>new k5(t),i$={network:Ur,maximumFeeRate:5e3};function Bn(t){return gt.fromBuffer(t)}function x0(t,e,r,n,i,o,s=!0,a){return JR(t,e,r,n,i,o,s,a)}class fr{constructor(e={},r=new Yv(new k5)){this.data=r,this.#o=Object.assign({},i$,e);const n=this.data.globalMap.unsignedTx.tx;this.#e=new YR(n),e.version===3?this.setVersionTRUC():this.data.inputs.length===0&&this.setVersion(2)}#e;#s;#t;#o;get inputCount(){return this.data.inputs.length}get version(){return this.#e.tx.version}set version(e){this.setVersion(e)}get locktime(){return this.#e.tx.locktime}set locktime(e){this.setLocktime(e)}get txInputs(){return this.#e.tx.ins.map(e=>({hash:sv(e.hash),index:e.index,sequence:e.sequence}))}get txOutputs(){return this.#e.tx.outs.map(e=>{let r;try{r=v0(e.script,this.#o.network)}catch{}return{script:sv(e.script),value:e.value,address:r}})}get#r(){return this.#s||(this.#s=new ZR(this.#e,Bn)),this.#s}get#n(){return this.#t||(this.#t=new QR(this.#e,Bn)),this.#t}static fromBase64(e,r={}){const n=qU(e);return this.fromBuffer(n,r)}static fromHex(e,r={}){const n=Ee(e);return this.fromBuffer(n,r)}static fromBuffer(e,r={}){const n=Yv.fromBuffer(e,n$),i=new fr(r,n);return VR(i.#e.tx,i.#e),i.#e.hasSignatures=i.data.inputs.some(o=>o.partialSig?.length||o.tapKeySig||o.tapScriptSig?.length||o.finalScriptSig||o.finalScriptWitness),i}combine(...e){return this.data.combine(...e.map(r=>r.data)),this}clone(){const e=structuredClone(this.#o);return fr.fromBuffer(new Uint8Array(this.data.toBuffer()),e)}get maximumFeeRate(){return this.#o.maximumFeeRate}setMaximumFeeRate(e){ec(e),this.#o.maximumFeeRate=e}setVersion(e){return ec(e),oa(this.data.inputs,"setVersion",this.#e.hasSignatures),this.#e.tx.version=e,this.#e.invalidate("outputs"),this}setVersionTRUC(){return this.setVersion(gt.TRUC_VERSION)}setLocktime(e){return ec(e),oa(this.data.inputs,"setLocktime",this.#e.hasSignatures),this.#e.tx.locktime=e,this.#e.invalidate("outputs"),this}setInputSequence(e,r){if(ec(r),oa(this.data.inputs,"setInputSequence",this.#e.hasSignatures),this.#e.tx.ins.length<=e)throw new Error("Input index too high");return this.#e.tx.ins[e].sequence=r,this.#e.invalidate("outputs"),this}addInputs(e,r=!0){return e.forEach(n=>this.addInput(n,r)),this}addInput(e,r=!0){if(!e||e.hash===void 0||e.index===void 0)throw new Error("Invalid arguments for Psbt.addInput. Requires single object with at least [hash] and [index]");Kv(e,e,"addInput"),r&&oa(this.data.inputs,"addInput",this.#e.hasSignatures),e.witnessScript&&gl(e.witnessScript);const n=e.witnessUtxo?{...e,witnessUtxo:{script:e.witnessUtxo.script,value:typeof e.witnessUtxo.value=="bigint"?e.witnessUtxo.value:BigInt(e.witnessUtxo.value)}}:e;this.data.addInput(n);const i=this.#e.tx.ins[this.#e.tx.ins.length-1];w5(this.#e,i);const o=this.data.inputs.length-1,s=this.data.inputs[o];return s.nonWitnessUtxo&&this.#e.addNonWitnessTxCache(s,o,Bn),this.#e.invalidate("full"),this}addOutputs(e,r=!0){return e.forEach(n=>this.addOutput(n,r)),this}addOutput(e,r=!0){const n="address"in e,i="script"in e;if(!e||e.value===void 0||!n&&!i)throw new Error("Invalid arguments for Psbt.addOutput. Requires single object with at least [script or address] and [value]");if(r&&oa(this.data.inputs,"addOutput",this.#e.hasSignatures),n){const{address:o}=e,{network:s}=this.#o,a=s5(o,s);e=Object.assign({},e,{script:a})}return jv(e,e,"addOutput"),this.data.addOutput(e),this.#e.invalidate("outputs"),this}extractTransaction(e,r){if(r&&(this.data.inputs=this.data.inputs.filter(i=>!i.partialSig)),!this.data.inputs.every(Jd))throw new Error("Not finalized");if(e||(this.#e.computeFeeRate(this.data.inputs,r,Bn),this.#e.checkFees(this.#o)),this.#e.extractedTx)return this.#e.extractedTx;const n=this.#e.tx.clone();return this.#e.finalizeAndComputeAmounts(this.data.inputs,n,!0,r,Bn),n}getFeeRate(e=!1){return this.#e.computeFeeRate(this.data.inputs,e,Bn)}getFee(e=!1){return this.#e.computeFee(this.data.inputs,e,Bn)}finalizeAllInputs(){return tr(this.data.inputs,0),sa(this.data.inputs.length).forEach(e=>this.finalizeInput(e)),this}finalizeInput(e,r,n){const i=tr(this.data.inputs,e);return en(i)?this.#a(e,i,void 0,r):this.#i(e,i,r,n??!0)}finalizeTaprootInput(e,r,n=Fv){const i=tr(this.data.inputs,e);if(en(i))return this.#a(e,i,r,n);throw new Error(`Cannot finalize input #${e}. Not Taproot.`)}getInputType(e){const r=tr(this.data.inputs,e),n=this.#e.getScriptFromUtxo(e,r,Bn),i=yl(n,e,"input",r.redeemScript||this.#e.redeemFromFinalScriptSig(r.finalScriptSig),r.witnessScript||this.#e.redeemFromFinalWitnessScript(r.finalScriptWitness)),o=i.type==="raw"?"":i.type+"-",s=_0(i.meaningfulScript);return o+s}inputHasPubkey(e,r){const n=tr(this.data.inputs,e);return this.#e.pubkeyInInput(r,n,e,Bn)}inputHasHDKey(e,r){const n=tr(this.data.inputs,e),i=this.#r.bip32DerivationIsMine(r);return!!n.bip32Derivation&&n.bip32Derivation.some(i)}outputHasPubkey(e,r){const n=Ka(this.data.outputs,e);return this.#e.pubkeyInOutput(r,n,e)}outputHasHDKey(e,r){const n=Ka(this.data.outputs,e),i=this.#r.bip32DerivationIsMine(r);return!!n.bip32Derivation&&n.bip32Derivation.some(i)}validateSignaturesOfAllInputs(e){return tr(this.data.inputs,0),sa(this.data.inputs.length).map(r=>this.validateSignaturesOfInput(r,e)).every(r=>r)}validateSignaturesOfInput(e,r,n){const i=this.data.inputs[e];return en(i)?this.#l(e,r,n):this.#u(e,r,n)}signAllInputsHD(e,r=[gt.SIGHASH_ALL]){if(!e||!e.publicKey||!e.fingerprint)throw new Error("Need HDSigner to sign input");const n=[];for(const i of sa(this.data.inputs.length))try{this.signInputHD(i,e,r),n.push(!0)}catch{n.push(!1)}if(n.every(i=>!i))throw new Error("No inputs were signed");return this}async signAllInputsHDAsync(e,r=[gt.SIGHASH_ALL]){if(!e||!e.publicKey||!e.fingerprint)throw new Error("Need HDSigner to sign input");const n=[],i=[];for(const o of sa(this.data.inputs.length))i.push(this.signInputHDAsync(o,e,r).then(()=>{n.push(!0)},()=>{n.push(!1)}));if(await Promise.all(i),n.every(o=>!o))throw new Error("No inputs were signed")}signInputHD(e,r,n=[gt.SIGHASH_ALL]){if(!r||!r.publicKey||!r.fingerprint)throw new Error("Need HDSigner to sign input");return this.#r.getSignersFromHD(e,this.data.inputs,r).forEach(i=>this.signInput(e,i,n)),this}async signInputHDAsync(e,r,n=[gt.SIGHASH_ALL]){if(!r||!r.publicKey||!r.fingerprint)throw new Error("Need HDSigner to sign input");const i=this.#r.getSignersFromHD(e,this.data.inputs,r).map(o=>this.signInputAsync(e,o,n));await Promise.all(i)}signAllInputs(e,r){if(!e||!e.publicKey)throw new Error("Need Signer to sign input");const n=[];for(const i of sa(this.data.inputs.length))try{this.signInput(i,e,r),n.push(!0)}catch{n.push(!1)}if(n.every(i=>!i))throw new Error("No inputs were signed");return this}async signAllInputsAsync(e,r){if(!e||!e.publicKey)throw new Error("Need Signer to sign input");const n=[],i=[];for(const[o]of this.data.inputs.entries())i.push(this.signInputAsync(o,e,r).then(()=>{n.push(!0)},()=>{n.push(!1)}));if(await Promise.all(i),n.every(o=>!o))throw new Error("No inputs were signed")}signInput(e,r,n){if(!r||!r.publicKey)throw new Error("Need Signer to sign input");const i=tr(this.data.inputs,e);return en(i)?this.#f(e,i,r,void 0,n):this.#c(e,r,n)}signTaprootInput(e,r,n,i){if(!r||!r.publicKey)throw new Error("Need Signer to sign input");const o=tr(this.data.inputs,e);if(en(o))return this.#f(e,o,r,n,i);throw new Error(`Input #${e} is not of type Taproot.`)}async signInputAsync(e,r,n){if(!r||!r.publicKey)throw new Error("Need Signer to sign input");const i=tr(this.data.inputs,e);return en(i)?this.#d(e,i,r,void 0,n):this.#h(e,r,n)}async signTaprootInputAsync(e,r,n,i){if(!r||!r.publicKey)throw new Error("Need Signer to sign input");const o=tr(this.data.inputs,e);if(en(o))return this.#d(e,o,r,n,i);throw new Error(`Input #${e} is not of type Taproot.`)}toBuffer(){return Zh(this.#e),new Uint8Array(this.data.toBuffer())}toHex(){return Zh(this.#e),this.data.toHex()}toBase64(){return Zh(this.#e),this.data.toBase64()}updateGlobal(e){return this.data.updateGlobal(e),this}updateInput(e,r){r.witnessScript&&gl(r.witnessScript),Kv(this.data.inputs[e],r,"updateInput");const n=r.witnessUtxo?{...r,witnessUtxo:{script:r.witnessUtxo.script,value:typeof r.witnessUtxo.value=="bigint"?r.witnessUtxo.value:BigInt(r.witnessUtxo.value)}}:r;return this.data.updateInput(e,n),r.nonWitnessUtxo&&this.#e.addNonWitnessTxCache(this.data.inputs[e],e,Bn),this}updateOutput(e,r){const n=this.data.outputs[e];return jv(n,r,"updateOutput"),this.data.updateOutput(e,r),this}addUnknownKeyValToGlobal(e){return this.data.addUnknownKeyValToGlobal(e),this}addUnknownKeyValToInput(e,r){return this.data.addUnknownKeyValToInput(e,r),this}addUnknownKeyValToOutput(e,r){return this.data.addUnknownKeyValToOutput(e,r),this}clearFinalizedInput(e){return this.data.clearFinalizedInput(e),this}checkTaprootHashesForSig(e,r,n,i,o){if(!("signSchnorr"in n)||typeof n.signSchnorr!="function")throw new Error(`Need Schnorr Signer to sign taproot input #${e}.`);const s=n.publicKey instanceof Uint8Array?n.publicKey:new Uint8Array(n.publicKey),a=this.#r.getTaprootHashesForSig(e,r,this.data.inputs,s,i,o);if(!a||!a.length)throw new Error(`Can not sign for input #${e} with the key ${ve(s)}`);return a}#i(e,r,n=x0,i=!0){const{script:o,isP2SH:s,isP2WSH:a,isSegwit:l}=this.#n.getScriptFromInput(e,r);if(!o)throw new Error(`No script found for input #${e}`);WR(r);const{finalScriptSig:f,finalScriptWitness:u}=n(e,r,o,l,s,a,i);if(f&&this.data.updateInput(e,{finalScriptSig:f}),u&&this.data.updateInput(e,{finalScriptWitness:u}),!f&&!u)throw new Error(`Unknown error finalizing input #${e}`);return this.data.clearFinalizedInput(e),this}#a(e,r,n,i=Fv){if(!r.witnessUtxo)throw new Error(`Cannot finalize input #${e}. Missing witness utxo.`);if(r.tapKeySig){const o=pu({output:r.witnessUtxo.script,signature:r.tapKeySig});if(!o.witness)throw new Error("Cannot finalize taproot key spend");const s=ka(o.witness);this.data.updateInput(e,{finalScriptWitness:s})}else{const{finalScriptWitness:o}=i(e,r,n);this.data.updateInput(e,{finalScriptWitness:o})}return this.data.clearFinalizedInput(e),this}#u(e,r,n){const i=this.data.inputs[e],o=i?.partialSig;if(!i||!o||o.length<1)throw new Error("No signatures to validate");if(typeof r!="function")throw new Error("Need validator function to validate signatures");const s=n?o.filter(p=>_e(p.pubkey,n)):o;if(s.length<1)throw new Error("No signatures for this pubkey");const a=[];let l,f,u;for(const p of s){const y=p.signature,w=p.pubkey,A=Bo.decode(y),{hash:S,script:k}=u!==A.hashType||!l||!f?this.#r.getHashForSig(e,Object.assign({},i,{sighashType:A.hashType}),!0):{hash:l,script:f};u=A.hashType,l=S,f=k,v5(w,k,"verify"),a.push(r(w,S,A.signature))}return a.every(p=>p)}#l(e,r,n){const i=this.data.inputs[e],o=i?.tapKeySig,s=i?.tapScriptSig;if(!i&&!o&&!(s&&!s.length))throw new Error("No signatures to validate");if(typeof r!="function")throw new Error("Need validator function to validate signatures");const a=n?nt(n):void 0,l=a?this.#r.getTaprootHashesForSig(e,i,this.data.inputs,a):this.#r.getAllTaprootHashesForSig(e,i,this.data.inputs);if(!l.length)throw new Error("No signatures for this pubkey");const f=l.find(p=>!p.leafHash);let u=0;if(o&&f){if(!r(f.pubkey,f.hash,this.#r.trimTaprootSig(o)))return!1;u++}if(s)for(const p of s){const y=p.pubkey,w=l.find(A=>_e(y,A.pubkey));if(w){if(!r(y,w.hash,this.#r.trimTaprootSig(p.signature)))return!1;u++}}return u>0}#c(e,r,n=[gt.SIGHASH_ALL]){const i=r.publicKey instanceof Uint8Array?r.publicKey:new Uint8Array(r.publicKey),{hash:o,sighashType:s}=this.#r.getHashAndSighashType(this.data.inputs,e,i,n),a=r.sign(o),l=[{pubkey:i,signature:Bo.encode(a instanceof Uint8Array?a:new Uint8Array(a),s)}];return this.data.updateInput(e,{partialSig:l}),this.#e.hasSignatures=!0,this}#f(e,r,n,i,o=[gt.SIGHASH_DEFAULT]){const s=n.publicKey instanceof Uint8Array?n.publicKey:new Uint8Array(n.publicKey);if(!("signSchnorr"in n)||typeof n.signSchnorr!="function")throw new Error(`Need Schnorr Signer to sign taproot input #${e}.`);const a=this.checkTaprootHashesForSig(e,r,n,i,o),l=n.signSchnorr.bind(n),f=a.filter(p=>!p.leafHash).map(p=>hs(l(p.hash),r.sighashType))[0],u=a.filter(p=>!!p.leafHash).map(p=>({pubkey:nt(s),signature:hs(l(p.hash),r.sighashType),leafHash:p.leafHash}));return f&&(this.data.updateInput(e,{tapKeySig:f}),this.#e.hasSignatures=!0),u.length&&(this.data.updateInput(e,{tapScriptSig:u}),this.#e.hasSignatures=!0),this}async#h(e,r,n=[gt.SIGHASH_ALL]){const i=r.publicKey instanceof Uint8Array?r.publicKey:new Uint8Array(r.publicKey),{hash:o,sighashType:s}=this.#r.getHashAndSighashType(this.data.inputs,e,i,n),a=await r.sign(o),l=a instanceof Uint8Array?a:new Uint8Array(a),f=[{pubkey:i,signature:Bo.encode(l,s)}];this.data.updateInput(e,{partialSig:f}),this.#e.hasSignatures=!0}async#d(e,r,n,i,o=[gt.SIGHASH_DEFAULT]){const s=n.publicKey instanceof Uint8Array?n.publicKey:new Uint8Array(n.publicKey);if(!("signSchnorr"in n)||typeof n.signSchnorr!="function")throw new Error(`Need Schnorr Signer to sign taproot input #${e}.`);const a=this.checkTaprootHashesForSig(e,r,n,i,o),l=n.signSchnorr.bind(n),f=a.find(p=>!p.leafHash);if(f){const p=await l(f.hash),y=hs(p,r.sighashType);this.data.updateInput(e,{tapKeySig:y}),this.#e.hasSignatures=!0}const u=a.filter(p=>!!p.leafHash);if(u.length){const p=await Promise.all(u.map(async y=>{const w=await l(y.hash);return{pubkey:nt(s),signature:hs(w,r.sighashType),leafHash:y.leafHash}}));this.data.updateInput(e,{tapScriptSig:p}),this.#e.hasSignatures=!0}}}const Wi={payments:At,script:st,crypto:Kt},ml=Symbol;typeof ml.dispose!="symbol"&&(ml.dispose=Symbol.for("Symbol.dispose"));typeof ml.asyncDispose!="symbol"&&(ml.asyncDispose=Symbol.for("Symbol.asyncDispose"));const o$="1.8.0-beta.1";function s$(t,e={}){return Pt.from(Ll.gzip(t,{level:e.level||6}))}function a$(t){return Pt.from(Ll.ungzip(t))}function u$(t,e={}){return Pt.from(Ll.deflate(t,{level:e.level||6}))}function c$(t){return Pt.from(Ll.inflate(t))}const nE={gzipSync:s$,gunzipSync:a$,deflateSync:u$,inflateSync:c$};class sn{static zlibOptions={level:9,maxOutputLength:1024*1024*16};static compress(e){return nE.gzipSync(e,sn.zlibOptions)}static decompress(e){return nE.gunzipSync(e,sn.zlibOptions)}}const yr=$8(),l$=yr;uU(l$);const I5=typeof Qw=="function"?Qw:ct.BIP32Factory;if(!I5)throw new Error("Failed to load BIP32 library");const cs=Tk.Point,f$=cs.Fn.ORDER,h$=new Uint8Array([84,97,112,84,119,101,97,107]),iE=Ns(h$);function d$(t){return Ns(rn(iE,iE,t))}class ot{static BIP32=I5(yr);static ECPairSigner=$i;static{cs.BASE.precompute(8)}static fromWIF(e,r=De.bitcoin){return $i.fromWIF(yr,e,r)}static fromPrivateKey(e,r=De.bitcoin){return $i.fromPrivateKey(yr,e,r)}static fromPublicKey(e,r=De.bitcoin){return $i.fromPublicKey(yr,e,r)}static generateMultiSigAddress(e,r,n=De.bitcoin){const i=this.verifyPubKeys(e,n);if(i.length!==e.length)throw new Error("Contains invalid public keys");const o=At.p2ms({m:r,pubkeys:i,network:n}),s=At.p2wsh({redeem:o,network:n}).address;if(!s)throw new Error("Failed to generate address");return s}static verifyPubKeys(e,r=De.bitcoin){return e.map(n=>{const i=ot.fromPublicKey(n,r);if(!i)throw new Error("Failed to regenerate key");return i.publicKey})}static getP2WPKHAddress(e,r=De.bitcoin){const n=At.p2wpkh({pubkey:e.publicKey,network:r});if(!n.address)throw new Error("Failed to generate wallet");return n.address}static tweakedPubKeyToAddress(e,r){e.startsWith("0x")&&(e=e.slice(2));let n=Ee(e);return n.length!==32&&(n=nt(n)),ot.tweakedPubKeyBufferToAddress(n,r)}static tweakedPubKeyBufferToAddress(e,r){const{address:n}=At.p2tr({pubkey:e,network:r});if(!n)throw new Error("Failed to generate Taproot address");return n}static p2op(e,r=De.bitcoin,n=0){const i=jt([new Uint8Array([n]),Wi.crypto.hash160(e)]);if(i.length<2||i.length>40)throw new Error("Witness program must be 2-40 bytes.");const o=st.compile([ge.OP_16,i]);return v0(o,r)}static xOnlyTweakedPubKeyToAddress(e,r){e.startsWith("0x")&&(e=e.slice(2));const n=Ee(e);if(n.length!==32)throw new Error("Invalid xOnly public key length");const{address:i}=At.p2tr({pubkey:n,network:r});if(!i)throw new Error("Failed to generate Taproot address");return i}static tweakPublicKey(e){typeof e=="string"&&e.startsWith("0x")&&(e=e.slice(2));const r=typeof e=="string"?e:ve(e),n=cs.fromHex(r),i=(n.y&1n)===0n?n:n.negate(),o=i.toBytes(!0).subarray(1),s=d$(o),a=Jr(Ja(s),f$);return i.add(cs.BASE.multiply(a)).toBytes(!0)}static tweakBatchSharedT(e,r){const n=cs.BASE.multiply(r);return e.map(i=>{const o=cs.fromHex(ve(i));return(o.y%2n===0n?o:o.negate()).add(n).toBytes(!0)})}static generateWallet(e=De.bitcoin,r=ct.MLDSASecurityLevel.LEVEL2){const n=$i.makeRandom(yr,e,{rng:s=>ds(s)}),i=this.getP2WPKHAddress(n,e);if(!i)throw new Error("Failed to generate wallet");const o=this.generateQuantumKeyPair(r,e);return{address:i,privateKey:n.toWIF(),publicKey:ve(n.publicKey),quantumPrivateKey:ve(o.privateKey),quantumPublicKey:ve(o.publicKey)}}static generateQuantumKeyPair(e=ct.MLDSASecurityLevel.LEVEL2,r=De.bitcoin){const n=ds(64),i=ct.QuantumBIP32Factory.fromSeed(n,r,e);if(!i.privateKey||!i.publicKey)throw new Error("Failed to generate quantum keypair");return{privateKey:new Uint8Array(i.privateKey),publicKey:new Uint8Array(i.publicKey)}}static verifyContractAddress(e,r=De.bitcoin){return!!hn.toOutputScript(e,r)}static getLegacySegwitAddress(e,r=De.bitcoin){const n=At.p2sh({redeem:At.p2wpkh({pubkey:e.publicKey,network:r}),network:r});if(!n.address)throw new Error("Failed to generate wallet");return n.address}static getLegacyAddress(e,r=De.bitcoin){const n=At.p2pkh({pubkey:e.publicKey,network:r});if(!n.address)throw new Error("Failed to generate wallet");return n.address}static getP2PKH(e,r=De.bitcoin){const n=At.p2pkh({pubkey:e,network:r});if(!n.address)throw new Error("Failed to generate wallet");return n.address}static getP2PKAddress(e,r=De.bitcoin){const n=At.p2pk({pubkey:e.publicKey,network:r});if(!n.output)throw new Error("Failed to generate wallet");return"0x"+ve(n.output)}static generateRandomKeyPair(e=De.bitcoin){return $i.makeRandom(yr,e,{rng:r=>ds(r)})}static fromSeed(e,r=De.bitcoin){return this.BIP32.fromSeed(e,r)}static getTaprootAddress(e,r=De.bitcoin){const{address:n}=At.p2tr({internalPubkey:nt(e.publicKey),network:r});if(!n)throw new Error("Failed to generate sender address for transaction");return n}static getTaprootAddressFromAddress(e,r=De.bitcoin){const{address:n}=At.p2tr({address:e,network:r});if(!n)throw new Error("Failed to generate sender address for transaction");return n}static fromSeedKeyPair(e,r=De.bitcoin){const n=this.BIP32.fromSeed(e,r).privateKey;if(!n)throw new Error("Failed to generate key pair");return $i.fromPrivateKey(yr,n,r)}}var Kr=(t=>(t[t.ACCESS_LIST=1]="ACCESS_LIST",t[t.EPOCH_SUBMISSION=2]="EPOCH_SUBMISSION",t[t.MLDSA_LINK_PUBKEY=4]="MLDSA_LINK_PUBKEY",t))(Kr||{}),jn=(t=>(t[t.ACCESS_LIST=1]="ACCESS_LIST",t[t.EPOCH_SUBMISSION=2]="EPOCH_SUBMISSION",t[t.MLDSA_LINK_PUBKEY=3]="MLDSA_LINK_PUBKEY",t))(jn||{});const Mt=32,vs=64,Es=64,p$=4,ja=32,Ia=16,bl=8,Ss=4,As=2,wl=1,g$=32,_a=16,Va=8,Wa=4,qa=2,Ga=1,y$=1;function m$(t,e,r,n){throw new Error(`${e} (${r}: ${n})`)}function b$(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate global object")}const oE=b$();oE.crypto||oE.msCrypto;function ep(t){switch(t){case"sha256":return Ns.create();case"sha512":return OE.create()}m$(!1,"invalid hashing algorithm name","algorithm",t)}const w$=/^[0-9a-fA-F]+$/;class hr{static btcToSatoshi(e){return BigInt(e*1e8)}static rndBytes(){const e=hr.getSafeRandomValues(64);return Pt.from(e)}static getSafeRandomValues(e){if(typeof globalThis.window<"u"&&globalThis.window.crypto&&typeof globalThis.window.crypto.getRandomValues=="function"){const r=new Uint8Array(e);return window.crypto.getRandomValues(r),Pt.from(r)}else if(globalThis.crypto&&typeof globalThis.crypto.getRandomValues=="function"){const r=new Uint8Array(e);return globalThis.crypto.getRandomValues(r),Pt.from(r)}else throw console.log("No secure random number generator available. Please upgrade your environment.",globalThis.window.crypto,globalThis.crypto),new Error("No secure random number generator available. Please upgrade your environment.")}static isValidHex(e){return w$.test(e)}static opnetHash(e){const r=ep("sha512");r.update(e);const n=r.digest();return`0x${Pt.from(n).toString("hex")}`}}class yn{static isP2WDAUTXO(e){if(!e.witnessScript)return!1;const r=e.witnessScript instanceof Uint8Array?e.witnessScript:Ee(e.witnessScript);return this.isP2WDAWitnessScript(r)}static isP2WDAWitnessScript(e){try{const r=st.decompile(e);if(!r||r.length!==7)return!1;for(let n=0;n<5;n++)if(r[n]!==ge.OP_2DROP)return!1;return r[5]instanceof Uint8Array&&r[5].length===33&&r[6]===ge.OP_CHECKSIG}catch{return!1}}static generateP2WDAAddress(e,r){if(e.length!==33)throw new Error("Public key must be 33 bytes (compressed)");const n=st.compile([ge.OP_2DROP,ge.OP_2DROP,ge.OP_2DROP,ge.OP_2DROP,ge.OP_2DROP,e,ge.OP_CHECKSIG]),i=At.p2wsh({redeem:{output:n},network:r});if(!i.address||!i.output)throw new Error("Failed to generate P2WDA address");return{address:i.address,witnessScript:n,scriptPubKey:i.output}}static extractPublicKeyFromP2WDA(e){try{const r=st.decompile(e);if(!r||r.length!==7)return null;for(let n=0;n<5;n++)if(r[n]!==ge.OP_2DROP)return null;return r[5]instanceof Uint8Array&&r[5].length===33&&r[6]===ge.OP_CHECKSIG?r[5]:null}catch{return null}}static createSimpleP2WDAWitness(e,r){const n=[e];for(let i=0;i<10;i++)n.push(new Uint8Array(0));return n.push(r),n}static validateP2WDASignature(e,r,n){return r.length===64}static estimateP2WDAWitnessSize(e=0){return 72+e+39+12}static couldBeP2WDA(e){return e.length===34&&e[0]===0&&e[1]===32}}var Fi=(t=>(t.P2PKH="P2PKH",t.P2OP="P2OP",t.P2SH_OR_P2SH_P2WPKH="P2SH_OR_P2SH-P2WPKH",t.P2PK="P2PK",t.P2TR="P2TR",t.P2WPKH="P2WPKH",t.P2WSH="P2WSH",t.P2WDA="P2WDA",t))(Fi||{});class pn{static isValidP2TRAddress(e,r){if(!e||e.length<50)return!1;let n=!1;try{hn.toOutputScript(e,r),n=hn.fromBech32(e).version===1}catch{}return n}static isP2WPKHAddress(e,r){if(!e||e.length<20||e.length>50)return!1;let n=!1;try{const i=hn.fromBech32(e);hn.toOutputScript(e,r),n=i.version===0&&i.data.length===20}catch{}return n}static isP2WDAWitnessScript(e){return yn.isP2WDAWitnessScript(e)}static isP2PKHOrP2SH(e,r){try{const n=hn.fromBase58Check(e);return n.version===r.pubKeyHash?!0:n.version===r.scriptHash}catch{return!1}}static isValidPublicKey(e,r){try{if(e.startsWith("0x")&&(e=e.slice(2)),!hr.isValidHex(e))return!1;if(e.length===64)return!0;const n=Ee(e);if(e.length===130&&n[0]===6||n[0]===7)return!0;if(e.length===66||e.length===130)return ot.fromPublicKey(n,r),!0}catch{return!1}return!1}static isValidMLDSAPublicKey(e){try{let r;if(typeof e!="string"&&e instanceof Uint8Array)r=e.length;else{if(e.startsWith("0x")&&(e=e.slice(2)),!hr.isValidHex(e))return null;r=e.length/2}switch(r){case 1312:return ct.MLDSASecurityLevel.LEVEL2;case 1952:return ct.MLDSASecurityLevel.LEVEL3;case 2592:return ct.MLDSASecurityLevel.LEVEL5;default:return null}}catch{return null}}static isValidP2OPAddress(e,r){if(!e||e.length<20)return!1;try{const n=hn.fromBech32(e);return n.prefix===r.bech32||n.prefix===r.bech32Opnet?n.version===16&&n.data.length===21:!1}catch{return!1}}static requireRedeemScript(e,r){try{const n=hn.fromBase58Check(e);return n.version===r.pubKeyHash?!1:n.version===r.scriptHash}catch{return!1}}static detectAddressType(e,r){if(pn.isValidPublicKey(e,r))return"P2PK";try{const n=hn.fromBase58Check(e);if(n.version===r.pubKeyHash)return"P2PKH";if(n.version===r.scriptHash)return"P2SH_OR_P2SH-P2WPKH"}catch{}try{const n=hn.fromBech32(e);if((n.prefix===r.bech32Opnet||n.prefix===r.bech32)&&n.version===16&&n.data.length===21)return"P2OP";if(n.prefix===r.bech32){if(n.version===0&&n.data.length===20)return"P2WPKH";if(n.version===0&&n.data.length===32)return"P2WSH";if(n.version===1&&n.data.length===32)return"P2TR"}}catch{}return null}static detectAddressTypeWithWitnessScript(e,r,n){const i=pn.detectAddressType(e,r);return i==="P2WSH"&&n&&pn.isP2WDAWitnessScript(n)?"P2WDA":i}static validateP2WDAAddress(e,r,n){try{if(pn.detectAddressType(e,r)!=="P2WSH")return{isValid:!1,isPotentiallyP2WDA:!1,isDefinitelyP2WDA:!1,error:"Not a P2WSH address"};if(!n)return{isValid:!0,isPotentiallyP2WDA:!0,isDefinitelyP2WDA:!1};if(!pn.isP2WDAWitnessScript(n))return{isValid:!0,isPotentiallyP2WDA:!0,isDefinitelyP2WDA:!1,error:"Witness script does not match P2WDA pattern"};if(At.p2wsh({redeem:{output:n},network:r}).address!==e)return{isValid:!1,isPotentiallyP2WDA:!1,isDefinitelyP2WDA:!1,error:"Witness script does not match address"};const i=yn.extractPublicKeyFromP2WDA(n);return i?{isValid:!0,isPotentiallyP2WDA:!0,isDefinitelyP2WDA:!0,publicKey:i}:{isValid:!1,isPotentiallyP2WDA:!1,isDefinitelyP2WDA:!1,error:"Failed to extract public key from witness script"}}catch(i){return{isValid:!1,isPotentiallyP2WDA:!1,isDefinitelyP2WDA:!1,error:i.message}}}}const co=0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2fn;class _5{maxTries;constructor(e=1e4){this.maxTries=e}findOrDeriveValidPoint(e,r=!0,n=this.maxTries){if(e.length!==32)throw new Error("xBytes must be exactly 32 bytes.");let i=this.bytesToBigInt(e)%co,o=this.isValidX(i);if(r&&o===null)throw new Error("The given x is not a valid curve point.");let s=0;for(;o===null;)if(i=(i+1n)%co,o=this.isValidX(i),s++,s>n)throw new Error(`Could not find a valid X point within ${n} increments.`);const a=o,l=(co-a)%co;return{x:i,y1:a,y2:l}}getCanonicalY(e,r){return e<r?e:r}getHybridPublicKey(e,r){const n=r%2n===0n?6:7,i=this.bigIntTo32Bytes(e),o=this.bigIntTo32Bytes(r),s=new Uint8Array(65);return s[0]=n,s.set(i,1),s.set(o,33),s}isValidX(e){const r=(this.modPow(e,3n,co)+7n)%co;return this.sqrtModP(r,co)}modPow(e,r,n){let i=1n,o=e%n,s=r;for(;s>0;)(s&1n)===1n&&(i=i*o%n),o=o*o%n,s>>=1n;return i}sqrtModP(e,r){const n=this.modPow(e,r+1n>>2n,r);return n*n%r!==e%r?null:n}bytesToBigInt(e){let r=0n;for(const n of e)r=r<<8n|BigInt(n);return r}bigIntTo32Bytes(e){const r=new Uint8Array(32);for(let n=31;n>=0;n--)r[n]=Number(e&0xffn),e>>=8n;return r}}class v${deriver=new _5;generateHybridKeyFromHash(e){const r=this.deriver.findOrDeriveValidPoint(new Uint8Array(e),!1),n=this.deriver.getCanonicalY(r.y1,r.y2);return new Uint8Array(this.deriver.getHybridPublicKey(r.x,n))}}const tp=new v$;class nn{static UNSPENDABLE_INTERNAL_KEY=Ee("50929b74c1a04954b78b4b6035e97a5e078a5a0f28ec96d547bfee9ace803ac0");static CSV_BLOCKS=75;static generateTimeLockAddress(e,r=De.bitcoin,n=nn.CSV_BLOCKS){const i=this.generateTimeLockScript(e,n),o=Wi.payments.p2wsh({redeem:{output:i},network:r});if(!o.address)throw new Error("Failed to generate P2WSH address");return{address:o.address,witnessScript:i}}static generateTimeLockAddressP2TR(e,r=De.bitcoin,n=nn.CSV_BLOCKS){if(e.length!==32)throw new Error("Public key must be 32 bytes for Taproot");const i=this.generateTimeLockScript(e,n),o=Wi.payments.p2tr({redeem:{output:i},network:r,internalPubkey:nn.UNSPENDABLE_INTERNAL_KEY});if(!o.address)throw new Error("Failed to generate P2TR address");return o.address}static generateTimeLockScript(e,r=nn.CSV_BLOCKS){return st.compile([st.number.encode(r),ge.OP_CHECKSEQUENCEVERIFY,ge.OP_DROP,e,ge.OP_CHECKSIG])}}const E$=[1312,1952,2592];class $t extends Uint8Array{#e;#s;#t;#o;#r;#n;#i;#a;#u;#l;#c;#f;#h;#d;#p;#y=!1;#g;constructor(e,r){if(super(Mt),!!e){if(r){if(![Mt,33,65].includes(r.length))throw new Error(`Invalid public key length ${r.length}`);this.#p=new Uint8Array(r.length),this.#p.set(r)}this.setMldsaKey(e)}}static get[Symbol.species](){return Uint8Array}get mldsaLevel(){return this.#d}set mldsaLevel(e){this.#d=e}get originalMDLSAPublicKey(){return this.#h}set originalMDLSAPublicKey(e){this.#h=e?new Uint8Array(e):void 0}get originalPublicKey(){return this.ensureLegacyProcessed(),this.#o}get mldsaPublicKey(){return this.#u}get legacyPublicKey(){return this.ensureLegacyProcessed(),this.#g}get keyPair(){if(this.ensureLegacyProcessed(),!this.#r)throw new Error("Legacy public key not set for address");return this.#r}static dead(){return $t.fromString("0x0000000000000000000000000000000000000000000000000000000000000000","0x04678afdb0fe5548271967f1a67130b7105cd6a828e03909a67962e0ea1f61deb649f6bc3f4cef38c4f35504e51ec112de5c384df7ba0b8d578a4c702b6bf11d5f")}static fromString(e,r){if(!e)throw new Error("Invalid public key");if(e.startsWith("0x")&&(e=e.slice(2)),!hr.isValidHex(e))throw new Error('You must only pass public keys in hexadecimal format. If you have an address such as bc1q... you must convert it to a public key first. Please refer to await provider.getPublicKeyInfo("bc1q..."). If the public key associated with the address is not found, you must force the user to enter the destination public key. It looks like: 0x020373626d317ae8788ce3280b491068610d840c23ecb64c14075bbb9f670af52c.');let n;if(r){if(r.startsWith("0x")&&(r=r.slice(2)),!hr.isValidHex(r))throw new Error('You must only pass classical public keys in hexadecimal format. If you have an address such as bc1q... you must convert it to a public key first. Please refer to await provider.getPublicKeyInfo("bc1q..."). If the public key associated with the address is not found, you must force the user to enter the destination public key. It looks like: 0x020373626d317ae8788ce3280b491068610d840c23ecb64c14075bbb9f670af52c.');n=Ee(r)}return new $t(Ee(e),n)}static wrap(e){return new $t(e)}static uncompressedToCompressed(e){const r=Uint8Array.from(e),n=r.slice(1,33),i=r.slice(33),o=new Uint8Array(33);return o[0]=2+(i[i.length-1]&1),o.set(n,1),o}[Symbol.dispose](){this.fill(0),this.#e=void 0,this.#s=void 0,this.#t=void 0,this.#o=void 0,this.#r=void 0,this.#n=void 0,this.#i=void 0,this.#a=void 0,this.#u?.fill(0),this.#u=void 0,this.#l=void 0,this.#c=void 0,this.#f=void 0,this.#h?.fill(0),this.#h=void 0,this.#d=void 0,this.#y=!1,this.#g=void 0}static fromBigInt(e,r){const n=$t.bigintToUint8Array(e),i=r!==void 0?$t.bigintToUint8Array(r):void 0;return new $t(n,i)}static fromUint64Array(e,r,n,i){const o=new Uint8Array(32),s=new DataView(o.buffer);return s.setBigUint64(0,e,!1),s.setBigUint64(8,r,!1),s.setBigUint64(16,n,!1),s.setBigUint64(24,i,!1),new $t(o)}static bigintToUint8Array(e){const r=new Uint8Array(32),n=new DataView(r.buffer);return n.setBigUint64(0,e>>192n&0xffffffffffffffffn,!1),n.setBigUint64(8,e>>128n&0xffffffffffffffffn,!1),n.setBigUint64(16,e>>64n&0xffffffffffffffffn,!1),n.setBigUint64(24,e&0xffffffffffffffffn,!1),r}toUint64Array(){if(this.#f!==void 0)return this.#f;const e=new DataView(this.buffer,this.byteOffset,32);return this.#f=[e.getBigUint64(0,!1),e.getBigUint64(8,!1),e.getBigUint64(16,!1),e.getBigUint64(24,!1)],this.#f}isDead(){for(let e=0;e<Mt;e++)if(this[e]!==0)return!1;return!0}toHex(){return"0x"+ve(this)}tweakedToHex(){const e=this.legacyPublicKey;if(!e)throw new Error("Legacy public key not set");return"0x"+ve(e)}toBuffer(){return new Uint8Array(this)}tweakedPublicKeyToBuffer(){const e=this.legacyPublicKey;if(!e)throw new Error("Legacy public key not set");return new Uint8Array(e)}toUncompressedHex(){if(this.ensureLegacyProcessed(),!this.#n)throw new Error("Legacy public key not set");return"0x"+ve(this.#n.uncompressed)}toUncompressedBuffer(){if(this.ensureLegacyProcessed(),!this.#n)throw new Error("Legacy public key not set");return this.#n.uncompressed}toHybridPublicKeyHex(){if(this.ensureLegacyProcessed(),!this.#n)throw new Error("Legacy public key not set");return"0x"+ve(this.#n.hybrid)}toHybridPublicKeyBuffer(){if(this.ensureLegacyProcessed(),!this.#n)throw new Error("Legacy public key not set");return this.#n.hybrid}originalPublicKeyBuffer(){if(this.ensureLegacyProcessed(),!this.#o)throw new Error("Legacy public key not set");return new Uint8Array(this.#o)}toBigInt(){if(this.#l!==void 0)return this.#l;const e=new DataView(this.buffer,this.byteOffset,32);return this.#l=e.getBigUint64(0,!1)<<192n|e.getBigUint64(8,!1)<<128n|e.getBigUint64(16,!1)<<64n|e.getBigUint64(24,!1),this.#l}tweakedToBigInt(){if(!this.legacyPublicKey)throw new Error("Legacy public key not set");if(this.#c!==void 0)return this.#c;const e=new DataView(this.legacyPublicKey.buffer,this.byteOffset,32);return this.#c=e.getBigUint64(0,!1)<<192n|e.getBigUint64(8,!1)<<128n|e.getBigUint64(16,!1)<<64n|e.getBigUint64(24,!1),this.#c}equals(e){const r=this;if(e.length!==r.length)return!1;for(let n=0;n<r.length;n++)if(r[n]!==e[n])return!1;return!0}lessThan(e){const r=this;for(let n=0;n<Mt;n++){const i=r[n],o=e[n];if(i<o)return!0;if(i>o)return!1}return!1}greaterThan(e){const r=this;for(let n=0;n<Mt;n++){const i=r[n],o=e[n];if(i>o)return!0;if(i<o)return!1}return!1}set(e){this.setMldsaKey(e)}isValidLegacyPublicKey(e){const r=this.legacyPublicKey;if(!r)throw new Error("Legacy key not set.");return pn.isValidPublicKey(ve(r),e)}p2pk(){return this.toHex()}p2wpkh(e){return ot.getP2WPKHAddress(this.keyPair,e)}p2pkh(e){return ot.getLegacyAddress(this.keyPair,e)}p2shp2wpkh(e){return ot.getLegacySegwitAddress(this.keyPair,e)}toString(){return this.toHex()}toJSON(){return this.toHex()}p2tr(e){if(this.#e&&this.#t===e)return this.#e;const r=this.legacyPublicKey;if(!r)throw new Error("Legacy public key not set");const n=ot.tweakedPubKeyBufferToAddress(r,e);if(n)return this.#t=e,this.#e=n,n;throw new Error("Legacy public key not set")}p2wda(e){if(this.#a&&this.#t===e)return this.#a;if(this.ensureLegacyProcessed(),!this.#o)throw new Error("Cannot create P2WDA address: public key not set");const r=new Uint8Array(this.#o);if(r.length!==33)throw new Error("P2WDA requires a compressed public key (33 bytes)");try{const n=yn.generateP2WDAAddress(r,e);return this.#t=e,this.#a=n,{address:n.address,witnessScript:n.witnessScript}}catch(n){throw new Error(`Failed to generate P2WDA address: ${n.message}`)}}toCSV(e,r){const n=Number(e);if(n<1||n>65535)throw new Error("CSV block number must be between 1 and 65535");if(this.ensureLegacyProcessed(),!this.#o)throw new Error("Cannot create CSV address: public key not set");const i=new Uint8Array(this.#o);return nn.generateTimeLockAddress(i,r,n)}toCSVTweaked(e,r){const n=Number(e);if(n<1||n>65535)throw new Error("CSV block number must be between 1 and 65535");if(this.ensureLegacyProcessed(),!this.#o)throw new Error("Cannot create CSV address: public key not set");return nn.generateTimeLockAddressP2TR(this.tweakedPublicKeyToBuffer(),r,n)}p2op(e){if(this.#s&&this.#t===e)return this.#s;const r=ot.p2op(this,e);if(r)return this.#t=e,this.#s=r,r;throw new Error("ML-DSA public key not set")}toTweakedHybridPublicKeyHex(){if(this.ensureLegacyProcessed(),this.ensureTweakedUncompressed(),!this.#i)throw new Error("Legacy public key not set");return"0x"+ve(this.#i)}toTweakedHybridPublicKeyBuffer(){if(this.ensureLegacyProcessed(),this.ensureTweakedUncompressed(),!this.#i)throw new Error("Legacy public key not set");return this.#i}ensureTweakedUncompressed(){if(this.#i)return;const e=this.#g;if(e&&e.length===Mt&&!this.#o)try{this.#i=tp.generateHybridKeyFromHash(e)}catch{}}setMldsaKey(e){if(e.length===Mt){const r=new Uint8Array(Mt);r.set(e),super.set(r)}else{if(!E$.includes(e.length))throw new Error(`Invalid ML-DSA public key length: ${e.length}. Expected 1312 (ML-DSA-44/LEVEL2), 1952 (ML-DSA-65/LEVEL3), or 2592 (ML-DSA-87/LEVEL5) bytes.`);this.#u=new Uint8Array(e.length),this.#u.set(e);const r=Ns(new Uint8Array(e)),n=new Uint8Array(Mt);n.set(r),super.set(n)}}ensureLegacyProcessed(){if(this.#y)return;this.#y=!0;const e=this.#p;e&&(e.length===Mt?this.#g=e:this.autoFormat(e))}autoFormat(e){const r=e[0];r===3||r===2||(r===4||r===6||r===7)&&(e=$t.uncompressedToCompressed(e)),this.#o=Uint8Array.from(e),this.#r=ot.fromPublicKey(this.#o),this.#n=Qc(this.#o);const n=nt(ot.tweakPublicKey(this.#o));this.#i=tp.generateHybridKeyFromHash(n),this.#g=new Uint8Array(Mt),this.#g.set(n)}}class qs{_keys=[];_values={};constructor(e){if(e instanceof qs)this.setAll(e);else if(e)for(const[r,n]of e)this.set(r,n)}get size(){return this._keys.length}setAll(e){this._keys=[...e._keys],this._values={...e._values}}addAll(e){for(const[r,n]of e.entries())this.set(r,n)}*keys(){yield*this._keys}*values(){for(const e of this._keys)yield this._values[e]}*entries(){for(const e of this._keys)yield[e,this._values[e]]}set(e,r){return this.has(e)||this._keys.push(e),this._values[e]=r,this}indexOf(e){if(!this.has(e))return-1;for(let r=0;r<this._keys.length;r++)if(this._keys[r]===e)return r;throw new Error("Key not found, this should not happen.")}get(e){return this._values[e]}has(e){return Object.prototype.hasOwnProperty.call(this._values,e)}delete(e){if(!this.has(e))return!1;const r=this.indexOf(e);return this._keys.splice(r,1),delete this._values[e],!0}clear(){this._keys=[],this._values={}}[Symbol.dispose](){this.clear()}forEach(e,r){for(const n of this._keys)e.call(r,this._values[n],n,this)}*[Symbol.iterator](){for(const e of this._keys)yield[e,this._values[e]]}}class x5{items;constructor(e){if(this.items=new qs,e)for(const[r,n]of e)this.set(r,n)}get size(){return this.items.size}set(e,r){const n=e.toBigInt();return this.items.set(n,r),this}get(e){return this.items.get(e.toBigInt())}has(e){return this.items.has(e.toBigInt())}delete(e){const r=e.toBigInt();return this.items.delete(r)}clear(){this.items.clear()}[Symbol.dispose](){this.clear()}indexOf(e){return this.items.indexOf(e.toBigInt())}*entries(){for(const[e,r]of this.items.entries())yield[$t.fromBigInt(e),r]}*keys(){for(const e of this.items.keys())yield $t.fromBigInt(e)}*values(){for(const e of this.items.values())yield e}forEach(e,r){for(const[n,i]of this.items.entries()){const o=$t.fromBigInt(n);e.call(r,i,o,this)}}*[Symbol.iterator](){yield*this.entries()}}class T5{indexMap;_keys=[];_values=[];constructor(e){if(this.indexMap=new qs,e)for(const[r,n]of e)this.set(r,n)}get size(){return this._keys.length}set(e,r){const n=e.tweakedToBigInt(),i=this.indexMap.get(n);if(i!==void 0)this._values[i]=r;else{const o=this._keys.length;this._keys.push(e),this._values.push(r),this.indexMap.set(n,o)}return this}get(e){const r=e.tweakedToBigInt(),n=this.indexMap.get(r);if(n!==void 0)return this._values[n]}has(e){return this.indexMap.has(e.tweakedToBigInt())}delete(e){const r=e.tweakedToBigInt(),n=this.indexMap.get(r);if(n===void 0)return!1;this._keys.splice(n,1),this._values.splice(n,1),this.indexMap.clear();for(let i=0;i<this._keys.length;i++)this.indexMap.set(this._keys[i].tweakedToBigInt(),i);return!0}clear(){this.indexMap.clear(),this._keys=[],this._values=[]}[Symbol.dispose](){this.clear()}indexOf(e){const r=this.indexMap.get(e.tweakedToBigInt());return r!==void 0?r:-1}*entries(){for(let e=0;e<this._keys.length;e++)yield[this._keys[e],this._values[e]]}*keys(){for(const e of this._keys)yield e}*values(){for(const e of this._values)yield e}forEach(e,r){for(let n=0;n<this._keys.length;n++)e.call(r,this._values[n],this._keys[n],this)}*[Symbol.iterator](){yield*this.entries()}}class Ec{static EXPECTED_BUFFER_LENGTH=32;static bufferToUint8Array(e){const r=new Uint8Array(e.byteLength);return r.set(e),r}static uint8ArrayToHex(e){return ve(e)}static hexToUint8Array(e){let r=e;return r.length>=2&&r[0]==="0"&&(r[1]==="x"||r[1]==="X")&&(r=r.slice(2)),r.length%2!==0&&(r="0"+r),Ee(r)}static pointerToUint8Array(e){if(e<0n)throw new RangeError("Pointer cannot be negative");const r=e.toString(16).padStart(64,"0");if(r.length>64)throw new RangeError("Pointer exceeds 256-bit range");return Ee(r)}static uint8ArrayToPointer(e){return e.length===0?0n:BigInt("0x"+ve(e))}static valueToUint8Array(e,r=ja){if(e<0n)throw new RangeError("Value cannot be negative");const n=e.toString(16).padStart(r*2,"0");if(n.length>r*2)throw new RangeError(`Value exceeds ${r}-byte range`);return Ee(n)}static uint8ArrayToValue(e){return e.length===0?0n:BigInt("0x"+ve(e))}}class rf{buffer;currentOffset=0;constructor(e){this.buffer=new DataView(e.buffer,e.byteOffset,e.byteLength)}get byteLength(){return this.buffer.byteLength}static stringCompare(e,r){return e.localeCompare(r)}static bigintCompare(e,r){return e<r?-1:e>r?1:0}static numberCompare(e,r){return e<r?-1:e>r?1:0}setBuffer(e){this.buffer=new DataView(e.buffer,e.byteOffset,e.byteLength),this.currentOffset=0}length(){return this.buffer.byteLength}bytesLeft(){return this.buffer.byteLength-this.currentOffset}readI8(){this.verifyEnd(this.currentOffset+Ga);const e=this.buffer.getInt8(this.currentOffset);return this.currentOffset+=Ga,e}readI16(e=!0){this.verifyEnd(this.currentOffset+qa);const r=this.buffer.getInt16(this.currentOffset,!e);return this.currentOffset+=qa,r}readI32(e=!0){this.verifyEnd(this.currentOffset+Wa);const r=this.buffer.getInt32(this.currentOffset,!e);return this.currentOffset+=Wa,r}readI64(e=!0){this.verifyEnd(this.currentOffset+Va);const r=this.buffer.getBigInt64(this.currentOffset,!e);return this.currentOffset+=Va,r}readU8(){this.verifyEnd(this.currentOffset+wl);const e=this.buffer.getUint8(this.currentOffset);return this.currentOffset+=wl,e}readU16(e=!0){this.verifyEnd(this.currentOffset+As);const r=this.buffer.getUint16(this.currentOffset,!e);return this.currentOffset+=As,r}readU32(e=!0){this.verifyEnd(this.currentOffset+Ss);const r=this.buffer.getUint32(this.currentOffset,!e);return this.currentOffset+=Ss,r}readU64(e=!0){this.verifyEnd(this.currentOffset+bl);const r=this.buffer.getBigUint64(this.currentOffset,!e);return this.currentOffset+=bl,r}readU128(e=!0){const r=this.readBytes(Ia);let n=r;return e||(n=this.reverseBytes(r)),BigInt("0x"+this.toHexString(n))}readU256(e=!0){const r=this.readBytes(ja);let n=r;return e||(n=this.reverseBytes(r)),BigInt("0x"+this.toHexString(n))}readI128(e=!0){const r=this.readBytes(_a);let n=r;e||(n=this.reverseBytes(r));let i=BigInt("0x"+this.toHexString(n));if(n[0]&128){const o=BigInt(1)<<BigInt(128);i=i-o}return i}readBoolean(){return this.readU8()!==0}readSelector(){return this.readU32(!0)}readBytes(e,r=!1){this.verifyEnd(this.currentOffset+e);let n=new Uint8Array(e);for(let i=0;i<e;i++){const o=this.buffer.getUint8(this.currentOffset++);if(r&&o===0){n=Pt.from(n.subarray(0,i));break}n[i]=o}return n}readString(e){const r=new TextDecoder,n=this.readBytes(e,!1);return r.decode(n)}readStringWithLength(e=!0){const r=this.readU32(e);return this.readString(r)}readAddress(){const e=Array.from(this.readBytes(Mt));return new $t(e)}readTweakedPublicKey(){return this.verifyEnd(this.currentOffset+Mt),this.readBytes(Mt)}readExtendedAddress(){this.verifyEnd(this.currentOffset+vs);const e=Array.from(this.readBytes(Mt)),r=Array.from(this.readBytes(Mt));return new $t(r,e)}readSchnorrSignature(){this.verifyEnd(this.currentOffset+vs+Es);const e=this.readExtendedAddress(),r=this.readBytes(Es);return{address:e,signature:r}}readBytesWithLength(e=0,r=!0){const n=this.readU32(r);if(e>0&&n>e)throw new Error("Data length exceeds maximum length.");return this.readBytes(n)}readArrayOfBuffer(e=!0){const r=this.readU16(e),n=new Array(r);for(let i=0;i<r;i++)n[i]=this.readBytesWithLength();return n}readAddressArray(e=!0){const r=this.readU16(e),n=new Array(r);for(let i=0;i<r;i++)n[i]=this.readAddress();return n}readU256Array(e=!0){const r=this.readU16(e),n=new Array(r);for(let i=0;i<r;i++)n[i]=this.readU256(e);return n}readU128Array(e=!0){const r=this.readU16(e),n=new Array(r);for(let i=0;i<r;i++)n[i]=this.readU128(e);return n}readU64Array(e=!0){const r=this.readU16(e),n=new Array(r);for(let i=0;i<r;i++)n[i]=this.readU64(e);return n}readU32Array(e=!0){const r=this.readU16(e),n=new Array(r);for(let i=0;i<r;i++)n[i]=this.readU32(e);return n}readU16Array(e=!0){const r=this.readU16(e),n=new Array(r);for(let i=0;i<r;i++)n[i]=this.readU16(e);return n}readU8Array(){const e=this.readU16(!0),r=new Array(e);for(let n=0;n<e;n++)r[n]=this.readU8();return r}readStringArray(e=!0){const r=this.readU16(e),n=new Array(r);for(let i=0;i<r;i++)n[i]=this.readStringWithLength(e);return n}readBytesArray(e=!0){const r=this.readU16(e),n=new Array(r);for(let i=0;i<r;i++)n[i]=this.readBytesWithLength(0,e);return n}readAddressValueTuple(e=!0){const r=this.readU16(e),n=new x5;for(let i=0;i<r;i++){const o=this.readAddress(),s=this.readU256(e);if(n.has(o))throw new Error("Duplicate address found in map");n.set(o,s)}return n}readExtendedAddressArray(e=!0){const r=this.readU16(e),n=new Array(r);for(let i=0;i<r;i++)n[i]=this.readExtendedAddress();return n}readExtendedAddressMapU256(e=!0){const r=this.readU16(e),n=new T5;for(let i=0;i<r;i++){const o=this.readExtendedAddress(),s=this.readU256(e);if(n.has(o))throw new Error("Duplicate tweaked address found in map");n.set(o,s)}return n}getOffset(){return this.currentOffset}setOffset(e){this.currentOffset=e}verifyEnd(e){if(e>this.buffer.byteLength)throw new Error(`Attempt to read beyond buffer length: requested up to byte offset ${e}, but buffer is only ${this.buffer.byteLength} bytes.`)}reverseBytes(e){const r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[e.length-1-n];return r}toHexString(e){return Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}}class wr{currentOffset=0;buffer;constructor(e=0){this.buffer=this.getDefaultBuffer(e)}static estimateArrayOfBufferLength(e){if(e.length>65535)throw new Error("Array size is too large");let r=As;for(let n=0;n<e.length;n++)r+=Ss+e[n].length;return r}writeU8(e){if(e>255)throw new Error("u8 value is too large.");this.allocSafe(wl),this.buffer.setUint8(this.currentOffset++,e)}writeU16(e,r=!0){if(e>65535)throw new Error("u16 value is too large.");this.allocSafe(As),this.buffer.setUint16(this.currentOffset,e,!r),this.currentOffset+=2}writeU32(e,r=!0){if(e>4294967295)throw new Error("u32 value is too large.");this.allocSafe(Ss),this.buffer.setUint32(this.currentOffset,e,!r),this.currentOffset+=4}writeU64(e,r=!0){if(e>18446744073709551615n)throw new Error("u64 value is too large.");this.allocSafe(bl),this.buffer.setBigUint64(this.currentOffset,e,!r),this.currentOffset+=8}writeI8(e){if(e<-128||e>127)throw new Error("i8 value is out of range.");this.allocSafe(Ga),this.buffer.setInt8(this.currentOffset,e),this.currentOffset+=Ga}writeI16(e,r=!0){if(e<-32768||e>32767)throw new Error("i16 value is out of range.");this.allocSafe(qa),this.buffer.setInt16(this.currentOffset,e,!r),this.currentOffset+=qa}writeI32(e,r=!0){if(e<-2147483648||e>2147483647)throw new Error("i32 value is out of range.");this.allocSafe(Wa),this.buffer.setInt32(this.currentOffset,e,!r),this.currentOffset+=Wa}writeI64(e,r=!0){if(e<-9223372036854775808n||e>9223372036854775807n)throw new Error("i64 value is out of range.");this.allocSafe(Va),this.buffer.setBigInt64(this.currentOffset,e,!r),this.currentOffset+=Va}writeSelector(e){this.writeU32(e,!0)}writeBoolean(e){this.writeU8(e?1:0)}writeI128(e,r=!0){if(e>170141183460469231731687303715884105727n||e<-170141183460469231731687303715884105728n)throw new Error("i128 value is too large.");this.allocSafe(_a);const n=Ec.valueToUint8Array(e,_a);if(n.byteLength!==_a)throw new Error(`Invalid i128 value: ${e}`);if(r)for(let i=0;i<n.byteLength;i++)this.writeU8(n[i]);else for(let i=n.byteLength-1;i>=0;i--)this.writeU8(n[i])}writeU256(e,r=!0){if(e>115792089237316195423570985008687907853269984665640564039457584007913129639935n&&e<0n)throw new Error("u256 value is too large or negative.");this.allocSafe(ja);const n=Ec.valueToUint8Array(e);if(n.byteLength!==ja)throw new Error(`Invalid u256 value: ${e}`);if(r)for(let i=0;i<n.byteLength;i++)this.writeU8(n[i]);else for(let i=n.byteLength-1;i>=0;i--)this.writeU8(n[i])}writeU128(e,r=!0){if(e>340282366920938463463374607431768211455n&&e<0n)throw new Error("u128 value is too large or negative.");this.allocSafe(Ia);const n=Ec.valueToUint8Array(e,Ia);if(n.byteLength!==Ia)throw new Error(`Invalid u128 value: ${e}`);if(r)for(let i=0;i<n.byteLength;i++)this.writeU8(n[i]);else for(let i=n.byteLength-1;i>=0;i--)this.writeU8(n[i])}writeBytes(e){this.allocSafe(e.byteLength);for(let r=0;r<e.byteLength;r++)this.writeU8(e[r])}writeString(e){const r=new TextEncoder().encode(e);this.allocSafe(r.length),this.writeBytes(r)}writeStringWithLength(e){const r=new TextEncoder().encode(e);this.allocSafe(Ss+r.length),this.writeU32(r.length),this.writeBytes(r)}writeAddress(e){this.verifyAddress(e),this.writeBytes(e)}writeTweakedPublicKey(e){const r=e.tweakedPublicKeyToBuffer();this.allocSafe(Mt),this.writeBytes(r)}writeExtendedAddress(e){this.allocSafe(vs),this.writeTweakedPublicKey(e),this.writeBytes(e)}writeSchnorrSignature(e,r){if(r.length!==Es)throw new Error(`Invalid Schnorr signature length: expected ${Es}, got ${r.length}`);this.allocSafe(vs+Es),this.writeExtendedAddress(e),this.writeBytes(r)}getBuffer(e=!0){const r=new Uint8Array(this.buffer.byteLength);for(let n=0;n<this.buffer.byteLength;n++)r[n]=this.buffer.getUint8(n);return e&&this.clear(),r}reset(){this.currentOffset=0,this.buffer=this.getDefaultBuffer(4)}toBytesReader(){return new rf(this.getBuffer())}getOffset(){return this.currentOffset}setOffset(e){this.currentOffset=e}clear(){this.currentOffset=0,this.buffer=this.getDefaultBuffer()}[Symbol.dispose](){this.clear()}allocSafe(e){this.currentOffset+e>this.buffer.byteLength&&this.resize(e)}writeAddressValueTuple(e,r=!0){if(e.size>65535)throw new Error("Map size is too large");this.writeU16(e.size,r);const n=Array.from(e.keys());for(let i=0;i<n.length;i++){const o=n[i],s=e.get(o);if(s==null)throw new Error("Value not found");this.writeAddress(o),this.writeU256(s,r)}}writeExtendedAddressMapU256(e,r=!0){if(e.size>65535)throw new Error("Map size is too large");this.writeU16(e.size,r);for(const[n,i]of e.entries())this.writeExtendedAddress(n),this.writeU256(i,r)}writeBytesWithLength(e){this.writeU32(e.length),this.writeBytes(e)}writeArrayOfBuffer(e,r=!0){const n=wr.estimateArrayOfBufferLength(e);this.allocSafe(n),this.writeU16(e.length,r);for(let i=0;i<e.length;i++)this.writeU32(e[i].length,r),this.writeBytes(e[i])}writeAddressArray(e){if(e.length>65535)throw new Error("Array size is too large");this.writeU16(e.length);for(let r=0;r<e.length;r++)this.writeAddress(e[r])}writeExtendedAddressArray(e){if(e.length>65535)throw new Error("Array size is too large");this.allocSafe(As+e.length*vs),this.writeU16(e.length);for(let r=0;r<e.length;r++)this.writeExtendedAddress(e[r])}writeU32Array(e,r=!0){if(e.length>65535)throw new Error("Array size is too large");this.writeU16(e.length,r);for(let n=0;n<e.length;n++)this.writeU32(e[n],r)}writeU256Array(e,r=!0){if(e.length>65535)throw new Error("Array size is too large");this.writeU16(e.length,r);for(let n=0;n<e.length;n++)this.writeU256(e[n],r)}writeU128Array(e,r=!0){if(e.length>65535)throw new Error("Array size is too large");this.writeU16(e.length,r);for(let n=0;n<e.length;n++)this.writeU128(e[n],r)}writeStringArray(e){if(e.length>65535)throw new Error("Array size is too large");this.writeU16(e.length);for(let r=0;r<e.length;r++)this.writeStringWithLength(e[r])}writeU16Array(e,r=!0){if(e.length>65535)throw new Error("Array size is too large");this.writeU16(e.length,r);for(let n=0;n<e.length;n++)this.writeU16(e[n],r)}writeU8Array(e){if(e.length>65535)throw new Error("Array size is too large");this.writeU16(e.length);for(let r=0;r<e.length;r++)this.writeU8(e[r])}writeU64Array(e,r=!0){if(e.length>65535)throw new Error("Array size is too large");this.writeU16(e.length,r);for(let n=0;n<e.length;n++)this.writeU64(e[n],r)}writeBytesArray(e){if(e.length>65535)throw new Error("Array size is too large");this.writeU16(e.length);for(let r=0;r<e.length;r++)this.writeBytesWithLength(e[r])}verifyAddress(e){if(e.byteLength>Mt)throw new Error(`Address is too long ${e.byteLength} > ${Mt} bytes`)}resize(e){const r=new Uint8Array(this.buffer.byteLength+e);for(let n=0;n<this.buffer.byteLength;n++)r[n]=this.buffer.getUint8(n);this.buffer=new DataView(r.buffer,r.byteOffset,r.byteLength)}getDefaultBuffer(e=0){return new DataView(new ArrayBuffer(e))}}class bn{static DATA_CHUNK_SIZE=512;static MAGIC=cP("op");senderPubKey;xSenderPubKey;contractSaltPubKey;network=De.bitcoin;constructor(e,r,n=De.bitcoin){this.senderPubKey=e,this.contractSaltPubKey=r,this.network=n,this.xSenderPubKey=nt(e)}buildHeader(e){let r=0;for(const i of e)r|=i;const n=Ft(3);return n[0]=r>>16&255,n[1]=r>>8&255,n[2]=r&255,Uint8Array.from([this.senderPubKey[0],...n])}getHeader(e,r=[]){const n=new wr(12);return n.writeBytes(this.buildHeader(r)),n.writeU64(e),new Uint8Array(n.getBuffer())}splitBufferIntoChunks(e,r=bn.DATA_CHUNK_SIZE){const n=[];for(let i=0;i<e.length;i+=r){const o=Math.min(r,e.length-i),s=Ft(o);for(let a=0;a<o;a++)s[a]=e[i+a];n.push([s])}return n}encodeFeature(e,r){switch(e.opcode){case Kr.ACCESS_LIST:return this.encodeAccessListFeature(e,r);case Kr.EPOCH_SUBMISSION:return this.encodeChallengeSubmission(e,r);case Kr.MLDSA_LINK_PUBKEY:return this.encodeLinkRequest(e,r);default:throw new Error(`Unknown feature type: ${e.opcode}`)}}encodeAccessListFeature(e,r){const n=new wr;n.writeU16(Object.keys(e.data).length);for(const i in e.data){const o=$t.fromString(i),s=e.data[i];n.writeAddress(o),n.writeU32(s.length);for(const a of s){const l=Uint8Array.from(atob(a),f=>f.charCodeAt(0));if(l.length!==32)throw new Error(`Invalid pointer length: ${l.length}`);n.writeBytes(l)}}r.writeBytesWithLength(sn.compress(new Uint8Array(n.getBuffer())))}encodeChallengeSubmission(e,r){if("verifySignature"in e.data&&!e.data.verifySignature())throw new Error("Invalid signature in challenge submission feature");const n=new wr;n.writeBytes(e.data.publicKey.toBuffer()),n.writeBytes(e.data.solution),e.data.graffiti&&n.writeBytesWithLength(e.data.graffiti),r.writeBytesWithLength(n.getBuffer())}encodeLinkRequest(e,r){const n=e.data,i=new wr;if(i.writeU8(n.level),i.writeBytes(n.hashedPublicKey),i.writeBoolean(n.verifyRequest),n.verifyRequest){if(!n.publicKey||!n.mldsaSignature)throw new Error("MLDSA public key and signature required when verifyRequest is true");i.writeBytes(n.publicKey),i.writeBytes(n.mldsaSignature)}if(!n.legacySignature||n.legacySignature.length!==64)throw new Error("Legacy signature must be exactly 64 bytes");i.writeBytes(n.legacySignature),r.writeBytesWithLength(i.getBuffer())}}class T0 extends bn{constructor(e,r,n=De.bitcoin){super(e,r,n)}static getPubKeyAsBuffer(e,r){let n=new Uint8Array(0);for(const o of e){if(!ot.fromPublicKey(o,r).compressed)throw new Error("Public key must be compressed");if(o.byteLength!==33)throw new Error(`Public key must be 33 bytes, got ${o.byteLength} bytes.`);n=jt([n,o])}const i=sn.compress(n);return i.byteLength>=n.byteLength?n:i}compile(e,r,n,i,o=[]){if(!this.contractSaltPubKey)throw new Error("Contract salt public key not set");const s=this.splitBufferIntoChunks(e);if(!s.length)throw new Error("No data chunks found");const a=[],l=[];if(o&&o.length){const y=o.sort((A,S)=>A.priority-S.priority),w=new wr;for(let A=0;A<y.length;A++){const S=y[A];a.push(S.opcode),this.encodeFeature(S,w)}l.push(...this.splitBufferIntoChunks(new Uint8Array(w.getBuffer())))}let f=[this.getHeader(i,a),ge.OP_TOALTSTACK,n.publicKey.toBuffer(),ge.OP_TOALTSTACK,n.solution,ge.OP_TOALTSTACK,this.xSenderPubKey,ge.OP_DUP,ge.OP_HASH256,Kt.hash256(this.xSenderPubKey),ge.OP_EQUALVERIFY,ge.OP_CHECKSIGVERIFY,this.contractSaltPubKey,ge.OP_CHECKSIGVERIFY,ge.OP_HASH160,Kt.hash160(r),ge.OP_EQUALVERIFY,ge.OP_DEPTH,ge.OP_1,ge.OP_NUMEQUAL,ge.OP_IF,bn.MAGIC];f=f.concat(...l,ge.OP_1NEGATE,...s,ge.OP_ELSE,ge.OP_1,ge.OP_ENDIF);const u=f.flat(),p=st.compile(u);if(!st.decompile(p))throw new Error("Failed to decompile script??");return p}}class B5 extends bn{constructor(e,r=De.bitcoin){super(e,void 0,r)}compile(e){const r=e.flat(),n=st.compile(r);if(!st.decompile(n))throw new Error("Failed to decompile script??");return n}}const P5=0,O5=Uint8Array.from([P5]);class B0 extends bn{constructor(e,r,n=De.bitcoin){super(e,r,n)}compile(e,r,n,i,o,s){const a=this.getAsm(e,r,n,i,o,s),l=st.compile(a);if(!st.decompile(l))throw new Error("Failed to decompile script??");return l}getAsm(e,r,n,i,o,s){if(!this.contractSaltPubKey)throw new Error("Contract salt public key not set");const a=this.splitBufferIntoChunks(e),l=o?this.splitBufferIntoChunks(o):[],f=[],u=[];if(s&&s.length){const p=s.sort((w,A)=>w.priority-A.priority),y=new wr;for(let w=0;w<p.length;w++){const A=p[w];f.push(A.opcode),this.encodeFeature(A,y)}u.push(...this.splitBufferIntoChunks(new Uint8Array(y.getBuffer())))}return[this.getHeader(i,f),ge.OP_TOALTSTACK,n.publicKey.toBuffer(),ge.OP_TOALTSTACK,n.solution,ge.OP_TOALTSTACK,this.xSenderPubKey,ge.OP_DUP,ge.OP_HASH256,Kt.hash256(this.xSenderPubKey),ge.OP_EQUALVERIFY,ge.OP_CHECKSIGVERIFY,this.contractSaltPubKey,ge.OP_CHECKSIGVERIFY,ge.OP_HASH256,Kt.hash256(r),ge.OP_EQUALVERIFY,ge.OP_DEPTH,ge.OP_1,ge.OP_NUMEQUAL,ge.OP_IF,bn.MAGIC,...u,ge.OP_0,...l,ge.OP_1NEGATE,...a,ge.OP_ELSE,ge.OP_1,ge.OP_ENDIF].flat()}}class tt extends dS{static MAX_CHUNK_SIZE=80;static MAX_STACK_ITEMS=100;static MAX_WITNESS_SIZE=1650;static MAX_STANDARD_WEIGHT=4e5;static MIN_OUTPUT_VALUE=330n;static BYTES_PER_COMMITMENT=23;static WITNESS_FIXED_OVERHEAD=112;static WITNESS_PER_CHUNK_OVERHEAD=tt.MAX_CHUNK_SIZE+1+tt.BYTES_PER_COMMITMENT;static MAX_CHUNKS_PER_OUTPUT=Math.floor((tt.MAX_WITNESS_SIZE-tt.WITNESS_FIXED_OVERHEAD)/tt.WITNESS_PER_CHUNK_OVERHEAD);static INPUT_BASE_WEIGHT=164;static INPUT_WITNESS_WEIGHT_MAX=tt.MAX_WITNESS_SIZE;static WEIGHT_PER_INPUT=tt.INPUT_BASE_WEIGHT+tt.INPUT_WITNESS_WEIGHT_MAX;logColor="#4a90d9";publicKey;network;constructor(e,r=De.bitcoin){if(super(),e.length!==33)throw new Error("Public key must be 33 bytes (compressed)");this.publicKey=e,this.network=r}static calculateMaxInputsPerTx(){const e=tt.MAX_STANDARD_WEIGHT-40-200;return Math.floor(e/tt.WEIGHT_PER_INPUT)}static calculateMaxDataPerTx(){return tt.calculateMaxInputsPerTx()*tt.MAX_CHUNKS_PER_OUTPUT*tt.MAX_CHUNK_SIZE}static estimateOutputCount(e){return Math.ceil(e/(tt.MAX_CHUNKS_PER_OUTPUT*tt.MAX_CHUNK_SIZE))}static estimateChunkCount(e){return Math.ceil(e/tt.MAX_CHUNK_SIZE)}static validateHashCommittedScript(e){try{const r=st.decompile(e);if(!r||r.length<5)return!1;const n=r.length-1;if(r[n]!==ge.OP_CHECKSIG)return!1;const i=r[n-1];if(!(i instanceof Uint8Array)||i.length!==33)return!1;const o=r.slice(0,-2);if(o.length%3!==0||o.length===0)return!1;for(let s=0;s<o.length;s+=3){const a=o[s+1];if(o[s]!==ge.OP_HASH160||!(a instanceof Uint8Array)||a.length!==20||o[s+2]!==ge.OP_EQUALVERIFY)return!1}return!0}catch{return!1}}static extractDataHashes(e){try{const r=st.decompile(e);if(!r||!tt.validateHashCommittedScript(e))return null;const n=r.slice(0,-2),i=[];for(let o=0;o<n.length;o+=3)i.push(n[o+1]);return i.reverse()}catch{return null}}static extractPublicKey(e){try{const r=st.decompile(e);return!r||!tt.validateHashCommittedScript(e)?null:r[r.length-2]}catch{return null}}static verifyChunkCommitments(e,r){const n=tt.extractDataHashes(r);if(!n||n.length!==e.length)return!1;for(let i=0;i<e.length;i++){const o=Kt.hash160(e[i]);if(!_e(n[i],o))return!1}return!0}static estimateFees(e,r,n=.7){const i=Math.ceil(e*n),o=tt.estimateOutputCount(i),s=tt.estimateChunkCount(i),a=116,l=o*43+43,f=11+a+l,u=40+o*tt.WEIGHT_PER_INPUT+200,p=Math.ceil(u/4),y=BigInt(Math.ceil(f*r)),w=BigInt(Math.ceil(p*r)),A=y+w,S=BigInt(o)*tt.MIN_OUTPUT_VALUE,k=A+S;return{compressedSize:i,outputCount:o,chunkCount:s,setupVBytes:f,revealVBytes:p,setupFee:y,revealFee:w,totalFee:A,outputsValue:S,totalCost:k}}hashChunk(e){return Kt.hash160(e)}generateWitnessScript(e){if(e.length===0)throw new Error("At least one data hash is required");if(e.length>tt.MAX_CHUNKS_PER_OUTPUT)throw new Error(`Too many chunks: ${e.length} exceeds limit of ${tt.MAX_CHUNKS_PER_OUTPUT}`);for(const n of e)if(n.length!==20)throw new Error(`HASH160 requires 20-byte hash, got ${n.length}`);const r=[];for(let n=e.length-1;n>=0;n--)r.push(ge.OP_HASH160),r.push(e[n]),r.push(ge.OP_EQUALVERIFY);return r.push(this.publicKey),r.push(ge.OP_CHECKSIG),st.compile(r)}generateP2WSHAddress(e){const r=At.p2wsh({redeem:{output:e},network:this.network});if(!r.address||!r.output)throw new Error("Failed to generate P2WSH address");return{address:r.address,witnessScript:e,scriptPubKey:r.output}}prepareChunks(e,r=tt.MAX_CHUNK_SIZE){if(r>tt.MAX_CHUNK_SIZE)throw new Error(`Chunk size ${r} exceeds P2WSH stack item limit of ${tt.MAX_CHUNK_SIZE}`);if(e.length===0)throw new Error("Data cannot be empty");const n=[];let i=0;for(;i<e.length;){const l=Math.min(r,e.length-i);n.push(new Uint8Array(e.subarray(i,i+l))),i+=l}const o=[];let s=0;for(;s<n.length;){const l=n.slice(s,s+tt.MAX_CHUNKS_PER_OUTPUT),f=l,u=f.map(w=>this.hashChunk(w)),p=this.generateWitnessScript(u),y=this.generateP2WSHAddress(p);o.push({address:y.address,witnessScript:y.witnessScript,scriptPubKey:y.scriptPubKey,dataHashes:u,dataChunks:f,chunkStartIndex:s}),s+=l.length}const a=n.length;return this.log(`Prepared ${o.length} P2WSH outputs with ${a} chunks (${e.length} bytes, ~${Math.ceil(e.length/o.length)} bytes/output)`),o}}class S$ extends bn{constructor(e,r=De.bitcoin){super(e,new Uint8Array(0),r)}static getPubKeyAsBuffer(e,r){let n=new Uint8Array(0);for(const o of e){if(!ot.fromPublicKey(o,r).compressed)throw new Error("Public key must be compressed");if(o.byteLength!==33)throw new Error(`Public key must be 33 bytes, got ${o.byteLength} bytes.`);n=jt([n,o])}const i=sn.compress(n);return i.byteLength>=n.byteLength?n:i}compile(e,r,n,i,o=[]){const s=this.splitBufferIntoChunks(e);if(!s.length)throw new Error("No data chunks found");const a=[],l=[];if(o&&o.length){const y=o.sort((A,S)=>A.priority-S.priority),w=new wr;for(let A=0;A<y.length;A++){const S=y[A];a.push(S.opcode),this.encodeFeature(S,w)}l.push(...this.splitBufferIntoChunks(new Uint8Array(w.getBuffer())))}let f=[this.getHeader(i,a),ge.OP_TOALTSTACK,n,ge.OP_TOALTSTACK,this.senderPubKey,ge.OP_DUP,ge.OP_HASH256,Kt.hash256(this.senderPubKey),ge.OP_EQUALVERIFY,ge.OP_CHECKSIGVERIFY,r,ge.OP_TOALTSTACK,ge.OP_DEPTH,ge.OP_1,ge.OP_NUMEQUAL,ge.OP_IF,bn.MAGIC];f=f.concat(...l,ge.OP_1NEGATE,...s,ge.OP_ELSE,ge.OP_1,ge.OP_ENDIF);const u=f.flat(),p=st.compile(u);if(!st.decompile(p))throw new Error("Failed to decompile script??");return p}}class Xa{static MAXIMUM_SUPPORTED_SIGNATURE=255;static compile(e,r=0,n){if(r<2)throw new Error("Minimum signatures must be greater than 1");if(e.length<r)throw new Error("The amount of public keys is lower than the minimum required");if(r>Xa.MAXIMUM_SUPPORTED_SIGNATURE)throw new Error(`The maximum amount of signatures is ${Xa.MAXIMUM_SUPPORTED_SIGNATURE}`);const i=Ft(1);i[0]=r,e=e.filter((f,u,p)=>u===p.findIndex(y=>_e(f,y))),e=e.sort((f,u)=>Us(f,u));let o=!1;const s=e.map(f=>{const u=nt(f);return n&&!o&&(o=_e(n,u)),u});n&&!o&&s.push(n);const a=[ge.OP_0,...s.flatMap(f=>[f,ge.OP_CHECKSIGADD]),i,ge.OP_NUMEQUAL].flat(),l=st.compile(a);if(!st.decompile(l))throw new Error("Failed to decompile script.");return l}}class Ya extends bn{static P2WDA_VERSION=1;constructor(e,r,n=De.bitcoin){super(e,r,n)}static validateWitnessSize(e,r=10,n=80){const i=e+64,o=Math.ceil(i*.7);return Math.ceil(o/n)<=r}compile(e,r,n,i,o=[]){if(!this.contractSaltPubKey)throw new Error("Contract salt public key not set");if(r.length!==32)throw new Error("Contract secret must be exactly 32 bytes");const s=new wr;s.writeU8(Ya.P2WDA_VERSION);const a=o.sort((l,f)=>l.priority-f.priority);return s.writeBytes(this.getHeader(i,a.map(l=>l.opcode))),s.writeBytes(r),s.writeBytes(n.publicKey.toBuffer()),s.writeBytes(n.solution),s.writeU32(e.length),s.writeBytes(e),this.writeFeatures(s,a),new Uint8Array(s.getBuffer())}getHeader(e,r=[]){return super.getHeader(e,r)}writeFeatures(e,r){e.writeU16(r.length);for(const n of r)e.writeU8(n.opcode),this.encodeFeature(n,e)}}class P0{static generatePKSH(e,r){if(e.length!==32)throw new Error("Invalid hash length");const n=a4(e);return this.toSegwitAddress(n,r)}static generateTaprootAddress(e,r){if(e.length!==32)throw new Error("Invalid public key length");const n=ju.bech32m.toWords(e);return n.unshift(1),ju.bech32m.encode(r.bech32,n)}static toSegwitAddress(e,r){const n=ju.bech32.toWords(e);return n.unshift(0),ju.bech32.encode(r.bech32,n)}}class Ki{static TAP_SCRIPT_VERSION=192;static getContractAddress(e){const{scriptTree:r}=Ki.buildScriptTree(e);return Ki.generateAddressFromScript(e,r)}static verifyControlBlock(e,r){const{scriptTree:n,compiledTargetScript:i,network:o}=Ki.buildScriptTree(e),s=At.p2tr({internalPubkey:nt(e.deployerPubKey),network:o,scriptTree:n,redeem:{output:i,redeemVersion:Ki.TAP_SCRIPT_VERSION}}).witness;if(!s||s.length===0)return!1;const a=s[s.length-1];return _e(a,r)}static getContractSeed(e,r,n){const i=Kt.hash256(r),o=jt([e,n,i]);return Kt.hash256(o)}static generateAddressFromScript(e,r){const n=e.network||De.bitcoin,i={internalPubkey:nt(e.deployerPubKey),network:n,scriptTree:r};return At.p2tr(i).address}static buildScriptTree(e){const r=e.network||De.bitcoin,n=new B0(e.deployerPubKey,nt(e.contractSaltPubKey),r).compile(e.bytecode,e.originalSalt,e.challenge,e.priorityFee,e.calldata,e.features),i=st.compile([nt(e.deployerPubKey),ge.OP_CHECKSIG]);return{scriptTree:[{output:n,version:Ki.TAP_SCRIPT_VERSION},{output:i,version:Ki.TAP_SCRIPT_VERSION}],compiledTargetScript:n,network:r}}}function Do(t){return"privateKey"in t&&t.privateKey!=null}class O0{static tweakSigner(e,r={}){let n=e.privateKey;if(!n)throw new Error("Private key is required for tweaking signer!");e.publicKey[0]===3&&(n=yr.privateNegate(n));const i=yr.privateAdd(n,V4(nt(e.publicKey),r.tweakHash));if(!i)throw new Error("Invalid tweaked private key!");return ot.fromPrivateKey(i,r.network)}}function U5(t){return typeof t=="object"&&t!==null&&"web3"in t&&typeof t.web3=="object"&&"getMLDSAPublicKey"in t.web3&&"signMLDSAMessage"in t.web3}class A${sha256(e){return Kt.sha256(e)}async trySignSchnorrWithOPWallet(e){const r=this.getOPWallet();if(!r)return null;const n=typeof e=="string"?new TextEncoder().encode(e):e,i=this.sha256(n),o=ve(i),s=await r.web3.signSchnorr(o);return{signature:Ee(s),message:i}}async trySignMLDSAWithOPWallet(e){const r=this.getOPWallet();if(!r)return null;const n=typeof e=="string"?new TextEncoder().encode(e):e,i=this.sha256(n),o=ve(i),s=await r.web3.signMLDSAMessage(o);return{signature:Ee(s.signature),message:i,publicKey:Ee(s.publicKey),securityLevel:s.securityLevel}}async signMessageAuto(e,r){if(!r){const n=await this.trySignSchnorrWithOPWallet(e);if(n)return n;throw new Error("No keypair provided and OP_WALLET is not available.")}return this.signMessage(r,e)}async tweakAndSignMessageAuto(e,r,n){if(!r){const i=await this.trySignSchnorrWithOPWallet(e);if(i)return i;throw new Error("No keypair provided and OP_WALLET is not available.")}if(!n)throw new Error("Network is required when signing with a local keypair.");return this.tweakAndSignMessage(r,e,n)}async signMLDSAMessageAuto(e,r){if(!r){const n=await this.trySignMLDSAWithOPWallet(e);if(n)return n;throw new Error("No ML-DSA keypair provided and OP_WALLET is not available.")}return this.signMLDSAMessage(r,e)}async verifyMLDSAWithOPWallet(e,r){const n=this.getOPWallet();if(!n)return null;const i=typeof e=="string"?new TextEncoder().encode(e):e,o=this.sha256(i),s={signature:ve(r.signature),publicKey:ve(r.publicKey),securityLevel:r.securityLevel,messageHash:ve(o)};return n.web3.verifyMLDSASignature(ve(o),s)}async getMLDSAPublicKeyFromOPWallet(){const e=this.getOPWallet();if(!e)return null;const r=await e.web3.getMLDSAPublicKey();return Ee(r)}tweakAndSignMessage(e,r,n){const i=O0.tweakSigner(e,{network:n});return this.signMessage(i,r)}signMessage(e,r){if(typeof r=="string"&&(r=new TextEncoder().encode(r)),!e.privateKey)throw new Error("Private key not found in keypair.");const n=this.sha256(r);if(!yr.signSchnorr)throw new Error("backend.signSchnorr is not available.");return{signature:yr.signSchnorr(n,e.privateKey),message:n}}verifySignature(e,r,n){if(typeof r=="string"&&(r=new TextEncoder().encode(r)),n.length!==64)throw new Error("Invalid signature length.");const i=this.sha256(r);if(!yr.verifySchnorr)throw new Error("backend.verifySchnorr is not available.");return yr.verifySchnorr(i,nt(e),n)}tweakAndVerifySignature(e,r,n){const i=ot.tweakPublicKey(e);return this.verifySignature(i,r,n)}signMLDSAMessage(e,r){if(typeof r=="string"&&(r=new TextEncoder().encode(r)),!e.privateKey)throw new Error("ML-DSA private key not found in keypair.");const n=this.sha256(r),i=e.sign(n);return{signature:new Uint8Array(i),message:n,publicKey:new Uint8Array(e.publicKey),securityLevel:e.securityLevel}}verifyMLDSASignature(e,r,n){typeof r=="string"&&(r=new TextEncoder().encode(r));const i=this.sha256(r);return e.verify(i,n)}isOPWalletAvailable(){return this.getOPWallet()!==null}getOPWallet(){if(typeof window>"u")return null;const e=window;return!e.opnet||!U5(e.opnet)?null:e.opnet}}const Zi=new A$;class fi{constructor(e,r,n=De.bitcoin,i=ct.MLDSASecurityLevel.LEVEL2,o){this.network=n,this._securityLevel=i;const s=e.startsWith("0x")?e.replace("0x",""):e;hr.isValidHex(s)?this._keypair=ot.fromPrivateKey(Ee(s),this.network):this._keypair=ot.fromWIF(s,this.network);const a=r.startsWith("0x")?r.replace("0x",""):r;if(hr.isValidHex(a)){const l=Ee(a),f=ct.getMLDSAConfig(i,this.network),u=f.privateKeySize,p=f.publicKeySize,y=u+p;let w;if(l.length===u)w=l;else if(l.length===y)w=l.subarray(0,u);else throw new Error(`Invalid ML-DSA key length for security level ${i}. Expected ${u} bytes (private only) or ${y} bytes (private+public), got ${l.length} bytes.`);if(o&&o.length!==32)throw new Error("Chain code must be 32 bytes");this._chainCode=o||new Uint8Array(32),this._mldsaKeypair=ct.QuantumBIP32Factory.fromPrivateKey(w,this._chainCode,this.network,i)}else this._mldsaKeypair=ct.QuantumBIP32Factory.fromBase58(a),this._chainCode=new Uint8Array(this._mldsaKeypair.chainCode),this._securityLevel=this._mldsaKeypair.securityLevel;this._bufferPubKey=this._keypair.publicKey,this._address=new $t(this._mldsaKeypair.publicKey,this._keypair.publicKey),this._p2tr=this._address.p2tr(this.network),this._p2wpkh=this._address.p2wpkh(this.network),this._legacy=this._address.p2pkh(this.network),this._segwitLegacy=this._address.p2shp2wpkh(this.network),this._p2wda=this._address.p2wda(this.network),this._tweakedKey=this._address.tweakedPublicKeyToBuffer()}_keypair;_mldsaKeypair;_securityLevel;_chainCode;_p2wpkh;_p2tr;_p2wda;_legacy;_segwitLegacy;_bufferPubKey;_tweakedKey;_address;get address(){return this._address}get tweakedPubKeyKey(){return this._tweakedKey}get keypair(){if(!this._keypair)throw new Error("Keypair not set");return this._keypair}get mldsaKeypair(){return this._mldsaKeypair}get securityLevel(){return this._securityLevel}get chainCode(){return this._chainCode}get p2wpkh(){return this._p2wpkh}get p2tr(){return this._p2tr}get p2wda(){return this._p2wda}get legacy(){return this._legacy}get addresses(){return[this.p2wpkh,this.p2tr,this.legacy,this.segwitLegacy]}get segwitLegacy(){return this._segwitLegacy}get publicKey(){if(!this._bufferPubKey)throw new Error("Public key not set");return this._bufferPubKey}get quantumPublicKey(){return new Uint8Array(this._mldsaKeypair.publicKey)}get quantumPrivateKey(){if(!this._mldsaKeypair.privateKey)throw new Error("Quantum private key not set");return new Uint8Array(this._mldsaKeypair.privateKey)}get quantumPublicKeyHex(){return ve(new Uint8Array(this._mldsaKeypair.publicKey))}get quantumPrivateKeyHex(){if(!this._mldsaKeypair.privateKey)throw new Error("Quantum private key not set");return ve(new Uint8Array(this._mldsaKeypair.privateKey))}get xOnly(){if(!this.keypair)throw new Error("Keypair not set");return nt(this._bufferPubKey)}static fromWif(e,r,n=De.bitcoin,i=ct.MLDSASecurityLevel.LEVEL2,o){return new fi(e,r,n,i,o)}static generate(e=De.bitcoin,r=ct.MLDSASecurityLevel.LEVEL2){const n=ot.generateWallet(e,r);if(!n.quantumPrivateKey)throw new Error("Failed to generate quantum keys");return new fi(n.privateKey,n.quantumPrivateKey,e,r)}static fromPrivateKeys(e,r,n=De.bitcoin,i=ct.MLDSASecurityLevel.LEVEL2,o){return new fi(e,r,n,i,o)}toWIF(){return this._keypair.toWIF()}toPrivateKeyHex(){if(!this._keypair.privateKey)throw new Error("Private key not available");return ve(this._keypair.privateKey)}toPublicKeyHex(){return ve(this._bufferPubKey)}toQuantumBase58(){return this._mldsaKeypair.toBase58()}zeroize(){this._keypair.privateKey?.fill(0),this._mldsaKeypair.privateKey?.fill(0),this._chainCode.fill(0)}[Symbol.dispose](){this.zeroize()}derivePath(e){const r=this._mldsaKeypair.derivePath(e);if(!this._keypair.privateKey)throw new Error("Cannot derive from a watch-only wallet (no private key available)");const n=ot.BIP32.fromPrivateKey(this._keypair.privateKey,this._chainCode,this.network).derivePath(e);if(!n.privateKey)throw new Error("Failed to derive classical private key");if(!n.chainCode)throw new Error("Failed to derive classical chain code");return new fi(ve(new Uint8Array(n.privateKey)),r.toBase58(),this.network,this._securityLevel,new Uint8Array(n.chainCode))}}var vl=(t=>(t[t.MINIMUM=128]="MINIMUM",t[t.LOW=160]="LOW",t[t.MEDIUM=192]="MEDIUM",t[t.HIGH=224]="HIGH",t[t.MAXIMUM=256]="MAXIMUM",t))(vl||{}),xa=(t=>(t[t.BIP44=44]="BIP44",t[t.BIP49=49]="BIP49",t[t.BIP84=84]="BIP84",t[t.BIP86=86]="BIP86",t))(xa||{});function k$(t){switch(t){case 44:return"BIP44: Legacy addresses (P2PKH), widely used by Unisat and other wallets";case 49:return"BIP49: Wrapped SegWit addresses (P2SH-P2WPKH)";case 84:return"BIP84: Native SegWit addresses (P2WPKH) - DEFAULT";case 86:return"BIP86: Taproot addresses (P2TR)";default:return"Unknown BIP standard"}}function L5(t,e,r,n,i){return`m/${t}'/${e}'/${r}'/${n}/${i}`}const I$=ct.BIP32Factory(yr);class U0{_phrase;_passphrase;_network;_securityLevel;_seed;_classicalRoot;_quantumRoot;constructor(e,r="",n=De.bitcoin,i=ct.MLDSASecurityLevel.LEVEL2){if(!ra.validateMnemonic(e))throw new Error("Invalid mnemonic phrase");this._phrase=e,this._passphrase=r,this._network=n,this._securityLevel=i,this._seed=ra.mnemonicToSeedSync(this._phrase,this._passphrase),this._classicalRoot=I$.fromSeed(this._seed,this._network),this._quantumRoot=ct.QuantumBIP32Factory.fromSeed(this._seed,this._network,this._securityLevel)}get phrase(){return this._phrase}get network(){return this._network}get securityLevel(){return this._securityLevel}get seed(){return new Uint8Array(this._seed)}zeroize(){this._seed.fill(0),this._classicalRoot.privateKey?.fill(0),this._quantumRoot.privateKey?.fill(0)}[Symbol.dispose](){this.zeroize()}static generatePhrase(e=vl.MAXIMUM){return ra.generateMnemonic(e)}static generate(e=vl.MAXIMUM,r="",n=De.bitcoin,i=ct.MLDSASecurityLevel.LEVEL2){const o=ra.generateMnemonic(e);return new U0(o,r,n,i)}static validate(e){return ra.validateMnemonic(e)}derive(e=0,r=0,n=!1,i=xa.BIP84){const o=this.buildClassicalPath(r,e,n,i),s=this._classicalRoot.derivePath(o);if(!s.privateKey)throw new Error(`Failed to derive classical private key at index ${e}`);const a=this.buildQuantumPath(r,e,n),l=this._quantumRoot.derivePath(a);if(!l.privateKey)throw new Error(`Failed to derive quantum private key at index ${e}`);return new fi(ve(new Uint8Array(s.privateKey)),ve(new Uint8Array(l.privateKey)),this._network,this._securityLevel,new Uint8Array(this._quantumRoot.chainCode))}deriveOPWallet(e=Fi.P2TR,r=0,n=0,i=!1){let o;switch(e){case Fi.P2PKH:o=44;break;case Fi.P2SH_OR_P2SH_P2WPKH:o=49;break;case Fi.P2WPKH:o=84;break;case Fi.P2TR:o=86;break;default:throw new Error(`Unsupported address type: ${e}`)}const s=this.getCoinType(),a=i?1:0,l=`m/${o}'/0'/${n}'/${a}/${r}`,f=this._classicalRoot.derivePath(l);if(!f.privateKey)throw new Error(`Failed to derive classical private key at path ${l}`);const u=`m/360'/${s}'/${n}'/${a}/${r}`,p=this._quantumRoot.derivePath(u);if(!p.privateKey)throw new Error(`Failed to derive quantum private key at path ${u}`);return new fi(ve(new Uint8Array(f.privateKey)),ve(new Uint8Array(p.privateKey)),this._network,this._securityLevel,new Uint8Array(this._quantumRoot.chainCode))}deriveMultipleUnisat(e=Fi.P2TR,r=5,n=0,i=0,o=!1){const s=[];for(let a=0;a<r;a++)s.push(this.deriveOPWallet(e,n+a,i,o));return s}deriveMultiple(e,r=0,n=0,i=!1,o=xa.BIP84){const s=[];for(let a=0;a<e;a++)s.push(this.derive(r+a,n,i,o));return s}deriveCustomPath(e,r){const n=this._classicalRoot.derivePath(e),i=this._quantumRoot.derivePath(r);if(!n.privateKey)throw new Error(`Failed to derive classical private key at path ${e}`);if(!i.privateKey)throw new Error(`Failed to derive quantum private key at path ${r}`);return new fi(ve(new Uint8Array(n.privateKey)),ve(new Uint8Array(i.privateKey)),this._network,this._securityLevel,new Uint8Array(this._quantumRoot.chainCode))}getClassicalRoot(){return this._classicalRoot}getQuantumRoot(){return this._quantumRoot}buildClassicalPath(e,r,n,i=xa.BIP84){const o=this.getCoinType();return L5(i,o,e,n?1:0,r)}buildQuantumPath(e,r,n){return`m/360'/${this.getCoinType()}'/${e}'/${n?1:0}/${r}`}getCoinType(){return this._network.bech32===De.testnet.bech32||this._network.bech32===De.regtest.bech32?1:0}}var R5=(t=>(t[t.MLDSA44=1312]="MLDSA44",t[t.MLDSA65=1952]="MLDSA65",t[t.MLDSA87=2592]="MLDSA87",t))(R5||{});function rp(t){switch(t){case 1312:return ct.MLDSASecurityLevel.LEVEL2;case 1952:return ct.MLDSASecurityLevel.LEVEL3;case 2592:return ct.MLDSASecurityLevel.LEVEL5;default:throw new Error(`Invalid MLDSA public key length: ${t}`)}}class _${constructor(e=De.bitcoin){this.network=e}static getAddress(e=De.bitcoin){throw new Error("Method not implemented.")}getAddress(){return this.address}}var L0=(t=>(t[t.Bitcoin=0]="Bitcoin",t[t.Fractal=1]="Fractal",t))(L0||{});function R0(t){return t&&!!(t.tapInternalKey||t.tapMerkleRoot||t.tapLeafScript&&t.tapLeafScript.length||t.tapBip32Derivation&&t.tapBip32Derivation.length||t.witnessUtxo&&Ql(t.witnessUtxo.script))}function x$(t){return t.redeemScript?t.redeemScript:t.witnessScript?t.witnessScript:t.witnessUtxo?t.witnessUtxo.script:(t.nonWitnessUtxo,null)}function $0(t,e){if(t.nonWitnessUtxo&&!t.redeemScript&&!t.witnessScript&&!t.witnessUtxo||t.redeemScript)return!0;const r=x$(t);return r?C0(e,r):!1}function C0(t,e){return b0(t,e)!==-1}class N0{constructor(){}}var Ta=(t=>(t.Mainnet="mainnet",t.Testnet="testnet",t.Regtest="regtest",t))(Ta||{}),$5=(t=>(t.BITCOIN_MAINNET="BITCOIN_MAINNET",t.BITCOIN_TESTNET="BITCOIN_TESTNET",t.BITCOIN_TESTNET4="BITCOIN_TESTNET4",t.BITCOIN_REGTEST="BITCOIN_REGTEST",t.BITCOIN_SIGNET="BITCOIN_SIGNET",t.FRACTAL_BITCOIN_MAINNET="FRACTAL_BITCOIN_MAINNET",t.FRACTAL_BITCOIN_TESTNET="FRACTAL_BITCOIN_TESTNET",t))($5||{}),C5=(t=>(t.ecdsa="ecdsa",t.bip322="bip322-simple",t))(C5||{}),N5=(t=>(t.ecdsa="ecdsa",t.schnorr="schnorr",t))(N5||{});class T$ extends N0{isInitialized=!1;constructor(){if(super(),!window)throw new Error("UnisatSigner can only be used in a browser environment")}_p2tr;get p2tr(){if(!this._p2tr)throw new Error("P2TR address not set");return this._p2tr}_p2wpkh;get p2wpkh(){if(!this._p2wpkh)throw new Error("P2PKH address not set");return this._p2wpkh}_addresses;get addresses(){if(!this._addresses)throw new Error("Addresses not set");return this._addresses}_publicKey;get publicKey(){if(!this._publicKey)throw new Error("Public key not set");return this._publicKey}_network;get network(){if(!this._network)throw new Error("Network not set");return this._network}get unisat(){if(!window)throw new Error("Window not found");const e=window.unisat;if(!e)throw new Error("Unisat extension not found");return e}async signData(e,r){const n=ve(e),i=await this.unisat.signData(n,r);return Ee(i)}async init(){if(this.isInitialized)return;const e=await this.unisat.getNetwork();switch(e){case Ta.Mainnet:this._network=De.bitcoin;break;case Ta.Testnet:this._network=De.testnet;break;case Ta.Regtest:this._network=De.regtest;break;default:throw new Error(`Invalid network: ${e}`)}const r=await this.unisat.getPublicKey();if(r==="")throw new Error("Unlock your wallet first");this._publicKey=su(Ee(r)),this._p2wpkh=ot.getP2WPKHAddress(this,this.network),this._p2tr=ot.getTaprootAddress(this,this.network),this._addresses=[this._p2wpkh,this._p2tr],this.isInitialized=!0}getPublicKey(){if(!this.isInitialized)throw new Error("UnisatSigner not initialized");return this.publicKey}sign(e,r){throw new Error("Not implemented: sign")}signSchnorr(e){throw new Error("Not implemented: signSchnorr")}verify(e,r){throw new Error("Not implemented: verify")}async signTaprootInput(e,r,n){const i=e.data.inputs[r];if(i.tapKeySig||i.finalScriptSig||Array.isArray(i.partialSig)&&i.partialSig.length&&this.hasAlreadyPartialSig(i.partialSig)||Array.isArray(i.tapScriptSig)&&i.tapScriptSig.length&&this.hasAlreadySignedTapScriptSig(i.tapScriptSig))return;const o=await this.signAllTweaked(e,n,!1);this.combine(e,o,r)}async signInput(e,r,n){const i=e.data.inputs[r];if(i.tapKeySig||i.finalScriptSig||Array.isArray(i.partialSig)&&i.partialSig.length&&this.hasAlreadyPartialSig(i.partialSig)||Array.isArray(i.tapScriptSig)&&i.tapScriptSig.length&&this.hasAlreadySignedTapScriptSig(i.tapScriptSig))return;const o=await this.signAllTweaked(e,n,!0);this.combine(e,o,r)}async multiSignPsbt(e){const r=[],n=[];for(const s of e){const a=s.toHex();r.push(a);const l=s.data.inputs.map((f,u)=>{let p=!1,y=!1;if(R0(f)){if(f.tapLeafScript&&f.tapLeafScript.length>0){for(const w of f.tapLeafScript)if(B$(this.publicKey,w.script)){p=!0,y=!1;break}}if(!p&&f.tapInternalKey){const w=f.tapInternalKey,A=nt(this.publicKey);_e(w,A)&&(p=!0,y=!0)}}else $0(f,this.publicKey)&&(p=!0,y=!1);return p?{index:u,publicKey:ve(this.publicKey),disableTweakSigner:!y}:null}).filter(f=>f!==null);n.push({autoFinalized:!1,toSignInputs:l})}const i=await this.unisat.signPsbt(r[0],n[0]),o=fr.fromHex(i);e[0].combine(o)}hasAlreadySignedTapScriptSig(e){for(let r=0;r<e.length;r++){const n=e[r],i=new Uint8Array(n.pubkey);if(_e(i,this.publicKey)&&n.signature)return!0}return!1}hasAlreadyPartialSig(e){for(let r=0;r<e.length;r++){const n=e[r],i=new Uint8Array(n.pubkey);if(_e(i,this.publicKey)&&n.signature)return!0}return!1}combine(e,r,n){const i=r.data.inputs[n],o=e.data.inputs[n];if(i.partialSig&&e.updateInput(n,{partialSig:i.partialSig}),i.tapKeySig&&!o.tapKeySig&&e.updateInput(n,{tapKeySig:i.tapKeySig}),i.tapScriptSig?.length){const s=o.tapScriptSig;if(s){const a=this.getNonDuplicateScriptSig(s,i.tapScriptSig);a.length&&e.updateInput(n,{tapScriptSig:a})}else e.updateInput(n,{tapScriptSig:i.tapScriptSig})}}async signAllTweaked(e,r,n=!1){const i=ve(this.publicKey),o={autoFinalized:!1,toSignInputs:e.data.inputs.map((l,f)=>[{index:f,publicKey:i,sighashTypes:r,disableTweakSigner:n}]).flat()},s=e.toHex(),a=await this.unisat.signPsbt(s,o);return fr.fromHex(a)}getNonDuplicateScriptSig(e,r){const n=[];for(let i=0;i<r.length;i++){const o=r[i];e.find(s=>_e(s.pubkey,o.pubkey))||n.push(o)}return n}}function B$(t,e){return P$(t,e)!==-1}function P$(t,e){const r=Kt.hash160(t),n=nt(t),i=st.decompile(e);if(i===null)throw new Error("Unknown script error");return i.findIndex(o=>typeof o=="number"?!1:o instanceof Uint8Array&&(_e(o,t)||_e(o,r)||_e(o,n)))}function H5(t){return new Map(t)}function O$(t){return{enabled:!0,signerMap:t instanceof Map?t:H5(t)}}function U$(){return{enabled:!1,signerMap:new Map}}function L$(t){return{publicKey:t.publicKey,getPrivateKey(){if(!t.privateKey)throw new Error("Signer does not have a private key");return Ts(t.privateKey)},sign(e,r){return t.sign(e,r)},signSchnorr(e){if(!t.signSchnorr)throw new Error("Signer does not support Schnorr signing");return t.signSchnorr(e)}}}function D5(t,e){return{publicKey:su(t.publicKey),getPrivateKey(){if(!e.privateKey)throw new Error("Tweaked signer does not have a private key");return Ts(e.privateKey)},sign(r,n){return e.sign(r,n)},signSchnorr(r){if(!e.signSchnorr)throw new Error("Tweaked signer does not support Schnorr signing");return e.signSchnorr(r)}}}var Ce=(t=>(t[t.GENERIC=0]="GENERIC",t[t.FUNDING=1]="FUNDING",t[t.DEPLOYMENT=2]="DEPLOYMENT",t[t.INTERACTION=3]="INTERACTION",t[t.MULTI_SIG=4]="MULTI_SIG",t[t.CUSTOM_CODE=5]="CUSTOM_CODE",t[t.CANCEL=6]="CANCEL",t[t.CONSOLIDATED_SETUP=7]="CONSOLIDATED_SETUP",t[t.CONSOLIDATED_REVEAL=8]="CONSOLIDATED_REVEAL",t))(Ce||{});function np(t){let e=new Uint8Array(0);function r(a,l){const f=new Uint8Array(a.length+l.length);return f.set(a,0),f.set(l,a.length),f}function n(a){e=r(e,a)}function i(a){const l=e.length,f=$d.encodingLength(a),u=new Uint8Array(l+f);u.set(e,0),e=u,$d.encode(a,e,l)}function o(a){i(a.length),n(a)}function s(a){i(a.length),a.forEach(o)}return s(t),e}var z5=(t=>(t[t.REPLACE_BY_FEE=4294967293]="REPLACE_BY_FEE",t[t.FINAL=4294967295]="FINAL",t))(z5||{}),M5=(t=>(t[t.BLOCKS=0]="BLOCKS",t[t.TIMESTAMPS=1]="TIMESTAMPS",t))(M5||{});class nf extends dS{logColor="#00ffe1";finalized=!1;signer;tweakedSigner;network;signed=!1;sighashTypes;scriptData=null;tapData=null;inputs=[];sequence=4294967293;tapLeafScript=null;nonWitnessUtxo;isBrowser=!1;csvInputIndices=new Set;anchorInputIndices=new Set;regenerated=!1;ignoreSignatureErrors=!1;noSignatures=!1;unlockScript;txVersion=2;_mldsaSigner=null;_hashedPublicKey=null;addressRotationEnabled=!1;signerMap=new Map;inputSignerMap=new Map;tweakedSignerCache=new Map;parallelSigningConfig;constructor(e){super(),this.signer=e.signer,this.network=e.network,this.noSignatures=e.noSignatures||!1,e.nonWitnessUtxo!==void 0&&(this.nonWitnessUtxo=e.nonWitnessUtxo),e.unlockScript!==void 0&&(this.unlockScript=e.unlockScript),this.isBrowser=typeof window<"u",e.txVersion&&(this.txVersion=e.txVersion),e.mldsaSigner&&(this._mldsaSigner=e.mldsaSigner,this._hashedPublicKey=Zi.sha256(this._mldsaSigner.publicKey)),e.addressRotation?.enabled&&(this.addressRotationEnabled=!0,this.signerMap=e.addressRotation.signerMap),e.parallelSigning&&(this.parallelSigningConfig=e.parallelSigning)}get mldsaSigner(){if(!this._mldsaSigner)throw new Error("MLDSA Signer is not set");return this._mldsaSigner}get hashedPublicKey(){if(!this._hashedPublicKey)throw new Error("Hashed public key is not set");return this._hashedPublicKey}get canUseParallelSigning(){return!!this.parallelSigningConfig&&!this.addressRotationEnabled&&!this.noSignatures}static readScriptWitnessToWitnessStack(e){let r=0;function n(a){const l=new Uint8Array(e.subarray(r,r+a));return r+=a,l}function i(){const a=$d.decode(e,r);return r+=a.bytes,a.numberValue||0}function o(){const a=i();return n(a)}function s(){const a=i(),l=[];for(let f=0;f<a;f++)l.push(o());return l}return s()}static preEstimateTaprootTransactionFees(e,r,n,i,o,s,a=32n,l=139n){const f=10n,u=41n,p=68n,y=1n,w=f+u*r+p*n,A=r*y+i*o+a*r+l*r+s;return(w*3n+(w+A))/4n*e}static signInput(e,r,n,i,o){o&&o[0]&&(r.sighashType=o[0]),e.signInput(n,i,o.length?o:void 0)}static calculateSignHash(e){if(!e)throw new Error("Sighash types are required");let r=0;for(const n of e)r|=n;return r||0}[Symbol.dispose](){this.inputs.length=0,this.scriptData=null,this.tapData=null,this.tapLeafScript=null,delete this.tweakedSigner,this.csvInputIndices.clear(),this.anchorInputIndices.clear(),this.inputSignerMap.clear(),this.tweakedSignerCache.clear(),delete this.parallelSigningConfig}isAddressRotationEnabled(){return this.addressRotationEnabled}ignoreSignatureError(){this.ignoreSignatureErrors=!0}getScriptAddress(){if(!this.scriptData||!this.scriptData.address)throw new Error("Tap data is required");return this.scriptData.address}getTransaction(){return this.transaction.extractTransaction(!1)}getTapAddress(){if(!this.tapData||!this.tapData.address)throw new Error("Tap data is required");return this.tapData.address}disableRBF(){if(this.signed)throw new Error("Transaction is already signed");this.sequence=4294967295;for(const e of this.inputs)this.csvInputIndices.has(this.inputs.indexOf(e))||(e.sequence=4294967295)}getTweakerHash(){return this.tapData?.hash}preEstimateTransactionFees(e,r,n,i,o){const s=10n,a=41n,l=68n,f=144n,u=34n,p=s+a*r+l*n,y=1n+o*(1n+u)+1n+i,w=i*f+o*u+y;return(p*3n+(p+w))/4n*e}getSignerForInput(e){if(this.addressRotationEnabled){const r=this.inputSignerMap.get(e);if(r)return r}return this.signer}registerInputSigner(e,r){if(!this.addressRotationEnabled)return;if(r.signer){this.inputSignerMap.set(e,r.signer);return}const n=r.scriptPubKey?.address;if(n&&this.signerMap.has(n)){const i=this.signerMap.get(n);if(i){this.inputSignerMap.set(e,i);return}}}internalPubKeyToXOnlyForInput(e){const r=this.getSignerForInput(e);return nt(r.publicKey)}getTweakedSignerForInput(e,r=!1){if(!this.addressRotationEnabled)return r?(this.tweakSigner(),this.tweakedSigner):this.getTweakedSigner(r);const n=e*2+(r?1:0);if(this.tweakedSignerCache.has(n))return this.tweakedSignerCache.get(n);const i=this.getSignerForInput(e),o=this.getTweakedSigner(r,i);return this.tweakedSignerCache.set(n,o),o}generateTapData(){return{internalPubkey:this.internalPubKeyToXOnly(),network:this.network,name:Ze.P2TR}}generateScriptAddress(){return{internalPubkey:this.internalPubKeyToXOnly(),network:this.network,name:Ze.P2TR}}getSignerKey(){return this.signer}async signInput(e,r,n,i,o=!1,s=!1){if(this.anchorInputIndices.has(n))return;const a=i.publicKey;let l=R0(r);o&&(l=!l);let f=!1,u=!1;if(l)try{await this.attemptSignTaproot(e,r,n,i,a),f=!0}catch(p){this.error(`Failed to sign Taproot script path input ${n} (reverse: ${o}): ${p.message}`),u=!0}else if(o||$0(r,a))try{await this.signNonTaprootInput(i,e,n),f=!0}catch(p){this.error(`Failed to sign non-Taproot input ${n}: ${p.stack}`),u=!0}if(!f){if(u&&s)throw new Error(`Failed to sign input ${n} with the provided signer.`);try{await this.signInput(e,r,n,i,!0,u)}catch{throw new Error(`Cannot sign input ${n} with the provided signer.`)}}}splitArray(e,r){if(r<=0)throw new Error("Chunk size must be greater than 0.");const n=[];for(let i=0;i<e.length;i+=r)n.push(e.slice(i,i+r));return n}async signInputs(e){if("multiSignPsbt"in this.signer){await this.signInputsWalletBased(e);return}await this.signInputsNonWalletBased(e)}async signInputsNonWalletBased(e){if(!this.noSignatures)if(this.canUseParallelSigning&&Do(this.signer)){let r=new Set;try{const n=await this.signKeyPathInputsParallel(e);n.success&&(r=new Set(n.signatures.keys()))}catch(n){this.error(`Parallel signing failed, falling back to sequential: ${n.message}`)}await this.signRemainingInputsSequential(e,r)}else await this.signInputsSequential(e);for(let r=0;r<e.data.inputs.length;r++)e.finalizeInput(r,this.customFinalizerP2SH.bind(this));this.finalized=!0}async signInputsSequential(e){const r=e.data.inputs,n=20,i=this.splitArray(r,n);for(let o=0;o<i.length;o++){const s=i[o],a=[],l=o*n;for(let f=0;f<s.length;f++){const u=l+f,p=s[f];try{const y=this.getSignerForInput(u);a.push(this.signInput(e,p,u,y))}catch(y){this.log(`Failed to sign input ${u}: ${y.stack}`)}}await Promise.all(a)}}async signRemainingInputsSequential(e,r){const n=e.data.inputs,i=[];for(let s=0;s<n.length;s++)r.has(s)||i.push(s);if(i.length===0)return;const o=this.splitArray(i,20);for(const s of o){const a=[];for(const l of s){const f=n[l];try{const u=this.getSignerForInput(l);a.push(this.signInput(e,f,l,u))}catch(u){this.log(`Failed to sign input ${l}: ${u.stack}`)}}await Promise.all(a)}}internalPubKeyToXOnly(){return nt(this.signer.publicKey)}internalInit(){this.scriptData=At.p2tr(this.generateScriptAddress()),this.tapData=At.p2tr(this.generateTapData())}tweakSigner(){if(this.tweakedSigner)return;const e=this.getTweakedSigner(!0);e!==void 0&&(this.tweakedSigner=e)}getTweakedSigner(e=!1,r=this.signer){const n={network:this.network};if(e){const i=this.getTweakerHash();i!==void 0&&(n.tweakHash=i)}if(Do(r))return O0.tweakSigner(r,n)}async signKeyPathInputsParallel(e,r){const n=this.signer,i=this.getTweakedSigner(!0);if(!i)throw new Error("Cannot create tweaked signer for parallel signing");const o=D5(n,i),s=KU(e,o),a=r?s.filter(u=>!r.has(u.inputIndex)):s;if(a.length===0)return{success:!0,signatures:new Map,errors:new Map,durationMs:0};let l,f=!1;this.parallelSigningConfig&&"signBatch"in this.parallelSigningConfig?l=this.parallelSigningConfig:(l=FU.getInstance(this.parallelSigningConfig),l.isPreservingWorkers||(f=!0));try{await l.initialize();const u=await l.signBatch(a,o);if(u.success)WU(e,u,o);else{const p=[...u.errors.entries()].map(([y,w])=>`Input ${y}: ${w}`).join(", ");this.error(`Parallel signing had errors: ${p}`)}return u}finally{f&&await l.shutdown()}}generateP2SHRedeemScript(e){const r=At.p2wsh({redeem:{output:e},network:this.network});return At.p2sh({redeem:r,network:this.network}).output}generateP2SHRedeemScriptLegacy(e){const r=Kt.hash160(this.signer.publicKey),n=st.compile([ge.OP_DUP,ge.OP_HASH160,r,ge.OP_EQUALVERIFY,ge.OP_CHECKSIG]),i=Kt.hash160(n),o=st.compile([ge.OP_HASH160,i,ge.OP_EQUAL]),s=At.p2wsh({redeem:{output:n},network:this.network}),a=At.p2sh({redeem:s,network:this.network});if(hn.fromOutputScript(o,this.network)===e&&a.redeem&&a.redeem.output)return{redeemScript:n,outputScript:a.redeem.output}}generateP2SHP2PKHRedeemScript(e,r){const n=(this.addressRotationEnabled&&r!==void 0?this.getSignerForInput(r):this.signer).publicKey,i=At.p2wpkh({pubkey:n,network:this.network}),o=At.p2sh({redeem:i,network:this.network}),s=o.address;if(!o.redeem?.output)throw new Error("Failed to generate P2SH-P2WPKH redeem script");if(s===e&&o.redeem&&o.redeem.output&&o.output)return{redeemScript:o.redeem.output,outputScript:o.output}}generatePsbtInputExtended(e,r,n=!1){const i=Ee(e.scriptPubKey.hex),o={hash:e.transactionId,index:e.outputIndex,sequence:this.sequence,witnessUtxo:{value:e.value,script:i}};if(J4(i))if(e.nonWitnessUtxo)o.nonWitnessUtxo=e.nonWitnessUtxo instanceof Uint8Array?e.nonWitnessUtxo:Ee(e.nonWitnessUtxo);else throw new Error("Missing nonWitnessUtxo for P2PKH UTXO");else if(!($s(i)||w0(i)))if(al(i))this.processP2WSHInput(e,o,r);else if(m0(i)){let s;if(e.redeemScript)s=e.redeemScript instanceof Uint8Array?e.redeemScript:Ee(e.redeemScript);else{if(!e.scriptPubKey.address)throw new Error("Missing redeemScript and no address to regenerate it for P2SH UTXO");const f=this.generateP2SHP2PKHRedeemScript(e.scriptPubKey.address,r);if(!f)throw new Error("Missing redeemScript for P2SH UTXO and unable to regenerate");s=f.redeemScript}o.redeemScript=s;const a=At.p2sh({redeem:{output:o.redeemScript}});if(!a.redeem)throw new Error("Failed to extract redeem script from P2SH UTXO");const l=a.redeem.output;if(!l)throw new Error("Failed to extract redeem output from P2SH UTXO");e.nonWitnessUtxo&&(o.nonWitnessUtxo=e.nonWitnessUtxo instanceof Uint8Array?e.nonWitnessUtxo:Ee(e.nonWitnessUtxo)),$s(l)?Reflect.deleteProperty(o,"nonWitnessUtxo"):al(l)?(Reflect.deleteProperty(o,"nonWitnessUtxo"),this.processP2WSHInput(e,o,r)):Reflect.deleteProperty(o,"witnessUtxo")}else if(Ql(i)){if(this.sighashTypes){const s=nf.calculateSignHash(this.sighashTypes);s&&(o.sighashType=s)}this.addressRotationEnabled?o.tapInternalKey=this.internalPubKeyToXOnlyForInput(r):(this.tweakSigner(),o.tapInternalKey=this.internalPubKeyToXOnly())}else if(yU(i))this.anchorInputIndices.add(r),o.isPayToAnchor=!0;else if(Q4(i)||Z4(i))if(e.nonWitnessUtxo)o.nonWitnessUtxo=e.nonWitnessUtxo instanceof Uint8Array?e.nonWitnessUtxo:Ee(e.nonWitnessUtxo);else throw new Error("Missing nonWitnessUtxo for P2PK or P2MS UTXO");else this.error(`Unknown or unsupported script type for output: ${e.scriptPubKey.hex}`);return r===0&&(this.tapLeafScript&&(o.tapLeafScript=[this.tapLeafScript]),this.nonWitnessUtxo&&(o.nonWitnessUtxo=this.nonWitnessUtxo)),o}processP2WSHInput(e,r,n){if(!e.witnessScript)throw new Error("Missing witnessScript for P2WSH UTXO");r.witnessScript=e.witnessScript instanceof Uint8Array?e.witnessScript:Ee(e.witnessScript);const i=st.decompile(r.witnessScript);if(i&&this.isCSVScript(i)){const o=st.decompile(r.witnessScript);if(o&&this.isCSVScript(o)){this.csvInputIndices.add(n);const s=this.extractCSVBlocks(o);r.sequence=this.setCSVSequence(s,this.sequence)}}}secondsToCSVTimeUnits(e){return Math.floor(e/512)}createTimeBasedCSV(e){const r=this.secondsToCSVTimeUnits(e);if(r>65535)throw new Error(`Time units ${r} exceeds maximum of 65,535`);return r|1<<22}isCSVEnabled(e){return(e&1<<31)===0}extractCSVValue(e){return e&65535}customFinalizerP2SH=(e,r,n,i,o,s,a)=>{const l=this.inputs[e];if(o&&r.partialSig&&l&&l.redeemScript){const f=r.partialSig.map(u=>u.signature)||[];return{finalScriptSig:st.compile([...f,l.redeemScript]),finalScriptWitness:void 0}}if(this.anchorInputIndices.has(e))return{finalScriptSig:void 0,finalScriptWitness:Uint8Array.from([0])};if(s&&i&&r.witnessScript){if(!r.partialSig||r.partialSig.length===0)throw new Error(`No signatures for P2WSH input #${e}`);if(yn.isP2WDAWitnessScript(r.witnessScript))return this.finalizeSecondaryP2WDA(e,r);if(this.csvInputIndices.has(e)){const f=[r.partialSig[0].signature,r.witnessScript];return{finalScriptSig:void 0,finalScriptWitness:np(f)}}}return x0(e,r,n,i,o,s,!0,this.unlockScript)};finalizeSecondaryP2WDA(e,r){if(!r.partialSig||r.partialSig.length===0)throw new Error(`No signature for P2WDA input #${e}`);if(!r.witnessScript)throw new Error(`No witness script for P2WDA input #${e}`);const n=yn.createSimpleP2WDAWitness(r.partialSig[0].signature,r.witnessScript);return{finalScriptSig:void 0,finalScriptWitness:np(n)}}async signInputsWalletBased(e){await this.signer.multiSignPsbt([e]);for(let r=0;r<e.data.inputs.length;r++)e.finalizeInput(r,this.customFinalizerP2SH.bind(this));this.finalized=!0}isCSVScript(e){return e.some(r=>r===ge.OP_CHECKSEQUENCEVERIFY)}setCSVSequence(e,r){if(this.txVersion<2)throw new Error("CSV requires transaction version 2 or higher");if(e>65535)throw new Error(`CSV blocks ${e} exceeds maximum of 65,535`);const n=(e&1<<22)!==0;let i=e&65535;return n&&(i|=1<<22),r===4294967293&&(i|=1<<25),i=i&2147483647,i}getCSVType(e){return e&1<<22?1:0}extractCSVBlocks(e){for(let r=0;r<e.length;r++)if(e[r]===ge.OP_CHECKSEQUENCEVERIFY&&r>0){const n=e[r-1];if(n instanceof Uint8Array)return st.number.decode(n);if(typeof n=="number"){if(n===ge.OP_0||n===ge.OP_FALSE)return 0;if(n===ge.OP_1NEGATE)return-1;if(n>=ge.OP_1&&n<=ge.OP_16)return n-ge.OP_1+1;throw new Error(`Unexpected raw number in script: ${n}`)}}return 0}async attemptSignTaproot(e,r,n,i,o){if(this.isTaprootScriptSpend(r,o))await this.signTaprootInput(i,e,n);else{let s;if(i!==this.signer?s=this.getTweakedSigner(!0,i):(this.tweakedSigner||this.tweakSigner(),s=this.tweakedSigner),s)try{await this.signTaprootInput(s,e,n)}catch{if(s=this.getTweakedSigner(!1,this.signer),!s)throw new Error(`Failed to obtain tweaked signer for input ${n}.`);await this.signTaprootInput(s,e,n)}else this.error(`Failed to obtain tweaked signer for input ${n}.`)}}isTaprootScriptSpend(e,r){if(e.tapLeafScript&&e.tapLeafScript.length>0){for(const n of e.tapLeafScript)if(C0(r,n.script))return!0}return!1}async signTaprootInput(e,r,n,i){if("signTaprootInput"in e)try{await e.signTaprootInput(r,n,i)}catch{throw new Error("Failed to sign Taproot input with provided signer.")}else r.signTaprootInput(n,e)}async signNonTaprootInput(e,r,n){"signInput"in e?await e.signInput(r,n):r.signInput(n,e)}}function Sc(t){return`${t.messagePrefix}|${t.bech32}`}const R$=new Map([[Sc(De.bitcoin),new Uint8Array([0,0,0,0,0,25,214,104,156,8,90,225,101,131,30,147,79,247,99,174,70,162,166,193,114,179,241,182,10,140,226,111])],[Sc(De.testnet),new Uint8Array([0,0,0,0,9,51,234,1,173,14,233,132,32,151,121,186,174,195,206,217,15,163,244,8,113,149,38,248,215,127,73,67])],[Sc(De.regtest),new Uint8Array([15,145,136,241,60,183,178,199,31,42,51,94,58,79,195,40,191,91,235,67,96,18,175,202,89,11,26,17,70,110,34,6])]]);function sE(t){const e=R$.get(Sc(t));if(!e)throw new Error("Unsupported network for chain ID retrieval");return e.slice()}const aE=new Uint8Array([231,132,153,90,65,45,119,57,136,196,184,227,51,215,179,157,251,60,171,241,24,208,214,69,65,26,145,108,162,64,121,57]),gn=330n,wa=297n,ip=Ee("51024e73");class Me extends nf{static MINIMUM_DUST=330n;logColor="#785def";debugFees=!1;LOCK_LEAF_SCRIPT;overflowFees=0n;transactionFee=0n;estimatedFees=0n;optionalOutputs;transaction;updateInputs=[];outputs=[];feeOutput=null;totalInputAmount;signer;network;feeRate;priorityFee;gasSatFee;utxos;optionalInputs;to;from;_maximumFeeRate=1e8;isPubKeyDestination;anchor;note;optionalOutputsAdded=!1;constructor(e){if(super(e),e.estimatedFees&&(this.estimatedFees=e.estimatedFees),this.signer=e.signer,this.network=e.network,this.feeRate=e.feeRate,this.priorityFee=e.priorityFee??0n,this.gasSatFee=e.gasSatFee??0n,this.utxos=e.utxos,this.optionalInputs=e.optionalInputs||[],this.to=e.to||void 0,this.debugFees=e.debugFees||!1,this.LOCK_LEAF_SCRIPT=this.defineLockScript(),e.note&&(typeof e.note=="string"?this.note=new TextEncoder().encode(e.note):this.note=e.note),this.anchor=e.anchor??!1,this.isPubKeyDestination=this.to?pn.isValidPublicKey(this.to,this.network):!1,this.optionalOutputs=e.optionalOutputs,this.from=Me.getFrom(e.from,this.signer,this.network),this.totalInputAmount=this.calculateTotalUTXOAmount(),this.calculateTotalVOutAmount()<this.totalInputAmount)throw new Error("Vout value is less than the value to send");this.transaction=new fr({network:this.network,version:this.txVersion})}static getFrom(e,r,n){return e||ot.getTaprootAddress(r,n)}static witnessStackToScriptWitness(e){return np(e)}[Symbol.dispose](){super[Symbol.dispose](),this.updateInputs.length=0,this.outputs.length=0,this.feeOutput=null,this.optionalOutputs=void 0,this.utxos=[],this.optionalInputs=[]}addOPReturn(e){const r=st.compile([ge.OP_RETURN,e]);this.addOutput({value:xt(0n),script:r})}addAnchor(){this.addOutput({value:xt(0n),script:ip})}async getFundingTransactionParameters(){return this.estimatedFees||(this.estimatedFees=await this.estimateTransactionFees()),{utxos:this.utxos,to:this.getScriptAddress(),signer:this.signer,network:this.network,feeRate:this.feeRate,priorityFee:this.priorityFee??0n,gasSatFee:this.gasSatFee??0n,from:this.from,amount:this.estimatedFees,optionalInputs:this.optionalInputs,mldsaSigner:null,...this.optionalOutputs!==void 0?{optionalOutputs:this.optionalOutputs}:{}}}setDestinationAddress(e){this.to=e}setMaximumFeeRate(e){this._maximumFeeRate=e}async signTransaction(){if(!this.utxos.length)throw new Error("No UTXOs specified");if(this.to&&!this.isPubKeyDestination&&!ot.verifyContractAddress(this.to,this.network))throw new Error("Invalid contract address. The contract address must be a taproot address.");if(this.signed)throw new Error("Transaction is already signed");if(this.signed=!0,await this.buildTransaction(),await this.internalBuildTransaction(this.transaction)){if(this.regenerated)throw new Error("Transaction was regenerated");return this.transaction.extractTransaction(!0,!0)}throw new Error("Could not sign transaction")}async generateTransactionMinimalSignatures(e=!1){if(this.to&&!this.isPubKeyDestination&&!ot.verifyContractAddress(this.to,this.network))throw new Error("Invalid contract address. The contract address must be a taproot address.");if(await this.buildTransaction(),this.transaction.data.inputs.length===0){const r=this.getInputs(),n=this.getOutputs();this.transaction.setMaximumFeeRate(this._maximumFeeRate),this.transaction.addInputs(r,e);for(let i=0;i<this.updateInputs.length;i++)this.transaction.updateInput(i,this.updateInputs[i]);this.transaction.addOutputs(n)}}async signPSBT(){if(await this.signTransaction())return this.transaction;throw new Error("Could not sign transaction")}addInput(e){this.inputs.push(e)}addOutput(e,r=!1){if(e.value===xt(0n)){const n=e;if(!n.script||n.script.length===0)throw new Error("Output value is 0 and no script provided");if(n.script.length<2)throw new Error("Output script is too short");if(n.script[0]!==ge.OP_RETURN&&!_e(n.script,ip))throw new Error("Output script must start with OP_RETURN or be an ANCHOR when value is 0")}else if(!r&&BigInt(e.value)<Me.MINIMUM_DUST)throw new Error(`Output value is less than the minimum dust ${e.value} < ${Me.MINIMUM_DUST}`);this.outputs.push(e)}getTotalOutputValue(){return this.outputs.reduce((e,r)=>e+BigInt(r.value),0n)}toAddress(){return this.to}address(){return this.tapData?.address}async estimateTransactionFees(){await Promise.resolve();const e=new fr({network:this.network}),r=this.getInputs(),n=this.getOutputs();e.addInputs(r),e.addOutputs(n);const i=new Uint8Array(64),o=new Uint8Array(72),s=new Uint8Array(33).fill(2),a=(p,y)=>{if(y.isPayToAnchor||this.anchorInputIndices.has(p))return{finalScriptSig:void 0,finalScriptWitness:Uint8Array.from([0])};if(y.witnessScript&&yn.isP2WDAWitnessScript(y.witnessScript)){const A=[];for(let k=0;k<10;k++)A.push(new Uint8Array(0));const S=new Uint8Array(72);return{finalScriptWitness:Me.witnessStackToScriptWitness([...A,S,y.witnessScript])}}if(p===0&&this.tapLeafScript){const A=new Uint8Array(32),S=this.tapLeafScript.script,k=new Uint8Array(65);return{finalScriptWitness:Me.witnessStackToScriptWitness([A,i,i,S,k])}}if(y.witnessUtxo){const A=y.witnessUtxo.script,S=Wi.script.decompile(A);if(S&&S.length===5&&S[0]===ge.OP_DUP&&S[1]===ge.OP_HASH160&&S[3]===ge.OP_EQUALVERIFY&&S[4]===ge.OP_CHECKSIG)return{finalScriptSig:Wi.script.compile([o,s]),finalScriptWitness:void 0}}if(y.witnessScript){if(this.csvInputIndices.has(p))return{finalScriptWitness:Me.witnessStackToScriptWitness([o,y.witnessScript])};if(y.redeemScript){const S=[o,y.witnessScript];return{finalScriptSig:y.redeemScript,finalScriptWitness:Me.witnessStackToScriptWitness(S)}}const A=Wi.script.decompile(y.witnessScript);if(A&&A.length>=4){const S=A[0],k=A[A.length-1];if(typeof S=="number"&&S>=ge.OP_1&&k===ge.OP_CHECKMULTISIG){const I=S-ge.OP_1+1,N=[];for(let B=0;B<I;B++)N.push(o);return{finalScriptWitness:Me.witnessStackToScriptWitness([new Uint8Array(0),...N,y.witnessScript])}}}return{finalScriptWitness:Me.witnessStackToScriptWitness([o,y.witnessScript])}}else if(y.redeemScript){const A=Wi.script.decompile(y.redeemScript);if(A&&A.length===2&&A[0]===ge.OP_0&&A[1]instanceof Uint8Array&&A[1].length===20)return{finalScriptSig:y.redeemScript,finalScriptWitness:Me.witnessStackToScriptWitness([o,s])}}if(y.redeemScript&&!y.witnessScript&&!y.witnessUtxo)return{finalScriptSig:Wi.script.compile([o,y.redeemScript]),finalScriptWitness:void 0};const w=y.witnessUtxo?.script;return w?y.tapInternalKey?{finalScriptWitness:Me.witnessStackToScriptWitness([i])}:w.length===22&&w[0]===ge.OP_0?{finalScriptWitness:Me.witnessStackToScriptWitness([o,s])}:y.redeemScript?.length===22&&y.redeemScript[0]===ge.OP_0?{finalScriptWitness:Me.witnessStackToScriptWitness([o,s])}:x0(p,y,w,!0,!!y.redeemScript,!!y.witnessScript):{finalScriptSig:void 0,finalScriptWitness:void 0}};try{for(let p=0;p<e.data.inputs.length;p++){const y=r[p];y&&e.finalizeInput(p,w=>a(w,y))}}catch(p){this.warn(`Could not finalize dummy tx: ${p.message}`)}const l=e.extractTransaction(!0,!0).virtualSize(),f=this.feeRate*l,u=BigInt(Math.ceil(f));return this.debugFees&&this.log(`Estimating fees: feeRate=${this.feeRate}, accurate_vSize=${l}, fee=${u}n`),u}async rebuildFromBase64(e){return this.transaction=fr.fromBase64(e,{network:this.network,version:this.txVersion}),this.signed=!1,this.sighashTypes=[gt.SIGHASH_ANYONECANPAY,gt.SIGHASH_ALL],await this.signPSBT()}setPSBT(e){this.transaction=e}getInputs(){return this.inputs}getOutputs(){const e=[...this.outputs];return this.feeOutput&&e.push(this.feeOutput),e}getOptionalOutputValue(){if(!this.optionalOutputs)return 0n;let e=0n;for(let r=0;r<this.optionalOutputs.length;r++)e+=BigInt(this.optionalOutputs[r].value);return e}async addRefundOutput(e,r=!1){this.note&&this.addOPReturn(this.note),this.anchor&&this.addAnchor(),this.feeOutput=this.createChangeOutput(Me.MINIMUM_DUST);const n=await this.estimateTransactionFees(),i=this.totalInputAmount-e-n;if(this.debugFees&&this.log(`Fee with change: ${n} sats, inputAmount=${this.totalInputAmount}, amountSpent=${e}, sendBackAmount=${i}`),i>=Me.MINIMUM_DUST)this.feeOutput=this.createChangeOutput(i),this.overflowFees=i,this.transactionFee=n;else{this.feeOutput=null,this.overflowFees=0n;const o=await this.estimateTransactionFees();if(this.transactionFee=o,this.debugFees&&this.warn(`Amount to send back (${i} sat) is less than minimum dust. Fee without change: ${o} sats`),this.totalInputAmount<=e)throw new Error(`Insufficient funds: need ${e+o} sats but only have ${this.totalInputAmount} sats`);if(r&&i<0n)throw new Error(`Insufficient funds: need at least ${-i} more sats to cover fees.`)}this.debugFees&&this.log(`Final fee: ${this.transactionFee} sats, Change output: ${this.feeOutput?`${this.feeOutput.value} sats`:"none"}`)}defineLockScript(){return st.compile([nt(this.signer.publicKey),ge.OP_CHECKSIG])}addValueToToOutput(e){if(BigInt(e)<Me.MINIMUM_DUST)throw new Error(`Value to send is less than the minimum dust ${e} < ${Me.MINIMUM_DUST}`);for(let r=0;r<this.outputs.length;r++){const n=this.outputs[r];if("address"in n&&n.address===this.to){this.outputs[r]={...n,value:xt(BigInt(n.value)+BigInt(e))};return}}throw new Error("Output not found")}generateLegacySignature(){if(this.tweakSigner(),!this.tweakedSigner)throw new Error("Tweaked signer is not defined");const e=nt(this.tweakedSigner.publicKey),r=this.signer.publicKey;if(r.length!==33)throw new Error("Original public key must be compressed (33 bytes)");const n=sE(this.network),i=new wr;i.writeU8(ct.MLDSASecurityLevel.LEVEL2),i.writeBytes(this.hashedPublicKey),i.writeBytes(e),i.writeBytes(r),i.writeBytes(aE),i.writeBytes(n);const o=i.getBuffer(),s=Zi.signMessage(this.tweakedSigner,o);if(!Zi.verifySignature(e,o,s.signature))throw new Error("Could not verify generated legacy signature for MLDSA link request");return new Uint8Array(s.signature)}generateMLDSASignature(){if(!this.mldsaSigner)throw new Error("MLDSA signer is not defined");if(this.tweakSigner(),!this.tweakedSigner)throw new Error("Tweaked signer is not defined");const e=nt(this.tweakedSigner.publicKey),r=this.signer.publicKey;if(r.length!==33)throw new Error("Original public key must be compressed (33 bytes)");const n=sE(this.network),i=rp(this.mldsaSigner.publicKey.length);if(i!==ct.MLDSASecurityLevel.LEVEL2)throw new Error("Only MLDSA level 2 is supported for link requests");const o=new wr;o.writeU8(i),o.writeBytes(this.hashedPublicKey),o.writeBytes(this.mldsaSigner.publicKey),o.writeBytes(e),o.writeBytes(r),o.writeBytes(aE),o.writeBytes(n);const s=o.getBuffer(),a=Zi.signMLDSAMessage(this.mldsaSigner,s);if(!Zi.verifyMLDSASignature(this.mldsaSigner,s,a.signature))throw new Error("Could not verify generated MLDSA signature for link request");return new Uint8Array(a.signature)}generateMLDSALinkRequest(e,r){const n=this.mldsaSigner,i=this.generateLegacySignature();let o=null;e.revealMLDSAPublicKey&&(o=this.generateMLDSASignature());const s={priority:jn.MLDSA_LINK_PUBKEY,opcode:Kr.MLDSA_LINK_PUBKEY,data:{verifyRequest:!!e.revealMLDSAPublicKey,publicKey:n.publicKey,hashedPublicKey:this.hashedPublicKey,level:rp(n.publicKey.length),legacySignature:i,mldsaSignature:o}};r.push(s)}getTransactionOPNetFee(){const e=this.priorityFee+this.gasSatFee;return e>Me.MINIMUM_DUST?e:Me.MINIMUM_DUST}calculateTotalUTXOAmount(){let e=0n;for(const r of this.utxos)e+=r.value;for(const r of this.optionalInputs)e+=r.value;return e}calculateTotalVOutAmount(){let e=0n;for(const r of this.utxos)e+=r.value;for(const r of this.optionalInputs)e+=r.value;return e}addOptionalOutputsAndGetAmount(){if(!this.optionalOutputs||this.optionalOutputsAdded)return 0n;let e=0n;for(let r=0;r<this.optionalOutputs.length;r++)this.addOutput(this.optionalOutputs[r]),e+=BigInt(this.optionalOutputs[r].value);return this.optionalOutputsAdded=!0,e}addInputsFromUTXO(){if(this.utxos.length){if(this.totalInputAmount<Me.MINIMUM_DUST)throw new Error(`Total input amount is ${this.totalInputAmount} sat which is less than the minimum dust ${Me.MINIMUM_DUST} sat.`);for(let e=0;e<this.utxos.length;e++){const r=this.utxos[e];this.registerInputSigner(e,r);const n=this.generatePsbtInputExtended(r,e);this.addInput(n)}}if(this.optionalInputs)for(let e=this.utxos.length;e<this.optionalInputs.length+this.utxos.length;e++){const r=this.optionalInputs[e-this.utxos.length];this.registerInputSigner(e,r);const n=this.generatePsbtInputExtended(r,e,!0);this.addInput(n)}}internalInit(){this.verifyUTXOValidity(),super.internalInit()}updateInput(e){this.updateInputs.push(e)}addFeeToOutput(e,r,n,i){if(i){let o;e>gn+wa?o=wa:o=e,this.addOutput({value:xt(o),address:r},!0),o===wa&&e-wa>gn&&this.addOutput({value:xt(e-o),address:n.address},!0)}else{const o=e<gn?gn:e;this.addOutput({value:xt(o),address:n.address},!0)}}getWitness(){if(!this.tapData||!this.tapData.witness)throw new Error("Witness is required");if(this.tapData.witness.length===0)throw new Error("Witness is empty");return this.tapData.witness[this.tapData.witness.length-1]}getTapOutput(){if(!this.tapData||!this.tapData.output)throw new Error("Tap data is required");return this.tapData.output}verifyUTXOValidity(){for(const e of this.utxos)if(!e.scriptPubKey)throw new Error("Address is required");for(const e of this.optionalInputs)if(!e.scriptPubKey)throw new Error("Address is required")}async internalBuildTransaction(e,r=!1){if(e.data.inputs.length===0){const n=this.getInputs(),i=this.getOutputs();e.setMaximumFeeRate(this._maximumFeeRate),e.addInputs(n,r);for(let o=0;o<this.updateInputs.length;o++)e.updateInput(o,this.updateInputs[o]);e.addOutputs(i)}try{return await this.signInputs(e),this.finalized&&(this.transactionFee=BigInt(e.getFee())),!0}catch(n){const i=n;this.error(`[internalBuildTransaction] Something went wrong while getting building the transaction: ${i.stack}`)}return!1}createChangeOutput(e){if(pn.isValidP2TRAddress(this.from,this.network))return{value:xt(e),address:this.from,tapInternalKey:this.internalPubKeyToXOnly()};if(pn.isValidPublicKey(this.from,this.network)){const r=st.compile([Ee(this.from.replace("0x","")),ge.OP_CHECKSIG]);return{value:xt(e),script:r}}else return{value:xt(e),address:this.from}}}class El extends Me{type=Ce.CUSTOM_CODE;_scriptAddress;tapLeafScript=null;targetScriptRedeem=null;leftOverFundsScriptRedeem=null;compiledTargetScript;scriptTree;generator;scriptSeed;contractSigner;randomBytes;witnesses;annexData;constructor(e){if(super(e),!e.script)throw new Error("Bitcoin script is required");if(!e.witnesses)throw new Error("Witness(es) are required");this.witnesses=e.witnesses,this.randomBytes=e.randomBytes||hr.rndBytes(),this.LOCK_LEAF_SCRIPT=this.defineLockScript(),this.scriptSeed=this.getContractSeed(),this.contractSigner=ot.fromSeedKeyPair(this.scriptSeed,this.network),this.generator=new B5(this.internalPubKeyToXOnly(),this.network),this.compiledTargetScript=this.generator.compile(e.script),this.scriptTree=this.getScriptTree(),this.internalInit(),this._scriptAddress=P0.generatePKSH(this.scriptSeed,this.network)}get scriptAddress(){return this._scriptAddress}get p2trAddress(){return this.to||this.getScriptAddress()}exportCompiledTargetScript(){return this.compiledTargetScript}getRndBytes(){return this.randomBytes}contractSignerXOnlyPubKey(){return nt(this.contractSigner.publicKey)}async buildTransaction(){this.to||(this.to=this.getScriptAddress());const e=this.contractSigner?this.targetScriptRedeem:this.leftOverFundsScriptRedeem;if(!e)throw new Error("Left over funds script redeem is required");if(!e.redeemVersion)throw new Error("Left over funds script redeem version is required");if(!e.output)throw new Error("Left over funds script redeem output is required");this.tapLeafScript={leafVersion:e.redeemVersion,script:e.output,controlBlock:this.getWitness()},this.addInputsFromUTXO();const r=this.getTransactionOPNetFee();this.addOutput({value:xt(r),address:this.to}),await this.addRefundOutput(r+this.addOptionalOutputsAndGetAmount())}async signInputs(e){if(!this.contractSigner){await super.signInputs(e);return}try{e.signInput(0,this.contractSigner)}catch{}e.signInput(0,this.getSignerKey()),e.finalizeInput(0,this.customFinalizer);const r=new Set([0]);if(this.canUseParallelSigning&&Do(this.signer))try{const n=await this.signKeyPathInputsParallel(e,new Set([0]));if(n.success)for(const i of n.signatures.keys())r.add(i)}catch(n){this.error(`Parallel signing failed: ${n.message}`)}for(let n=1;n<e.data.inputs.length;n++)r.has(n)||e.signInput(n,this.getSignerKey());for(let n=1;n<e.data.inputs.length;n++)try{e.finalizeInput(n,this.customFinalizerP2SH.bind(this))}catch{e.finalizeInput(n)}}generateScriptAddress(){return{internalPubkey:this.internalPubKeyToXOnly(),network:this.network,scriptTree:this.scriptTree,name:Ze.P2TR}}generateTapData(){const e=this.contractSigner?this.targetScriptRedeem:this.leftOverFundsScriptRedeem;if(!e)throw new Error("Left over funds script redeem is required");if(!this.scriptTree)throw new Error("Script tree is required");return{internalPubkey:this.internalPubKeyToXOnly(),network:this.network,scriptTree:this.scriptTree,redeem:e,name:Ze.P2TR}}getScriptSolution(e){if(!e.tapScriptSig)throw new Error("Tap script signature is required");const r=[...this.witnesses];if(e.tapScriptSig)for(const n of e.tapScriptSig)r.push(n.signature);return r}getContractSeed(){return Kt.hash256(this.randomBytes)}customFinalizer=(e,r)=>{if(!this.tapLeafScript)throw new Error("Tap leaf script is required");const n=this.getScriptSolution(r).concat(this.tapLeafScript.script).concat(this.tapLeafScript.controlBlock);if(this.annexData&&this.annexData.length>0){let i;if(this.annexData[0]===80)i=this.annexData;else{const o=new Uint8Array(this.annexData.length+1);o[0]=80,o.set(this.annexData,1),i=o}n.push(i)}return{finalScriptWitness:Me.witnessStackToScriptWitness(n)}};generateRedeemScripts(){this.targetScriptRedeem={name:Ze.P2TR,output:this.compiledTargetScript,redeemVersion:192},this.leftOverFundsScriptRedeem={name:Ze.P2TR,output:this.getLeafScript(),redeemVersion:192}}getLeafScript(){return this.LOCK_LEAF_SCRIPT}getScriptTree(){return this.generateRedeemScripts(),[{output:this.compiledTargetScript,version:192},{output:this.getLeafScript(),version:192}]}}class H0 extends Me{static MAXIMUM_CALLDATA_SIZE=1024*1024;randomBytes;targetScriptRedeem=null;leftOverFundsScriptRedeem=null;challenge;epochChallenge;calldataGenerator;calldata;scriptSigner;disableAutoRefund;constructor(e){if(super(e),!e.calldata)throw new Error("Calldata is required");if(!e.challenge)throw new Error("Challenge solution is required");this.challenge=e.challenge,this.LOCK_LEAF_SCRIPT=this.defineLockScript(),this.disableAutoRefund=e.disableAutoRefund||!1,this.epochChallenge=nn.generateTimeLockAddress(this.challenge.publicKey.originalPublicKeyBuffer(),this.network),this.calldata=sn.compress(e.calldata),this.randomBytes=e.randomBytes||hr.rndBytes(),this.scriptSigner=this.generateKeyPairFromSeed(),this.calldataGenerator=new T0(this.signer.publicKey,this.scriptSignerXOnlyPubKey(),this.network)}exportCompiledTargetScript(){return this.compiledTargetScript}getContractSecret(){return this.contractSecret}getRndBytes(){return this.randomBytes}getChallenge(){return this.challenge}scriptSignerXOnlyPubKey(){return nt(this.scriptSigner.publicKey)}generateKeyPairFromSeed(){return ot.fromSeedKeyPair(this.randomBytes,this.network)}async buildTransaction(){const e=this.scriptSigner?this.targetScriptRedeem:this.leftOverFundsScriptRedeem;if(!e)throw new Error("Left over funds script redeem is required");if(!e.redeemVersion)throw new Error("Left over funds script redeem version is required");if(!e.output)throw new Error("Left over funds script redeem output is required");this.tapLeafScript={leafVersion:e.redeemVersion,script:e.output,controlBlock:this.getWitness()},this.regenerated||this.addInputsFromUTXO(),await this.createMineableRewardOutputs()}async signInputs(e){if(!this.scriptSigner){await super.signInputs(e);return}"multiSignPsbt"in this.signer?await this.signInputsWalletBased(e):await this.signInputsNonWalletBased(e)}generateScriptAddress(){return{internalPubkey:this.internalPubKeyToXOnly(),network:this.network,scriptTree:this.scriptTree,name:Ze.P2TR}}generateTapData(){const e=this.scriptSigner?this.targetScriptRedeem:this.leftOverFundsScriptRedeem;if(!e)throw new Error("Left over funds script redeem is required");if(!this.scriptTree)throw new Error("Script tree is required");return{internalPubkey:this.internalPubKeyToXOnly(),network:this.network,scriptTree:this.scriptTree,redeem:e,name:Ze.P2TR}}getScriptSolution(e){if(!e.tapScriptSig)throw new Error("Tap script signature is required");return[this.contractSecret,e.tapScriptSig[0].signature,e.tapScriptSig[1].signature]}getScriptTree(){if(!this.calldata)throw new Error("Calldata is required");return this.generateRedeemScripts(),[{output:this.compiledTargetScript,version:192},{output:this.LOCK_LEAF_SCRIPT,version:192}]}customFinalizer=(e,r)=>{if(!this.tapLeafScript)throw new Error("Tap leaf script is required");if(!this.contractSecret)throw new Error("Contract secret is required");const n=this.getScriptSolution(r).concat(this.tapLeafScript.script).concat(this.tapLeafScript.controlBlock);return{finalScriptWitness:Me.witnessStackToScriptWitness(n)}};async signInputsWalletBased(e){const r=this.signer;await this.signInput(e,e.data.inputs[0],0,this.scriptSigner),await r.multiSignPsbt([e]);for(let n=0;n<e.data.inputs.length;n++)if(n===0)e.finalizeInput(n,this.customFinalizer.bind(this));else try{e.finalizeInput(n,this.customFinalizerP2SH.bind(this))}catch{e.finalizeInput(n)}}async signInputsNonWalletBased(e){if(await this.signInput(e,e.data.inputs[0],0,this.scriptSigner),await this.signInput(e,e.data.inputs[0],0,this.getSignerKey()),e.finalizeInput(0,this.customFinalizer.bind(this)),this.canUseParallelSigning&&Do(this.signer)){let r=new Set;try{const n=await this.signKeyPathInputsParallel(e,new Set([0]));n.success&&(r=new Set(n.signatures.keys()))}catch(n){this.error(`Parallel signing failed, falling back to sequential: ${n.message}`)}for(let n=1;n<e.data.inputs.length;n++)r.has(n)||await this.signInput(e,e.data.inputs[n],n,this.signer)}else for(let r=1;r<e.data.inputs.length;r++)await this.signInput(e,e.data.inputs[r],r,this.signer);for(let r=1;r<e.data.inputs.length;r++)try{e.finalizeInput(r,this.customFinalizerP2SH.bind(this))}catch{e.finalizeInput(r)}this.finalized=!0}async createMineableRewardOutputs(){if(!this.to)throw new Error("To address is required");const e=this.getTransactionOPNetFee();this.addFeeToOutput(e,this.to,this.epochChallenge,!1);const r=e<gn?gn:e,n=this.addOptionalOutputsAndGetAmount();this.disableAutoRefund||await this.addRefundOutput(r+n)}generateRedeemScripts(){this.targetScriptRedeem={name:Ze.P2TR,output:this.compiledTargetScript,redeemVersion:192},this.leftOverFundsScriptRedeem={name:Ze.P2TR,output:this.LOCK_LEAF_SCRIPT,redeemVersion:192}}}class Cs extends Me{static MAXIMUM_CONTRACT_SIZE=128*1024;type=Ce.DEPLOYMENT;challenge;epochChallenge;_contractAddress;tapLeafScript=null;deploymentVersion=0;targetScriptRedeem=null;leftOverFundsScriptRedeem=null;compiledTargetScript;scriptTree;deploymentGenerator;contractSeed;bytecode;calldata;contractSigner;_contractPubKey;randomBytes;_computedAddress;constructor(e){if(super(e),!this.hashedPublicKey)throw new Error("MLDSA signer must be defined to deploy a contract.");if(this.bytecode=sn.compress(new Uint8Array([...O5,...e.bytecode])),this.verifyBytecode(),e.calldata&&(this.calldata=e.calldata,this.verifyCalldata()),!e.challenge)throw new Error("Challenge solution is required");if(this.randomBytes=e.randomBytes||hr.rndBytes(),this.challenge=e.challenge,this.LOCK_LEAF_SCRIPT=this.defineLockScript(),this.epochChallenge=nn.generateTimeLockAddress(this.challenge.publicKey.originalPublicKeyBuffer(),this.network),this.contractSeed=this.getContractSeed(),this.contractSigner=ot.fromSeedKeyPair(this.contractSeed,this.network),this.deploymentGenerator=new B0(this.signer.publicKey,this.contractSignerXOnlyPubKey(),this.network),e.compiledTargetScript)if(e.compiledTargetScript instanceof Uint8Array)this.compiledTargetScript=e.compiledTargetScript;else if(typeof e.compiledTargetScript=="string")this.compiledTargetScript=Ee(e.compiledTargetScript);else throw new Error("Invalid compiled target script format.");else this.compiledTargetScript=this.deploymentGenerator.compile(this.bytecode,this.randomBytes,this.challenge,this.priorityFee,this.calldata,this.generateFeatures(e));this.scriptTree=this.getScriptTree(),this.internalInit(),this._contractPubKey="0x"+ve(this.contractSeed),this._contractAddress=new $t(this.contractSeed)}get contractPubKey(){return this._contractPubKey}get contractAddress(){return this._contractAddress}get p2trAddress(){return this.to||this.getScriptAddress()}exportCompiledTargetScript(){return this.compiledTargetScript}getRndBytes(){return this.randomBytes}getChallenge(){return this.challenge}getContractAddress(){return this._computedAddress?this._computedAddress:(this._computedAddress=ot.p2op(this.contractSeed,this.network,this.deploymentVersion),this._computedAddress)}contractSignerXOnlyPubKey(){return nt(this.contractSigner.publicKey)}async buildTransaction(){this.to||(this.to=this.getScriptAddress());const e=this.contractSigner?this.targetScriptRedeem:this.leftOverFundsScriptRedeem;if(!e)throw new Error("Left over funds script redeem is required");if(!e.redeemVersion)throw new Error("Left over funds script redeem version is required");if(!e.output)throw new Error("Left over funds script redeem output is required");this.tapLeafScript={leafVersion:e.redeemVersion,script:e.output,controlBlock:this.getWitness()},this.addInputsFromUTXO();const r=this.getTransactionOPNetFee();this.addFeeToOutput(r,this.getContractAddress(),this.epochChallenge,!0),await this.addRefundOutput(r+this.addOptionalOutputsAndGetAmount())}async signInputsWalletBased(e){const r=this.signer;await this.signInput(e,e.data.inputs[0],0,this.contractSigner),await r.multiSignPsbt([e]);for(let n=0;n<e.data.inputs.length;n++)if(n===0)e.finalizeInput(n,this.customFinalizer.bind(this));else try{e.finalizeInput(n,this.customFinalizerP2SH.bind(this))}catch{e.finalizeInput(n)}}async signInputs(e){if(!this.contractSigner){await super.signInputs(e);return}if("multiSignPsbt"in this.signer){await this.signInputsWalletBased(e);return}e.signInput(0,this.contractSigner),e.signInput(0,this.getSignerKey()),e.finalizeInput(0,this.customFinalizer.bind(this));const r=new Set([0]);if(this.canUseParallelSigning&&Do(this.signer))try{const n=await this.signKeyPathInputsParallel(e,new Set([0]));if(n.success)for(const i of n.signatures.keys())r.add(i)}catch(n){this.error(`Parallel signing failed: ${n.message}`)}for(let n=1;n<e.data.inputs.length;n++)r.has(n)||e.signInput(n,this.getSignerKey());for(let n=1;n<e.data.inputs.length;n++)try{e.finalizeInput(n,this.customFinalizerP2SH.bind(this))}catch{e.finalizeInput(n)}}generateScriptAddress(){return{name:Ze.P2TR,internalPubkey:this.internalPubKeyToXOnly(),network:this.network,scriptTree:this.scriptTree}}generateTapData(){const e=this.contractSigner?this.targetScriptRedeem:this.leftOverFundsScriptRedeem;if(!e)throw new Error("Left over funds script redeem is required");if(!this.scriptTree)throw new Error("Script tree is required");return{name:Ze.P2TR,internalPubkey:this.internalPubKeyToXOnly(),network:this.network,scriptTree:this.scriptTree,redeem:e}}generateFeatures(e){const r=[],n=e.challenge.getSubmission();if(n&&r.push({priority:jn.MLDSA_LINK_PUBKEY,opcode:Kr.EPOCH_SUBMISSION,data:n}),e.revealMLDSAPublicKey&&!e.linkMLDSAPublicKeyToAddress)throw new Error("To reveal the MLDSA public key, you must set linkMLDSAPublicKeyToAddress to true.");return e.linkMLDSAPublicKeyToAddress&&this.generateMLDSALinkRequest(e,r),r}verifyCalldata(){if(this.calldata&&this.calldata.length>H0.MAXIMUM_CALLDATA_SIZE)throw new Error("Calldata size overflow.")}verifyBytecode(){if(!this.bytecode)throw new Error("Bytecode is required");if(this.bytecode.length>Cs.MAXIMUM_CONTRACT_SIZE)throw new Error("Contract size overflow.")}getContractSeed(){if(!this.bytecode)throw new Error("Bytecode is required");const e=this.internalPubKeyToXOnly(),r=Kt.hash256(this.randomBytes),n=Kt.hash256(this.bytecode),i=jt([e,r,n]);return Kt.hash256(i)}customFinalizer=(e,r)=>{if(!this.tapLeafScript)throw new Error("Tap leaf script is required");if(!r.tapScriptSig)throw new Error("Tap script signature is required");const n=[this.randomBytes,r.tapScriptSig[0].signature,r.tapScriptSig[1].signature].concat(this.tapLeafScript.script).concat(this.tapLeafScript.controlBlock);return{finalScriptWitness:Me.witnessStackToScriptWitness(n)}};generateRedeemScripts(){this.targetScriptRedeem={name:Ze.P2TR,output:this.compiledTargetScript,redeemVersion:192},this.leftOverFundsScriptRedeem={name:Ze.P2TR,output:this.getLeafScript(),redeemVersion:192}}getLeafScript(){return this.LOCK_LEAF_SCRIPT}getScriptTree(){if(!this.bytecode)throw new Error("Contract bytecode is required");return this.generateRedeemScripts(),[{output:this.compiledTargetScript,version:192},{output:this.getLeafScript(),version:192}]}}class Sl extends Me{type=Ce.FUNDING;amount;splitInputsInto;autoAdjustAmount;constructor(e){const r=e.feeUtxos?.length?{...e,utxos:[...e.utxos,...e.feeUtxos]}:e;super(r),this.amount=e.amount,this.splitInputsInto=e.splitInputsInto??1,this.autoAdjustAmount=e.autoAdjustAmount??!1,this.internalInit()}async buildTransaction(){if(!this.to)throw new Error("Recipient address is required");if(this.addInputsFromUTXO(),this.autoAdjustAmount&&this.amount>=this.totalInputAmount){if(this.isPubKeyDestination){const i=st.compile([Ee(this.to.replace("0x","")),ge.OP_CHECKSIG]);this.addOutput({value:xt(this.amount),script:i})}else this.addOutput({value:xt(this.amount),address:this.to});const r=await this.estimateTransactionFees();this.outputs.pop();const n=this.totalInputAmount-r;if(n<Me.MINIMUM_DUST)throw new Error(`Insufficient funds: after deducting fee of ${r} sats, remaining amount ${n} sats is below minimum dust`);this.amount=n}if(this.splitInputsInto>1)this.splitInputs(this.amount);else if(this.isPubKeyDestination){const r=st.compile([Ee(this.to.replace("0x","")),ge.OP_CHECKSIG]);this.addOutput({value:xt(this.amount),script:r})}else this.addOutput({value:xt(this.amount),address:this.to});const e=this.amount+this.addOptionalOutputsAndGetAmount();await this.addRefundOutput(e)}splitInputs(e){if(!this.to)throw new Error("Recipient address is required");const r=e/BigInt(this.splitInputsInto);for(let n=0;n<this.splitInputsInto;n++)this.isPubKeyDestination?this.addOutput({value:xt(r),script:Ee(this.to.slice(2))}):this.addOutput({value:xt(r),address:this.to})}getSignerKey(){return this.signer}}class Al extends H0{type=Ce.INTERACTION;compiledTargetScript;scriptTree;tapLeafScript=null;contractSecret;constructor(e){if(super(e),!e.contract)throw new Error("parameters.contract is required for interaction transaction.");if(this.contractSecret=Ee(e.contract.replace("0x","")),this.contractSecret.length!==32)throw new Error("Invalid contract secret length. Expected 32 bytes.");if(e.compiledTargetScript)if(e.compiledTargetScript instanceof Uint8Array)this.compiledTargetScript=e.compiledTargetScript;else if(typeof e.compiledTargetScript=="string")this.compiledTargetScript=Ee(e.compiledTargetScript);else throw new Error("Invalid compiled target script format.");else this.compiledTargetScript=this.calldataGenerator.compile(this.calldata,this.contractSecret,this.challenge,this.priorityFee,this.generateFeatures(e));this.scriptTree=this.getScriptTree(),this.internalInit()}generateFeatures(e){const r=[];e.loadedStorage&&r.push({priority:jn.ACCESS_LIST,opcode:Kr.ACCESS_LIST,data:e.loadedStorage});const n=e.challenge.getSubmission();if(n&&r.push({priority:jn.EPOCH_SUBMISSION,opcode:Kr.EPOCH_SUBMISSION,data:n}),e.revealMLDSAPublicKey&&!e.linkMLDSAPublicKeyToAddress)throw new Error("To reveal the MLDSA public key, you must set linkMLDSAPublicKeyToAddress to true.");return e.linkMLDSAPublicKeyToAddress&&this.generateMLDSALinkRequest(e,r),r}}class si extends Me{static MAX_WITNESS_FIELDS=10;static MAX_BYTES_PER_WITNESS=80;type=Ce.INTERACTION;epochChallenge;disableAutoRefund;contractSecret;calldata;challenge;randomBytes;p2wdaGenerator;scriptSigner;p2wdaInputIndices=new Set;compiledOperationData=null;constructor(e){if(super(e),!e.to)throw new Error("Contract address (to) is required");if(!e.contract)throw new Error("Contract secret is required");if(!e.calldata)throw new Error("Calldata is required");if(!e.challenge)throw new Error("Challenge solution is required");if(this.disableAutoRefund=e.disableAutoRefund||!1,this.contractSecret=Ee(e.contract.replace("0x","")),this.calldata=sn.compress(e.calldata),this.challenge=e.challenge,this.randomBytes=e.randomBytes||hr.rndBytes(),this.scriptSigner=this.generateKeyPairFromSeed(),this.p2wdaGenerator=new Ya(this.signer.publicKey,this.scriptSignerXOnlyPubKey(),this.network),this.contractSecret.length!==32)throw new Error("Invalid contract secret length. Expected 32 bytes.");if(this.epochChallenge=nn.generateTimeLockAddress(this.challenge.publicKey.originalPublicKeyBuffer(),this.network),this.validateP2WDAInputs(),e.compiledTargetScript)if(e.compiledTargetScript instanceof Uint8Array)this.compiledOperationData=e.compiledTargetScript;else if(typeof e.compiledTargetScript=="string")this.compiledOperationData=Ee(e.compiledTargetScript);else throw new Error("Invalid compiled target script format.");else this.compiledOperationData=this.p2wdaGenerator.compile(this.calldata,this.contractSecret,this.challenge,this.priorityFee,this.generateFeatures(e));this.validateOperationDataSize(),this.internalInit()}getRndBytes(){return this.randomBytes}getChallenge(){return this.challenge}getContractSecret(){return this.contractSecret}async buildTransaction(){this.regenerated||this.addInputsFromUTXO(),await this.createMineableRewardOutputs()}async createMineableRewardOutputs(){if(!this.to)throw new Error("To address is required");const e=this.getTransactionOPNetFee();this.addFeeToOutput(e,this.to,this.epochChallenge,!1);const r=this.addOptionalOutputsAndGetAmount();this.disableAutoRefund||await this.addRefundOutput(e+r)}async signInputs(e){for(let r=0;r<e.data.inputs.length;r++)await this.signInput(e,e.data.inputs[r],r,this.signer);for(let r=0;r<e.data.inputs.length;r++)this.p2wdaInputIndices.has(r)?r===0?e.finalizeInput(r,this.finalizePrimaryP2WDA.bind(this)):e.finalizeInput(r,this.finalizeSecondaryP2WDA.bind(this)):e.finalizeInput(r,this.customFinalizerP2SH.bind(this));this.finalized=!0}generateFeatures(e){const r=[];e.loadedStorage&&r.push({priority:jn.ACCESS_LIST,opcode:Kr.ACCESS_LIST,data:e.loadedStorage});const n=e.challenge.getSubmission();return n&&r.push({priority:jn.EPOCH_SUBMISSION,opcode:Kr.EPOCH_SUBMISSION,data:n}),r}generateKeyPairFromSeed(){return ot.fromSeedKeyPair(this.randomBytes,this.network)}scriptSignerXOnlyPubKey(){return nt(this.scriptSigner.publicKey)}validateP2WDAInputs(){if(this.utxos.length===0||!yn.isP2WDAUTXO(this.utxos[0]))throw new Error("Input 0 must be a P2WDA UTXO");for(let e=0;e<this.utxos.length;e++)yn.isP2WDAUTXO(this.utxos[e])&&this.p2wdaInputIndices.add(e);for(let e=0;e<this.optionalInputs.length;e++){const r=this.utxos.length+e;yn.isP2WDAUTXO(this.optionalInputs[e])&&this.p2wdaInputIndices.add(r)}}validateOperationDataSize(){if(!this.compiledOperationData)throw new Error("Operation data not compiled");const e=this.compiledOperationData.length;if(!Ya.validateWitnessSize(e)){const r=e+64,n=Math.ceil(r*.7),i=Math.ceil(n/si.MAX_BYTES_PER_WITNESS);throw new Error(`Please dont use P2WDA for this operation. Data too large. Raw size: ${e} bytes, estimated compressed: ${n} bytes, needs ${i} witness fields, max is ${si.MAX_WITNESS_FIELDS}`)}}finalizePrimaryP2WDA(e,r){if(!r.partialSig||r.partialSig.length===0)throw new Error(`No signature for P2WDA input #${e}`);if(!r.witnessScript)throw new Error(`No witness script for P2WDA input #${e}`);if(!this.compiledOperationData)throw new Error("Operation data not compiled");const n=r.partialSig[0].signature,i=jt([n,this.compiledOperationData]),o=Zi.signMessage(this.signer,i).signature,s=jt([o,this.compiledOperationData]),a=sn.compress(s),l=this.splitIntoWitnessChunks(a);if(l.length>si.MAX_WITNESS_FIELDS)throw new Error(`Compressed data needs ${l.length} witness fields, max is ${si.MAX_WITNESS_FIELDS}`);const f=[n];for(let u=0;u<si.MAX_WITNESS_FIELDS;u++)f.push(u<l.length?l[u]:new Uint8Array(0));return f.push(r.witnessScript),{finalScriptSig:void 0,finalScriptWitness:Me.witnessStackToScriptWitness(f)}}splitIntoWitnessChunks(e){const r=[];let n=0;for(;n<e.length;){const i=Math.min(si.MAX_BYTES_PER_WITNESS,e.length-n);r.push(e.slice(n,n+i)),n+=i}return r}}class D0 extends Me{type=Ce.CANCEL;tapLeafScript=null;compiledTargetScript;scriptTree;contractSecret;leftOverFundsScriptRedeem=null;constructor(e){super({...e,gasSatFee:1n,isCancellation:!0,priorityFee:1n,calldata:Pt.alloc(0)}),this.contractSecret=new Uint8Array(0),e.compiledTargetScript instanceof Uint8Array?this.compiledTargetScript=e.compiledTargetScript:this.compiledTargetScript=Ee(e.compiledTargetScript),this.scriptTree=this.getMinimalScriptTree(),this.internalInit()}async buildTransaction(){if(!this.from)throw new Error("From address is required");if(!this.leftOverFundsScriptRedeem)throw new Error("Left over funds script redeem is required");if(!this.leftOverFundsScriptRedeem.redeemVersion)throw new Error("Left over funds script redeem version is required");if(!this.leftOverFundsScriptRedeem.output)throw new Error("Left over funds script redeem output is required");if(this.tapLeafScript={leafVersion:this.leftOverFundsScriptRedeem.redeemVersion,script:this.leftOverFundsScriptRedeem.output,controlBlock:this.getWitness()},this.addInputsFromUTXO(),await this.addRefundOutput(0n,!0),!this.feeOutput)throw new Error("Must add extra UTXOs to cancel this transaction")}generateScriptAddress(){return{internalPubkey:this.internalPubKeyToXOnly(),network:this.network,scriptTree:this.scriptTree,name:Ze.P2TR}}generateTapData(){const e=this.leftOverFundsScriptRedeem;if(!e)throw new Error("Left over funds script redeem is required");if(!this.scriptTree)throw new Error("Script tree is required");return{internalPubkey:this.internalPubKeyToXOnly(),network:this.network,scriptTree:this.scriptTree,redeem:e,name:Ze.P2TR}}customFinalizer=(e,r)=>{if(!this.tapLeafScript)throw new Error("Tap leaf script is required");if(!r.tapScriptSig||r.tapScriptSig.length===0)throw new Error("Tap script signature is required");const n=[r.tapScriptSig[0].signature].concat(this.tapLeafScript.script).concat(this.tapLeafScript.controlBlock);return{finalScriptWitness:Me.witnessStackToScriptWitness(n)}};async signInputs(e){"multiSignPsbt"in this.signer?await this.signInputsWalletBased(e):await this.signInputsNonWalletBased(e)}async signInputsWalletBased(e){await this.signer.multiSignPsbt([e]);for(let r=0;r<e.data.inputs.length;r++)if(r===0)e.finalizeInput(r,this.customFinalizer.bind(this));else try{e.finalizeInput(r,this.customFinalizerP2SH.bind(this))}catch{e.finalizeInput(r)}}async signInputsNonWalletBased(e){await this.signInput(e,e.data.inputs[0],0,this.getSignerKey()),e.finalizeInput(0,this.customFinalizer.bind(this));let r=new Set;if(this.canUseParallelSigning&&Do(this.signer))try{const n=await this.signKeyPathInputsParallel(e,new Set([0]));n.success&&(r=new Set(n.signatures.keys()))}catch(n){this.error(`Parallel signing failed, falling back to sequential: ${n.message}`)}for(let n=1;n<e.data.inputs.length;n++)r.has(n)||await this.signInput(e,e.data.inputs[n],n,this.signer);for(let n=1;n<e.data.inputs.length;n++)try{e.finalizeInput(n,this.customFinalizerP2SH.bind(this))}catch{e.finalizeInput(n)}}getMinimalScriptTree(){if(this.generateLeftoverFundsRedeem(),!this.leftOverFundsScriptRedeem||!this.leftOverFundsScriptRedeem.output)throw new Error("Failed to generate leftover funds redeem script");return[{output:this.compiledTargetScript,version:192},{output:this.leftOverFundsScriptRedeem.output,version:192}]}generateLeftoverFundsRedeem(){this.leftOverFundsScriptRedeem={name:Ze.P2TR,output:this.LOCK_LEAF_SCRIPT,redeemVersion:192}}}class F5 extends Me{type=Ce.INTERACTION;randomBytes;contractAddress;contractSecret;calldata;challenge;epochChallenge;scriptSigner;calldataGenerator;hashCommitmentGenerator;compiledTargetScript;commitmentOutputs;disableAutoRefund;maxChunkSize;cachedValuePerOutput=null;constructor(e){if(super(e),!e.to)throw new Error("Contract address (to) is required");if(!e.contract)throw new Error("Contract secret (contract) is required");if(!e.calldata)throw new Error("Calldata is required");if(!e.challenge)throw new Error("Challenge solution is required");if(this.contractAddress=e.to,this.contractSecret=Ee(e.contract.replace("0x","")),this.disableAutoRefund=e.disableAutoRefund||!1,this.maxChunkSize=e.maxChunkSize??tt.MAX_CHUNK_SIZE,this.contractSecret.length!==32)throw new Error("Invalid contract secret length. Expected 32 bytes.");if(this.calldata=sn.compress(e.calldata),this.randomBytes=e.randomBytes||hr.rndBytes(),this.scriptSigner=ot.fromSeedKeyPair(this.randomBytes,this.network),this.challenge=e.challenge,this.epochChallenge=nn.generateTimeLockAddress(this.challenge.publicKey.originalPublicKeyBuffer(),this.network),this.calldataGenerator=new T0(this.signer.publicKey,nt(this.scriptSigner.publicKey),this.network),e.compiledTargetScript)if(e.compiledTargetScript instanceof Uint8Array)this.compiledTargetScript=e.compiledTargetScript;else if(typeof e.compiledTargetScript=="string")this.compiledTargetScript=Ee(e.compiledTargetScript);else throw new Error("Invalid compiled target script format.");else this.compiledTargetScript=this.calldataGenerator.compile(this.calldata,this.contractSecret,this.challenge,this.priorityFee,this.generateFeatures(e));this.hashCommitmentGenerator=new tt(this.signer.publicKey,this.network),this.commitmentOutputs=this.hashCommitmentGenerator.prepareChunks(this.compiledTargetScript,this.maxChunkSize),this.validateOutputCount();const r=this.commitmentOutputs.reduce((n,i)=>n+i.dataChunks.length,0);this.log(`ConsolidatedInteractionTransaction: ${this.commitmentOutputs.length} outputs, ${r} chunks from ${this.compiledTargetScript.length} bytes compiled data`),this.internalInit()}exportCompiledTargetScript(){return this.compiledTargetScript}getContractSecret(){return this.contractSecret}getRndBytes(){return this.randomBytes}getChallenge(){return this.challenge}getCommitmentOutputs(){return this.commitmentOutputs}getOutputCount(){return this.commitmentOutputs.length}getTotalChunkCount(){return this.commitmentOutputs.reduce((e,r)=>e+r.dataChunks.length,0)}async build(){const e=await this.signTransaction(),r=e.getId(),n={txHex:e.toHex(),txId:r,outputs:this.commitmentOutputs,feesPaid:this.transactionFee,chunkCount:this.getTotalChunkCount(),totalDataSize:this.compiledTargetScript.length};this.log(`Setup transaction: ${n.txId}`);const i=this.buildRevealTransaction(r);return{setup:n,reveal:i,totalFees:n.feesPaid+i.feesPaid}}buildRevealTransaction(e){const r=new fr({network:this.network}),n=this.calculateValuePerOutput();for(let y=0;y<this.commitmentOutputs.length;y++){const w=this.commitmentOutputs[y];r.addInput({hash:e,index:y,witnessUtxo:{script:w.scriptPubKey,value:xt(n)},witnessScript:w.witnessScript})}const i=BigInt(this.commitmentOutputs.length)*n,o=this.getTransactionOPNetFee(),s=o<gn?gn:o;r.addOutput({address:this.epochChallenge.address,value:xt(s)});const a=this.estimateRevealVBytes(),l=BigInt(Math.ceil(a*this.feeRate)),f=i-s-l;if(f>Me.MINIMUM_DUST){const y=this.getRefundAddress();r.addOutput({address:y,value:xt(f)})}for(let y=0;y<this.commitmentOutputs.length;y++)r.signInput(y,this.signer);for(let y=0;y<this.commitmentOutputs.length;y++){const w=this.commitmentOutputs[y];r.finalizeInput(y,(A,S)=>this.finalizeCommitmentInput(S,w))}const u=r.extractTransaction(),p={txHex:u.toHex(),txId:u.getId(),dataSize:this.compiledTargetScript.length,feesPaid:l,inputCount:this.commitmentOutputs.length};return this.log(`Reveal transaction: ${p.txId}`),p}getValuePerOutput(){return this.calculateValuePerOutput()}async buildTransaction(){this.addInputsFromUTXO();const e=this.calculateValuePerOutput();for(const i of this.commitmentOutputs)this.addOutput({value:xt(e),address:i.address});const r=BigInt(this.commitmentOutputs.length)*e,n=this.addOptionalOutputsAndGetAmount();await this.addRefundOutput(r+n)}finalizeCommitmentInput(e,r){if(!e.partialSig||e.partialSig.length===0)throw new Error("No signature for commitment input");if(!e.witnessScript)throw new Error("No witness script for commitment input");const n=[e.partialSig[0].signature,...r.dataChunks,e.witnessScript];return{finalScriptSig:void 0,finalScriptWitness:Me.witnessStackToScriptWitness(n)}}estimateRevealVBytes(){let e=0;for(const n of this.commitmentOutputs){const i=n.dataChunks.length,o=i*80,s=i*23+35;e+=164+o+s+72+20}const r=40+e+200;return Math.ceil(r/4)}calculateValuePerOutput(){if(this.cachedValuePerOutput!==null)return this.cachedValuePerOutput;const e=this.commitmentOutputs.length,r=this.getTransactionOPNetFee(),n=r<gn?gn:r,i=this.estimateRevealVBytes(),o=BigInt(Math.ceil(i*this.feeRate)),s=n+o+Me.MINIMUM_DUST,a=BigInt(Math.ceil(Number(s)/e)),l=tt.MIN_OUTPUT_VALUE;return this.cachedValuePerOutput=a>l?a:l,this.cachedValuePerOutput}getRefundAddress(){return this.from?this.from:P0.generatePKSH(this.signer.publicKey,this.network)}generateFeatures(e){const r=[];e.loadedStorage&&r.push({priority:jn.ACCESS_LIST,opcode:Kr.ACCESS_LIST,data:e.loadedStorage});const n=e.challenge.getSubmission();if(n&&r.push({priority:jn.EPOCH_SUBMISSION,opcode:Kr.EPOCH_SUBMISSION,data:n}),e.revealMLDSAPublicKey&&!e.linkMLDSAPublicKeyToAddress)throw new Error("To reveal the MLDSA public key, you must set linkMLDSAPublicKeyToAddress to true.");return e.linkMLDSAPublicKeyToAddress&&this.generateMLDSALinkRequest(e,r),r}validateOutputCount(){const e=tt.calculateMaxInputsPerTx();if(this.commitmentOutputs.length>e){const r=tt.calculateMaxDataPerTx();throw new Error(`Data too large: ${this.commitmentOutputs.length} P2WSH outputs needed, max ${e} per standard transaction (~${Math.floor(r/1024)}KB). Compiled data: ${this.compiledTargetScript.length} bytes.`)}}}class K5{debug=!1;DUMMY_PUBKEY=new Uint8Array(32).fill(1);P2TR_SCRIPT=Uint8Array.from([81,32,...this.DUMMY_PUBKEY]);INITIAL_FUNDING_ESTIMATE=2000n;MAX_ITERATIONS=10;async createCancellableTransaction(e){if(!e.to)throw new Error('Field "to" not provided.');if(!e.from)throw new Error('Field "from" not provided.');if(!e.utxos[0])throw new Error("Missing at least one UTXO.");const r=await this.detectCancelOPWallet(e);if(r)return r;if(!("signer"in e))throw new Error('Field "signer" not provided, OP_WALLET not detected.');const n=await new D0(e).signTransaction();return{transaction:n.toHex(),nextUTXOs:this.getUTXOAsTransaction(n,e.from,0),inputUtxos:e.utxos}}async createCustomScriptTransaction(e){if(!e.to)throw new Error('Field "to" not provided.');if(!e.from)throw new Error('Field "from" not provided.');if(!e.utxos[0])throw new Error("Missing at least one UTXO.");if(!("signer"in e))throw new Error('Field "signer" not provided, OP_WALLET not detected.');const r=this.parseOptionalInputs(e.optionalInputs),{finalTransaction:n,estimatedAmount:i}=await this.iterateFundingAmount({...e,optionalInputs:r},El,async u=>{const p=await u.estimateTransactionFees(),y=this.getPriorityFee(e),w=u.getOptionalOutputValue();return p+y+w},"CustomScript"),o=await n.getFundingTransactionParameters();o.utxos=e.utxos,o.amount=i;const s=await this.createFundTransaction({...o,optionalOutputs:[],optionalInputs:[]});if(!s)throw new Error("Could not sign funding transaction.");o.estimatedFees=s.estimatedFees;const a=await this.createFundTransaction({...o,optionalOutputs:[],optionalInputs:[]});if(!a)throw new Error("Could not sign funding transaction.");const l={...e,utxos:this.getUTXOAsTransaction(a.tx,e.to,0),randomBytes:n.getRndBytes(),nonWitnessUtxo:a.tx.toBuffer(),estimatedFees:n.estimatedFees,compiledTargetScript:n.exportCompiledTargetScript(),optionalInputs:r},f=await new El(l).signTransaction();return[a.tx.toHex(),f.toHex(),this.getUTXOAsTransaction(a.tx,e.from,1),e.utxos]}async signInteraction(e){if(!e.to)throw new Error('Field "to" not provided.');if(!e.from)throw new Error('Field "from" not provided.');if(!e.utxos[0])throw new Error("Missing at least one UTXO.");const r=await this.detectInteractionOPWallet(e);if(r)return r;if(!("signer"in e))throw new Error('Field "signer" not provided, OP_WALLET not detected.');if(this.hasP2WDAInputs(e.utxos))return this.signP2WDAInteraction(e);const n=this.parseOptionalInputs(e.optionalInputs),{finalTransaction:i,estimatedAmount:o,challenge:s}=await this.iterateFundingAmount({...e,optionalInputs:n},Al,async A=>{const S=await A.estimateTransactionFees(),k=A.getTotalOutputValue();return S+k},"Interaction");if(!s)throw new Error("Failed to get challenge from interaction transaction");const a=await i.getFundingTransactionParameters();a.utxos=e.utxos,a.amount=o;const l=await this.createFundTransaction({...a,optionalOutputs:[],optionalInputs:[]});if(!l)throw new Error("Could not sign funding transaction.");a.estimatedFees=l.estimatedFees;const f=await this.createFundTransaction({...a,optionalOutputs:[],optionalInputs:[]});if(!f)throw new Error("Could not sign funding transaction.");const u=this.getUTXOAsTransaction(f.tx,i.getScriptAddress(),0),p={...e,utxos:u,randomBytes:i.getRndBytes(),challenge:s,compiledTargetScript:i.exportCompiledTargetScript(),nonWitnessUtxo:f.tx.toBuffer(),estimatedFees:i.estimatedFees,optionalInputs:n},y=new Al(p),w=await y.signTransaction();return{interactionAddress:i.getScriptAddress(),fundingTransaction:f.tx.toHex(),interactionTransaction:w.toHex(),estimatedFees:y.transactionFee,nextUTXOs:this.getUTXOAsTransaction(f.tx,e.from,1),challenge:s.toRaw(),fundingUTXOs:u,fundingInputUtxos:e.utxos,compiledTargetScript:ve(y.exportCompiledTargetScript())}}async signConsolidatedInteraction(e){if(!e.to)throw new Error('Field "to" not provided.');if(!e.from)throw new Error('Field "from" not provided.');if(!e.utxos[0])throw new Error("Missing at least one UTXO.");if(!("signer"in e))throw new Error('Field "signer" not provided.');if(!e.challenge)throw new Error('Field "challenge" not provided.');const r=this.parseOptionalInputs(e.optionalInputs),n=new F5({...e,optionalInputs:r}),i=await n.build();return{setupTransaction:i.setup.txHex,revealTransaction:i.reveal.txHex,setupTxId:i.setup.txId,revealTxId:i.reveal.txId,totalFees:i.totalFees,chunkCount:i.setup.chunkCount,dataSize:i.setup.totalDataSize,challenge:n.getChallenge().toRaw(),inputUtxos:e.utxos,compiledTargetScript:ve(n.exportCompiledTargetScript())}}async signDeployment(e){const r=await this.detectDeploymentOPWallet(e);if(r)return r;if(!("signer"in e))throw new Error('Field "signer" not provided, OP_WALLET not detected.');const n=this.parseOptionalInputs(e.optionalInputs),{finalTransaction:i,estimatedAmount:o,challenge:s}=await this.iterateFundingAmount({...e,optionalInputs:n},Cs,async I=>{const N=await I.estimateTransactionFees(),B=this.getPriorityFee(e),V=I.getOptionalOutputValue();return N+B+V},"Deployment");if(!s)throw new Error("Failed to get challenge from deployment transaction");const a=await i.getFundingTransactionParameters();a.utxos=e.utxos,a.amount=o;const l=await this.createFundTransaction({...a,optionalOutputs:[],optionalInputs:[]});if(!l)throw new Error("Could not sign funding transaction.");a.estimatedFees=l.estimatedFees;const f=await new Sl({...a,optionalInputs:[],optionalOutputs:[]}).signTransaction();if(!f)throw new Error("Could not sign funding transaction.");const u=f.outs[0],p={transactionId:f.getId(),outputIndex:0,scriptPubKey:{hex:ve(u.script),address:i.getScriptAddress()},value:BigInt(u.value)},y={...e,utxos:[p],randomBytes:i.getRndBytes(),compiledTargetScript:i.exportCompiledTargetScript(),challenge:s,nonWitnessUtxo:f.toBuffer(),estimatedFees:i.estimatedFees,optionalInputs:n},w=new Cs(y),A=await w.signTransaction(),S=f.outs[1],k={transactionId:f.getId(),outputIndex:1,scriptPubKey:{hex:ve(S.script),address:e.from},value:BigInt(S.value)};return{transaction:[f.toHex(),A.toHex()],contractAddress:w.getContractAddress(),contractPubKey:w.contractPubKey,utxos:[k],challenge:s.toRaw(),inputUtxos:e.utxos}}async createBTCTransfer(e){if(!e.from)throw new Error('Field "from" not provided.');const r=await this.createFundTransaction(e);return{estimatedFees:r.estimatedFees,original:r.original,tx:r.tx.toHex(),nextUTXOs:this.getAllNewUTXOs(r.original,r.tx,e.from),inputUtxos:e.utxos}}getAllNewUTXOs(e,r,n){const i=e.getOutputs(),o=[];for(let s=0;s<r.outs.length;s++){const a=i[s];if("address"in a){if(a.address!==n)continue}else continue;o.push(...this.getUTXOAsTransaction(r,n,s))}return o}parseOptionalInputs(e){return(e||[]).map(r=>{let n=r.nonWitnessUtxo;return n&&!(n instanceof Uint8Array)&&typeof n=="object"&&(n=Uint8Array.from(Object.values(n))),{...r,nonWitnessUtxo:n}})}async detectCancelOPWallet(e){if(typeof window>"u")return null;const r=window;if(!r||!r.opnet||!r.opnet.web3)return null;const n=await r.opnet.web3.cancelTransaction({...e,signer:void 0});if(!n)throw new Error("Could not sign interaction transaction.");return{...n,inputUtxos:n.inputUtxos??e.utxos}}async detectInteractionOPWallet(e){if(typeof window>"u")return null;const r=window;if(!r||!r.opnet||!r.opnet.web3)return null;const n=await r.opnet.web3.signInteraction({...e,signer:void 0});if(!n)throw new Error("Could not sign interaction transaction.");return{...n,fundingInputUtxos:n.fundingInputUtxos??e.utxos}}async detectDeploymentOPWallet(e){if(typeof window>"u")return null;const r=window;if(!r||!r.opnet||!r.opnet.web3)return null;const n=await r.opnet.web3.deployContract({...e,signer:void 0});if(!n)throw new Error("Could not sign interaction transaction.");return{...n,inputUtxos:n.inputUtxos??e.utxos}}async createFundTransaction(e){if(!e.to)throw new Error('Field "to" not provided.');const r=new Sl(e),n=await r.signTransaction();if(!n)throw new Error("Could not sign funding transaction.");return{tx:n,original:r,estimatedFees:r.estimatedFees,nextUTXOs:this.getUTXOAsTransaction(n,e.to,0),inputUtxos:e.utxos}}hasP2WDAInputs(e){return e.some(r=>yn.isP2WDAUTXO(r))}async signP2WDAInteraction(e){if(!e.from)throw new Error('Field "from" not provided.');if(!("signer"in e))throw new Error("P2WDA interactions require a signer. OP_WALLET is not supported for P2WDA.");const r=this.parseOptionalInputs(e.optionalInputs),n=new si({...e,optionalInputs:r}),i=await n.signTransaction();return{interactionAddress:null,fundingTransaction:null,interactionTransaction:i.toHex(),estimatedFees:n.estimatedFees,nextUTXOs:this.getUTXOAsTransaction(i,e.from,i.outs.length-1),fundingUTXOs:[...e.utxos,...r],fundingInputUtxos:e.utxos,challenge:e.challenge.toRaw(),compiledTargetScript:null}}getPriorityFee(e){const r=e.priorityFee+e.gasSatFee;return r<Me.MINIMUM_DUST?Me.MINIMUM_DUST:r}async iterateFundingAmount(e,r,n,i){const o="randomBytes"in e?e.randomBytes??hr.rndBytes():hr.rndBytes(),s=$t.dead().p2tr(e.network);let a=this.INITIAL_FUNDING_ESTIMATE,l=0n,f=0,u=null,p=null;for(;f<this.MAX_ITERATIONS&&a!==l;){l=a;const y=new gt;y.addOutput(this.P2TR_SCRIPT,xt(a));const w={transactionId:ve(new Uint8Array(32)),outputIndex:0,scriptPubKey:{hex:ve(this.P2TR_SCRIPT),address:s},value:a,nonWitnessUtxo:y.toBuffer()};let A;"challenge"in e&&e.challenge?A={...e,utxos:[w],randomBytes:o,challenge:p??e.challenge}:A={...e,utxos:[w],randomBytes:o};const S=new r(A);try{await S.generateTransactionMinimalSignatures(),a=await n(S)}catch(k){if(k instanceof Error){const I=k.message.match(/need (\d+) sats but only have (\d+) sats/);if(I)a=BigInt(I[1]),this.debug&&console.log(`${i}: Caught insufficient funds, updating to ${a}`);else throw k}else throw new Error("Unknown error during fee estimation")}u=S,"getChallenge"in S&&typeof S.getChallenge=="function"&&(p=S.getChallenge()),f++,this.debug&&console.log(`${i} Iteration ${f}: Previous=${l}, New=${a}`)}if(!u)throw new Error(`Failed to converge on ${i} funding amount`);return{finalTransaction:u,estimatedAmount:a,challenge:p}}getUTXOAsTransaction(e,r,n){if(!e.outs[n])return[];const i=e.outs[n];return[{transactionId:e.getId(),outputIndex:n,scriptPubKey:{hex:ve(i.script),address:r},value:BigInt(i.value)}]}}class Lt extends Me{static LOCK_LEAF_SCRIPT=st.compile([ge.OP_XOR,ge.OP_NOP,ge.OP_CODESEPARATOR]);static signHashTypesArray=[];static numsPoint=Ee("50929b74c1a04954b78b4b6035e97a5e078a5a0f28ec96d547bfee9ace803ac0");type=Ce.MULTI_SIG;targetScriptRedeem=null;leftOverFundsScriptRedeem=null;compiledTargetScript;scriptTree;publicKeys;minimumSignatures;originalInputCount=0;requestedAmount;receiver;refundVault;sighashTypes=Lt.signHashTypesArray;constructor(e){if(!e.refundVault)throw new Error("Refund vault is required");if(!e.requestedAmount)throw new Error("Requested amount is required");if(!e.receiver)throw new Error("Receiver is required");if(super({...e,signer:ot.fromPrivateKey(Kt.sha256(new TextEncoder().encode("aaaaaaaa"))),priorityFee:0n,gasSatFee:0n}),!e.pubkeys)throw new Error("Pubkeys are required");e.psbt&&(this.log("Using provided PSBT."),this.transaction=e.psbt,this.originalInputCount=this.transaction.data.inputs.length),this.refundVault=e.refundVault,this.requestedAmount=e.requestedAmount,this.receiver=e.receiver,this.publicKeys=e.pubkeys,this.minimumSignatures=e.minimumSignatures,this.compiledTargetScript=Xa.compile(e.pubkeys,this.minimumSignatures),this.scriptTree=this.getScriptTree(),this.internalInit()}static fromBase64(e){const r=fr.fromBase64(e.psbt,{network:e.network});return new Lt({...e,psbt:r})}static verifyIfSigned(e,r){let n=!1;for(let i=1;i<e.data.inputs.length;i++){const o=e.data.inputs[i];if(!o.finalScriptWitness)continue;const s=Me.readScriptWitnessToWitnessStack(o.finalScriptWitness);if(!(s.length<3))for(let a=0;a<s.length-2;a+=3){const l=s[a+2];if(_e(l,r)){n=!0;break}}}return n}static signPartial(e,r,n,i){let o=!1,s=!0;for(let a=n;a<e.data.inputs.length;a++){const l=e.data.inputs[a];l.tapInternalKey||(l.tapInternalKey=nt(Lt.numsPoint));const f=[];if(l.finalScriptWitness){const p=Me.readScriptWitnessToWitnessStack(l.finalScriptWitness);l.tapLeafScript=[{leafVersion:192,script:p[p.length-2],controlBlock:p[p.length-1]}];for(let y=0;y<p.length-2;y+=3)f.push({signature:p[y],leafHash:p[y+1],pubkey:p[y+2]});l.tapScriptSig=(l.tapScriptSig||[]).concat(f)}Reflect.deleteProperty(l,"finalScriptWitness");const u=Lt.signHashTypesArray?[Lt.calculateSignHash(Lt.signHashTypesArray)]:[];try{Lt.signInput(e,l,a,r,u),o=!0}catch(p){console.log(p)}if(o){if(!l.tapScriptSig)throw new Error("No new signatures for input");l.tapScriptSig.length!==i[a-n]&&(s=!1)}}return{signed:o,final:o?s:!1}}static partialFinalizer=(e,r,n,i,o)=>{if(!r.tapLeafScript||!r.tapLeafScript[0]?.script||!r.tapLeafScript[0]?.controlBlock)throw new Error("Tap leaf script is required");if(!r.tapScriptSig)throw new Error(`No new signatures for input ${e}.`);let s=[];if(!o)s=r.tapScriptSig.map(f=>[f.signature,f.leafHash,f.pubkey]).flat();else{for(const f of i){let u=!1;for(const p of r.tapScriptSig)_e(p.pubkey,nt(f))&&(s.push(p.signature),u=!0);u||s.push(new Uint8Array(0))}s=s.reverse()}n.length>0&&(s=s.concat(n));const a=r.tapLeafScript[0],l=s.concat(a.script).concat(a.controlBlock);return{finalScriptWitness:Me.witnessStackToScriptWitness(l)}};static dedupeSignatures(e,r){const n=new Map;for(const i of e)n.set(ve(i.pubkey),i);for(const i of r)n.has(ve(i.pubkey))||n.set(ve(i.pubkey),i);return Array.from(n.values())}static attemptFinalizeInputs(e,r,n,i){let o=0;for(let s=r;s<e.data.inputs.length;s++)try{const a=e.data.inputs[s];a.tapInternalKey||(a.tapInternalKey=nt(Lt.numsPoint));const l=[];if(a.finalScriptWitness){const f=Me.readScriptWitnessToWitnessStack(a.finalScriptWitness);for(let u=0;u<f.length-2;u+=3)l.push({signature:f[u],leafHash:f[u+1],pubkey:f[u+2]});a.tapLeafScript=[{leafVersion:192,script:f[f.length-2],controlBlock:f[f.length-1]}],a.tapScriptSig=Lt.dedupeSignatures(a.tapScriptSig||[],l)}Reflect.deleteProperty(a,"finalScriptWitness"),e.finalizeInput(s,(f,u)=>Lt.partialFinalizer(f,u,[],n[s-r],i)),o++}catch{}return o===e.data.inputs.length-r}finalizeTransactionInputs(){let e=!1;try{for(let r=this.originalInputCount;r<this.transaction.data.inputs.length;r++)this.transaction.finalizeInput(r,this.customFinalizer.bind(this));e=!0}catch(r){this.error(`Error finalizing transaction inputs: ${r.stack}`)}return e}async signPSBT(){if(await this.signTransaction())return this.transaction;throw new Error("Could not sign transaction")}async buildTransaction(){const e=this.targetScriptRedeem;if(!e)throw new Error("Left over funds script redeem is required");if(!e.redeemVersion)throw new Error("Left over funds script redeem version is required");if(!e.output)throw new Error("Left over funds script redeem output is required");this.tapLeafScript={leafVersion:e.redeemVersion,script:e.output,controlBlock:this.getWitness()},this.addInputsFromUTXO();const r=this.calculateOutputLeftAmountFromVaults(this.utxos);if(r<0)throw new Error(`Output value left is negative ${r}.`);this.addOutput({address:this.refundVault,value:xt(r)}),this.addOutput({address:this.receiver,value:xt(this.requestedAmount)})}async internalBuildTransaction(e,r=!1){const n=this.getInputs(),i=this.getOutputs();e.setMaximumFeeRate(this._maximumFeeRate),e.addInputs(n,r);for(let o=0;o<this.updateInputs.length;o++)e.updateInput(o,this.updateInputs[o]);e.addOutputs(i);try{return await this.signInputs(e),this.finalizeTransactionInputs()}catch(o){const s=o;this.error(`[internalBuildTransaction] Something went wrong while getting building the transaction: ${s.stack}`)}return!1}async signInputs(e){}generateScriptAddress(){return{internalPubkey:nt(Lt.numsPoint),network:this.network,scriptTree:this.scriptTree,name:Ze.P2TR}}generateTapData(){const e=this.targetScriptRedeem;if(!e)throw new Error("Left over funds script redeem is required");if(!this.scriptTree)throw new Error("Script tree is required");return{internalPubkey:nt(Lt.numsPoint),network:this.network,scriptTree:this.scriptTree,redeem:e,name:Ze.P2TR}}getScriptSolution(e){return e.tapScriptSig?e.tapScriptSig.map(r=>r.signature):[]}getScriptTree(){return this.generateRedeemScripts(),[{output:this.compiledTargetScript,version:192},{output:Lt.LOCK_LEAF_SCRIPT,version:192}]}getTotalOutputAmount(e){let r=0n;for(const n of e)r+=n.value;return r}calculateOutputLeftAmountFromVaults(e){return this.getTotalOutputAmount(e)-this.requestedAmount}customFinalizer=(e,r)=>{if(!this.tapLeafScript)throw new Error("Tap leaf script is required");const n=this.getScriptSolution(r).concat(this.tapLeafScript.script).concat(this.tapLeafScript.controlBlock);return{finalScriptWitness:Me.witnessStackToScriptWitness(n)}};generateRedeemScripts(){this.targetScriptRedeem={name:Ze.P2TR,output:this.compiledTargetScript,redeemVersion:192},this.leftOverFundsScriptRedeem={name:Ze.P2TR,output:Lt.LOCK_LEAF_SCRIPT,redeemVersion:192}}}const z0=1,Ac=66;function j5(t){return t.type===Ce.FUNDING}function V5(t){return t.type===Ce.DEPLOYMENT}function W5(t){return t.type===Ce.INTERACTION}function ji(t){return t.type===Ce.MULTI_SIG}function q5(t){return t.type===Ce.CUSTOM_CODE}function G5(t){return t.type===Ce.CANCEL}class bt{static serialize(e){const r=new wr;this.writeHeader(r,e.header),this.writeBaseParams(r,e.baseParams),this.writeUTXOArray(r,e.utxos),this.writeUTXOArray(r,e.optionalInputs),this.writeOutputArray(r,e.optionalOutputs),r.writeBoolean(e.addressRotationEnabled),this.writeSignerMappings(r,e.signerMappings),this.writeTypeSpecificData(r,e.typeSpecificData),this.writePrecomputedData(r,e.precomputedData);const n=r.getBuffer(),i=this.calculateChecksum(n),o=new Uint8Array(n.length+i.length);return o.set(n,0),o.set(i,n.length),o}static deserialize(e){if(e.length<32)throw new Error("Invalid serialized data: too short");const r=e.subarray(-32),n=e.subarray(0,-32),i=this.calculateChecksum(n);if(!this.bytesEqual(r,i))throw new Error("Invalid checksum - data may be corrupted");const o=new rf(n),s=this.readHeader(o);if(s.formatVersion>z0)throw new Error(`Unsupported format version: ${s.formatVersion}`);const a=this.readBaseParams(o),l=this.readUTXOArray(o),f=this.readUTXOArray(o),u=this.readOutputArray(o),p=o.readBoolean(),y=this.readSignerMappings(o),w=this.readTypeSpecificData(o,s.transactionType),A=this.readPrecomputedData(o);return{header:s,baseParams:a,utxos:l,optionalInputs:f,optionalOutputs:u,addressRotationEnabled:p,signerMappings:y,typeSpecificData:w,precomputedData:A}}static toBase64(e){const r=this.serialize(e);return this.uint8ArrayToBase64(r)}static fromBase64(e){return this.deserialize(this.base64ToUint8Array(e))}static toHex(e){return ve(this.serialize(e))}static fromHex(e){return this.deserialize(Ee(e))}static writeHeader(e,r){e.writeU8(Ac),e.writeU8(r.formatVersion),e.writeU8(r.consensusVersion),e.writeU8(r.transactionType),e.writeU32(r.chainId),e.writeU64(BigInt(r.timestamp))}static readHeader(e){const r=e.readU8();if(r!==Ac)throw new Error(`Invalid magic byte: expected 0x${Ac.toString(16)}, got 0x${r.toString(16)}`);return{formatVersion:e.readU8(),consensusVersion:e.readU8(),transactionType:e.readU8(),chainId:e.readU32(),timestamp:Number(e.readU64())}}static writeBaseParams(e,r){e.writeStringWithLength(r.from),e.writeBoolean(r.to!==void 0),r.to!==void 0&&e.writeStringWithLength(r.to),e.writeU32(Math.floor(r.feeRate*1e3)),e.writeU64(BigInt(r.priorityFee)),e.writeU64(BigInt(r.gasSatFee)),e.writeU8(this.networkNameToU8(r.networkName)),e.writeU8(r.txVersion),e.writeBoolean(r.note!==void 0),r.note!==void 0&&e.writeBytesWithLength(Ee(r.note)),e.writeBoolean(r.anchor),e.writeBoolean(r.debugFees??!1)}static readBaseParams(e){const r=e.readStringWithLength(),n=e.readBoolean()?e.readStringWithLength():void 0,i=e.readU32()/1e3,o=e.readU64().toString(),s=e.readU64().toString(),a=this.u8ToNetworkName(e.readU8()),l=e.readU8(),f=e.readBoolean()?ve(e.readBytesWithLength()):void 0,u=e.readBoolean(),p=e.readBoolean();return{from:r,feeRate:i,priorityFee:o,gasSatFee:s,networkName:a,txVersion:l,anchor:u,debugFees:p,...n!==void 0?{to:n}:{},...f!==void 0?{note:f}:{}}}static writeUTXOArray(e,r){e.writeU16(r.length);for(const n of r)this.writeUTXO(e,n)}static writeUTXO(e,r){e.writeBytes(Ee(r.transactionId)),e.writeU32(r.outputIndex),e.writeU64(BigInt(r.value)),e.writeBytesWithLength(Ee(r.scriptPubKeyHex)),e.writeBoolean(r.scriptPubKeyAddress!==void 0),r.scriptPubKeyAddress!==void 0&&e.writeStringWithLength(r.scriptPubKeyAddress),e.writeBoolean(r.redeemScript!==void 0),r.redeemScript!==void 0&&e.writeBytesWithLength(Ee(r.redeemScript)),e.writeBoolean(r.witnessScript!==void 0),r.witnessScript!==void 0&&e.writeBytesWithLength(Ee(r.witnessScript)),e.writeBoolean(r.nonWitnessUtxo!==void 0),r.nonWitnessUtxo!==void 0&&e.writeBytesWithLength(Ee(r.nonWitnessUtxo))}static readUTXOArray(e){const r=e.readU16(),n=[];for(let i=0;i<r;i++)n.push(this.readUTXO(e));return n}static readUTXO(e){const r=ve(e.readBytes(32)),n=e.readU32(),i=e.readU64().toString(),o=ve(e.readBytesWithLength()),s=e.readBoolean()?e.readStringWithLength():void 0,a=e.readBoolean()?ve(e.readBytesWithLength()):void 0,l=e.readBoolean()?ve(e.readBytesWithLength()):void 0,f=e.readBoolean()?ve(e.readBytesWithLength()):void 0;return{transactionId:r,outputIndex:n,value:i,scriptPubKeyHex:o,...s!==void 0?{scriptPubKeyAddress:s}:{},...a!==void 0?{redeemScript:a}:{},...l!==void 0?{witnessScript:l}:{},...f!==void 0?{nonWitnessUtxo:f}:{}}}static writeOutputArray(e,r){e.writeU16(r.length);for(const n of r)this.writeOutput(e,n)}static writeOutput(e,r){e.writeU64(BigInt(r.value)),e.writeBoolean(r.address!==void 0),r.address!==void 0&&e.writeStringWithLength(r.address),e.writeBoolean(r.script!==void 0),r.script!==void 0&&e.writeBytesWithLength(Ee(r.script)),e.writeBoolean(r.tapInternalKey!==void 0),r.tapInternalKey!==void 0&&e.writeBytesWithLength(Ee(r.tapInternalKey))}static readOutputArray(e){const r=e.readU16(),n=[];for(let i=0;i<r;i++)n.push(this.readOutput(e));return n}static readOutput(e){const r=Number(e.readU64()),n=e.readBoolean()?e.readStringWithLength():void 0,i=e.readBoolean()?ve(e.readBytesWithLength()):void 0,o=e.readBoolean()?ve(e.readBytesWithLength()):void 0;return{value:r,...n!==void 0?{address:n}:{},...i!==void 0?{script:i}:{},...o!==void 0?{tapInternalKey:o}:{}}}static writeSignerMappings(e,r){e.writeU16(r.length);for(const n of r){e.writeStringWithLength(n.address),e.writeU16(n.inputIndices.length);for(const i of n.inputIndices)e.writeU16(i)}}static readSignerMappings(e){const r=e.readU16(),n=[];for(let i=0;i<r;i++){const o=e.readStringWithLength(),s=e.readU16(),a=[];for(let l=0;l<s;l++)a.push(e.readU16());n.push({address:o,inputIndices:a})}return n}static writeTypeSpecificData(e,r){switch(r.type){case Ce.FUNDING:this.writeFundingData(e,r);break;case Ce.DEPLOYMENT:this.writeDeploymentData(e,r);break;case Ce.INTERACTION:this.writeInteractionData(e,r);break;case Ce.MULTI_SIG:this.writeMultiSigData(e,r);break;case Ce.CUSTOM_CODE:this.writeCustomScriptData(e,r);break;case Ce.CANCEL:this.writeCancelData(e,r);break;default:throw new Error(`Unsupported transaction type: ${r.type}`)}}static readTypeSpecificData(e,r){switch(r){case Ce.FUNDING:return this.readFundingData(e);case Ce.DEPLOYMENT:return this.readDeploymentData(e);case Ce.INTERACTION:return this.readInteractionData(e);case Ce.MULTI_SIG:return this.readMultiSigData(e);case Ce.CUSTOM_CODE:return this.readCustomScriptData(e);case Ce.CANCEL:return this.readCancelData(e);default:throw new Error(`Unsupported transaction type: ${r}`)}}static writeFundingData(e,r){e.writeU64(BigInt(r.amount)),e.writeU16(r.splitInputsInto)}static readFundingData(e){return{type:Ce.FUNDING,amount:e.readU64().toString(),splitInputsInto:e.readU16()}}static writeDeploymentData(e,r){e.writeBytesWithLength(Ee(r.bytecode)),e.writeBoolean(r.calldata!==void 0),r.calldata!==void 0&&e.writeBytesWithLength(Ee(r.calldata)),this.writeChallenge(e,r.challenge),e.writeBoolean(r.revealMLDSAPublicKey??!1),e.writeBoolean(r.linkMLDSAPublicKeyToAddress??!1),e.writeBoolean(r.hashedPublicKey!==void 0),r.hashedPublicKey!==void 0&&e.writeBytesWithLength(Ee(r.hashedPublicKey))}static readDeploymentData(e){const r=ve(e.readBytesWithLength()),n=e.readBoolean()?ve(e.readBytesWithLength()):void 0,i=this.readChallenge(e),o=e.readBoolean(),s=e.readBoolean(),a=e.readBoolean()?ve(e.readBytesWithLength()):void 0;return{type:Ce.DEPLOYMENT,bytecode:r,challenge:i,revealMLDSAPublicKey:o,linkMLDSAPublicKeyToAddress:s,...n!==void 0?{calldata:n}:{},...a!==void 0?{hashedPublicKey:a}:{}}}static writeInteractionData(e,r){e.writeBytesWithLength(Ee(r.calldata)),e.writeBoolean(r.contract!==void 0),r.contract!==void 0&&e.writeStringWithLength(r.contract),this.writeChallenge(e,r.challenge),e.writeBoolean(r.loadedStorage!==void 0),r.loadedStorage!==void 0&&this.writeLoadedStorage(e,r.loadedStorage),e.writeBoolean(r.isCancellation??!1),e.writeBoolean(r.disableAutoRefund??!1),e.writeBoolean(r.revealMLDSAPublicKey??!1),e.writeBoolean(r.linkMLDSAPublicKeyToAddress??!1),e.writeBoolean(r.hashedPublicKey!==void 0),r.hashedPublicKey!==void 0&&e.writeBytesWithLength(Ee(r.hashedPublicKey))}static readInteractionData(e){const r=ve(e.readBytesWithLength()),n=e.readBoolean()?e.readStringWithLength():void 0,i=this.readChallenge(e),o=e.readBoolean()?this.readLoadedStorage(e):void 0,s=e.readBoolean(),a=e.readBoolean(),l=e.readBoolean(),f=e.readBoolean(),u=e.readBoolean()?ve(e.readBytesWithLength()):void 0;return{type:Ce.INTERACTION,calldata:r,challenge:i,isCancellation:s,disableAutoRefund:a,revealMLDSAPublicKey:l,linkMLDSAPublicKeyToAddress:f,...n!==void 0?{contract:n}:{},...o!==void 0?{loadedStorage:o}:{},...u!==void 0?{hashedPublicKey:u}:{}}}static writeMultiSigData(e,r){e.writeU16(r.pubkeys.length);for(const n of r.pubkeys)e.writeBytesWithLength(Ee(n));e.writeU8(r.minimumSignatures),e.writeStringWithLength(r.receiver),e.writeU64(BigInt(r.requestedAmount)),e.writeStringWithLength(r.refundVault),e.writeU16(r.originalInputCount),e.writeBoolean(r.existingPsbtBase64!==void 0),r.existingPsbtBase64!==void 0&&e.writeStringWithLength(r.existingPsbtBase64)}static readMultiSigData(e){const r=e.readU16(),n=[];for(let u=0;u<r;u++)n.push(ve(e.readBytesWithLength()));const i=e.readU8(),o=e.readStringWithLength(),s=e.readU64().toString(),a=e.readStringWithLength(),l=e.readU16(),f=e.readBoolean()?e.readStringWithLength():void 0;return{type:Ce.MULTI_SIG,pubkeys:n,minimumSignatures:i,receiver:o,requestedAmount:s,refundVault:a,originalInputCount:l,...f!==void 0?{existingPsbtBase64:f}:{}}}static writeCustomScriptData(e,r){e.writeU16(r.scriptElements.length);for(const n of r.scriptElements)this.writeScriptElement(e,n);e.writeU16(r.witnesses.length);for(const n of r.witnesses)e.writeBytesWithLength(Ee(n));e.writeBoolean(r.annex!==void 0),r.annex!==void 0&&e.writeBytesWithLength(Ee(r.annex))}static writeScriptElement(e,r){e.writeU8(r.elementType==="buffer"?0:1),r.elementType==="buffer"?e.writeBytesWithLength(Ee(r.value)):e.writeU32(r.value)}static readCustomScriptData(e){const r=e.readU16(),n=[];for(let a=0;a<r;a++)n.push(this.readScriptElement(e));const i=e.readU16(),o=[];for(let a=0;a<i;a++)o.push(ve(e.readBytesWithLength()));const s=e.readBoolean()?ve(e.readBytesWithLength()):void 0;return{type:Ce.CUSTOM_CODE,scriptElements:n,witnesses:o,...s!==void 0?{annex:s}:{}}}static readScriptElement(e){return e.readU8()===0?{elementType:"buffer",value:ve(e.readBytesWithLength())}:{elementType:"opcode",value:e.readU32()}}static writeCancelData(e,r){e.writeBytesWithLength(Ee(r.compiledTargetScript))}static readCancelData(e){return{type:Ce.CANCEL,compiledTargetScript:ve(e.readBytesWithLength())}}static writeChallenge(e,r){e.writeU64(BigInt(r.epochNumber)),e.writeStringWithLength(r.mldsaPublicKey),e.writeStringWithLength(r.legacyPublicKey),e.writeBytesWithLength(Ee(r.solution.replace("0x",""))),e.writeBytesWithLength(Ee(r.salt.replace("0x",""))),e.writeBytesWithLength(Ee(r.graffiti.replace("0x",""))),e.writeU8(r.difficulty),this.writeChallengeVerification(e,r.verification),e.writeBoolean(r.submission!==void 0),r.submission!==void 0&&(e.writeStringWithLength(r.submission.mldsaPublicKey),e.writeStringWithLength(r.submission.legacyPublicKey),e.writeBytesWithLength(Ee(r.submission.solution.replace("0x",""))),e.writeBoolean(r.submission.graffiti!==void 0),r.submission.graffiti!==void 0&&e.writeBytesWithLength(Ee(r.submission.graffiti.replace("0x",""))),e.writeBytesWithLength(Ee(r.submission.signature.replace("0x",""))))}static writeChallengeVerification(e,r){e.writeBytesWithLength(Ee(r.epochHash.replace("0x",""))),e.writeBytesWithLength(Ee(r.epochRoot.replace("0x",""))),e.writeBytesWithLength(Ee(r.targetHash.replace("0x",""))),e.writeBytesWithLength(Ee(r.targetChecksum.replace("0x",""))),e.writeU64(BigInt(r.startBlock)),e.writeU64(BigInt(r.endBlock)),e.writeU16(r.proofs.length);for(const n of r.proofs)e.writeBytesWithLength(Ee(n.replace("0x","")))}static readChallenge(e){const r=e.readU64().toString(),n=e.readStringWithLength(),i=e.readStringWithLength(),o="0x"+ve(e.readBytesWithLength()),s="0x"+ve(e.readBytesWithLength()),a="0x"+ve(e.readBytesWithLength()),l=e.readU8(),f=this.readChallengeVerification(e),u=e.readBoolean();let p;if(u){const y=e.readStringWithLength(),w=e.readStringWithLength(),A="0x"+ve(e.readBytesWithLength()),S=e.readBoolean()?"0x"+ve(e.readBytesWithLength()):void 0,k="0x"+ve(e.readBytesWithLength());p={mldsaPublicKey:y,legacyPublicKey:w,solution:A,signature:k,...S!==void 0?{graffiti:S}:{}}}return{epochNumber:r,mldsaPublicKey:n,legacyPublicKey:i,solution:o,salt:s,graffiti:a,difficulty:l,verification:f,...p!==void 0?{submission:p}:{}}}static readChallengeVerification(e){const r="0x"+ve(e.readBytesWithLength()),n="0x"+ve(e.readBytesWithLength()),i="0x"+ve(e.readBytesWithLength()),o="0x"+ve(e.readBytesWithLength()),s=e.readU64().toString(),a=e.readU64().toString(),l=e.readU16(),f=[];for(let u=0;u<l;u++)f.push("0x"+ve(e.readBytesWithLength()));return{epochHash:r,epochRoot:n,targetHash:i,targetChecksum:o,startBlock:s,endBlock:a,proofs:f}}static writeLoadedStorage(e,r){const n=Object.keys(r);e.writeU16(n.length);for(const i of n)e.writeStringWithLength(i),e.writeStringArray(r[i])}static readLoadedStorage(e){const r=e.readU16(),n={};for(let i=0;i<r;i++){const o=e.readStringWithLength();n[o]=e.readStringArray()}return n}static writePrecomputedData(e,r){e.writeBoolean(r.compiledTargetScript!==void 0),r.compiledTargetScript!==void 0&&e.writeBytesWithLength(Ee(r.compiledTargetScript)),e.writeBoolean(r.randomBytes!==void 0),r.randomBytes!==void 0&&e.writeBytesWithLength(Ee(r.randomBytes)),e.writeBoolean(r.estimatedFees!==void 0),r.estimatedFees!==void 0&&e.writeU64(BigInt(r.estimatedFees)),e.writeBoolean(r.contractSeed!==void 0),r.contractSeed!==void 0&&e.writeStringWithLength(r.contractSeed),e.writeBoolean(r.contractAddress!==void 0),r.contractAddress!==void 0&&e.writeStringWithLength(r.contractAddress)}static readPrecomputedData(e){const r=e.readBoolean()?ve(e.readBytesWithLength()):void 0,n=e.readBoolean()?ve(e.readBytesWithLength()):void 0,i=e.readBoolean()?e.readU64().toString():void 0,o=e.readBoolean()?e.readStringWithLength():void 0,s=e.readBoolean()?e.readStringWithLength():void 0;return{...r!==void 0?{compiledTargetScript:r}:{},...n!==void 0?{randomBytes:n}:{},...i!==void 0?{estimatedFees:i}:{},...o!==void 0?{contractSeed:o}:{},...s!==void 0?{contractAddress:s}:{}}}static calculateChecksum(e){const r=ep("sha256").update(e).digest();return new Uint8Array(ep("sha256").update(r).digest())}static bytesEqual(e,r){if(e.length!==r.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==r[n])return!1;return!0}static uint8ArrayToBase64(e){let r="";for(let n=0;n<e.length;n++)r+=String.fromCharCode(e[n]);return btoa(r)}static base64ToUint8Array(e){const r=atob(e),n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}static networkNameToU8(e){switch(e){case"mainnet":return 0;case"testnet":return 1;case"regtest":return 2;default:throw new Error(`Unknown network: ${e}`)}}static u8ToNetworkName(e){switch(e){case 0:return"mainnet";case 1:return"testnet";case 2:return"regtest";default:throw new Error(`Unknown network value: ${e}`)}}}var vu=(t=>(t[t.Roswell=0]="Roswell",t[t.Rachel=1]="Rachel",t[t.Kecksburg=2]="Kecksburg",t[t.Phoenix=3]="Phoenix",t[t.Aurora=4]="Aurora",t[t.Rendlesham=5]="Rendlesham",t[t.Lazar=6]="Lazar",t[t.ShagHarbor=7]="ShagHarbor",t[t.Exeter=8]="Exeter",t[t.Stephenville=9]="Stephenville",t[t.Valensole=10]="Valensole",t[t.Socorro=11]="Socorro",t[t.Pascagoula=12]="Pascagoula",t[t.Tehran=13]="Tehran",t[t.Westall=14]="Westall",t[t.Hopkinsville=15]="Hopkinsville",t[t.Belgium=16]="Belgium",t[t.Breeze=17]="Breeze",t[t.Flatwoods=18]="Flatwoods",t[t.Maury=20]="Maury",t[t.Varginha=21]="Varginha",t[t.Trindade=22]="Trindade",t[t.Levelland=23]="Levelland",t[t.Wanaque=24]="Wanaque",t[t.Coyame=25]="Coyame",t[t.Delphos=26]="Delphos",t))(vu||{});const X5={CONSENSUS:vu.Roswell,CONSENSUS_NAME:"Roswell",ENABLED_AT_BLOCK:0n},Y5={[vu.Roswell]:X5},M0=vu.Roswell,$$=Y5[M0];class Pn{static fromFunding(e,r){return this.captureState({params:e,type:Ce.FUNDING,...r!==void 0?{precomputed:r}:{}})}static fromDeployment(e,r){return this.captureState({params:e,type:Ce.DEPLOYMENT,precomputed:r})}static fromInteraction(e,r){return this.captureState({params:e,type:Ce.INTERACTION,precomputed:r})}static fromMultiSig(e,r){return this.captureState({params:e,type:Ce.MULTI_SIG,...r!==void 0?{precomputed:r}:{}})}static fromCustomScript(e,r){return this.captureState({params:e,type:Ce.CUSTOM_CODE,...r!==void 0?{precomputed:r}:{}})}static fromCancel(e,r){return this.captureState({params:e,type:Ce.CANCEL,...r!==void 0?{precomputed:r}:{}})}static captureState(e){const{params:r,type:n,precomputed:i}=e;return{header:this.createHeader(n,r.network,r.chainId),baseParams:this.extractBaseParams(r),utxos:this.serializeUTXOs(r.utxos),optionalInputs:this.serializeUTXOs(r.optionalInputs||[]),optionalOutputs:this.serializeOutputs(r.optionalOutputs||[]),addressRotationEnabled:r.addressRotation?.enabled??!1,signerMappings:this.extractSignerMappings(r),typeSpecificData:this.extractTypeSpecificData(n,r),precomputedData:this.buildPrecomputedData(i)}}static createHeader(e,r,n){return{formatVersion:z0,consensusVersion:M0,transactionType:e,chainId:n??this.networkToChainId(r),timestamp:Date.now()}}static extractBaseParams(e){const r=e.note?e.note instanceof Uint8Array?ve(e.note):ve(new TextEncoder().encode(e.note)):void 0,n=e.priorityFee??0n,i=e.gasSatFee??0n;return{from:e.from||"",feeRate:e.feeRate,priorityFee:n.toString(),gasSatFee:i.toString(),networkName:this.networkToName(e.network),txVersion:e.txVersion??2,anchor:e.anchor??!1,...e.to!==void 0?{to:e.to}:{},...r!==void 0?{note:r}:{},...e.debugFees!==void 0?{debugFees:e.debugFees}:{}}}static extractSignerMappings(e){if(!e.addressRotation?.enabled)return[];const r=[],n=new Map;e.utxos.forEach((o,s)=>{const a=o.scriptPubKey?.address;if(a){const l=n.get(a);l?l.push(s):n.set(a,[s])}});const i=e.utxos.length;return(e.optionalInputs||[]).forEach((o,s)=>{const a=o.scriptPubKey?.address;if(a){const l=n.get(a);l?l.push(i+s):n.set(a,[i+s])}}),n.forEach((o,s)=>{r.push({address:s,inputIndices:o})}),r}static extractTypeSpecificData(e,r){switch(e){case Ce.FUNDING:return this.extractFundingData(r);case Ce.DEPLOYMENT:return this.extractDeploymentData(r);case Ce.INTERACTION:return this.extractInteractionData(r);case Ce.MULTI_SIG:return this.extractMultiSigData(r);case Ce.CUSTOM_CODE:return this.extractCustomScriptData(r);case Ce.CANCEL:return this.extractCancelData(r);default:throw new Error(`Unsupported transaction type: ${e}`)}}static extractFundingData(e){return{type:Ce.FUNDING,amount:e.amount.toString(),splitInputsInto:e.splitInputsInto??1}}static extractDeploymentData(e){return{type:Ce.DEPLOYMENT,bytecode:ve(e.bytecode),challenge:e.challenge.toRaw(),...e.calldata?{calldata:ve(e.calldata)}:{},...e.revealMLDSAPublicKey!==void 0?{revealMLDSAPublicKey:e.revealMLDSAPublicKey}:{},...e.linkMLDSAPublicKeyToAddress!==void 0?{linkMLDSAPublicKeyToAddress:e.linkMLDSAPublicKeyToAddress}:{}}}static extractInteractionData(e){return{type:Ce.INTERACTION,calldata:ve(e.calldata),challenge:e.challenge.toRaw(),...e.contract!==void 0?{contract:e.contract}:{},...e.loadedStorage!==void 0?{loadedStorage:e.loadedStorage}:{},...e.isCancellation!==void 0?{isCancellation:e.isCancellation}:{},...e.disableAutoRefund!==void 0?{disableAutoRefund:e.disableAutoRefund}:{},...e.revealMLDSAPublicKey!==void 0?{revealMLDSAPublicKey:e.revealMLDSAPublicKey}:{},...e.linkMLDSAPublicKeyToAddress!==void 0?{linkMLDSAPublicKeyToAddress:e.linkMLDSAPublicKeyToAddress}:{}}}static extractMultiSigData(e){return{type:Ce.MULTI_SIG,pubkeys:(e.pubkeys||[]).map(r=>ve(r)),minimumSignatures:e.minimumSignatures||0,receiver:e.receiver||"",requestedAmount:(e.requestedAmount||0n).toString(),refundVault:e.refundVault||"",originalInputCount:e.originalInputCount||e.utxos.length,...e.existingPsbtBase64!==void 0?{existingPsbtBase64:e.existingPsbtBase64}:{}}}static extractCustomScriptData(e){const r=(e.scriptElements||[]).map(n=>n instanceof Uint8Array?{elementType:"buffer",value:ve(n)}:{elementType:"opcode",value:n});return{type:Ce.CUSTOM_CODE,scriptElements:r,witnesses:(e.witnesses||[]).map(n=>ve(n)),...e.annex?{annex:ve(e.annex)}:{}}}static extractCancelData(e){const r=e.compiledTargetScript,n=r?r instanceof Uint8Array?ve(r):r:"";return{type:Ce.CANCEL,compiledTargetScript:n}}static buildPrecomputedData(e){return{...e?.compiledTargetScript!==void 0?{compiledTargetScript:e.compiledTargetScript}:{},...e?.randomBytes!==void 0?{randomBytes:e.randomBytes}:{},...e?.estimatedFees!==void 0?{estimatedFees:e.estimatedFees}:{},...e?.contractSeed!==void 0?{contractSeed:e.contractSeed}:{},...e?.contractAddress!==void 0?{contractAddress:e.contractAddress}:{}}}static serializeUTXOs(e){return e.map(r=>{const n=r.redeemScript?r.redeemScript instanceof Uint8Array?ve(r.redeemScript):r.redeemScript:void 0,i=r.witnessScript?r.witnessScript instanceof Uint8Array?ve(r.witnessScript):r.witnessScript:void 0,o=r.nonWitnessUtxo?r.nonWitnessUtxo instanceof Uint8Array?ve(r.nonWitnessUtxo):r.nonWitnessUtxo:void 0;return{transactionId:r.transactionId,outputIndex:r.outputIndex,value:r.value.toString(),scriptPubKeyHex:r.scriptPubKey.hex,...r.scriptPubKey.address!==void 0?{scriptPubKeyAddress:r.scriptPubKey.address}:{},...n!==void 0?{redeemScript:n}:{},...i!==void 0?{witnessScript:i}:{},...o!==void 0?{nonWitnessUtxo:o}:{}}})}static serializeOutputs(e){return e.map(r=>{const n="address"in r?r.address:void 0,i="script"in r?r.script:void 0,o=i?ve(i):void 0,s=r.tapInternalKey?ve(r.tapInternalKey):void 0;return{value:Number(r.value),...n!==void 0?{address:n}:{},...o!==void 0?{script:o}:{},...s!==void 0?{tapInternalKey:s}:{}}})}static networkToName(e){return e.bech32==="bc"?"mainnet":e.bech32==="tb"?"testnet":"regtest"}static networkToChainId(e){return L0.Bitcoin}}function Zt(t){return Pt.from(t.replace("0x",""),"hex")}class ls{static BLOCKS_PER_EPOCH=5n;static sha1(e){return Kt.sha1(e)}static calculatePreimage(e,r,n){if(e.length!==32||r.length!==32||n.length!==32)throw new Error("All inputs must be 32 bytes");const i=new Uint8Array(32);for(let o=0;o<32;o++)i[o]=e[o]^r[o]^n[o];return i}static countMatchingBits(e,r){let n=0;if(e.length!==r.length)throw new Error("Hashes must be of the same length");const i=Math.min(e.length,r.length);for(let o=0;o<i;o++){const s=e[o],a=r[o];if(s===a)n+=8;else for(let l=7;l>=0;l--)if((s>>l&1)===(a>>l&1))n++;else return n}return n}static verifySolution(e,r=!1){try{const n=e.verification,i=this.calculatePreimage(n.targetChecksum,e.publicKey.toBuffer(),e.salt),o=this.sha1(i);if(!_e(o,e.solution)||this.countMatchingBits(o,n.targetHash)!==e.difficulty)return!1;const s=e.epochNumber*this.BLOCKS_PER_EPOCH,a=s+this.BLOCKS_PER_EPOCH-1n;return!(n.startBlock!==s||n.endBlock!==a)}catch(n){return r&&console.error("Verification error:",n),!1}}static getMiningTargetBlock(e){return e===0n?null:e*this.BLOCKS_PER_EPOCH-1n}static validateEpochWinner(e){try{const r=BigInt(e.epochNumber),n=$t.fromString(e.mldsaPublicKey,e.legacyPublicKey),i=Zt(e.solution),o=Zt(e.salt),s=e.difficulty,a={epochHash:Zt(e.verification.epochHash),epochRoot:Zt(e.verification.epochRoot),targetHash:Zt(e.verification.targetHash),targetChecksum:Zt(e.verification.targetChecksum),startBlock:BigInt(e.verification.startBlock),endBlock:BigInt(e.verification.endBlock),proofs:Object.freeze(e.verification.proofs.map(y=>Zt(y)))},l=this.calculatePreimage(a.targetChecksum,n.toBuffer(),o),f=this.sha1(l);if(!_e(f,i)||this.countMatchingBits(f,a.targetHash)!==s)return!1;const u=r*this.BLOCKS_PER_EPOCH,p=u+this.BLOCKS_PER_EPOCH-1n;return!(a.startBlock!==u||a.endBlock!==p)}catch{return!1}}static validateChallengeSolution(e){return this.verifySolution(e)}static calculateSolution(e,r,n){const i=this.calculatePreimage(e,r,n);return this.sha1(i)}static checkDifficulty(e,r,n){const i=this.countMatchingBits(e,r);return{valid:i>=n,difficulty:i}}}class Z5{epochHash;epochRoot;targetHash;targetChecksum;startBlock;endBlock;proofs;constructor(e){this.epochHash=Zt(e.epochHash),this.epochRoot=Zt(e.epochRoot),this.targetHash=Zt(e.targetHash),this.targetChecksum=Zt(e.targetChecksum),this.startBlock=BigInt(e.startBlock),this.endBlock=BigInt(e.endBlock),this.proofs=Object.freeze(e.proofs.map(r=>Zt(r)))}}class Q5{constructor(e,r){this.epochNumber=r,this.publicKey=$t.fromString(e.mldsaPublicKey,e.legacyPublicKey),this.solution=Zt(e.solution),this.graffiti=e.graffiti?Zt(e.graffiti):void 0,this.signature=Zt(e.signature)}publicKey;solution;graffiti;signature;verifySignature(){const e=new wr;e.writeAddress(this.publicKey),e.writeU64(this.epochNumber),e.writeBytes(this.solution),this.graffiti&&e.writeBytes(this.graffiti);const r=e.getBuffer();return Zi.verifySignature(this.publicKey.tweakedPublicKeyToBuffer(),r,this.signature)}}class op{epochNumber;publicKey;solution;salt;graffiti;difficulty;verification;submission;constructor(e){this.epochNumber=BigInt(e.epochNumber),this.publicKey=$t.fromString(e.mldsaPublicKey,e.legacyPublicKey),this.solution=Zt(e.solution),this.salt=Zt(e.salt),this.graffiti=Zt(e.graffiti),this.difficulty=e.difficulty,this.verification=new Z5(e.verification),this.submission=e.submission?new Q5(e.submission,this.epochNumber+2n):e.submission}static validateRaw(e){return ls.validateEpochWinner(e)}verifySubmissionSignature(){if(!this.submission)throw new Error("No submission provided in request.");return this.submission.verifySignature()}getSubmission(){if(this.submission){if(!this.verifySubmissionSignature())throw new Error("Invalid submission signature.");return this.submission}}verify(){return ls.validateChallengeSolution(this)}toBuffer(){return this.solution}toHex(){return"0x"+this.solution.toString("hex")}toRaw(){return{epochNumber:this.epochNumber.toString(),mldsaPublicKey:this.publicKey.toHex(),legacyPublicKey:this.publicKey.tweakedToHex(),solution:this.toHex(),salt:"0x"+this.salt.toString("hex"),graffiti:"0x"+this.graffiti.toString("hex"),difficulty:this.difficulty,verification:{epochHash:"0x"+this.verification.epochHash.toString("hex"),epochRoot:"0x"+this.verification.epochRoot.toString("hex"),targetHash:"0x"+this.verification.targetHash.toString("hex"),targetChecksum:"0x"+this.verification.targetChecksum.toString("hex"),startBlock:this.verification.startBlock.toString(),endBlock:this.verification.endBlock.toString(),proofs:this.verification.proofs.map(e=>"0x"+e.toString("hex"))}}}calculateSolution(){return ls.calculateSolution(this.verification.targetChecksum,this.publicKey.toBuffer(),this.salt)}checkDifficulty(e){return ls.checkDifficulty(this.solution,this.verification.targetHash,e)}getMiningTargetBlock(){return ls.getMiningTargetBlock(this.epochNumber)}}class fs{static reconstruct(e,r){const n=this.nameToNetwork(e.baseParams.networkName),i=this.deserializeUTXOs(e.utxos),o=this.deserializeUTXOs(e.optionalInputs),s=this.deserializeOutputs(e.optionalOutputs),a=this.buildAddressRotationConfig(e.addressRotationEnabled,r.signerMap),l=r.newFeeRate??e.baseParams.feeRate,f=r.newPriorityFee??BigInt(e.baseParams.priorityFee),u=r.newGasSatFee??BigInt(e.baseParams.gasSatFee),p={signer:r.signer,mldsaSigner:r.mldsaSigner??null,network:n,utxos:i,optionalInputs:o,optionalOutputs:s,from:e.baseParams.from,feeRate:l,priorityFee:f,gasSatFee:u,anchor:e.baseParams.anchor,...e.header.chainId!==void 0?{chainId:e.header.chainId}:{},...e.baseParams.to!==void 0?{to:e.baseParams.to}:{},...e.baseParams.txVersion!==void 0?{txVersion:e.baseParams.txVersion}:{},...e.baseParams.note!==void 0?{note:Ee(e.baseParams.note)}:{},...e.baseParams.debugFees!==void 0?{debugFees:e.baseParams.debugFees}:{},...a!==void 0?{addressRotation:a}:{},...e.precomputedData.estimatedFees!==void 0?{estimatedFees:BigInt(e.precomputedData.estimatedFees)}:{},...e.precomputedData.compiledTargetScript!==void 0?{compiledTargetScript:Ee(e.precomputedData.compiledTargetScript)}:{}},y=e.typeSpecificData;if(j5(y))return this.reconstructFunding(p,y);if(V5(y))return this.reconstructDeployment(p,y,e);if(W5(y))return this.reconstructInteraction(p,y,e);if(ji(y))return this.reconstructMultiSig(p,y);if(q5(y))return this.reconstructCustomScript(p,y,e);if(G5(y))return this.reconstructCancel(p,y);throw new Error(`Unsupported transaction type: ${e.header.transactionType}`)}static reconstructFunding(e,r){const n={...e,amount:BigInt(r.amount),splitInputsInto:r.splitInputsInto};return new Sl(n)}static reconstructDeployment(e,r,n){const i=new op(r.challenge),o={...e,bytecode:Ee(r.bytecode),challenge:i,...r.calldata!==void 0?{calldata:Ee(r.calldata)}:{},...n.precomputedData.randomBytes!==void 0?{randomBytes:Ee(n.precomputedData.randomBytes)}:{},...r.revealMLDSAPublicKey!==void 0?{revealMLDSAPublicKey:r.revealMLDSAPublicKey}:{},...r.linkMLDSAPublicKeyToAddress!==void 0?{linkMLDSAPublicKeyToAddress:r.linkMLDSAPublicKeyToAddress}:{}};return new Cs(o)}static reconstructInteraction(e,r,n){const i=new op(r.challenge);if(!e.to)throw new Error('InteractionTransaction requires a "to" address');const o={...e,to:e.to,calldata:Ee(r.calldata),challenge:i,...r.contract!==void 0?{contract:r.contract}:{},...n.precomputedData.randomBytes!==void 0?{randomBytes:Ee(n.precomputedData.randomBytes)}:{},...r.loadedStorage!==void 0?{loadedStorage:r.loadedStorage}:{},...r.isCancellation!==void 0?{isCancellation:r.isCancellation}:{},...r.disableAutoRefund!==void 0?{disableAutoRefund:r.disableAutoRefund}:{},...r.revealMLDSAPublicKey!==void 0?{revealMLDSAPublicKey:r.revealMLDSAPublicKey}:{},...r.linkMLDSAPublicKeyToAddress!==void 0?{linkMLDSAPublicKeyToAddress:r.linkMLDSAPublicKeyToAddress}:{}};return new Al(o)}static reconstructMultiSig(e,r){const n=r.pubkeys.map(o=>Ee(o));if(r.existingPsbtBase64)return Lt.fromBase64({mldsaSigner:e.mldsaSigner,network:e.network,utxos:e.utxos,feeRate:e.feeRate,pubkeys:n,minimumSignatures:r.minimumSignatures,receiver:r.receiver,requestedAmount:BigInt(r.requestedAmount),refundVault:r.refundVault,psbt:r.existingPsbtBase64,...e.chainId!==void 0?{chainId:e.chainId}:{},...e.optionalInputs!==void 0?{optionalInputs:e.optionalInputs}:{},...e.optionalOutputs!==void 0?{optionalOutputs:e.optionalOutputs}:{}});const i={mldsaSigner:e.mldsaSigner,network:e.network,utxos:e.utxos,feeRate:e.feeRate,pubkeys:n,minimumSignatures:r.minimumSignatures,receiver:r.receiver,requestedAmount:BigInt(r.requestedAmount),refundVault:r.refundVault,...e.chainId!==void 0?{chainId:e.chainId}:{},...e.optionalInputs!==void 0?{optionalInputs:e.optionalInputs}:{},...e.optionalOutputs!==void 0?{optionalOutputs:e.optionalOutputs}:{}};return new Lt(i)}static reconstructCustomScript(e,r,n){const i=r.scriptElements.map(a=>a.elementType==="buffer"?Ee(a.value):[a.value]),o=r.witnesses.map(a=>Ee(a));if(!e.to)throw new Error('CustomScriptTransaction requires a "to" address');const s={...e,to:e.to,script:i,witnesses:o,...r.annex!==void 0?{annex:Ee(r.annex)}:{},...n.precomputedData.randomBytes!==void 0?{randomBytes:Ee(n.precomputedData.randomBytes)}:{}};return new El(s)}static reconstructCancel(e,r){const n={...e,compiledTargetScript:Ee(r.compiledTargetScript)};return new D0(n)}static buildAddressRotationConfig(e,r){if(e){if(!r||r.size===0)throw new Error("Address rotation enabled but no signerMap provided in reconstruction options");return{enabled:!0,signerMap:r}}}static deserializeUTXOs(e){return e.map(r=>{const n={transactionId:r.transactionId,outputIndex:r.outputIndex,value:BigInt(r.value),scriptPubKey:{hex:r.scriptPubKeyHex,...r.scriptPubKeyAddress!==void 0?{address:r.scriptPubKeyAddress}:{}}};return r.redeemScript!==void 0&&(n.redeemScript=Ee(r.redeemScript)),r.witnessScript!==void 0&&(n.witnessScript=Ee(r.witnessScript)),r.nonWitnessUtxo!==void 0&&(n.nonWitnessUtxo=Ee(r.nonWitnessUtxo)),n})}static deserializeOutputs(e){return e.map(r=>{const n={value:xt(BigInt(r.value))},i=r.tapInternalKey!==void 0?{tapInternalKey:Ee(r.tapInternalKey)}:{};return r.address?{...n,address:r.address,...i}:r.script?{...n,script:Ee(r.script),...i}:{...n,address:"",...i}})}static nameToNetwork(e){switch(e){case"mainnet":return De.bitcoin;case"testnet":return De.testnet;case"regtest":return De.regtest;default:throw new Error(`Unknown network: ${e}`)}}}class C${static exportFunding(e,r){const n=Pn.fromFunding(e,r);return bt.toBase64(n)}static exportDeployment(e,r){const n=Pn.fromDeployment(e,r);return bt.toBase64(n)}static exportInteraction(e,r){const n=Pn.fromInteraction(e,r);return bt.toBase64(n)}static exportMultiSig(e,r){const n=Pn.fromMultiSig(e,r);return bt.toBase64(n)}static exportCustomScript(e,r){const n=Pn.fromCustomScript(e,r);return bt.toBase64(n)}static exportCancel(e,r){const n=Pn.fromCancel(e,r);return bt.toBase64(n)}static exportFromBuilder(e,r,n){const i=e.type;let o;switch(i){case Ce.FUNDING:o=Pn.fromFunding(r,n);break;case Ce.DEPLOYMENT:o=Pn.fromDeployment(r,n);break;case Ce.INTERACTION:o=Pn.fromInteraction(r,n);break;default:throw new Error(`Unsupported transaction type for export: ${i}`)}return bt.toBase64(o)}static importForSigning(e,r){const n=bt.fromBase64(e);return fs.reconstruct(n,r)}static async signAndExport(e){return(await e.signTransaction()).toHex()}static async importSignAndExport(e,r){const n=this.importForSigning(e,r);return this.signAndExport(n)}static rebuildWithNewFees(e,r){const n=bt.fromBase64(e),i={...n,baseParams:{...n.baseParams,feeRate:r}};return bt.toBase64(i)}static async rebuildSignAndExport(e,r,n){const i=this.importForSigning(e,{...n,newFeeRate:r});return this.signAndExport(i)}static inspect(e){return bt.fromBase64(e)}static validate(e){try{return bt.fromBase64(e),!0}catch{return!1}}static getType(e){return bt.fromBase64(e).header.transactionType}static fromBase64(e){return bt.fromBase64(e)}static toBase64(e){return bt.toBase64(e)}static toHex(e){const r=bt.fromBase64(e);return bt.toHex(r)}static fromHex(e){const r=bt.fromHex(e);return bt.toBase64(r)}static async multiSigAddSignature(e,r){const n=bt.fromBase64(e);if(!ji(n.typeSpecificData))throw new Error("State is not a multisig transaction");const i=n.typeSpecificData,o=i.pubkeys.map(w=>Ee(w));let s;const a=fs.nameToNetwork(n.baseParams.networkName);i.existingPsbtBase64?s=fr.fromBase64(i.existingPsbtBase64,{network:a}):s=await this.importForSigning(e,{signer:r}).signPSBT();const l=[];for(let w=i.originalInputCount;w<s.data.inputs.length;w++)l.push(i.minimumSignatures);const f=Lt.signPartial(s,r,i.originalInputCount,l),u=[];for(let w=i.originalInputCount;w<s.data.inputs.length;w++)u.push(o);Lt.attemptFinalizeInputs(s,i.originalInputCount,u,f.final);const p=s.toBase64(),y={...n,typeSpecificData:{...i,existingPsbtBase64:p}};return{state:bt.toBase64(y),signed:f.signed,final:f.final,psbtBase64:p}}static multiSigHasSigned(e,r){const n=bt.fromBase64(e);if(!ji(n.typeSpecificData))throw new Error("State is not a multisig transaction");const i=n.typeSpecificData;if(!i.existingPsbtBase64)return!1;const o=fs.nameToNetwork(n.baseParams.networkName),s=fr.fromBase64(i.existingPsbtBase64,{network:o}),a=r instanceof Uint8Array?r:Ee(r);return Lt.verifyIfSigned(s,a)}static multiSigGetSignatureStatus(e){const r=bt.fromBase64(e);if(!ji(r.typeSpecificData))throw new Error("State is not a multisig transaction");const n=r.typeSpecificData,i=n.minimumSignatures;if(!n.existingPsbtBase64)return{required:i,collected:0,isComplete:!1,signers:[]};const o=fs.nameToNetwork(r.baseParams.networkName),s=fr.fromBase64(n.existingPsbtBase64,{network:o}),a=new Set;for(let f=n.originalInputCount;f<s.data.inputs.length;f++){const u=s.data.inputs[f];if(u.tapScriptSig)for(const p of u.tapScriptSig)a.add(ve(p.pubkey));if(u.finalScriptWitness){const p=Me.readScriptWitnessToWitnessStack(u.finalScriptWitness);for(let y=0;y<p.length-2;y+=3){const w=p[y+2];a.add(ve(w))}}}const l=Array.from(a);return{required:i,collected:l.length,isComplete:l.length>=i,signers:l}}static multiSigFinalize(e){const r=bt.fromBase64(e);if(!ji(r.typeSpecificData))throw new Error("State is not a multisig transaction");const n=r.typeSpecificData;if(!n.existingPsbtBase64)throw new Error("No PSBT found in state - transaction has not been signed");const i=fs.nameToNetwork(r.baseParams.networkName),o=fr.fromBase64(n.existingPsbtBase64,{network:i}),s=n.pubkeys.map(l=>Ee(l)),a=[];for(let l=n.originalInputCount;l<o.data.inputs.length;l++)a.push(s);if(!Lt.attemptFinalizeInputs(o,n.originalInputCount,a,!0))throw new Error("Failed to finalize multisig transaction - not enough signatures");return o.extractTransaction(!0,!0).toHex()}static multiSigGetPsbt(e){const r=bt.fromBase64(e);if(!ji(r.typeSpecificData))throw new Error("State is not a multisig transaction");return r.typeSpecificData.existingPsbtBase64||null}static multiSigUpdatePsbt(e,r){const n=bt.fromBase64(e);if(!ji(n.typeSpecificData))throw new Error("State is not a multisig transaction");const i={...n,typeSpecificData:{...n.typeSpecificData,existingPsbtBase64:r}};return bt.toBase64(i)}}class N${constructor(e){this.opnetAPIUrl=e}utxoPath="address/utxos";rpc="json-rpc";async fetchUTXO(e){e.usePendingUTXO===void 0&&(e.usePendingUTXO=!0),e.optimized===void 0&&(e.optimized=!0);const r={method:"GET",headers:{"Content-Type":"application/json"}},n=`${this.opnetAPIUrl}/api/v1/${this.utxoPath}?address=${e.address}&optimize=${e.optimized??!1}`,i=await fetch(n,r);if(!i.ok)throw new Error(`Failed to fetch UTXO data: ${i.statusText}`);const o=await i.json(),s=o.raw??[],a=e.usePendingUTXO?[...o.confirmed,...o.pending]:o.confirmed,l=[];for(const w of a)o.spentTransactions.some(A=>A.transactionId===w.transactionId&&A.outputIndex===w.outputIndex)||l.push(w);if(l.length===0)throw new Error("No UTXO found");const f=l.filter(w=>BigInt(w.value)>=e.minAmount);if(f.length===0)throw new Error("No UTXO found (minAmount)");const u=[];let p=0n;const y=e.requestedAmount;for(const w of f){const A=BigInt(w.value);if(A<=0n)continue;const S=Number(w.raw);if(!Number.isInteger(S)||S<0||S>=s.length)throw new Error(`Invalid raw index for UTXO ${w.transactionId}:${w.outputIndex}`);const k=s[S];if(!k)throw new Error(`Invalid raw index ${S} - not found in raw transactions array`);if(p+=A,u.push({transactionId:w.transactionId,outputIndex:w.outputIndex,value:A,scriptPubKey:w.scriptPubKey,nonWitnessUtxo:Pt.from(k,"base64")}),p>y)break}return u}async fetchUTXOMultiAddr(e){const r=[];for(const s of e.addresses){const a={address:s,minAmount:e.minAmount,requestedAmount:e.requestedAmount,optimized:e.optimized,usePendingUTXO:e.usePendingUTXO},l=this.fetchUTXO(a).catch(()=>[]);r.push(l)}const n=(await Promise.all(r)).flat(),i=[];let o=0n;for(let s=0;s<n.length;s++){const a=n[s];if(o>=e.requestedAmount)break;o+=a.value,i.push(a)}return i}async broadcastTransaction(e,r){const n=[e,r],i=await this.rpcMethod("btc_sendRawTransaction",n);if(i)return i}async splitUTXOs(e,r,n,i){const o={addresses:[e.p2wpkh,e.p2tr],minAmount:330n,requestedAmount:1000000000000000n},s=await this.fetchUTXOMultiAddr(o);if(!s||!s.length)return{error:"No UTXOs found"};const a={amount:BigInt(n)*i,feeRate:500,from:e.p2tr,utxos:s,signer:e.keypair,network:r,to:e.p2tr,splitInputsInto:n,priorityFee:0n,gasSatFee:330n,mldsaSigner:null},l=await new K5().createBTCTransfer(a);return await this.broadcastTransaction(l.tx,!1)||{error:"Could not broadcast transaction"}}async rpcMethod(e,r){const n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",method:e,params:r,id:1})},i=`${this.opnetAPIUrl}/api/v1/${this.rpc}`,o=await fetch(i,n);if(!o.ok)throw new Error(`Failed to fetch to rpc: ${o.statusText}`);const s=await o.json();if(!s)throw new Error("No data fetched");const a=s.result;if(!a)throw new Error("No rpc parameters found");if("error"in a)throw new Error(`Error in fetching to rpc ${a.error}`);return a}}var J5=(t=>(t[t.UNWRAP=0]="UNWRAP",t))(J5||{});class H${static generateMultiSigAddress(e,r,n=De.bitcoin){if(ot.verifyPubKeys(e,n).length!==e.length)throw new Error("Contains invalid public keys");const i={network:n,utxos:[],pubkeys:e,minimumSignatures:r,feeRate:100,receiver:"a",requestedAmount:1n,refundVault:"a",mldsaSigner:null},o=new Lt(i).getScriptAddress();if(!o)throw new Error("Failed to generate address");return o}}var Se=(t=>(t.UINT8="UINT8",t.UINT16="UINT16",t.UINT32="UINT32",t.UINT64="UINT64",t.UINT128="UINT128",t.UINT256="UINT256",t.INT8="INT8",t.INT16="INT16",t.INT32="INT32",t.INT64="INT64",t.INT128="INT128",t.BOOL="BOOL",t.ADDRESS="ADDRESS",t.EXTENDED_ADDRESS="EXTENDED_ADDRESS",t.STRING="STRING",t.BYTES4="BYTES4",t.BYTES32="BYTES32",t.BYTES="BYTES",t.ADDRESS_UINT256_TUPLE="ADDRESS_UINT256_TUPLE",t.EXTENDED_ADDRESS_UINT256_TUPLE="EXTENDED_ADDRESS_UINT256_TUPLE",t.SCHNORR_SIGNATURE="SCHNORR_SIGNATURE",t.ARRAY_OF_ADDRESSES="ARRAY_OF_ADDRESSES",t.ARRAY_OF_EXTENDED_ADDRESSES="ARRAY_OF_EXTENDED_ADDRESSES",t.ARRAY_OF_UINT256="ARRAY_OF_UINT256",t.ARRAY_OF_UINT128="ARRAY_OF_UINT128",t.ARRAY_OF_UINT64="ARRAY_OF_UINT64",t.ARRAY_OF_UINT32="ARRAY_OF_UINT32",t.ARRAY_OF_UINT16="ARRAY_OF_UINT16",t.ARRAY_OF_UINT8="ARRAY_OF_UINT8",t.ARRAY_OF_STRING="ARRAY_OF_STRING",t.ARRAY_OF_BYTES="ARRAY_OF_BYTES",t.ARRAY_OF_BUFFERS="ARRAY_OF_BUFFERS",t))(Se||{});const D$={address:Se.ADDRESS,extendedAddress:Se.EXTENDED_ADDRESS,bool:Se.BOOL,bytes:Se.BYTES,uint256:Se.UINT256,uint128:Se.UINT128,uint64:Se.UINT64,uint32:Se.UINT32,uint16:Se.UINT16,uint8:Se.UINT8,int128:Se.INT128,int64:Se.INT64,int32:Se.INT32,int16:Se.INT16,int8:Se.INT8,string:Se.STRING,bytes4:Se.BYTES4,bytes32:Se.BYTES32,schnorrSignature:Se.SCHNORR_SIGNATURE,"tuple(address,uint256)[]":Se.ADDRESS_UINT256_TUPLE,"tuple(extendedAddress,uint256)[]":Se.EXTENDED_ADDRESS_UINT256_TUPLE,"address[]":Se.ARRAY_OF_ADDRESSES,"extendedAddress[]":Se.ARRAY_OF_EXTENDED_ADDRESSES,"uint256[]":Se.ARRAY_OF_UINT256,"uint128[]":Se.ARRAY_OF_UINT128,"uint64[]":Se.ARRAY_OF_UINT64,"uint32[]":Se.ARRAY_OF_UINT32,"uint16[]":Se.ARRAY_OF_UINT16,"uint8[]":Se.ARRAY_OF_UINT8,"bytes[]":Se.ARRAY_OF_BYTES,"buffer[]":Se.ARRAY_OF_BUFFERS,"string[]":Se.ARRAY_OF_STRING,boolean:Se.BOOL},e6={[Se.ADDRESS]:"address",[Se.EXTENDED_ADDRESS]:"extendedAddress",[Se.BOOL]:"bool",[Se.BYTES]:"bytes",[Se.BYTES32]:"bytes32",[Se.BYTES4]:"bytes4",[Se.UINT256]:"uint256",[Se.UINT128]:"uint128",[Se.UINT64]:"uint64",[Se.UINT32]:"uint32",[Se.UINT16]:"uint16",[Se.UINT8]:"uint8",[Se.INT128]:"int128",[Se.INT64]:"int64",[Se.INT32]:"int32",[Se.INT16]:"int16",[Se.INT8]:"int8",[Se.STRING]:"string",[Se.ADDRESS_UINT256_TUPLE]:"tuple(address,uint256)[]",[Se.EXTENDED_ADDRESS_UINT256_TUPLE]:"tuple(extendedAddress,uint256)[]",[Se.SCHNORR_SIGNATURE]:"schnorrSignature",[Se.ARRAY_OF_ADDRESSES]:"address[]",[Se.ARRAY_OF_EXTENDED_ADDRESSES]:"extendedAddress[]",[Se.ARRAY_OF_UINT256]:"uint256[]",[Se.ARRAY_OF_UINT128]:"uint128[]",[Se.ARRAY_OF_UINT64]:"uint64[]",[Se.ARRAY_OF_UINT32]:"uint32[]",[Se.ARRAY_OF_UINT16]:"uint16[]",[Se.ARRAY_OF_UINT8]:"uint8[]",[Se.ARRAY_OF_BYTES]:"bytes[]",[Se.ARRAY_OF_STRING]:"string[]",[Se.ARRAY_OF_BUFFERS]:"buffer[]"};function t6(t){return Array.isArray(t)}function F0(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}function r6(t){return typeof t=="string"}function kc(t){if(r6(t)){const r=e6[t];if(!r)throw new Error(`Unknown ABI type: ${t}`);return r}if(F0(t))return`tuple(${Object.values(t).map(r=>kc(r)).join(",")})`;const e=t[0];return t.length===1&&e!==void 0?`${kc(e)}[]`:`tuple(${t.map(r=>kc(r)).join(",")})[]`}class z${decodeData(e,r){const n=new rf(e),i=[];for(const o of r)i.push(this.decodeSingleValue(n,o));return i}encodeSelector(e){const r=this.sha256(e);return Pt.from(r.subarray(0,4)).toString("hex")}numericSelectorToHex(e){return e.toString(16)}decodeSingleValue(e,r){if(t6(r)){const n=r[0];return r.length===1&&n!==void 0?this.decodeArray(e,n):this.decodeTuple(e,r)}if(F0(r))return this.decodeStruct(e,r);switch(r){case Se.UINT8:return e.readU8();case Se.UINT16:return e.readU16();case Se.UINT32:return e.readU32();case Se.BYTES4:return e.readBytes(4);case Se.BYTES32:return e.readBytes(32);case Se.BOOL:return e.readBoolean();case Se.ADDRESS:return e.readAddress();case Se.STRING:return e.readStringWithLength();case Se.UINT128:return e.readU128();case Se.UINT256:return e.readU256();case Se.INT8:return e.readI8();case Se.INT16:return e.readI16();case Se.INT32:return e.readI32();case Se.INT64:return e.readI64();case Se.INT128:return e.readI128();case Se.EXTENDED_ADDRESS:return e.readExtendedAddress();case Se.ADDRESS_UINT256_TUPLE:return e.readAddressValueTuple();case Se.EXTENDED_ADDRESS_UINT256_TUPLE:return e.readExtendedAddressMapU256();case Se.SCHNORR_SIGNATURE:return e.readSchnorrSignature();case Se.BYTES:return e.readBytesWithLength();case Se.UINT64:return e.readU64();case Se.ARRAY_OF_ADDRESSES:return e.readAddressArray();case Se.ARRAY_OF_EXTENDED_ADDRESSES:return e.readExtendedAddressArray();case Se.ARRAY_OF_UINT256:return e.readU256Array();case Se.ARRAY_OF_UINT128:return e.readU128Array();case Se.ARRAY_OF_UINT64:return e.readU64Array();case Se.ARRAY_OF_UINT32:return e.readU32Array();case Se.ARRAY_OF_UINT16:return e.readU16Array();case Se.ARRAY_OF_UINT8:return e.readU8Array();case Se.ARRAY_OF_STRING:return e.readStringArray();case Se.ARRAY_OF_BYTES:return e.readBytesArray();case Se.ARRAY_OF_BUFFERS:return e.readArrayOfBuffer();default:throw new Error(`Unsupported ABI type: ${r}`)}}decodeArray(e,r){const n=e.readU16(),i=[];for(let o=0;o<n;o++)i.push(this.decodeSingleValue(e,r));return i}decodeTuple(e,r){const n=e.readU16(),i=[];for(let o=0;o<n;o++){const s=[];for(const a of r)s.push(this.decodeSingleValue(e,a));i.push(s)}return i}decodeStruct(e,r){const n={};for(const[i,o]of Object.entries(r))n[i]=this.decodeSingleValue(e,o);return n}sha256(e){return new IB.sha256().update(e).digest()}}class K0{items;keys;constructor(e=[]){this.items=new Set,this.keys=[];for(const r of e)this.add(r)}get size(){return this.keys.length}add(e){const r=e.toBigInt();this.items.has(r)||(this.items.add(r),this.keys.push(e))}has(e){return this.items.has(e.toBigInt())}remove(e){const r=e.toBigInt();this.items.delete(r)&&(this.keys=this.keys.filter(n=>n.toBigInt()!==r))}clone(){return new K0(this.keys)}clear(){this.items.clear(),this.keys=[]}[Symbol.dispose](){this.clear()}combine(e){const r=this.clone();for(const n of e.keys)r.add(n);return r}*[Symbol.iterator](){yield*this.keys}}class j0{constructor(e){this.compareFn=e,this.map=new qs,this.#e=[]}map;#e;get size(){return this.map.size}static fromMap(e,r){const n=new j0(r);for(const[i,o]of e)n.set(i,o);return n}set(e,r){if(!this.map.has(e)){let n=0,i=this.#e.length;for(;n<i;){const o=Math.floor((n+i)/2);this.compareFn(this.#e[o],e)<0?n=o+1:i=o}this.#e.splice(n,0,e)}this.map.set(e,r)}get(e){return this.map.get(e)}*entries(){for(const e of this.#e)yield[e,this.map.get(e)]}*keys(){yield*this.#e}*values(){for(const e of this.#e){const r=this.map.get(e);if(r===void 0&&!this.map.has(e))throw new Error("Value not found");yield r}}has(e){return this.map.has(e)}delete(e){if(this.map.has(e)){this.map.delete(e);let r=0,n=this.#e.length-1;for(;r<=n;){const i=Math.floor((r+n)/2),o=this.compareFn(this.#e[i],e);if(o===0)return this.#e.splice(i,1),!0;o<0?r=i+1:n=i-1}}return!1}clear(){this.map.clear(),this.#e=[]}[Symbol.dispose](){this.clear()}forEach(e){for(const r of this.#e){const n=this.map.get(r);e(n,r,this)}}*[Symbol.iterator](){for(const e of this.#e)yield[e,this.map.get(e)]}}class V0{constructor(e){this.compareFn=e,this.elements=[]}elements;get size(){return this.elements.length}static fromSet(e,r){const n=new V0(r);for(const i of e)n.add(i);return n}add(e){const{found:r,index:n}=this.binarySearch(e);r||this.elements.splice(n,0,e)}delete(e){const{found:r,index:n}=this.binarySearch(e);return r?(this.elements.splice(n,1),!0):!1}has(e){return this.binarySearch(e).found}clear(){this.elements=[]}[Symbol.dispose](){this.clear()}forEach(e){for(const r of this.elements)e(r,this)}*values(){yield*this.elements}*[Symbol.iterator](){yield*this.elements}binarySearch(e){let r=0,n=this.elements.length;for(;r<n;){const i=Math.floor((r+n)/2),o=this.compareFn(this.elements[i],e);if(o===0)return{found:!0,index:i};o<0?r=i+1:n=i}return{found:!1,index:r}}}class M${constructor(e,r){this.type=e,this.data=r}}var n6=(t=>(t.mainnet="mainnet",t.testnet="testnet",t.signet="Signet",t))(n6||{}),i6=(t=>(t.ECDSA="ECDSA",t.BIP322="BIP322",t))(i6||{});class F$ extends N0{isInitialized=!1;constructor(){if(super(),!window)throw new Error("XverseSigner can only be used in a browser environment")}_p2tr;get p2tr(){if(!this._p2tr)throw new Error("P2TR address not set");return this._p2tr}_p2wpkh;get p2wpkh(){if(!this._p2wpkh)throw new Error("P2PKH address not set");return this._p2wpkh}_addresses;get addresses(){if(!this._addresses)throw new Error("Addresses not set");return this._addresses}_publicKey;get publicKey(){if(!this._publicKey)throw new Error("Public key not set");return this._publicKey}_network;get network(){if(!this._network)throw new Error("Network not set");return this._network}get BitcoinProvider(){const e=window.BitcoinProvider;if(!e)throw new Error("Xverse Wallet extension not found");return e}async init(){if(this.isInitialized)return;const e=await this.BitcoinProvider.request("wallet_connect",null);if("error"in e)throw new Error(e.error.message);const r=e.result.addresses.find(i=>i.purpose==="payment");if(!r)throw new Error("Payment address not found");const n=r.address.startsWith("tb")?De.testnet:r.address.startsWith("bc")?De.bitcoin:null;if(!n)throw new Error("Network not supported");this._network=n,this._publicKey=su(Ee(r.publicKey)),this._p2wpkh=ot.getP2WPKHAddress(this,this.network),this._p2tr=ot.getTaprootAddress(this,this.network),this._addresses=[this._p2wpkh,this._p2tr],this.isInitialized=!0}async signData(e,r,n){if(!this.isInitialized)throw new Error("UnisatSigner not initialized");const i=await this.BitcoinProvider.request("signMessage",{address:r,message:new TextDecoder().decode(e),protocol:n});if("error"in i)throw new Error(i.error.message);const o=i.result;if(!o.signature)throw new Error("Signature not found");return Ee(o.signature)}getPublicKey(){if(!this.isInitialized)throw new Error("UnisatSigner not initialized");return this.publicKey}sign(e,r){throw new Error("Not implemented: sign")}signSchnorr(e){throw new Error("Not implemented: signSchnorr")}verify(e,r){throw new Error("Not implemented: verify")}async signTaprootInput(e,r,n){const i=e.data.inputs[r];if(i.tapKeySig||i.finalScriptSig||Array.isArray(i.partialSig)&&i.partialSig.length&&this.hasAlreadyPartialSig(i.partialSig)||Array.isArray(i.tapScriptSig)&&i.tapScriptSig.length&&this.hasAlreadySignedTapScriptSig(i.tapScriptSig))return;const o=await this.signAllTweaked(e,n,!1);this.combine(e,o,r)}async signInput(e,r,n){const i=e.data.inputs[r];if(i.tapKeySig||i.finalScriptSig||Array.isArray(i.partialSig)&&i.partialSig.length&&this.hasAlreadyPartialSig(i.partialSig)||Array.isArray(i.tapScriptSig)&&i.tapScriptSig.length&&this.hasAlreadySignedTapScriptSig(i.tapScriptSig))return;const o=await this.signAllTweaked(e,n,!0);this.combine(e,o,r)}async multiSignPsbt(e){const r=[],n=[];for(const a of e){const l=a.toBase64();r.push(l);const f=a.data.inputs.map((u,p)=>{let y=!1,w=!1;if(R0(u)){if(u.tapLeafScript&&u.tapLeafScript.length>0){for(const A of u.tapLeafScript)if(C0(this.publicKey,A.script)){y=!0,w=!1;break}}if(!y&&u.tapInternalKey){const A=u.tapInternalKey,S=nt(this.publicKey);_e(A,S)&&(y=!0,w=!0)}}else $0(u,this.publicKey)&&(y=!0,w=!1);return y?{index:p,publicKey:ve(this.publicKey),disableTweakSigner:!w}:null}).filter(u=>u!==null);n.push({autoFinalized:!1,toSignInputs:f})}const i={[this.p2wpkh]:n[0].toSignInputs?.map(a=>a.index)||[]},o=await this.BitcoinProvider.request("signPsbt",{psbt:r[0],signInputs:i});if("error"in o)throw new Error(o.error.message);const s=fr.fromBase64(o.result.psbt);e[0].combine(s)}hasAlreadySignedTapScriptSig(e){for(let r=0;r<e.length;r++){const n=e[r],i=new Uint8Array(n.pubkey);if(_e(i,this.publicKey)&&n.signature)return!0}return!1}hasAlreadyPartialSig(e){for(let r=0;r<e.length;r++){const n=e[r],i=new Uint8Array(n.pubkey);if(_e(i,this.publicKey)&&n.signature)return!0}return!1}combine(e,r,n){const i=r.data.inputs[n],o=e.data.inputs[n];if(i.partialSig&&e.updateInput(n,{partialSig:i.partialSig}),i.tapKeySig&&!o.tapKeySig&&e.updateInput(n,{tapKeySig:i.tapKeySig}),i.tapScriptSig?.length){const s=o.tapScriptSig;if(s){const a=this.getNonDuplicateScriptSig(s,i.tapScriptSig);a.length&&e.updateInput(n,{tapScriptSig:a})}else e.updateInput(n,{tapScriptSig:i.tapScriptSig})}}async signAllTweaked(e,r,n=!1){const i=ve(this.publicKey),o={toSignInputs:e.data.inputs.map((f,u)=>[{index:u,publicKey:i,sighashTypes:r,disableTweakSigner:n}]).flat()},s=e.toBase64(),a={[this.p2wpkh]:o.toSignInputs?.map(f=>f.index)||[]},l=await this.BitcoinProvider.request("signPsbt",{psbt:s,signInputs:a});if("error"in l)throw new Error(l.error.message);return fr.fromBase64(l.result.psbt)}getNonDuplicateScriptSig(e,r){const n=[];for(let i=0;i<r.length;i++){const o=r[i];e.find(s=>_e(s.pubkey,o.pubkey))||n.push(o)}return n}}class kl{static INITIAL_CAPACITY=16;static LOAD_FACTOR=.75;#e;#s;deleted;capacity;constructor(){this.capacity=kl.INITIAL_CAPACITY,this.#e=new Array(this.capacity),this.#s=new Array(this.capacity),this.deleted=new Array(this.capacity).fill(!1)}_size=0;get size(){return this._size}set(e,r){let n=!0;const i=this.findInsertIndex(e);return(this.#e[i]===void 0||this.deleted[i])&&(this._size++,n=!1),this.#e[i]=e,this.#s[i]=r,this.deleted[i]=!1,this._size>this.capacity*kl.LOAD_FACTOR&&this.resize(),n}get(e){const r=this.findIndex(e);return r===-1?void 0:this.#s[r]}has(e){return this.findIndex(e)!==-1}indexOf(e){return this.findIndex(e)}delete(e){const r=this.findIndex(e);return r===-1?!1:(this.#e[r]=void 0,this.#s[r]=void 0,this.deleted[r]=!0,this._size--,!0)}clear(){this.#e=new Array(this.capacity),this.#s=new Array(this.capacity),this.deleted=new Array(this.capacity).fill(!1),this._size=0}[Symbol.dispose](){this.clear()}*entries(){for(let e=0;e<this.capacity;e++)this.#e[e]!==void 0&&!this.deleted[e]&&(yield[this.#e[e],this.#s[e]])}*keys(){for(let e=0;e<this.capacity;e++)this.#e[e]!==void 0&&!this.deleted[e]&&(yield this.#e[e])}*values(){for(let e=0;e<this.capacity;e++)this.#e[e]!==void 0&&!this.deleted[e]&&(yield this.#s[e])}*[Symbol.iterator](){yield*this.entries()}hashBigInt(e){if(e>=-2147483648n&&e<=2147483647n)return Number(e)|0;let r=2166136261,n=e<0n?-e:e;for(;n>0n;){const i=Number(n&0xffffffffn);r^=i,r=Math.imul(r,16777619),n=n>>32n}return e<0n&&(r^=2147483648,r=Math.imul(r,16777619)),Math.abs(r)}hash(e){let r=0;switch(typeof e){case"number":if(e!==e)return 9221120237041091e3;if(!isFinite(e))return e>0?9218868437227405e3:0xfff0000000000000;r=e|0;break;case"string":r=2166136261;for(let n=0;n<e.length;n++)r^=e.charCodeAt(n),r=Math.imul(r,16777619);break;case"boolean":r=e?1231:1237;break;case"symbol":{const n=e.description||"";r=this.hash(n);break}case"bigint":r=this.hashBigInt(e);break;case"undefined":r=0;break;case"object":if(e===null)r=0;else if(e instanceof Date)r=e.getTime()|0;else if(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)r=this.hashBuffer(e);else if(Array.isArray(e)){r=1;for(const n of e)r=Math.imul(r,31)+this.hash(n)}else throw new Error("Raw object not supported.");break;case"function":r=this.hash(e.toString());break}return Math.abs(r)%this.capacity}hashBuffer(e){let r;if(e instanceof ArrayBuffer)r=new Uint8Array(e);else if(ArrayBuffer.isView(e))r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);else return 0;let n=2166136261;for(let i=0;i<Math.min(r.length,100);i++)n^=r[i],n=Math.imul(n,16777619);return n}equals(e,r){return e===r||typeof e=="number"&&typeof r=="number"&&e!==e&&r!==r?!0:(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)&&(ArrayBuffer.isView(r)||r instanceof ArrayBuffer)?this.buffersEqual(e,r):!1}buffersEqual(e,r){const n=this.getBytes(e),i=this.getBytes(r);if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o]!==i[o])return!1;return!0}getBytes(e){return e instanceof ArrayBuffer?new Uint8Array(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0)}findIndex(e){let r=this.hash(e);for(;this.#e[r]!==void 0||this.deleted[r];){if(this.#e[r]!==void 0&&this.equals(this.#e[r],e))return r;r=(r+1)%this.capacity}return-1}findInsertIndex(e){let r=this.hash(e);for(;this.#e[r]!==void 0&&!this.deleted[r];){if(this.equals(this.#e[r],e))return r;r=(r+1)%this.capacity}return r}resize(){const e=this.#e,r=this.#s;this.capacity*=2,this.#e=new Array(this.capacity),this.#s=new Array(this.capacity),this.deleted=new Array(this.capacity).fill(!1),this._size=0;for(let n=0;n<e.length;n++)e[n]!==void 0&&!this.deleted[n]&&this.set(e[n],r[n])}}ct.MLDSASecurityLevel,ct.QuantumBIP32Factory,ct.QuantumDerivationPath;ct.MLDSASecurityLevel;ct.QuantumBIP32Factory;ct.QuantumDerivationPath;export{$t as x};
